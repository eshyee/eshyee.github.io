<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>20230514周总结</title>
    <url>/2023/05/14/20230514%E5%91%A8%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>🈚</p>
]]></content>
      <categories>
        <category>总结</category>
      </categories>
      <tags>
        <tag>周总结</tag>
      </tags>
  </entry>
  <entry>
    <title>需求分析</title>
    <url>/2020/04/03/3-3%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<h2 id="3-3需求分析案例"><a href="#3-3需求分析案例" class="headerlink" title="3-3需求分析案例"></a>3-3需求分析案例</h2><p>“Android点餐系统”项目案例需求获取资料介绍如下：</p>
<h3 id="1-目标和范围"><a href="#1-目标和范围" class="headerlink" title="(1)目标和范围"></a>(1)目标和范围</h3><p>本软件主要作用是为点餐者提供一套可以在移动设备(手机、平板)上运行的点餐软件。 系统分为前台和后台,前台是点餐者使用的，点餐者可以在移动设备上查看餐馆所有的菜目、价格、简单的菜品介绍以及餐馆的特色菜介绍，同时点餐者还可以查看、取消自己已经挑选的菜品，最后上传订单。后台是管理员使用的，管理员可以在后进行订单管理、用户管理、菜谱管理等。</p>
<h3 id="2-系统角色和职责"><a href="#2-系统角色和职责" class="headerlink" title="(2)系统角色和职责"></a>(2)系统角色和职责</h3><p>系统的使用人群包括两类管理员:系统的维护，订单管理、菜品的增删。</p>
<p>普通用户:注册账号，点餐、座位预订。</p>
<h3 id="3-系统处理功能要求"><a href="#3-系统处理功能要求" class="headerlink" title="(3)系统处理功能要求"></a>(3)系统处理功能要求</h3><p>查询菜品<br>设置菜品<br>顾客下单<br>订单处理<br>数据处理</p>
<h3 id="4-系统其他要求"><a href="#4-系统其他要求" class="headerlink" title="(4)系统其他要求"></a>(4)系统其他要求</h3><p>本系统客户端要求符合大众操作习惯，与网上其他的Android系统App操作方式保持基本一致。餐馆要求每笔订单交易误差不得超过工角，每天交易额的误差不得超过100元。5年内价位在500元以上的Android手机都可以流畅运行该系统。</p>
<h2 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h2><p>工作的输入是需求定义阶段产生的业务事件列表和报表列表，输出的是领域模型和用例模型。</p>
<p>针对每个业务事件进行业务流程分析、业务实体分析和用例分析;</p>
<p>针对每类报表进行业务实体分析和用例分析。</p>
<h3 id="业务流程分析"><a href="#业务流程分析" class="headerlink" title="业务流程分析"></a>业务流程分析</h3><p>在分析过程中，要注意抓住核心业务和主要活动点、部门内以及部门之间的衔接，工作中的烦琐及反复的环节，成本高、效率低、时间长的环节以及任务转手次数较多的环节。</p>
<p>“Android点餐系统”中的主要业务就是点餐，我们要围绕点餐的主业务展开分析。</p>
<h4 id="业务流程分析的过程中的三个关键的要点"><a href="#业务流程分析的过程中的三个关键的要点" class="headerlink" title="业务流程分析的过程中的三个关键的要点"></a>业务流程分析的过程中的三个关键的要点</h4><p>一是理解流程的层次性，其中包含三大层次，有组织级，部门级<br>岗位级;</p>
<p>二是了解流程的类型，包括生产性流程，管理性流程和支持性流<br>程;</p>
<p>三是掌握以业务事件识别、寻找流程的技巧。</p>
<h4 id="产物"><a href="#产物" class="headerlink" title="产物"></a>产物</h4><p>跨职责流程图<br>活动图<br>数据流图</p>
<h4 id="基于Android平台的点餐系统的总体流程包括的步骤有"><a href="#基于Android平台的点餐系统的总体流程包括的步骤有" class="headerlink" title="基于Android平台的点餐系统的总体流程包括的步骤有"></a>基于Android平台的点餐系统的总体流程包括的步骤有</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">(1)顾客在智能手机上登录点餐系统客户端后，自动进入</span><br><span class="line">菜谱界面，查看菜谱;</span><br><span class="line">(2)顾客选择菜品进行下单;</span><br><span class="line">(3)顾客选择菜品数量，若需在餐厅用餐还需选择座位号;</span><br><span class="line">(4)选择完成并确定后，提交订单;</span><br><span class="line">(5)订单提交后，订单数据会上传到服务器;</span><br><span class="line">(6)订单提交后，顾客可以在客户端查看自己的订单情况;</span><br><span class="line">(7)在管理员未确认订单之前，顾客可以对订单进行修改或取消操作;</span><br><span class="line">(8)管理员登录点餐系统服务器端，对用户订单进行确认;</span><br></pre></td></tr></table></figure>

<h4 id="跨职责流程图的应用"><a href="#跨职责流程图的应用" class="headerlink" title="跨职责流程图的应用"></a>跨职责流程图的应用</h4><p>跨指责流程图绘制要点是在进行业务流程分析时，采用的关键入手点为部门级的业务流程，也就是从业务事件出发，分析该业务事件会触发的一系列活动。要真正保障绘制出来的跨职责流程图是真实、有效的，就必须强化用户的参与。</p>
<p>我们应先找到业务事件的负责人，然后通过设问的方式，让他描述响应该业务事件所进行的活动,说明活动的执行岗位以及它们之间的关系、数据传递。</p>
<p>(三)活动图<br>活动图是一种表述过程机理、业务过程以及工作流的技术。它可以用来对业务过程、工作流建模，也可以对用例实现甚至是程序实现来建模。<br>活动图的主要元素包含<strong>初始节点</strong>和<strong>活动终点</strong>、<strong>活动节点转换</strong>、<strong>分支与监护条件</strong>、<strong>分岔</strong>与<strong>汇合</strong>等。</p>
<h4 id="数据流程图"><a href="#数据流程图" class="headerlink" title="数据流程图"></a>数据流程图</h4><p>点餐系统由客户端和服务器端两部分组成，客户端主要负责点菜，服务器端负责信息管理。</p>
<h5 id="客户端的基本流程"><a href="#客户端的基本流程" class="headerlink" title="客户端的基本流程"></a>客户端的基本流程</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">(1)用户输入正确的登录信息进入系统，若登录信息不对，系统提示重新输入登录系统，直到用户成功登录系统，新用户要先进行注册并注册成功才可以登录系统。</span><br><span class="line">(2)用户成功登录系统后，可先查看菜品信息，选择菜品及数量，若需在餐馆用餐还需选择座位，完成后进行下单操作。</span><br><span class="line">(3)用户可以查看自己的订单，在订单未确定的情况下，可以修改或取消订单。</span><br></pre></td></tr></table></figure>

<h5 id="服务器端的基本流程"><a href="#服务器端的基本流程" class="headerlink" title="服务器端的基本流程"></a>服务器端的基本流程</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">(1)管理员输入正确的登录信息进入系统，若登录信息不对，系统会提示重新输入登录信息，直到管理员成功登录系统。</span><br><span class="line">(2)管理员成功进入系统后，可进行各类信息的管理，如菜品信息管理、用户信息管理、订单管理等，其实就是对上述信息进行添加、删除及修改操作。</span><br></pre></td></tr></table></figure>

<h3 id="业务实体分析"><a href="#业务实体分析" class="headerlink" title="业务实体分析"></a>业务实体分析</h3><p>要了解这个问题域中有哪些业务实体，它们之间存在什么样的逻辑关系、数量关系，以及有什么相应的结构规则。</p>
<h4 id="1-业务实体分析任务概述"><a href="#1-业务实体分析任务概述" class="headerlink" title="1.业务实体分析任务概述"></a>1.业务实体分析任务概述</h4><p>“自底向上”</p>
<p>识别出业务实体<br>确定实体间关系<br>定义实体关健属性</p>
<p>业务实体分析的产物有两种可选的模型，包括类图和E&#x2F;R模型也叫实体关系图。</p>
<h4 id="2-类图"><a href="#2-类图" class="headerlink" title="2.类图"></a>2.类图</h4><h5 id="根据边界类、控制类、实体类帮助分析系统中的类"><a href="#根据边界类、控制类、实体类帮助分析系统中的类" class="headerlink" title="根据边界类、控制类、实体类帮助分析系统中的类"></a>根据边界类、控制类、实体类帮助分析系统中的类</h5><p>(1)领域建模方法</p>
<p>领域建模时，其工作主要就是识别标识类、明确类之间的逻辑关系和数量关系以及添加重要的结构规则三个方面。</p>
<p>(2)建立类之间的关联</p>
<p>(3)添加类的重要属性</p>
<h5 id="分析模型中有3种十分有用的构造型即实体类、控制类和边界类。"><a href="#分析模型中有3种十分有用的构造型即实体类、控制类和边界类。" class="headerlink" title="分析模型中有3种十分有用的构造型即实体类、控制类和边界类。"></a>分析模型中有3种十分有用的构造型即实体类、控制类和边界类。</h5><p>实体类:即实体对象的抽象，通常来自域模型也就是现实世界，用来描述具体的实体，通常映射到数据库表格与文件中;</p>
<p>控制类:即控制对象的抽象，主要用来体现应用程序的执行逻辑，将其抽象出来，可以使得变化不影响用户界面和数据库中的表;</p>
<p>边界类:即边界对象的抽象，通常是用来完成参与者(用户、外部系统)与系统之间交互的对象，例如From、对话框、菜单、接口等。</p>
<h4 id="3-E-x2F-R图应用基础"><a href="#3-E-x2F-R图应用基础" class="headerlink" title="3.E&#x2F;R图应用基础"></a>3.E&#x2F;R图应用基础</h4><p>数据建模过程的优势体现在能够更好地与后续的数据库设计<br>结合;</p>
<p>缺点是语义相对于类图来说更弱一些，同时对面向对象开发的指导作用相对差- - .些。</p>
<p>概念模型是需求人员的视图，等价于现在出镜率很高的领域模型;</p>
<p>逻辑模型是开发人员(包括设计人员)的视图，它约等于面向对象分析与设计方法中提到的“分析模型”。</p>
<h5 id="概念模型与逻辑模型具体区别在于两个方面"><a href="#概念模型与逻辑模型具体区别在于两个方面" class="headerlink" title="概念模型与逻辑模型具体区别在于两个方面"></a>概念模型与逻辑模型具体区别在于两个方面</h5><p>完整性:逻辑模型在完整性上要比概念模型更胜筹，通过在需求细化、设计的阶段会对类的属性进行细化，会补充-些新的类;</p>
<p>加工方式:概念模型的原则是忠于问题域，而逻辑模型则会从实现的便利性和需要的角度进行细化，具体来说可能会对一些类进行分拆、合并。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>小白</tag>
      </tags>
  </entry>
  <entry>
    <title>3D-VIRTUS Equilibrium condition solver of radio-frequency magnetized plasma discharges for space applications</title>
    <url>/2023/06/07/3D-VIRTUS-Equilibrium-condition-solver-of-radio-frequency-magnetized-plasma-discharges-for-space-applications/</url>
    <content><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>我们介绍了 3D-VIRTUS（3 维高级流体漂移扩散等离子体求解器），这是一种用于评估螺旋等离子体源平衡条件的数值工具，由<strong>电磁模块</strong>和<strong>流体模块</strong>组成。第一个评估通过驱动放电的天线沉积到等离子体中的功率，它基于固体数值工具（即 ADAMANT）。第二个模块使用功率沉积通过流体方法解决带电和中性物质的宏观传输，并假设 DriftDiffusion 近似有效。连续性、动量、能量和泊松方程组通过有限体积法进行数值求解，并在 OpenFOAM 中实现。迭代这两个模块，直到获得收敛的解决方案。这种方法允许对 Helicon 源中处于平衡状态的局部等离子体参数（例如，等离子体密度）进行自洽评估，该参数具有（i）任意形状的等离子体区域和天线，（ii）由电磁铁产生的真实静磁场或永久磁铁。 FLUID 模块的数值精度已被评估为时间和空间离散化的函数。 FLUID 模块和 3D-VIRTUS 代码已经针对其他成熟的数值方法和实验测量进行了独立验证。最后，3D-VIRTUS 已被用于研究用于空间推进应用的 Helicon 等离子体放电，静磁场值从 0 G 到 750 G。</p>
<h2 id="模拟"><a href="#模拟" class="headerlink" title="模拟"></a>模拟</h2><h3 id="流体"><a href="#流体" class="headerlink" title="流体"></a>流体</h3><p>流体方法假定粒子分布函数，并根据连续性、动量和能量方程 [27] 来描述等离子体放电。如果未计算分布函数，则流体模型无法解释非局部动力学 [28]。</p>
<p>因此，这种方法不适用于低压放电 (≤1mTorr)，在这种情况下，由于碰撞率低，非局部效应往往很重要。尽管有此限制，流体模型已被广泛使用，因为它们在计算速度方面相对于其他方法具有优势 [29]。此外，可以轻松处理大量物种，从而可以研究以众多反应为特征的系统 [28]。</p>
<h3 id="动力学"><a href="#动力学" class="headerlink" title="动力学"></a>动力学</h3><p>动力学方法基于麦克斯韦方程的解以及积分微分玻尔兹曼方程 [27]，并允许唯一地确定自洽粒子分布函数。</p>
<p>从后者的知识来看，粒子密度、平均速度等宏观量都是通过对分布函数求平均来确定的。由于它复杂且计算量大，因此动力学方法主要应用于简化假设，例如单维模拟 [30]。</p>
<h3 id="具有蒙特卡洛碰撞的Paticle-In-Cell-PIC-MCC"><a href="#具有蒙特卡洛碰撞的Paticle-In-Cell-PIC-MCC" class="headerlink" title="具有蒙特卡洛碰撞的Paticle-In-Cell (PIC-MCC)"></a>具有蒙特卡洛碰撞的Paticle-In-Cell (PIC-MCC)</h3><p>在 PIC-MCC 方法中，计算粒子（即物理带电粒子云）的轨迹在 EM 场的影响下及时整合 [31]。</p>
<p>特别是，控制方程用很少的近似值求解，允许对局部和非局部效应进行精确建模，进而对粒子分布函数进行建模 [28]。这种方法虽然非常准确，但计算量很大，对于高密度 (≥ 10^19 m^−3) 等离子体尤其如此；计算成本实际上与模拟的粒子数量有关。</p>
<p>尽管如此，已经开发出各种技术来加速 PIC-MCC 模拟，即隐式移动器、更长的离子时间步长、更轻的质量离子、电子和离子的不同权重、不均匀的初始密度分布、低和高的不同权重能量粒子和代码并行化[28]。</p>
<p>尽管结合使用这些技术可以大大减少仿真时间，但 PIC-MCC 代码通常仍然比流体代码慢。因此，PIC 模拟非常适合非局部效应非常重要且粒子密度低 (≤ 10^17 m^−3) [28] 的低压排放。</p>
<h3 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h3><p>为了保持 PIC-MCC 和动力学模拟的准确性，同时减少计算负担，上述方法已结合在混合求解器中 [30,32]。根据要建模的物理场，可以采用各种策略。离子可以模拟为流体，而电子在 PIC-MCC 方案中进行处理 [33]。或者，只有高能电子可以使用 PIC-MCC 策略进行模拟，而离子和低能电子被视为流体 [34]。混合方法的主要限制是生成的算法可能非常繁琐 [28]。</p>
<h2 id="3D-VIRTUS的主要特点："><a href="#3D-VIRTUS的主要特点：" class="headerlink" title="3D-VIRTUS的主要特点："></a>3D-VIRTUS的主要特点：</h2><p>（i）处理复杂形状的 Helicon 源的能力</p>
<p>(ii) 实际射频天线的建模及其电流分布</p>
<p>(iii) 在流体问题的解决方案中可以很容易地从 1D 重新配置到3D，这取决于手头问题的几何复杂性和所需的精度</p>
]]></content>
  </entry>
  <entry>
    <title>计算机操作系统</title>
    <url>/2021/03/12/2021-03-21(1)/</url>
    <content><![CDATA[<p>进程–&gt;处理机</p>
<p>操作系统小TIPS</p>
<span id="more"></span>


<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><h3 id="程序的并发执行"><a href="#程序的并发执行" class="headerlink" title="程序的并发执行"></a>程序的并发执行</h3><p>程序是描述计算机所要完成的具有特定功能的，并在时间上按严格次序前后相继的计算机操作序列集合(一个静态的概念)</p>
<p>程序顺序执行的特点：</p>
<ol>
<li>顺序性</li>
<li>封闭性</li>
<li>可再现性</li>
</ol>
<p>程序在执行时应考虑的环境</p>
<ol>
<li>独立性</li>
<li>随机性</li>
<li>资源共享性</li>
</ol>
<h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><p>并发执行的程序在执行过程中分配和管理资源的基本单位</p>
<h4 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h4><ol>
<li>动态概念</li>
<li>并发特征(程序没有)</li>
<li>竞争计算机系统资源的基本单位</li>
<li>不同的进程可以包含同一个程序</li>
</ol>
<h4 id="进程的组成："><a href="#进程的组成：" class="headerlink" title="进程的组成："></a>进程的组成：</h4><h5 id="进程控制块PCB："><a href="#进程控制块PCB：" class="headerlink" title="进程控制块PCB："></a>进程控制块PCB：</h5><table>
<thead>
<tr>
<th>信息</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>状态</td>
<td>说明进程当前的状态</td>
</tr>
<tr>
<td>进程标识符</td>
<td>标明系统中各个进程</td>
</tr>
<tr>
<td>位置信息</td>
<td>指明程序及数据在主存或外存的位置</td>
</tr>
<tr>
<td>控制信息</td>
<td>参数、信号量、消息等</td>
</tr>
<tr>
<td>队列指针</td>
<td>连接统一状态的进程</td>
</tr>
<tr>
<td>优先级</td>
<td>进程调度的依据</td>
</tr>
<tr>
<td>现场保护区</td>
<td>将处理机的现场保护到该区域</td>
</tr>
<tr>
<td>其他</td>
<td></td>
</tr>
</tbody></table>
<h5 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h5><h5 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h5><h4 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h4><p>运行态、就绪态、阻塞态&#x2F;等待态、新建态、退出态</p>
<h4 id="进程切换"><a href="#进程切换" class="headerlink" title="进程切换"></a>进程切换</h4><p>切换的时机</p>
<ol>
<li>时钟中断</li>
<li>I&#x2F;O中断</li>
<li>内存失效</li>
<li>遇到陷阱</li>
<li>系统调用</li>
</ol>
<p>空-&gt;创建：新的批处理作业、交互登录、为提供服务而由操作系统创建、由现有进程派生</p>
<p>新建-&gt;就绪态：操作系统做好准备再接纳一批新进程时</p>
<p>就绪-&gt;运行态：需要选择一个新进程时</p>
<p>运行-&gt;就绪：正在运行的进程达到“允许不中断执行”的最大时间段、被优先级更高的进程抢占、进程自愿释放处理器(周期性的进程)</p>
<p>运行-&gt;阻塞：对于进程请求的服务，操作系统无法立即予以服务、请求一个无法得到的资源、需要进行初始化的时候、进程通信时，一个进程等待另一个进程的信息。从磁盘读数据时（可能）</p>
<p>阻塞-&gt;就绪：等待的时间发生时</p>
<p>一个读磁盘操作完成以后，操作系统会修改进程状态为就绪态</p>
<h4 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h4><ol>
<li>由系统程序模块统一创建</li>
<li>有父进程创建</li>
</ol>
<p>用户登录成功后需要创建新进程<br>启动程序执行创建新进程</p>
<hr>
<p>设备分配是通过在系统中设置相应的数据结构实现的，不必创建新进程。</p>
<h4 id="进程的撤销"><a href="#进程的撤销" class="headerlink" title="进程的撤销"></a>进程的撤销</h4><ol>
<li>该进程已完成所要求的功能而正常终止</li>
<li>由于某种错误导致非正常终止</li>
<li>祖先进程要求撤销某个子进程</li>
</ol>
<h4 id="进程的通信"><a href="#进程的通信" class="headerlink" title="进程的通信"></a>进程的通信</h4><h5 id="主从式"><a href="#主从式" class="headerlink" title="主从式"></a>主从式</h5><ol>
<li>主进程可自由使用从进程的资源或数据</li>
<li>从进程的动作受主进程的控制</li>
<li>主进程和从进程的关系是固定的</li>
</ol>
<h5 id="会话式"><a href="#会话式" class="headerlink" title="会话式"></a>会话式</h5><ol>
<li>使用进程在服务进程所提供的服务之前，必须得到许可</li>
<li>服务进程所提供的服务的控制由自身完成</li>
<li>使用进程和服务进程在通信时有固定的链接关系</li>
</ol>
<h5 id="消息或邮箱机制"><a href="#消息或邮箱机制" class="headerlink" title="消息或邮箱机制"></a>消息或邮箱机制</h5><ol>
<li>只要存在空缓冲区或邮箱，发送进程就可以发送消息</li>
<li>发送进程和接受进程无直接连接关系</li>
<li>两进程之间存在缓冲区或邮箱</li>
</ol>
<h5 id="共享存储区方式"><a href="#共享存储区方式" class="headerlink" title="共享存储区方式"></a>共享存储区方式</h5><p>不要求数据移动</p>
<h5 id="管道通信"><a href="#管道通信" class="headerlink" title="管道通信"></a>管道通信</h5><p>类似于半双工<br>大小为内存上的一页</p>
<h3 id="临界区"><a href="#临界区" class="headerlink" title="临界区"></a>临界区</h3><p>不允许多个并发进程交叉执行的一段程序<br>禁止两个进程同时进入临界区的准则：</p>
<ol>
<li>空闲让进</li>
<li>忙则等待</li>
<li>有限等待</li>
<li>让权等待</li>
</ol>
<h3 id="实现互斥"><a href="#实现互斥" class="headerlink" title="实现互斥"></a>实现互斥</h3><h4 id="软件方法"><a href="#软件方法" class="headerlink" title="软件方法"></a>软件方法</h4><ol>
<li>单标志法<br><strong>违背空闲让进</strong></li>
<li>双标志法先检查<br><strong>违背忙则等待</strong></li>
<li>双标志法后检查<br>导致互相谦让，谁也进不了临界区<br>最终<strong>饥饿</strong></li>
<li>Peterson算法<br>代码语句中设置了<strong>turn</strong><br>无法实现让权等待</li>
</ol>
<h4 id="硬件实现方法"><a href="#硬件实现方法" class="headerlink" title="硬件实现方法"></a>硬件实现方法</h4><ol>
<li>中断屏蔽法<br>限制了处理机交替执行程序的能力</li>
<li>硬件指令法<br>TestAndSet指令（原子操作）（不会主动放弃CPU，完成时会唤醒处于就绪态的进程，在开中断下运行）、Swap指令<br><strong>硬件方法不能实现让权等待</strong></li>
</ol>
<h4 id="信号量"><a href="#信号量" class="headerlink" title="信号量"></a>信号量</h4><p>条件变量与信号量的比较</p>
<ul>
<li>相同点<br>条件变量的wait&#x2F;signal操作类似于信号量的p&#x2F;v操作，可实现进程的阻塞&#x2F;唤醒</li>
<li>不同点<br>条件变量是没有值的，仅实现了“排队等待”功能；而信号量是“有值”的，信号量的值反应了剩余资源数，而在管程中，剩余资源数用共享数据结构记录。</li>
</ul>
<h4 id="管程"><a href="#管程" class="headerlink" title="管程"></a>管程</h4><p>代表共享资源的数据结构，以及由对该共享资源数据结构实施操作的一组过程所组成的资源管理程序。</p>
<p>实现共享资源封装<br>每次只允许一个进程进入管程</p>
<h4 id="经典同步问题"><a href="#经典同步问题" class="headerlink" title="经典同步问题"></a>经典同步问题</h4><h5 id="生产者消费者问题"><a href="#生产者消费者问题" class="headerlink" title="生产者消费者问题"></a>生产者消费者问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore mutex=<span class="number">1</span>;	<span class="comment">//临界区互斥信号量</span></span><br><span class="line">semaphore empty=n;	<span class="comment">//空闲缓冲区</span></span><br><span class="line">semaphore full=<span class="number">0</span>;		<span class="comment">//缓冲区初始化为空</span></span><br><span class="line">producer()&#123;			<span class="comment">//生产者进程</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">produce an item in next;	<span class="comment">//生产数据</span></span><br><span class="line">P(empty);				<span class="comment">//获取空缓冲单元</span></span><br><span class="line">P(mutex);				<span class="comment">//进入临界区</span></span><br><span class="line">Add next to buffer;	<span class="comment">//加入数据</span></span><br><span class="line">V(mutex);				<span class="comment">//离开临界区，释放互斥信号量</span></span><br><span class="line">V(full);				<span class="comment">//满缓冲区加1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">consumer()&#123;			<span class="comment">//消费者进程</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;				</span><br><span class="line">P(full);				<span class="comment">//获取满缓冲单元</span></span><br><span class="line">P(mutex);				<span class="comment">//进入临界区</span></span><br><span class="line">Remove an item from buffer;</span><br><span class="line">V(mutex);				<span class="comment">//离开缓冲区</span></span><br><span class="line">V(empty);				<span class="comment">//空缓冲区加1</span></span><br><span class="line">Consume the item;		<span class="comment">//消费</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="读者-写者问题"><a href="#读者-写者问题" class="headerlink" title="读者-写者问题"></a>读者-写者问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> count=<span class="number">0</span>;			<span class="comment">//用于记录当前的读者数量</span></span><br><span class="line"></span><br><span class="line">semaphore mutex=<span class="number">1</span>;	<span class="comment">//用于保护更新count变量时的互斥</span></span><br><span class="line">semaphore rw=<span class="number">1</span>;		<span class="comment">//用于保证读者和写者互斥地访问文件</span></span><br><span class="line">semaphore w=<span class="number">1</span>;		<span class="comment">//用于实现写优先</span></span><br><span class="line"></span><br><span class="line">writer() &#123;			<span class="comment">//写者进程</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">P(w);</span><br><span class="line">P(rw) ;				<span class="comment">//互斥访问共享文件</span></span><br><span class="line"></span><br><span class="line">writing;				<span class="comment">//写入</span></span><br><span class="line"></span><br><span class="line">V(rW);				<span class="comment">//释放共享文件</span></span><br><span class="line">V(w);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reader() &#123;			<span class="comment">//读者进程</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">P(w)</span><br><span class="line">P (mutex) ;			<span class="comment">//互斥访问count变量</span></span><br><span class="line"><span class="keyword">if</span> (count==<span class="number">0</span>)			<span class="comment">//当第一个读进程读共享文件时</span></span><br><span class="line">P(rw);				<span class="comment">//阻止写进程写</span></span><br><span class="line">count++;				<span class="comment">//读者计数器加1</span></span><br><span class="line">V (mutex) ;			<span class="comment">//释放互斥变量count</span></span><br><span class="line">V(w);</span><br><span class="line">reading;				<span class="comment">//读取</span></span><br><span class="line">P (mutex) ;			<span class="comment">//互斥访问count变量</span></span><br><span class="line">count--;				<span class="comment">//读者计数器减1</span></span><br><span class="line"><span class="keyword">if</span> (count==<span class="number">0</span>)			<span class="comment">//当最后一个读进程读完共享文件</span></span><br><span class="line">V(rw) ;				<span class="comment">//允许写进程写</span></span><br><span class="line">V (mutex) ;			<span class="comment">//释放互斥变量count</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="哲学家问题"><a href="#哲学家问题" class="headerlink" title="哲学家问题"></a>哲学家问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;; <span class="comment">//初始化信号量</span></span><br><span class="line">semaphore mutex=<span class="number">1</span>;			<span class="comment">//设置取筷子的信号量</span></span><br><span class="line">Pi() &#123;						<span class="comment">//i号哲学家的进程</span></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">P (mutex) ;					<span class="comment">//在取筷子前获得互斥量</span></span><br><span class="line">P (chopstick[i]) ;			<span class="comment">//取左边筷子</span></span><br><span class="line">P (chopstick[(i+<span class="number">1</span>)%<span class="number">5</span>]) ;		<span class="comment">//取右边筷子</span></span><br><span class="line">V (mutex) ;					<span class="comment">//释放取筷子的信号量</span></span><br><span class="line">eat;							<span class="comment">//进餐</span></span><br><span class="line">V(chopstick[i]) ;				<span class="comment">//放回左边筷子</span></span><br><span class="line">V (chopstick[(i+<span class="number">1</span>)%<span class="number">5</span>]) ;		<span class="comment">//放回右边筷子</span></span><br><span class="line">think;						<span class="comment">//思考</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">1</span>) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><h3 id="死锁的原因"><a href="#死锁的原因" class="headerlink" title="死锁的原因"></a>死锁的原因</h3><ol>
<li>系统资源的竞争</li>
<li>进程推进顺序非法</li>
<li>死锁产生的必要条件：</li>
</ol>
<ul>
<li>互斥条件</li>
<li>不剥夺条件</li>
<li>请求并保持条件</li>
<li>循环等待条件</li>
</ul>
<h3 id="死锁的预防"><a href="#死锁的预防" class="headerlink" title="死锁的预防"></a>死锁的预防</h3><ol>
<li>破坏互斥条件<br>不可行</li>
<li>破坏不剥夺条件<br>用于状态易于保存和恢复的资源 如CPU的寄存器及内存资源，不适用于打印机</li>
<li>破坏请求并保持条件<br>采用预先静态分配方法<br>会导致饥饿</li>
<li>破坏循环等待条件<br>采用顺序资源分配算法<br>限制了新设备的增加<br>造成资源浪费<br>给用户编程带来麻烦</li>
</ol>
<h3 id="死锁避免"><a href="#死锁避免" class="headerlink" title="死锁避免"></a>死锁避免</h3><ol>
<li>系统安全状态</li>
<li>银行家算法</li>
</ol>
<h3 id="死锁的检测和排除"><a href="#死锁的检测和排除" class="headerlink" title="死锁的检测和排除"></a>死锁的检测和排除</h3><ol>
<li>资源分配图</li>
<li>死锁定理</li>
<li>死锁解除</li>
</ol>
<ul>
<li>资源剥夺法</li>
<li>撤销进程法</li>
<li>进程回退法</li>
</ul>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>线程是调度的基本单位<br>线程控制块TCB<br>用户级线程只可在用户空间中进行，所以在不支持内核级线程的系统中也可以实现管理。<br>用户级线程的切换效率更高。</p>
<h3 id="典型应用"><a href="#典型应用" class="headerlink" title="典型应用"></a>典型应用</h3><ol>
<li>服务器中的文件管理或通信控制</li>
<li>前后台处理</li>
<li>异步处理</li>
</ol>
<h3 id="多线程模型"><a href="#多线程模型" class="headerlink" title="多线程模型"></a>多线程模型</h3><h4 id="多对一"><a href="#多对一" class="headerlink" title="多对一"></a>多对一</h4><p>多个用户映射到一个内核级线程，用户线程对操作系统不可见<br>多个线程不能并行运行在多处理机上</p>
<h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><p>每个用户级线程映射到一个内核级线程<br>线程开销大</p>
<h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4><p>n个用户级映射到m个内核级线程上，要求m&lt;&#x3D;n</p>
<h2 id="中断技术"><a href="#中断技术" class="headerlink" title="中断技术"></a>中断技术</h2><p>在程序执行过程中遇到急需处理的事件时，暂时中止现行程序在CPU上的执行，转而执行相应的事件处理程序，待处理完成后返回中断点或调用其他程序。</p>
<h4 id="外中断（中断或者异步中断）"><a href="#外中断（中断或者异步中断）" class="headerlink" title="外中断（中断或者异步中断）"></a>外中断（中断或者异步中断）</h4><p>来自处理器之外的中断<br>分为可屏蔽中断和不可屏蔽中断<br>既发生在用户态又发生在内核态</p>
<ol>
<li>时钟中断</li>
<li>键盘中断</li>
<li>它机中断</li>
<li>外部设备中断</li>
</ol>
<h4 id="内中断（异常或同步中断）"><a href="#内中断（异常或同步中断）" class="headerlink" title="内中断（异常或同步中断）"></a>内中断（异常或同步中断）</h4><ol>
<li>访管中断-&gt;执行系统调用引起</li>
<li>硬件故障中断-&gt;电源失效、奇偶校验错误、总线超时</li>
<li>程序性异常-&gt;非法操作、地址越界、页面故障、调试指令、除数为零、浮点溢出<br><strong>大部分异常都发生在用户态，只有“缺页异常“发生在内核态</strong></li>
</ol>
<h4 id="中断的执行过程"><a href="#中断的执行过程" class="headerlink" title="中断的执行过程"></a>中断的执行过程</h4><ol>
<li>关中断 此时不能响应更高级的中断请求</li>
<li>保存断点 即PC</li>
<li>引出中断服务程序 将地址送入PC</li>
<li>保存现场和屏蔽字</li>
<li>开中断 此时允许更高级的的中断</li>
<li>执行中断服务程序</li>
<li>关中断</li>
<li>恢复现场和屏蔽字</li>
<li>开中断、中断返回<br>PC由硬件保存，通用寄存器由操作系统保存<br>1～3由硬件（中断隐指令）完成，4～9 软件完成</li>
</ol>
<h3 id="中断事件处理"><a href="#中断事件处理" class="headerlink" title="中断事件处理"></a>中断事件处理</h3><h4 id="硬件故障中断"><a href="#硬件故障中断" class="headerlink" title="硬件故障中断"></a>硬件故障中断</h4><p>硬件故障导致</p>
<h5 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>中断处理程序 保护现场</li>
<li>停止设备工作</li>
<li>停止处理及运行</li>
<li>向操作员报告</li>
</ol>
<h4 id="程序性中断"><a href="#程序性中断" class="headerlink" title="程序性中断"></a>程序性中断</h4><p>语法错误、逻辑错误、运行中异常</p>
<h5 id="处理过程-1"><a href="#处理过程-1" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>因人而异</li>
<li>借助于信号机制</li>
<li>操作系统将中断事件捕获交给应用程序</li>
</ol>
<h4 id="I-x2F-O中断"><a href="#I-x2F-O中断" class="headerlink" title="I&#x2F;O中断"></a>I&#x2F;O中断</h4><h5 id="处理原则"><a href="#处理原则" class="headerlink" title="处理原则"></a>处理原则</h5><ol>
<li>I&#x2F;O正常结束 待传输的下一个进程设置为就绪态</li>
<li>I&#x2F;O发生故障 向设备发命令索取状态字、分析故障的确切原因、复执或转人工</li>
<li>I&#x2F;O异常 报告操作员</li>
<li>设备报到或设备结束 操作系统修改系统数据结构中相应设备的状态</li>
</ol>
<h4 id="访管中断"><a href="#访管中断" class="headerlink" title="访管中断"></a>访管中断</h4><p>表示当前运行程序对操作系统功能的调用</p>
<h5 id="处理过程-2"><a href="#处理过程-2" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>程序执行访管指令,并通过适当方式指明系统调用号。</li>
<li>通过中断机制进入访管中断处理程序,现场信息被保护到核心栈,按功能号实现跳转。</li>
<li>通过系统调用人口地址表找到相应中断服务例程的入口地址。</li>
<li>执行中断服务例程,正常情况下在结束后返回系统调用的下一条指令继续<br>执行。</li>
</ol>
<h4 id="时钟中断"><a href="#时钟中断" class="headerlink" title="时钟中断"></a>时钟中断</h4><p>处理和时间有关的信息及决定是否程序调度<br>和时间有关的信息：系统时间、进程的时间片、延时、使用CPU的时间、各种定时器。<br>时钟分绝对时钟和间隔时钟</p>
<h5 id="间隔定时器："><a href="#间隔定时器：" class="headerlink" title="间隔定时器："></a>间隔定时器：</h5><ol>
<li>real 永远在计时（包括进程挂起时）</li>
<li>virtual 只在用户态计时</li>
<li>profile 在用户态和内核态都计时</li>
</ol>
<h2 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li>设备管理</li>
<li>文件管理</li>
<li>进程管理</li>
<li>进程通信</li>
<li>内存管理</li>
</ul>
<h3 id="要运行在核心态"><a href="#要运行在核心态" class="headerlink" title="要运行在核心态"></a>要运行在核心态</h3><p>由内核程序负责完成<br>用户通过<strong>trap</strong> 来发起系统调用请求</p>
<h3 id="用户态转向核心态"><a href="#用户态转向核心态" class="headerlink" title="用户态转向核心态"></a>用户态转向核心态</h3><ol>
<li>用户程序要求操作系统的服务，如系统调用</li>
<li>发生一次中断</li>
<li>用户程序产生了一次错误状态</li>
<li>用户程序企图执行一条特权指令<br>用中断返回指令返回用户态</li>
</ol>
<h3 id="主要过程"><a href="#主要过程" class="headerlink" title="主要过程"></a>主要过程</h3><ol>
<li>传递系统调用参数</li>
<li>执行trap指令</li>
<li>执行相应的服务程序</li>
<li>返回用户态</li>
</ol>
<h2 id="大内核与微内核"><a href="#大内核与微内核" class="headerlink" title="大内核与微内核"></a>大内核与微内核</h2><h3 id="大内核的好处"><a href="#大内核的好处" class="headerlink" title="大内核的好处"></a>大内核的好处</h3><p>可充分利用模块之间有效特性，无可比拟的性能优势</p>
<h3 id="微内核的特点"><a href="#微内核的特点" class="headerlink" title="微内核的特点"></a>微内核的特点</h3><ol>
<li>添加系统服务时，不必修改内核</li>
<li>有效分离接口</li>
<li>微内核结构没有单一内核稳定</li>
</ol>
<h2 id="处理机调度"><a href="#处理机调度" class="headerlink" title="处理机调度"></a>处理机调度</h2><h3 id="分级调度"><a href="#分级调度" class="headerlink" title="分级调度"></a>分级调度</h3><ol>
<li>作业调度 又称宏观调度或者高级调度</li>
<li>交换调度 又称中级调度或者内存调度</li>
<li>进程调度 又称微观调度或者低级调度</li>
<li>线程调度<br>作业调度次数少，中级次数略多，进程调度频率最高<br>进程调度和切换程序是操作系统内核程序</li>
</ol>
<blockquote>
<p>现代操作系统中,不能进行进程的调度与切换的情况有以下几种:1. 在处理中断的过程中,中断处理过程复杂,在实现上很难做到进程程切换,而且中断处理是系统工作的一部分,逻辑上不属于某一进程,不应被剥夺处理机资源。<br>2. 进程在操作系统内核程序临界区中。进入临界区后,需要独占式地访问共享数据,理论上必须加锁,以防止其他并行程序进入,在解锁前不应切换到其他进程运行,以加快该共享数据的释放。<br>3. 其他需要完全屏蔽中断的原子操作过程中。如加锁、解锁、中断现场保护、恢复等原子操作。在原子过程中,连中断都要屏蔽,更不应该进行进程调度与切换。  </p>
</blockquote>
<h3 id="进程调度方式"><a href="#进程调度方式" class="headerlink" title="进程调度方式"></a>进程调度方式</h3><ul>
<li>非抢占（剥夺）式</li>
<li>抢占（剥夺）式</li>
</ul>
<h3 id="调度的基本准则"><a href="#调度的基本准则" class="headerlink" title="调度的基本准则"></a>调度的基本准则</h3><ol>
<li>CPU利用率</li>
<li>系统吞吐量 单位时间内CPU完成作业的数量 作业数量&#x2F;时间</li>
<li>周转时间<br>周转时间&#x3D;作业完成时间-作业提交时间<br><strong>平均周转时间</strong>&#x3D;（作业1的周转时间+…+作业n的周转时间）&#x2F;n<br>带权周转时间&#x3D;作业周转时间&#x2F;作业实际运行时间<br><strong>平均带权周转时间</strong>&#x3D;n个带权周转时间&#x2F;n</li>
<li>等待时间 进程处于等处理机状态的时间之和</li>
<li>响应时间 用户提交到系统首次响应的时间</li>
</ol>
<h3 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h3><h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ol>
<li>记录系统中所有进程执行的的情况</li>
<li>选择占有处理机的过程</li>
<li>进行进程上下文的切换</li>
</ol>
<h4 id="进程调度的时机"><a href="#进程调度的时机" class="headerlink" title="进程调度的时机"></a>进程调度的时机</h4><ol>
<li>正在执行的进程执行完毕，或者进程被创建时</li>
<li>执行中进程自己调用阻塞原语将自己阻塞起来，进入睡眠等待状态</li>
<li>执行中进程提出IO请求后被阻塞</li>
<li>在分时系统中时间片已经用完</li>
<li>在执行完系统调用，系统程序返回用户程序时</li>
<li>进程处于临界区时也可以调度<br><strong>以上是不可剥夺方式下的原因</strong></li>
<li>就绪队列中的某进程的优先级变得高于当前执行进程的优先级</li>
</ol>
<h5 id="UNIX中"><a href="#UNIX中" class="headerlink" title="UNIX中"></a>UNIX中</h5><ol>
<li>进程自己调用sleep和wait进入睡眠</li>
<li>由于系统调用结束返回用户态，调度标志被置位</li>
<li>完成中断或trap</li>
<li>时间片用完</li>
<li>调用exit自我终止</li>
</ol>
<h3 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h3><h4 id="先来先服务算法FIFS"><a href="#先来先服务算法FIFS" class="headerlink" title="先来先服务算法FIFS"></a>先来先服务算法FIFS</h4><p>算法简单效率低<br>对长作业有利对短作业不利<br>有利于CPU繁忙型作业，不利于IO繁忙型</p>
<h4 id="短作业优先调度算法SJF"><a href="#短作业优先调度算法SJF" class="headerlink" title="短作业优先调度算法SJF"></a>短作业优先调度算法SJF</h4><p>对于长作业不利<br>未考虑作业的紧迫程度<br>作业的长短根据用户的估计而定（不准）<br>SJF的平均等待时间、平均周转时间最少</p>
<h4 id="优先级调度算法"><a href="#优先级调度算法" class="headerlink" title="优先级调度算法"></a>优先级调度算法</h4><ol>
<li>非剥夺式</li>
<li>剥夺式</li>
<li>静态优先级 创建进程时决定的</li>
<li>动态优先级 进程运行过程中调整</li>
</ol>
<h4 id="优先级的设置参照原则"><a href="#优先级的设置参照原则" class="headerlink" title="优先级的设置参照原则"></a>优先级的设置参照原则</h4><ol>
<li><p>系统进程&gt;用户进程</p>
</li>
<li><p>交互型进程 &gt;非交互型进程</p>
</li>
<li><p>IO型进程 &gt;计算型进程</p>
</li>
</ol>
<h4 id="高响应比优先调度算法"><a href="#高响应比优先调度算法" class="headerlink" title="高响应比优先调度算法"></a>高响应比优先调度算法</h4><p>响应比Rp&#x3D;（等待时间+要求服务时间）&#x2F;要求服务时间<br>因此</p>
<ol>
<li>作业的等待时间相同时，要求服务时间越短，响应比越高，有利于短作业</li>
<li>要求时间相同时，作业的响应比由其等待时间决定，（FCFS）</li>
<li>对长作业，等待时间足够长时，其响应比便可升的很高</li>
</ol>
<h4 id="时间片轮转调度算法"><a href="#时间片轮转调度算法" class="headerlink" title="时间片轮转调度算法"></a>时间片轮转调度算法</h4><p>适用于分时系统<br>剥夺式<br>当一个处于运行态的进程用完一个时间片后它的状态处于<strong>就绪</strong>态</p>
<h4 id="多级反馈队列调度算法"><a href="#多级反馈队列调度算法" class="headerlink" title="多级反馈队列调度算法"></a>多级反馈队列调度算法</h4><ol>
<li>设置多个就绪队列，每个队列优先级不同</li>
<li>每个队列中进程执行的时间片的大小各不相同</li>
<li>队列中FCFS，队列间时间片轮转</li>
<li>允许抢占</li>
</ol>
<h5 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h5><ol>
<li>终端型作业用户：短作业优先</li>
<li>短批处理作业用户：周转时间较短</li>
<li>长批处理作业用户：不会长期得不到处理</li>
</ol>
<h3 id="实时调度"><a href="#实时调度" class="headerlink" title="实时调度"></a>实时调度</h3><p>分为软实时调度和硬实时调度<br>实时操作系统的特点：</p>
<ol>
<li>有限等待时间（决定性）</li>
<li>有限响应时长</li>
<li>用户控制</li>
<li>可靠性高</li>
<li>系统出错处理能力强</li>
</ol>
<h4 id="要求："><a href="#要求：" class="headerlink" title="要求："></a>要求：</h4><ol>
<li>很快的进程或线程切换速度</li>
<li>快速的外部中断响应能力</li>
<li>基于优先级的随时抢占式调度策略：</li>
</ol>
<ul>
<li>优先级+时间片轮转调度</li>
<li>基于优先级的非抢占式调度</li>
<li>基于优先级的固定抢占式调度</li>
<li>基于优先级的随时抢占式调度</li>
</ul>
<h4 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h4><ol>
<li>静态表格法<br>静态分析——直接产生调度结果<br>多用于处理周期性任务</li>
<li>静态优先级驱动抢占式调度算法<br>也进行静态分析——不直接产生调度结果——只用来指定优先级</li>
<li>动态计划调度算法<br>在执行调度任务前排调度计划</li>
<li>尽力而为调度算法<br>不进行可能性分析</li>
</ol>
<h4 id="实现调度算法"><a href="#实现调度算法" class="headerlink" title="实现调度算法"></a>实现调度算法</h4><p>所包涵的内容信息：</p>
<ol>
<li>任务就绪时间或事件到达时间<br>周期性事件可预知，但非周期性事件大部分时间不可预知</li>
<li>开始时限</li>
<li>完成时限</li>
<li>处理时间</li>
<li>资源要求</li>
<li>优先级</li>
</ol>
<p>算法思想：按用户的时限要求顺序设置处理机<br>抢占式的<br>可用于非周期性任务调度</p>
<h4 id="频率单调调度算法"><a href="#频率单调调度算法" class="headerlink" title="频率单调调度算法"></a>频率单调调度算法</h4><p>广泛应用于多周期性实时处理<br>原理：<br>频率越低优先级越低</p>
<h2 id="内存管理基本原理"><a href="#内存管理基本原理" class="headerlink" title="内存管理基本原理"></a>内存管理基本原理</h2><h3 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h3><h4 id="1-虚拟存储器"><a href="#1-虚拟存储器" class="headerlink" title="1. 虚拟存储器"></a>1. 虚拟存储器</h4><p>进程中的目标代码、数据等的虚存地址组成的虚拟空间称为虚拟存储器</p>
<h4 id="2-地址变换"><a href="#2-地址变换" class="headerlink" title="2. 地址变换"></a>2. 地址变换</h4><p>内存地址（物理单元）的集合成为内存空间或物理地址空间<br>物理地址空间是地址转换的最终地址</p>
<ul>
<li>静态地址重定位<br>要求执行前完成链接<br>必须占用连续的内存空间</li>
<li>动态地址重定位<br>依靠硬件地址变换机构<br>该机构需要一个或多个基地址寄存器BR和一个或多个程序虚拟地址寄存器VR<br>内存地址MA&#x3D;BR+VR<br>优点：</li>
</ul>
<ol>
<li>可以对内存进行非连续分配</li>
<li>提供了实现虚拟存储器的基础</li>
<li>有利于程序段的共享</li>
</ol>
<h4 id="3-内外存数据传输的控制"><a href="#3-内外存数据传输的控制" class="headerlink" title="3. 内外存数据传输的控制"></a>3. 内外存数据传输的控制</h4><p>用户控制：覆盖<br>系统控制：交换、请求调入+预调入<br>一个进程正在IO时，不能交换出内存</p>
<h4 id="4-内存的分配与回收"><a href="#4-内存的分配与回收" class="headerlink" title="4. 内存的分配与回收"></a>4. 内存的分配与回收</h4><h5 id="连续分配方式"><a href="#连续分配方式" class="headerlink" title="连续分配方式"></a>连续分配方式</h5><ul>
<li>单一连续分配<br>无外部碎片、可采用覆盖技术<br>只能用于单用户、有内部碎片</li>
<li>固定分区分配<br>多道<br>分区大小相等。用于一台计算机控制多个相同对象<br>分区大小不等。多个较小，适量中分区，少量大分区<br>程序太大就放不进任何分区了<br>内存利用率低，会产生内部碎片<br>无外部碎片<br>有关管理通过<strong>分区说明表</strong>进行</li>
<li>动态分区分配<br>旗下的几种算法：</li>
</ul>
<ol>
<li>首次适应算法<br>空闲地址递增的顺序链接<br>具有最佳性能</li>
<li>最佳适应算法<br>容量递增方式链接</li>
<li>最坏适应算法<br>容量递减方式链接</li>
<li>邻近适应算法<br>首次适应的演变，在上次查找的位置开始查找</li>
</ol>
<h4 id="5-内存信息的共享与保护"><a href="#5-内存信息的共享与保护" class="headerlink" title="5. 内存信息的共享与保护"></a>5. 内存信息的共享与保护</h4><h5 id="常用的内存信息保护方法："><a href="#常用的内存信息保护方法：" class="headerlink" title="常用的内存信息保护方法："></a>常用的内存信息保护方法：</h5><ol>
<li>上下界保护法（硬件）</li>
<li>保护键法</li>
<li>界限寄存器与CPU的用户态或核心态工作方式相结合</li>
</ol>
<p>源程序转换为在内存中执行的程序步骤：</p>
<ol>
<li>编译</li>
<li>链接 逻辑地址——&gt;物理地址</li>
<li>装入</li>
</ol>
<h5 id="程序链接的三种方式："><a href="#程序链接的三种方式：" class="headerlink" title="程序链接的三种方式："></a>程序链接的三种方式：</h5><ol>
<li>静态链接</li>
<li>装入时动态链接</li>
<li>运行时动态链接</li>
</ol>
<h5 id="装入的的三种方法："><a href="#装入的的三种方法：" class="headerlink" title="装入的的三种方法："></a>装入的的三种方法：</h5><ol>
<li>绝对装入</li>
<li>可重定位装入</li>
<li>动态运行时装入</li>
</ol>
<h2 id="页式管理"><a href="#页式管理" class="headerlink" title="页式管理"></a>页式管理</h2><p>为了减少碎片以及为了只在内存存放那些反复利用的或即将执行的程序段与数据部分，而把那些不经常执行的程序段和数据存储在外存。<br>不会产生外部碎片</p>
<h3 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h3><p>每个进程平均产生半个块大小的内部碎片（页内碎片）<br>进程的虚拟空间被划分为若干个等长的页（Page）<br>每个页1～4K（旧）<br>内存空间按页的大小分为片或页面&#x2F;帧&#x2F;框（Page framework）<br>外存也以同样的单位划分，成为块（block）</p>
<h3 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h3><p>分为两部分<br>页号P——页内偏移量W</p>
<h3 id="页表"><a href="#页表" class="headerlink" title="页表"></a>页表</h3><p>记录页面在内存中对应的物理块号<br>一般存于内存中<br>页表由页表项<br>页表项的结构：页号——物理内存中的块号<br>页表项的第二部分与地址的第二部分共同组成物理地址<br>加入中断处理后的页表</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>页号</td>
<td>页面号</td>
<td>中断位</td>
<td>外存始址</td>
</tr>
</tbody></table>
<p>| 页号 | 页面号 | 中断位 | 外存始址 |<br>加入改变位后的页表<br>| 页号 | 页面号 | 中断位 | 外存始址 | 改变位 |</p>
<h3 id="计算过程"><a href="#计算过程" class="headerlink" title="计算过程"></a>计算过程</h3><p>页号P&#x3D;逻辑地址A&#x2F;页面大小L<br>页内偏移量W&#x3D;A%L<br>如果页号P&gt;&#x3D;页表长度M，产生越界中断<br>页表项地址&#x3D;页表始址F+页号P<em>页表项长度<br>页表长度一般指有多少页<br>页表项长度一般指页地址占多大的存储空间<br>物理地址E&#x3D;块内内容b</em>页面大小L+页内偏移量W<br><strong>注：</strong><br>页表项的确定：<br>n位逻辑地址空间对应的2^nB除以一页的大小mB<br>得到的u&#x3D;2^n&#x2F;m页，页表项以字节编址，因此页表项大于等于log(u)&#x2F;8</p>
<h3 id="快表"><a href="#快表" class="headerlink" title="快表"></a>快表</h3><p>在地址转换机构中添加一个具有并行查找能力的高速缓冲存储器。</p>
<h2 id="段式管理"><a href="#段式管理" class="headerlink" title="段式管理"></a>段式管理</h2><h3 id="分段"><a href="#分段" class="headerlink" title="分段"></a>分段</h3><p>按进程中的自然段划分逻辑空间<br>其逻辑地址由<strong>段号s——段内偏移量w</strong>组成<br>段内连续，段间不要求连续</p>
<h3 id="段表"><a href="#段表" class="headerlink" title="段表"></a>段表</h3><p>| 段号 | 段长 | 本段在主存中的地址 |<br>| 段号 | 始址 | 长度 | 存取方式 | 内外 | 访问位 |</p>
<h3 id="地址变换结构"><a href="#地址变换结构" class="headerlink" title="地址变换结构"></a>地址变换结构</h3><ul>
<li>逻辑地址A中前几位为段号S，后几位为段内偏移量W</li>
<li>比较段号S和段表长度M，if（S&gt;&#x3D;M）越界中断</li>
<li>段号S对应的段表项地址&#x3D;段表始址F+段号S*段表项长度</li>
<li>取出段表中该段的始址b，计算物理地址E&#x3D;b+W</li>
</ul>
<h3 id="段的共享与保护"><a href="#段的共享与保护" class="headerlink" title="段的共享与保护"></a>段的共享与保护</h3><p>都指向被共享的段的同一个物理副本。不能修改的代码成为纯代码或可重入代码（不属于临界资源）<br>保护方法一般有两种：</p>
<ol>
<li>存取控制</li>
<li>地址越界保护</li>
</ol>
<h2 id="段业式管理"><a href="#段业式管理" class="headerlink" title="段业式管理"></a>段业式管理</h2><p>| 段号 | 页号 | 页内相对地址(偏移量) |<br><strong>在一个进程中，段表只有一个，而页表可能有多个</strong></p>
<h2 id="虚拟内存管理"><a href="#虚拟内存管理" class="headerlink" title="虚拟内存管理"></a>虚拟内存管理</h2><h3 id="需要的支持"><a href="#需要的支持" class="headerlink" title="需要的支持"></a>需要的支持</h3><ol>
<li>页表机制（或段表机制），作为主要的数据结构</li>
<li>中断机制，当用户程序要访问的部分尚未调入内存时，产生中断</li>
<li>地址变换机构，逻辑地址到物理地址</li>
</ol>
<h3 id="请求页表机制"><a href="#请求页表机制" class="headerlink" title="请求页表机制"></a>请求页表机制</h3><p>页表项<br>| 页号 | 物理块号 | 状态位P | 访问字段A | 修改位M | 外存地址 |</p>
<ul>
<li>状态位P：用于指示是否调入内存</li>
<li>访问字段A：用于页面置换</li>
<li>修改位M：标识调入内存后是否被修改过</li>
<li>外存地址：支持该页在外存上的地址，通常是物理块号</li>
</ul>
<h3 id="缺页中断机构"><a href="#缺页中断机构" class="headerlink" title="缺页中断机构"></a>缺页中断机构</h3><p>缺页中断后，进程进入阻塞。<br>属于内部中断</p>
<h2 id="页面置换算法"><a href="#页面置换算法" class="headerlink" title="页面置换算法"></a>页面置换算法</h2><h3 id="最佳置换算法（OPT）"><a href="#最佳置换算法（OPT）" class="headerlink" title="最佳置换算法（OPT）"></a>最佳置换算法（OPT）</h3><p>淘汰一个最长时间内不再被访问的页<br>无法实现</p>
<h3 id="先进先出页面置换算法（FIFO）"><a href="#先进先出页面置换算法（FIFO）" class="headerlink" title="先进先出页面置换算法（FIFO）"></a>先进先出页面置换算法（FIFO）</h3><p>会产生所分配的物理块数增大而故障数不减反增的异常现象（Belady异常）<br>基于队列实现</p>
<h3 id="最近最久未使用置换算法"><a href="#最近最久未使用置换算法" class="headerlink" title="最近最久未使用置换算法"></a>最近最久未使用置换算法</h3><p>堆栈类算法</p>
<h3 id="时钟（clock）置换算法"><a href="#时钟（clock）置换算法" class="headerlink" title="时钟（clock）置换算法"></a>时钟（clock）置换算法</h3><p>每帧关联一个附加位（使用位）</p>
<h4 id="改进的clock算法："><a href="#改进的clock算法：" class="headerlink" title="改进的clock算法："></a>改进的clock算法：</h4><p>增加一个修改位<br>每帧有四种情况：</p>
<ol>
<li>最近未被访问，也未被修改（u&#x3D;0，m&#x3D;0）</li>
<li>最近被访问，但未被修改（u&#x3D;1,m&#x3D;0)</li>
<li>最近位被访问，但被修改 (u&#x3D;0,m&#x3D;1)</li>
<li>最近被访问，被修改 (u&#x3D;1,m&#x3D;1)<br>按以上顺序进行淘汰</li>
</ol>
<h2 id="页面分配策略"><a href="#页面分配策略" class="headerlink" title="页面分配策略"></a>页面分配策略</h2><h3 id="驻留集大小"><a href="#驻留集大小" class="headerlink" title="驻留集大小"></a>驻留集大小</h3><p>三种策略</p>
<ol>
<li>固定分配局部置换</li>
<li>可变分配全局置换</li>
<li>可变分配局部置换</li>
</ol>
<h3 id="调入的时机"><a href="#调入的时机" class="headerlink" title="调入的时机"></a>调入的时机</h3><ol>
<li>预调页策略</li>
<li>请求调页策略</li>
</ol>
<h3 id="从何处调页"><a href="#从何处调页" class="headerlink" title="从何处调页"></a>从何处调页</h3><p>请求分页系统的外存分为</p>
<ul>
<li>存放文件的文件区（连续分配方式）</li>
<li>存放对换页面的对换区 （离散分配方式） IO更快</li>
</ul>
<h4 id="调入时机"><a href="#调入时机" class="headerlink" title="调入时机"></a>调入时机</h4><ol>
<li>系统拥有足够的对换区空间：全部从对换区调入</li>
<li>系统缺少足够的对换区空间：凡不会被修改的文件直接从文件区调入，可能被修改的文件在换出时调入对换区，以后需要的时候直接从对换区调入</li>
<li>UNXI方式：与进程有关的放入文件区。运行过被换出的页面放在对换区。进程请求的共享页面若被其他进程调入内存，则无需再从对换区调入</li>
</ol>
<h2 id="抖动"><a href="#抖动" class="headerlink" title="抖动"></a>抖动</h2><p>频繁发生缺页中断（抖动）的原因：某个进程频繁访问的页面数目高于可用的物理页帧数。<br>虚拟内存技术可以在内存中保留更多的进程以提高系统效率。</p>
<h2 id="工作集"><a href="#工作集" class="headerlink" title="工作集"></a>工作集</h2><p>某段时间间隔内，进程要访问的页面集合。<br>工作集大小一般比工作集窗口小很多<br>分配给进程的物理块数（驻留集大小）大小要大于工作集大小</p>
<h2 id="文件的一些概念"><a href="#文件的一些概念" class="headerlink" title="文件的一些概念"></a>文件的一些概念</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>以计算机硬盘为载体的储存在计算机上的信息的集合。<br>计算机进行资源的调度和分配：进程<br>用户进行的输入、输出中的基本单位：文件</p>
<h3 id="文件的属性"><a href="#文件的属性" class="headerlink" title="文件的属性"></a>文件的属性</h3><ul>
<li>名称</li>
<li>标识符</li>
<li>类型</li>
<li>位置</li>
<li>大小</li>
<li>保护</li>
<li>时间</li>
</ul>
<h3 id="文件的基本操作"><a href="#文件的基本操作" class="headerlink" title="文件的基本操作"></a>文件的基本操作</h3><ul>
<li>创建文件</li>
<li>写文件</li>
<li>读文件</li>
<li>文件重定位（文件寻址）</li>
<li>删除文件</li>
<li>截断文件</li>
</ul>
<h3 id="文件的分类"><a href="#文件的分类" class="headerlink" title="文件的分类"></a>文件的分类</h3><h4 id="按性质和用途"><a href="#按性质和用途" class="headerlink" title="按性质和用途"></a>按性质和用途</h4><ul>
<li>系统文件</li>
<li>库文件</li>
<li>用户文件</li>
</ul>
<h4 id="按组织形式"><a href="#按组织形式" class="headerlink" title="按组织形式"></a>按组织形式</h4><ul>
<li>普通文件</li>
<li>目录文件</li>
<li>特殊文件</li>
</ul>
<h3 id="文件的打开与关闭"><a href="#文件的打开与关闭" class="headerlink" title="文件的打开与关闭"></a>文件的打开与关闭</h3><p>打开文件相关联的信息：</p>
<ul>
<li>文件指针 系统跟踪上次读写位置，作为当前文件位置的指针</li>
<li>文件打开计数 计数为零时，系统关闭文件，删除该条目</li>
<li>文件磁盘位置</li>
<li>访问权限</li>
</ul>
<h2 id="文件的逻辑结构"><a href="#文件的逻辑结构" class="headerlink" title="文件的逻辑结构"></a>文件的逻辑结构</h2><h3 id="无文件结构（流式文件）"><a href="#无文件结构（流式文件）" class="headerlink" title="无文件结构（流式文件）"></a>无文件结构（流式文件）</h3><p>以字节Byte为单位</p>
<p>访问通过<strong>穷举搜索</strong>方式</p>
<p>源程序文件、目标代码文件等采用这种方式</p>
<h3 id="有文件结构（记录式文件）"><a href="#有文件结构（记录式文件）" class="headerlink" title="有文件结构（记录式文件）"></a>有文件结构（记录式文件）</h3><h4 id="顺序文件"><a href="#顺序文件" class="headerlink" title="顺序文件"></a>顺序文件</h4><p>记录定长</p>
<p>顺序存储或链表形式存储</p>
<p>顺序搜索</p>
<p>两种结构：</p>
<ul>
<li>串结构 记录之间的顺序与关键字无关 按时间先后排序</li>
<li>顺序结构 按关键字排序</li>
</ul>
<h4 id="索引文件"><a href="#索引文件" class="headerlink" title="索引文件"></a>索引文件</h4><p>第i条记录相对于第一条记录的地址 A&#x3D;i*L</p>
<p>索引表</p>
<table>
<thead>
<tr>
<th>索引号</th>
<th>长度m</th>
<th>指针ptr</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>m</td>
<td></td>
</tr>
</tbody></table>
<h4 id="索引顺序文件"><a href="#索引顺序文件" class="headerlink" title="索引顺序文件"></a>索引顺序文件</h4><p>将每组中的第一个文件放在索引表中</p>
<h4 id="直接文件或散列文件"><a href="#直接文件或散列文件" class="headerlink" title="直接文件或散列文件"></a>直接文件或散列文件</h4><p>没有顺序的特性</p>
<h3 id="存取方法"><a href="#存取方法" class="headerlink" title="存取方法"></a>存取方法</h3><h4 id="线性搜索法"><a href="#线性搜索法" class="headerlink" title="线性搜索法"></a>线性搜索法</h4><h4 id="散列法"><a href="#散列法" class="headerlink" title="散列法"></a>散列法</h4><h4 id="二分搜索法"><a href="#二分搜索法" class="headerlink" title="二分搜索法"></a>二分搜索法</h4><h2 id="文件的物理结构和存储设备"><a href="#文件的物理结构和存储设备" class="headerlink" title="文件的物理结构和存储设备"></a>文件的物理结构和存储设备</h2><h3 id="连续文件（连续分配）"><a href="#连续文件（连续分配）" class="headerlink" title="连续文件（连续分配）"></a>连续文件（连续分配）</h3><p>一旦知道文件在文件存储设备上的起始地址和文件长度就能很快的进行物理存取。<br>反复增删后会产生外部碎片</p>
<h3 id="串联文件（链接分配）"><a href="#串联文件（链接分配）" class="headerlink" title="串联文件（链接分配）"></a>串联文件（链接分配）</h3><p>搜索效率低。</p>
<h4 id="隐式链接分配"><a href="#隐式链接分配" class="headerlink" title="隐式链接分配"></a>隐式链接分配</h4><h4 id="显式链接分配"><a href="#显式链接分配" class="headerlink" title="显式链接分配"></a>显式链接分配</h4><p>创建文件分配表（FAT），用于存放链接文件各物理块的指针。</p>
<h3 id="索引文件（索引分配）"><a href="#索引文件（索引分配）" class="headerlink" title="索引文件（索引分配）"></a>索引文件（索引分配）</h3><p>把每个文件的所有盘块号都集中放到一起构成索引块(表)</p>
<h4 id="处理索引块的问题"><a href="#处理索引块的问题" class="headerlink" title="处理索引块的问题"></a>处理索引块的问题</h4><ol>
<li>链接方案 将多个索引块链接</li>
<li>多层索引 </li>
<li>混合索引</li>
</ol>
<h3 id="文件存储设备"><a href="#文件存储设备" class="headerlink" title="文件存储设备"></a>文件存储设备</h3><h4 id="顺序存储设备"><a href="#顺序存储设备" class="headerlink" title="顺序存储设备"></a>顺序存储设备</h4><p>磁带 磁带的两个相邻物理块之间有间隙让他提前加速和不停止</p>
<h5 id="存取速度的的因素"><a href="#存取速度的的因素" class="headerlink" title="存取速度的的因素"></a>存取速度的的因素</h5><ol>
<li>信息密度（字符数&#x2F;英寸）</li>
<li>磁带带速（英寸&#x2F;秒）</li>
<li>块间间隙<br>信息密度大、块间间隙小、带速高，存取快。</li>
</ol>
<h4 id="直接存储设备"><a href="#直接存储设备" class="headerlink" title="直接存储设备"></a>直接存储设备</h4><p>磁盘</p>
<h2 id="文件存储空间管理"><a href="#文件存储空间管理" class="headerlink" title="文件存储空间管理"></a>文件存储空间管理</h2><p>一般一个问价存储在一个文件卷中，文件卷可以是磁盘的一部分，也可以是整个物理盘。</p>
<h3 id="空闲文件目录（空闲表）"><a href="#空闲文件目录（空闲表）" class="headerlink" title="空闲文件目录（空闲表）"></a>空闲文件目录（空闲表）</h3><p>空闲盘块表</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>第一个空闲盘块号</th>
<th>空闲盘块数</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>2</td>
<td>9</td>
<td>3</td>
</tr>
<tr>
<td>适用于连续文件结构的文件存储区的分配与回收</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="空闲块链"><a href="#空闲块链" class="headerlink" title="空闲块链"></a>空闲块链</h3><p>分类</p>
<ul>
<li>空闲盘块链</li>
<li>空闲盘区链</li>
</ul>
<h4 id="常用的链接方法"><a href="#常用的链接方法" class="headerlink" title="常用的链接方法"></a>常用的链接方法</h4><ul>
<li>按空闲区大小顺序链接</li>
<li>按释放先后循序链接</li>
<li>成组链法</li>
</ul>
<h3 id="位示图"><a href="#位示图" class="headerlink" title="位示图"></a>位示图</h3><h4 id="盘块的分配"><a href="#盘块的分配" class="headerlink" title="盘块的分配"></a>盘块的分配</h4><ol>
<li>顺序扫描位示图，找到一个或一组“0”</li>
<li>若“0”位于第i行，第j列，对应的盘块b&#x3D;n(i -1)+j</li>
<li>修改位示图“0”变“1”</li>
</ol>
<h4 id="盘块回收"><a href="#盘块回收" class="headerlink" title="盘块回收"></a>盘块回收</h4><p>i&#x3D;（b-1）&#x2F;n +1<br>j&#x3D;（b-1）%n +1</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><h3 id="文件控制块FCB"><a href="#文件控制块FCB" class="headerlink" title="文件控制块FCB"></a>文件控制块FCB</h3><p>FCB必须连续存放</p>
<p>FCB的有序集合称为文件目录</p>
<p>FCB包含的信息：</p>
<ol>
<li>基本信息</li>
<li>存取控制信息 文件存取权限等</li>
<li>使用信息 文件建立时间、修改时间</li>
</ol>
<h3 id="索引结点"><a href="#索引结点" class="headerlink" title="索引结点"></a>索引结点</h3><p>UNXI中的磁盘索引结点包含信息：</p>
<ol>
<li>文件主标识符 个人或小组</li>
<li>文件类型 普通文件、目录文件、特别文件</li>
<li>文件存取权限</li>
<li>文件物理地址 13个地址项iaddr(0)~iaddr(12)</li>
<li>文件长度 以字节为单位</li>
<li>文件链接计数</li>
<li>文件存取时间</li>
</ol>
<p>文件被打开时有增加了以下内容：</p>
<ul>
<li>索引结点编号 标识内存索引结点</li>
<li>状态 指示是否上锁或被修改</li>
<li>访问计数</li>
<li>逻辑设备号</li>
<li>链接指针</li>
</ul>
<h3 id="目录结构-1"><a href="#目录结构-1" class="headerlink" title="目录结构"></a>目录结构</h3><p>所要执行的操作</p>
<ul>
<li>搜索</li>
<li>创建文件</li>
<li>删除文件</li>
<li>显示目录</li>
<li>修改目录</li>
</ul>
<h4 id="单级目录结构"><a href="#单级目录结构" class="headerlink" title="单级目录结构"></a>单级目录结构</h4><p>一个文件占一个目录</p>
<h4 id="两级目录结构"><a href="#两级目录结构" class="headerlink" title="两级目录结构"></a>两级目录结构</h4><h5 id="主文件目录MFD"><a href="#主文件目录MFD" class="headerlink" title="主文件目录MFD"></a>主文件目录MFD</h5><p>记录用户文件目录所在位置和用户名</p>
<h5 id="用户文件目录UFD"><a href="#用户文件目录UFD" class="headerlink" title="用户文件目录UFD"></a>用户文件目录UFD</h5><p>用户文件的FCB</p>
<h4 id="多级目录结构"><a href="#多级目录结构" class="headerlink" title="多级目录结构"></a>多级目录结构</h4><p>树形目录结构</p>
<p>从根目录出发的路径是绝对路径</p>
<p><strong>当前目录</strong> ：基于当前工作目录（相对路径）</p>
<p>方便对文件分类</p>
<h4 id="无环图目录结构"><a href="#无环图目录结构" class="headerlink" title="无环图目录结构"></a>无环图目录结构</h4><p>树形目录结构的基础上增加了一些指向同一结点的有向边</p>
<p>实现文件共享</p>
<h2 id="目录实现"><a href="#目录实现" class="headerlink" title="目录实现"></a>目录实现</h2><h3 id="线性列表"><a href="#线性列表" class="headerlink" title="线性列表"></a>线性列表</h3><p>最简单的方法：使用存储文件名和数据指针的线性表</p>
<h3 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h3><p>根据文件名，得到一个值，并返回一个指向线性列表中元素的指针。</p>
<h2 id="文件共享"><a href="#文件共享" class="headerlink" title="文件共享"></a>文件共享</h2><h3 id="从系统管理的角度，三种方法实现文件共享"><a href="#从系统管理的角度，三种方法实现文件共享" class="headerlink" title="从系统管理的角度，三种方法实现文件共享"></a>从系统管理的角度，三种方法实现文件共享</h3><ol>
<li>绕道法</li>
<li>链接法</li>
<li>基本文件目录表</li>
</ol>
<h3 id="现代常用的两种共享方法"><a href="#现代常用的两种共享方法" class="headerlink" title="现代常用的两种共享方法"></a>现代常用的两种共享方法</h3><h4 id="基于索引结点的共享方式（硬链接）"><a href="#基于索引结点的共享方式（硬链接）" class="headerlink" title="基于索引结点的共享方式（硬链接）"></a>基于索引结点的共享方式（硬链接）</h4><p>树形结构中，当有两个或多个用户要共享一个子目录或文件时，必须将共享文件或子目录链接到两个或多个用户的目录中。</p>
<h4 id="利用符号链实现文件共享（软链接）"><a href="#利用符号链实现文件共享（软链接）" class="headerlink" title="利用符号链实现文件共享（软链接）"></a>利用符号链实现文件共享（软链接）</h4><p>创建一个LINK类型的新文件，B用户借助该文件实现对A用户的F文件的共享，新文件也取名F，其中存放F的路径名，视为符号链。</p>
<h4 id="注"><a href="#注" class="headerlink" title="注"></a>注</h4><p>硬链接和软链接都是静态共享方法。</p>
<h2 id="文件保护"><a href="#文件保护" class="headerlink" title="文件保护"></a>文件保护</h2><p>文件的保护方式有<strong>口令保护、加密保护、访问控制</strong>等。</p>
<h3 id="存取控制"><a href="#存取控制" class="headerlink" title="存取控制"></a>存取控制</h3><h4 id="存取控制分三个步骤"><a href="#存取控制分三个步骤" class="headerlink" title="存取控制分三个步骤"></a>存取控制分三个步骤</h4><ol>
<li>审定用户的存取权限</li>
<li>比较用户权限与用户的本次存取要求是否一致</li>
<li>将存取要求和被访问文件的保密性比较，看是否有冲突</li>
</ol>
<h4 id="四种方式来验证用户的存取"><a href="#四种方式来验证用户的存取" class="headerlink" title="四种方式来验证用户的存取"></a>四种方式来验证用户的存取</h4><h5 id="1-存取控制矩阵"><a href="#1-存取控制矩阵" class="headerlink" title="1. 存取控制矩阵"></a>1. 存取控制矩阵</h5><p>二维矩阵，一维是所有的用户，一维是所有的文件。<br>对应的矩阵元素是用户对文件的存取权限，包括读R，写W，执行E。</p>
<h5 id="2-存取控制表"><a href="#2-存取控制表" class="headerlink" title="2. 存取控制表"></a>2. 存取控制表</h5><p>（访问控制表）<br>规定每个用户名和其所允许的访问类型<br>精简的表分三种用户类型</p>
<ul>
<li>拥有者 </li>
<li>组</li>
<li>其他</li>
</ul>
<h5 id="3-口令"><a href="#3-口令" class="headerlink" title="3. 口令"></a>3. 口令</h5><p>分两种</p>
<ul>
<li>一种是当用户进入系统时，为建立终端进程时获得操作系统使用权的口令</li>
<li>另一种是每一个用户创建文件夹时，为每一个创建的文件设置一个口令，并将其置于文件说明中。</li>
</ul>
<h5 id="4-密码术"><a href="#4-密码术" class="headerlink" title="4. 密码术"></a>4. 密码术</h5><p>比口令方式保密性好</p>
<h2 id="文件系统的结构层次模型"><a href="#文件系统的结构层次模型" class="headerlink" title="文件系统的结构层次模型"></a>文件系统的结构层次模型</h2><p>用户接口(系统调用)——符号文件系统SFD(文件名—&gt;文件标识符fd)——基本文件系统BFD(由fd—&gt;获得控制信息)——存取控制验证(合法性检查)——逻辑文件系统(逻辑块号—&gt;相对块号)——物理文件系统(相对块号—&gt;物理块号)——存储设备分配 或 设备策略模块(物理块号—&gt;设备要求的地址格式)——启动IO</p>
<h2 id="磁盘调度算法"><a href="#磁盘调度算法" class="headerlink" title="磁盘调度算法"></a>磁盘调度算法</h2><p>一次磁盘读写操作的时间由寻道时间、旋转延迟和传输时间决定。</p>
<ul>
<li>寻道时间Ts&#x3D;与磁盘转速有关的常数m*n条磁道+启动磁臂的时间s，其中m约等于0.2ms，s约等于2ms</li>
<li>旋转延迟时间Tr&#x3D;1&#x2F;2*磁盘旋转速度r 5400转的磁盘一周11.1ms，Tr为5.55ms</li>
<li>传输时间Tt&#x3D;每次所读写的字节数b&#x2F;（磁盘每秒转速r*一个磁道上的字节数N） </li>
<li>总平均存取时间Ta&#x3D;Ts+Tr+Tt</li>
</ul>
<h3 id="磁盘调度算法-1"><a href="#磁盘调度算法-1" class="headerlink" title="磁盘调度算法"></a>磁盘调度算法</h3><h4 id="先来先服务FCFS"><a href="#先来先服务FCFS" class="headerlink" title="先来先服务FCFS"></a>先来先服务FCFS</h4><p>寻找先来的</p>
<h4 id="最短寻找时间优先SSTF"><a href="#最短寻找时间优先SSTF" class="headerlink" title="最短寻找时间优先SSTF"></a>最短寻找时间优先SSTF</h4><p>寻找离最近的</p>
<h4 id="扫描算法SCAN"><a href="#扫描算法SCAN" class="headerlink" title="扫描算法SCAN"></a>扫描算法SCAN</h4><p>（电梯调度）<br>走到头（<strong>磁盘</strong>的最远端）再回头</p>
<h4 id="循环扫描C-SCAN"><a href="#循环扫描C-SCAN" class="headerlink" title="循环扫描C-SCAN"></a>循环扫描C-SCAN</h4><p>走到头再回头+只沿一个方向走</p>
<h4 id="LOOK-C-LOOK"><a href="#LOOK-C-LOOK" class="headerlink" title="LOOK C-LOOK"></a>LOOK C-LOOK</h4><p>与SCAN和C-SCAN类似<br>但是走到<strong>最远端的请求</strong>就回头</p>
<p>设文件索引结点中有7个地址项，其中4个地址项是直接地址索引，2个地址项是一级间接地址索引，1个地址项是二级间接地址索引，每个地址项大小为4B，若磁盘索引块和磁盘数据块大小均为256B，则可表示单个文件的最大长度为（）<br>4个直接地址索引指向的数据块大小为4<em>256B。<br>每个磁盘索引块有256&#x2F;4&#x3D;64个地址项。<br>2个一级间接索引包含2</em>64个地址项，所指向的数据块大小为2<em>64</em>256B<br>1个二级索引指向的数据块大小为1<em>64</em>64<em>256B<br>最大长度为（4+2</em>64+2<em>64</em>64）*256B</p>
<p>簇大小相当于磁盘索引块大小<br>4KB的簇可放4K&#x2F;4&#x3D;1024个4B的地址项<br><strong>可表示的文件的总个数受限于文件索引结点的总个数</strong><br>所以在计算最多存多少文件的时候除了考虑簇大小，还应考虑文件索引结点的总个数。<br>如每个文件索引结点占64B，文件系统用1M个簇存放文件索引结点，512M个簇存放文件数据，文件大小为5600B，则索引总个数为1M*4KB&#x2F;64B&#x3D;65M，簇占4KB一个文件占2个簇，512M个簇可存放256M个文件。则最后最多存放64M个文件。</p>
<h2 id="IO设备"><a href="#IO设备" class="headerlink" title="IO设备"></a>IO设备</h2><h3 id="按使用特性分"><a href="#按使用特性分" class="headerlink" title="按使用特性分"></a>按使用特性分</h3><ul>
<li>人机交互类外部设备</li>
<li>存储设备</li>
<li>网络通信设备</li>
</ul>
<h3 id="按传输速率分"><a href="#按传输速率分" class="headerlink" title="按传输速率分"></a>按传输速率分</h3><ul>
<li>低速设备 每秒几字节到几百字节</li>
<li>中速设备 每秒数千字节到上万字节</li>
<li>高速设备 每秒数百千字节到千兆字节</li>
</ul>
<h3 id="按信息交换单位分"><a href="#按信息交换单位分" class="headerlink" title="按信息交换单位分"></a>按信息交换单位分</h3><ul>
<li>块设备</li>
<li>字符设备</li>
</ul>
<h2 id="IO控制方式"><a href="#IO控制方式" class="headerlink" title="IO控制方式"></a>IO控制方式</h2><h3 id="程序直接控制方式"><a href="#程序直接控制方式" class="headerlink" title="程序直接控制方式"></a>程序直接控制方式</h3><p>CPU与IO只能串行工作</p>
<h3 id="中断驱动方式"><a href="#中断驱动方式" class="headerlink" title="中断驱动方式"></a>中断驱动方式</h3><p>允许IO设备主动打断CPU的运行并请求服务</p>
<h3 id="DMA"><a href="#DMA" class="headerlink" title="DMA"></a>DMA</h3><p>在IO设备和内存之间开辟直接的数据交换通路 ，彻底解放CPU。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>基本单位是数据块</li>
<li>数据从设备直接送入内存</li>
<li>整块数据的传送都是在DMA控制器下控制的</li>
</ul>
<h4 id="必须的寄存器"><a href="#必须的寄存器" class="headerlink" title="必须的寄存器"></a>必须的寄存器</h4><ul>
<li>命令&#x2F;状态寄存器（CR）存放控制信息，或设备状态</li>
<li>内存地址寄存器（MAR）设备到内存的起始目标地址和内存到设备的内存源地址</li>
<li>数据寄存器（DR） 暂存数据</li>
<li>数据寄存器（DC） 存放本次要传送的字节数</li>
</ul>
<h3 id="通道控制方式"><a href="#通道控制方式" class="headerlink" title="通道控制方式"></a>通道控制方式</h3><p>专门负责IO的处理机。<br>可实现CPU、通道、IO设备的并行工作。</p>
<h2 id="IO子系统的层次结构"><a href="#IO子系统的层次结构" class="headerlink" title="IO子系统的层次结构"></a>IO子系统的层次结构</h2><h3 id="用户层IO软件"><a href="#用户层IO软件" class="headerlink" title="用户层IO软件"></a>用户层IO软件</h3><p>实现与用户交互的接口 提供与IO有关的库函数。</p>
<h3 id="设备独立性软件"><a href="#设备独立性软件" class="headerlink" title="设备独立性软件"></a>设备独立性软件</h3><p>实现用户程序与设备驱动器的统一接口、设备命令、设备保护以及设备分配与释放等。<br>将逻辑设备名映射为物理设备名（通过LUT）</p>
<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4><ul>
<li>增加设备分配灵活性</li>
<li>易于实现IO重定向</li>
</ul>
<h4 id="其主要功能"><a href="#其主要功能" class="headerlink" title="其主要功能"></a>其主要功能</h4><ul>
<li>指向所有设备的公有操作</li>
<li>向用户层提供统一接口</li>
</ul>
<h3 id="设备驱动程序"><a href="#设备驱动程序" class="headerlink" title="设备驱动程序"></a>设备驱动程序</h3><p>具体实现系统对设备发出的操作指令，驱动IO设备工作的驱动程序</p>
<h3 id="中断处理程序"><a href="#中断处理程序" class="headerlink" title="中断处理程序"></a>中断处理程序</h3><p>用于保存被中断进程的CPU环境。切换上下文、中断信号源测试、读取设备状态、修改进程状态。</p>
<h3 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h3><h4 id="机械部件"><a href="#机械部件" class="headerlink" title="机械部件"></a>机械部件</h4><p>设备本身</p>
<h4 id="电子部件"><a href="#电子部件" class="headerlink" title="电子部件"></a>电子部件</h4><p>设备控制器（适配器）</p>
<h5 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h5><ul>
<li>接受和识别CPU指令</li>
<li>实现数据交换</li>
<li>发现和记录设备及自身的状态信息</li>
<li>设备地址识别</li>
</ul>
<h5 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h5><ul>
<li>设备控制器与CPU的接口：数据线、地址线、控制线</li>
<li>设备控制器与设备的接口</li>
<li>IO控制逻辑</li>
</ul>
<h2 id="缓冲"><a href="#缓冲" class="headerlink" title="缓冲"></a>缓冲</h2><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><ol>
<li>减少CPU与IO设备间速度不匹配矛盾</li>
<li>减少CPU中断频率</li>
<li>解决基本数据单元大小不匹配问题</li>
<li>提高CPU与IO之间的并行行</li>
</ol>
<h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><ul>
<li>采用硬件缓冲器</li>
<li>采用缓冲区（位于内存）</li>
</ul>
<h3 id="缓冲种类"><a href="#缓冲种类" class="headerlink" title="缓冲种类"></a>缓冲种类</h3><h4 id="单缓冲"><a href="#单缓冲" class="headerlink" title="单缓冲"></a>单缓冲</h4><p>设备和处理机之间设置一个缓冲区。</p>
<h4 id="双缓冲"><a href="#双缓冲" class="headerlink" title="双缓冲"></a>双缓冲</h4><p>因为CPU在传送中存在空闲状态，引入双缓冲。</p>
<h4 id="循环缓冲"><a href="#循环缓冲" class="headerlink" title="循环缓冲"></a>循环缓冲</h4><p>最后一个缓冲区指针指向第一个缓冲区</p>
<h4 id="缓冲池"><a href="#缓冲池" class="headerlink" title="缓冲池"></a>缓冲池</h4><p>多个系统公用的缓冲区组成，形成 空缓冲队列装满输入数据的缓冲队列（输入队列）和装满输出数据的缓冲队列（输出队列）<br>缓冲首部：设备号——数据块号——缓冲器号——互斥标识符——链接指针</p>
<h2 id="设备的分配与回收"><a href="#设备的分配与回收" class="headerlink" title="设备的分配与回收"></a>设备的分配与回收</h2><h3 id="按设备的分配特性分类"><a href="#按设备的分配特性分类" class="headerlink" title="按设备的分配特性分类"></a>按设备的分配特性分类</h3><p>独占式使用设备<br>分时式共享使用设备<br>以SPOOLing方式使用外部设备</p>
<h3 id="设备分配的数据结构"><a href="#设备分配的数据结构" class="headerlink" title="设备分配的数据结构"></a>设备分配的数据结构</h3><h4 id="设备控制表DCT"><a href="#设备控制表DCT" class="headerlink" title="设备控制表DCT"></a>设备控制表DCT</h4><h5 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h5><ul>
<li>设备标识符</li>
<li>设备类型</li>
<li>设备地址或设备号</li>
<li>设备状态</li>
<li>等待队列指针</li>
<li>IO控制器指针</li>
</ul>
<h4 id="通道控制表CHCT"><a href="#通道控制表CHCT" class="headerlink" title="通道控制表CHCT"></a>通道控制表CHCT</h4><h5 id="内容-1"><a href="#内容-1" class="headerlink" title="内容"></a>内容</h5><ul>
<li>通道标识符</li>
<li>通道忙&#x2F;闲标识</li>
<li>等待队列的首&#x2F;尾指针</li>
</ul>
<h4 id="控制器控制表COCT"><a href="#控制器控制表COCT" class="headerlink" title="控制器控制表COCT"></a>控制器控制表COCT</h4><p>反映IO控制器的使用状态及与通道的连接情况等</p>
<h4 id="系统设备表SDT"><a href="#系统设备表SDT" class="headerlink" title="系统设备表SDT"></a>系统设备表SDT</h4><h5 id="内容-2"><a href="#内容-2" class="headerlink" title="内容"></a>内容</h5><ul>
<li>DCT指针</li>
<li>正在使用进程标识符</li>
<li>设备类型和设备标识符</li>
</ul>
<h3 id="设备分配的策略"><a href="#设备分配的策略" class="headerlink" title="设备分配的策略"></a>设备分配的策略</h3><h4 id="设备分配原则"><a href="#设备分配原则" class="headerlink" title="设备分配原则"></a>设备分配原则</h4><p>又要效率又减少死锁还要独立</p>
<h4 id="分配方式"><a href="#分配方式" class="headerlink" title="分配方式"></a>分配方式</h4><p>静态分配<br>动态分配</p>
<h4 id="设备分配算法"><a href="#设备分配算法" class="headerlink" title="设备分配算法"></a>设备分配算法</h4><p>先请求先分配<br>优先级高者分配</p>
<h3 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h3><h4 id="安全分配方式"><a href="#安全分配方式" class="headerlink" title="安全分配方式"></a>安全分配方式</h4><p>每当有IO请求时进入阻塞，直到IO结束被唤醒</p>
<h4 id="不安全分配方式"><a href="#不安全分配方式" class="headerlink" title="不安全分配方式"></a>不安全分配方式</h4><p>进程在IO请求后继续运行</p>
<h3 id="逻辑设备名到物理设备名的映射"><a href="#逻辑设备名到物理设备名的映射" class="headerlink" title="逻辑设备名到物理设备名的映射"></a>逻辑设备名到物理设备名的映射</h3><p>通过逻辑设备表LUT</p>
<h2 id="SPOOLing"><a href="#SPOOLing" class="headerlink" title="SPOOLing"></a>SPOOLing</h2><p>（假脱机技术）</p>
<h3 id="输入输出井"><a href="#输入输出井" class="headerlink" title="输入输出井"></a>输入输出井</h3><h3 id="输入缓冲区和输出缓冲区"><a href="#输入缓冲区和输出缓冲区" class="headerlink" title="输入缓冲区和输出缓冲区"></a>输入缓冲区和输出缓冲区</h3><h3 id="输入进程和输出进程"><a href="#输入进程和输出进程" class="headerlink" title="输入进程和输出进程"></a>输入进程和输出进程</h3><h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><p>提高了IO速度，将独占设备改造成共享设备，实现了虚拟设备功能。</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>操作系统</tag>
        <tag>进程</tag>
      </tags>
  </entry>
  <entry>
    <title>A flowing plasma model to describe drift waves in a cylindrical helicon discharge</title>
    <url>/2023/06/02/A-flowing-plasma-model-to-describe-drift-waves-in-a-cylindrical-helicon-discharge/</url>
    <content><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>一种双流体模型最初是用来描述真空电弧离心机(一个快速旋转、低温、密闭的圆柱形等离子体柱)中的波振荡，该模型被用于解释具有相似密度和场强的RF产生的线性磁化等离子体[WOMBAT(磁化束和湍流上的波)]中的等离子体振荡。与典型的离心等离子体相比，WOMBAT等离子体的归一化旋转频率较慢，温度较低，轴向速度较低。尽管存在这些差异，但双流体模型提供了对WOMBAT等离子体结构的一致描述，并且在测量和预测的<strong>波振荡频率</strong>与<strong>轴向场强</strong>之间取得了定性一致。此外，该模型预测的密度扰动的径向分布与实测数据一致。参数扫描表明，色散曲线对<strong>轴向场强</strong>和<strong>电子温度</strong>敏感，振荡频率随电子温度的变化规律与实验吻合。这些结果巩固了先前的说法，即密度和浮动电位振荡是由密度梯度驱动的电阻漂移模式。据我们所知，这是第一个在远离射频源的扩散区域流动等离子体的详细物理模型。还讨论了模型的可能扩展，包括温度不均匀性和磁场振荡。</p>
<h2 id="WOMBAT装置"><a href="#WOMBAT装置" class="headerlink" title="WOMBAT装置"></a>WOMBAT装置</h2><p><img src="/image-14.png" alt="Figure 1"></p>
<p>该图为不同螺旋波等离子体装置以及典型操作参数</p>
<p><img src="/image-13.png" alt="table from another article"></p>
<h3 id="典型的WOMBAT和PCEN等离子体装置的参数"><a href="#典型的WOMBAT和PCEN等离子体装置的参数" class="headerlink" title="典型的WOMBAT和PCEN等离子体装置的参数"></a>典型的WOMBAT和PCEN等离子体装置的参数</h3><p><img src="/image-15.png" alt="table 1"></p>
<hr>
<p>螺旋等离子体中的低频振荡大致可分为两类:开尔文-亥姆霍兹不稳定性和漂移波</p>
<h2 id="开尔文-亥姆霍兹不确定性（Kelvin–Helmholtz-instability）"><a href="#开尔文-亥姆霍兹不确定性（Kelvin–Helmholtz-instability）" class="headerlink" title="开尔文-亥姆霍兹不确定性（Kelvin–Helmholtz instability）"></a>开尔文-亥姆霍兹不确定性（Kelvin–Helmholtz instability）</h2><p>开尔文-亥姆霍兹不稳定性是由质量流中的速度剪切或两种流体界面上的速度差驱动的这可能发生在螺旋等离子体中，因为离子流体的流动速度比电子慢得多</p>
<h2 id="漂移波（drift-waves）"><a href="#漂移波（drift-waves）" class="headerlink" title="漂移波（drift waves）"></a>漂移波（drift waves）</h2><p>漂移波是由垂直于环境场的等离子体压力梯度驱动的普遍不稳定性它可以在完全电离、磁约束和低β等离子体中产生，并且在线性和环形场几何中都被观察到。</p>
<h2 id="双流体模型"><a href="#双流体模型" class="headerlink" title="双流体模型"></a>双流体模型</h2><p>包括离子流体和电子流体的运动方程和连续性方程:</p>
<p><img src="/image-16.png" alt="(1)"></p>
<p><img src="/image-17.png" alt="(2)"></p>
<p><img src="/image-18.png" alt="(3)"></p>
<p><img src="/image-19.png" alt="(4)"></p>
]]></content>
  </entry>
  <entry>
    <title>An evaluation of different antenna designs for helicon wave excitation in a cylindrical plasma source</title>
    <url>/2023/05/17/An-evaluation-of-different-antenna-designs-for-helicon-wave-excitation-in-a-cylindrical-plasma-source/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Bean的作用域</title>
    <url>/2021/03/12/Bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
    <content><![CDATA[<h2 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h2><span id="more"></span>

<blockquote>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>singleton</p>
<p>单例(默认值)， 在每个SpringIOC容器中，一个bean定义对应一个对象实例</p>
<p>prototype</p>
<p>一个bean定义对应多个对象实例</p>
<p>request</p>
<p>在一次HTTP请求中,一个bean定义对应一-个实例，即每次HTTP请求将会有各自的bean实例，它们依据某个bean定义创建而成。该作用域仅在基于Web的Spring ApplicationContext的情况下有效。</p>
<p>session</p>
<p>在一个HTTP Session 中，一个bean定义对应一个实例。该作用域仅在基于Web 的SpringApplicationContext的情况下有效</p>
<p>global session</p>
<p>在一个全局的HTTP Session中,一个bean定义对应一个实例。典型情况下，仅在使用portlet context的时候有效。该作用域仅在基于Web的Spring ApplicationContext的情况下有效</p>
</blockquote>
<p>注解形式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> (<span class="string">&quot;stu&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>配置文件形式</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot; com.ehshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">    value :简单类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuNo&quot;</span><span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span>&lt;/ property&gt;</span><br><span class="line">    ref:其他类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myaddress&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>分别对其获取两个学生 查看是否为同一个</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">stul</span> <span class="operator">=</span> (Student) context.getBean(S:<span class="string">&quot;student&quot;</span>) ;</span><br><span class="line"><span class="type">Student</span> <span class="variable">stu2</span> <span class="operator">=</span> (Student) context.getBean(S:<span class="string">&quot;student&quot;</span>) ;</span><br><span class="line">System.out.println(stul =stu2) ;</span><br></pre></td></tr></table></figure>

<p>均返回<code>true</code></p>
<p>在xml中scope默认是<code>singleton</code> 可改为<code>prototype</code>。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot; top.ehshyee.entity.Student&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>改后返回<code>false</code></p>
<p>注解中添加</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@scope(&quot;prototype&quot;)</span><span class="comment">//默认singleton</span></span><br></pre></td></tr></table></figure>

<p>对于实例产生的时机 </p>
<p>一些测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;student无参构造&quot;</span>) ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> stuNo, String stuName, <span class="type">int</span> stuAge)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.stuNo = stuNo;</span><br><span class="line">    <span class="built_in">this</span>.stuName = stuName;</span><br><span class="line">    <span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line">    <span class="comment">//有参构造</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>singleton | prototype</p>
<p>执行时机(产生bean的时机) :</p>
<p>（<strong>default</strong>）singleton:容器在初始化时，就会创建对象（唯一的一个）;以后再getBean时，不再产生新的bean.singleton也支持延迟加载(懒加载) :在第一次使用时产生。</p>
<p>prototype:容器在初始化时，不创建对象;只是在每次使用时(每次从容器获取对象时,context.getBean(Xxxx))，再创建对象，并且，每次getBean()都会创建一个新的对象。</p>
<p>延迟加载（注解形式）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@lazy</span></span><br></pre></td></tr></table></figure>

<h2 id="条件注解-–-gt-SpringBoot"><a href="#条件注解-–-gt-SpringBoot" class="headerlink" title="条件注解 –&gt;SpringBoot"></a>条件注解 –&gt;SpringBoot</h2><p>可以让某一个Bean在某些条件下加入Ioc容器，其他情况下不加IoC容器。</p>
<p>a.准备bean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnegerCar</span> <span class="keyword">implements</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OilCar</span> <span class="keyword">implements</span> <span class="title class_">Car</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.增加条件Bean：给每个Bean设置条件，必须实现Condition接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OilCarCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)</span> &#123;</span><br><span class="line">        <span class="comment">//如果当前环境的车类型是Oil，则加入OilCar</span></span><br><span class="line">        <span class="comment">//获取环境</span></span><br><span class="line">        Environment environment=conditionContext.getEnvironment();</span><br><span class="line">        String carType=environment.getProperty(<span class="string">&quot;car.type&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> carType.contains(<span class="string">&quot;oil&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnergyCarCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)</span> &#123;</span><br><span class="line">        <span class="comment">//如果当前环境的车类型是energy，则加入energyCar</span></span><br><span class="line">        <span class="comment">//获取环境</span></span><br><span class="line">        <span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> conditionContext.getEnvironment();</span><br><span class="line">        <span class="type">String</span> <span class="variable">carType</span> <span class="operator">=</span> environment.getProperty(<span class="string">&quot;car.type&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> carType.contains(<span class="string">&quot;energy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c.根据条件加入IOC容器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Conditional</span> (OilCarCondition.class)</span><br><span class="line"><span class="keyword">public</span> Car <span class="title function_">oilCar</span> <span class="params">()</span></span><br><span class="line">&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">oilCar</span>()&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Conditional</span> (EnergyCarCondition.class)</span><br><span class="line"><span class="keyword">public</span> Car <span class="title function_">energyCar</span> <span class="params">()</span></span><br><span class="line">&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">EnergyCar</span> ()&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<p>在VM option中添加参数为oil<code>-Dcar.type=oil</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> testAnnotation &#123;</span><br><span class="line">    <span class="comment">//注解方式</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span> (MyConfig.class);</span><br><span class="line">    String[] beanDefinitionNames = context.getBeanDefinitionNames();</span><br><span class="line">    <span class="keyword">for</span> (String name : beanDefinitionNames) &#123;</span><br><span class="line">        System.out.println(name) ;</span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="给IoC加入Bean的方法"><a href="#给IoC加入Bean的方法" class="headerlink" title="给IoC加入Bean的方法"></a>给IoC加入Bean的方法</h2><p>注解:</p>
<p>​	三层组件: 扫描器+三层注解</p>
<p>​	非三层组件@Confiquration: </p>
<ol>
<li>@Bean+返回值</li>
<li>@import</li>
<li>FactoryBean(工厂 Bean)</li>
</ol>
<h3 id="import使用"><a href="#import使用" class="headerlink" title="@import使用:"></a>@import使用:</h3><p>①直接编写到@Import中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Confiquration</span></span><br><span class="line"><span class="meta">@Import</span> ( &#123;Apple.class, Banana.class&#125; )</span><br><span class="line"><span class="comment">//bean是id 是全类名</span></span><br></pre></td></tr></table></figure>

<p>②自定义ImportSelector接口的实现类，通过selectimports方法实现,方法的返回值就是要纳入IoC容器的Bean),并告知系统自己编写的实现类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports (AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="comment">//return new string[0] ;//返回值就是要加入IOC容器的bean的全类名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="string">&quot;top.eshyee.entity.Apple&quot;</span>, <span class="string">&quot;top.eshyee.entity.Banana&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(Orage.class,MyImportSelector.class)</span></span><br></pre></td></tr></table></figure>

<p>③编写ImportBeanDefinitionRegistrar接口的实现类,重写方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title class_">ImportBeanDefinitionRegistrar</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> &#123;</span><br><span class="line">        BeanDefinition beanDefinition <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>(Orange.class) ;</span><br><span class="line">        <span class="comment">// or BeanDefinition beanDefinition new RootBeanDefinition(&quot;top.eshyee.entity.Orange&quot;) ;</span></span><br><span class="line">        registry.registerBeanDefinition(<span class="string">&quot;myorange&quot;</span>,beanDefinition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(MyImportBeanDefinitionRegistrar)</span></span><br></pre></td></tr></table></figure>

<h3 id="FactoryBean-工厂-Bean"><a href="#FactoryBean-工厂-Bean" class="headerlink" title="FactoryBean(工厂 Bean)"></a>FactoryBean(工厂 Bean)</h3><p>写注册类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getobject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Apple</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Class&lt;?&gt; getobjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> Apple.class ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>bean中实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> FactoryBean&lt;Apple&gt; <span class="title function_">myFactoryBean</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyFactoryBean</span>() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>拿myFactoryBean中的值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">object <span class="title function_">obj</span> <span class="params">(context. getBean( <span class="string">&quot;myFactoryBean&quot;</span>)</span> );</span><br><span class="line">System.out.println(obj) ;</span><br><span class="line">object <span class="title function_">obj</span> <span class="params">(context. getBean( <span class="string">&quot;&amp;myFactoryBean&quot;</span>)</span> );</span><br><span class="line">System.out.println(obj) ;</span><br></pre></td></tr></table></figure>

<p><code>&amp;</code>:不加&amp;获取的是最内部真实的Apple;</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>A 1D cylindrical kinetic wave code for helicon plasma sources</title>
    <url>/2023/07/08/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/</url>
    <content><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>我们描述了一个一维等离子体动力学代码 UFEM，它是专门为处理圆柱形低温等离子体中的射频波激发和传播而设计的。该代码应该广泛应用于螺旋波驱动等离子体源的设计和研究，螺旋波驱动等离子体源越来越多地用于工业等离子体处理。该代码包括碰撞耗散的影响和重要的并行电子动力学，例如描述波吸收所必需的朗道阻尼。它采用电磁势方面的射频场有限元离散化，适用于螺旋波通常传播的较低混合频率范围内的波计算。已知有限拉莫尔半径效应在工业等离子体源中可以忽略不计。因此，这些被忽略，导致介电张量大大简化；特别是，避免了平衡梯度项的复杂问题。用户可以从多种标准天线类型的菜单中进行选择，以便可以轻松地执行天线优化。可以使用四种不同的圆柱系统几何形状。复杂天线近场和短波长模式的重要问题可以完全自洽地处理。我们还针对 Alfven 至较低混合频率范围的四种不同波浪条件对 UFEM 和 ISMENE 5 代码进行了基准测试。最后，我们总结了由实际天线驱动的典型螺旋等离子体源条件下的代码结果。</p>
<h1 id="温等离子体介电张量"><a href="#温等离子体介电张量" class="headerlink" title="温等离子体介电张量"></a>温等离子体介电张量</h1><p>从粒子守恒模型中带有碰撞项的线性化 Vlasov 方程开始</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/56457128067100.png" alt="(1)"></p>
<p>f 是分布函数</p>
<p>n 是密度 </p>
<p>v 是碰撞频率</p>
<p>wc 为特定粒子（电子或离子）的回旋频率</p>
<p>下标1表示扰动量，0表示平衡量（f0为麦克斯韦分布）</p>
<p>可推导出以下形式的等离子体介电张量</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/56631194780500.png" alt="(2)"></p>
<p>VTα&#x3D; (2Tα&#x2F;mα)^(1&#x2F;2)为粒子热速度</p>
<p>综上可知，在所有带电粒子中(电子和离子)wcα占电荷符号</p>
<p>Z是著名的等离子体色散函数</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57148998728900.png"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57167778145700.png" alt="(3)"></p>
<p>这也可以通过二维化的复误差函数来表示</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57242650638700.png" alt="(4)"></p>
<p>上述定义的等离子体色散函数满足对称性要求</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57304824613000.png" alt="(5)"></p>
<p>由Stix在因果关系原理的基础上推导得到。</p>
<p>在磁流体动力学( Mhd )极限下，</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57374076293800.png" alt="(6)"></p>
<p>而张量元素(2)化简为</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57407197366700.png" alt="(7)"></p>
<p>在张量(2)的推导过程中做出的假设是，粒子拉莫尔半径p相对于波场变化的尺度长度较小。</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57752114433400.png" alt="(8)"></p>
<p>而且波的频率并不接近粒子陀螺频率的谐波</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/57787407646600.png" alt="(9)"></p>
<p>通过使用介电张量的”降阶”形式可以实现显著的简化，该形式仅描述快速磁声波( FMW )，但通过FMW耗散可以适当地解释<strong>模式转换</strong>能量，从而消除了与短波长离子Bcrnstein波的数值分辨率有关的问题。</p>
<p>这主要是针对众多面向聚变的设备中的离子回旋共振加热(ICRH)场景，通常需要至少2D数值方案来进行适当的建模。然而，在螺旋波频率范围内，有限拉莫尔半径(FLR)效应往往并不重要。</p>
<p>我们在张量( 2 )中使用的碰撞频率包括电子-离子和离子-电子碰撞 </p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/58881979523300.png" alt="(10)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/58898048826400.png" alt="(11)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/58949934805500.png" alt="(12)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/58968793283100.png" alt="(13)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/59022628752700.png"></p>
<p>对于螺旋波等离子体源，我们往往还必须考虑电子-中性碰撞</p>
<p>由于这种情况下的等离子体通常被限制在绝缘的(玻璃)管中，电子-壁面碰撞可以在等离子体边缘提供一个显著的波耗散机制。电子与壁面的碰撞频率可以表示为</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/60459544848200.png" alt="(14)"></p>
<p>(14)式可以用公式非常精确地近似 </p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/60527728768200.png" alt="(15)"></p>
<h1 id="概述了模型所描述的波型"><a href="#概述了模型所描述的波型" class="headerlink" title="概述了模型所描述的波型"></a>概述了模型所描述的波型</h1><h1 id="UFEM"><a href="#UFEM" class="headerlink" title="UFEM"></a>UFEM</h1><p>UFEM代码是在考虑了helicon等离子体源的情况下设计的。 </p>
<h1 id="数学模型"><a href="#数学模型" class="headerlink" title="数学模型"></a>数学模型</h1><p>方程的有限差分离散。程序ORION [37]采用了( 26 )的方法。</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/94880349801200.png" alt="(26)"></p>
<p>我们介绍了有限元数值算法的理论基础，该算法允许我们获得具有等离子体介电张量(2)的麦克斯韦方程组的无污染解。</p>
<p>我们最终得到如下线性系统，联立方程(34)-(37)，得(4N-3)^2，15对角带矩阵(虽然有点麻烦,但我们在这里重现它,因为它是剩余分析所需要的)：</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93811600288000.png" alt="(34)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93839575856200.png"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93868134675400.png" alt="(35)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93890034952500.png" alt="(36)"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93923001449800.png" alt="(37)"></p>
<p>其中：</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/93979131725100.png"></p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/94004794358800.png"></p>
<h1 id="能量沉积"><a href="#能量沉积" class="headerlink" title="能量沉积"></a>能量沉积</h1><p>半径为r的等离子体柱内的总功率沉积率Q(r)可以通过介电张量的反厄米部分表示并分裂为(m,kz)模。</p>
<p><img src="/./pic/A-1D-cylindrical-kinetic-wave-code-for-helicon-plasma-sources/95036629168700.png" alt="(42)"></p>
<h1 id="注"><a href="#注" class="headerlink" title="注"></a>注</h1><p>文中对<strong>介电张量</strong>在不同角度求解</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7.3安装MySQL8</title>
    <url>/2020/02/26/CentOS7-3%E5%AE%89%E8%A3%85MySQL8/</url>
    <content><![CDATA[<p>这得追溯到刚过完年那会儿，现在想想都心酸。</p>
<span id="more"></span>

<p>环境：</p>
<p>CentOS7.3</p>
<h2 id="千万别装最新版的MySQL8！"><a href="#千万别装最新版的MySQL8！" class="headerlink" title="千万别装最新版的MySQL8！"></a>千万别装最新版的MySQL8！</h2><p>我亲测，去了官网下了最新版的安装文件，很开心的装结果装到一半，依赖版本不够，装新依赖版本，然后牵扯出其他依赖版本不够。崩溃🤢🤢🤢</p>
<p>目前比较稳妥的版本应该是<strong>8.0.13</strong></p>
<h4 id="删掉自带的数据库"><a href="#删掉自带的数据库" class="headerlink" title="删掉自带的数据库"></a>删掉自带的数据库</h4><p>在安装MySQL之前先要把CentOS自带的mariadb，如果不卸载的话，在下面的安装中会报错。</p>
<p>查看mariadb版本<br> <code>rpm -qa | grep mariadb</code></p>
<p>卸载mariadb<br> <code>rpm -e mariadb-libs-5.5.56-2.el7.x86_64 --nodeps</code></p>
<h4 id="去官网找Archives"><a href="#去官网找Archives" class="headerlink" title="去官网找Archives"></a>去官网找Archives</h4><p>下载网址：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
<p>下载历史版本网址：<a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p>
<p>选择红帽，然后 version就是8.0.13，你要够大胆可以尝试稍微新一点的版本，但是我装8.0.19就失败了。</p>
<p>下下来名字大概是<code>mysql-8.0.13-1.el7.x86_64.rpm-bundle.tar</code>字样，那说明咱俩下到了同一个版本👍</p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><h6 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h6><p><code>tar -xvf mysql-8.0.13-1.el7.x86_64.rpm-bundle.tar</code></p>
<p>解压以后差不多是这么几个文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql-community-client-8.0.17-1.el7.x86_64.rpm </span><br><span class="line">mysql-community-common-8.0.17-1.el7.x86_64.rpm  </span><br><span class="line">mysql-community-devel-8.0.17-1.el7.x86_64.rpm  </span><br><span class="line">mysql-community-embedded-compat-8.0.17-1.el7.x86_64.rpm  </span><br><span class="line">mysql-community-libs-8.0.17-1.el7.x86_64.rpm  </span><br><span class="line">mysql-community-libs-compat-8.0.17-1.el7.x86_64.rpm </span><br><span class="line">mysql-community-server-8.0.17-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-test-8.0.17-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h6 id="必须安装（注意安装顺序‼）"><a href="#必须安装（注意安装顺序‼）" class="headerlink" title="必须安装（注意安装顺序‼）"></a>必须安装（注意安装顺序‼）</h6><p>我只装了必须安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-8.0.13-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h6 id="非必须安装（注意安装顺序‼）"><a href="#非必须安装（注意安装顺序‼）" class="headerlink" title="非必须安装（注意安装顺序‼）"></a>非必须安装（注意安装顺序‼）</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh mysql-community-libs-compat-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-embedded-compat-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-devel-8.0.13-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-test-8.0.13-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p>安装过程中可能出现很多错误，但基本上逃不过就是依赖问题,诸如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">error:</span><br><span class="line">Failed dependencies:</span><br></pre></td></tr></table></figure>

<p>然后缺什么装什么就好 <code>yum install</code>.</p>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>装好之后就是初始化了，跟再Windows平台类似。</p>
<h6 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure>

<h6 id="目录授权，这一步不能放过嗷"><a href="#目录授权，这一步不能放过嗷" class="headerlink" title="目录授权，这一步不能放过嗷"></a>目录授权，这一步不能放过嗷</h6><p><code>chown -R mysql:mysql /var/lib/mysql/</code></p>
<h6 id="启动MySQL服务"><a href="#启动MySQL服务" class="headerlink" title="启动MySQL服务"></a>启动MySQL服务</h6><p><code>systemctl start mysqld</code></p>
<h6 id="停止MySQL服务"><a href="#停止MySQL服务" class="headerlink" title="停止MySQL服务"></a>停止MySQL服务</h6><p><code>service mysqld stop</code></p>
<h6 id="查看初始密码"><a href="#查看初始密码" class="headerlink" title="查看初始密码"></a>查看初始密码</h6><p><code>cat /var/log/mysqld.log</code></p>
<h6 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h6><p><code>mysql -u root -p</code>,输入初始密码</p>
<h6 id="更改初始密码"><a href="#更改初始密码" class="headerlink" title="更改初始密码"></a>更改初始密码</h6><p><code>alter USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;新密码(必须包含：数字大小写字母特殊字符，长度最小为8位)&#39;;</code></p>
<h4 id="navicat连接数据库"><a href="#navicat连接数据库" class="headerlink" title="navicat连接数据库"></a>navicat连接数据库</h4><h6 id="MySQL8授权"><a href="#MySQL8授权" class="headerlink" title="MySQL8授权"></a>MySQL8授权</h6><p>对于8的MySQL，新建用户并授权写在一句会报错。所以</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;username&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;yourpassword&#x27;;          //创建账户</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#x27;username&#x27;@&#x27;%&#x27; WITH GRANT OPTION;        //赋予权限</span><br><span class="line">mysql&gt; flush privileges;      //刷新权限</span><br></pre></td></tr></table></figure>

<h6 id="配置navicat"><a href="#配置navicat" class="headerlink" title="配置navicat"></a>配置navicat</h6><p>配置如下：（username和password写成刚授权的用户的）</p>
<img src="/2020/02/26/CentOS7-3%E5%AE%89%E8%A3%85MySQL8/image-20200226230721735.png" class="" title="mb1">

<p>连接测试，如果正常配置，没有手残敲错是会成功的。👍</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>MySQL装了我两天左右，主要还是版本问题，以及依赖关系，以及centOS不推荐用MySQL等等等等。。那一阵心态都崩了，现在想想还好。人家TX云都给的centOS7.6的，为啥阿里还活在7.3?!?!?</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>建站之路</category>
      </categories>
      <tags>
        <tag>崩溃的</tag>
      </tags>
  </entry>
  <entry>
    <title>C++小tips</title>
    <url>/2021/03/12/C++%E5%B0%8Ftips/</url>
    <content><![CDATA[<h1 id="C-小tips"><a href="#C-小tips" class="headerlink" title="C++小tips"></a>C++小tips</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//#include &quot;swap.h&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义常量--第一种方式--宏常量</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Pi 3.14</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">numGuess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;猜数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> uu = <span class="number">0</span>;</span><br><span class="line">	cin &gt;&gt; uu;</span><br><span class="line">	<span class="type">int</span> num = <span class="built_in">rand</span>() % <span class="number">100</span>;</span><br><span class="line">	<span class="keyword">while</span> (uu != num)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (uu &gt; num) &#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;大了&quot;</span> &lt;&lt; endl;</span><br><span class="line">			cin &gt;&gt; uu;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;小了&quot;</span> &lt;&lt; endl;</span><br><span class="line">			cin &gt;&gt; uu;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;猜对了&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> uu;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">foruse</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">	<span class="type">float</span> i = <span class="number">1.000001</span>;</span><br><span class="line">	<span class="keyword">for</span> (; i &lt; u; )</span><br><span class="line">	&#123;</span><br><span class="line">		i *= i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">base</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//注释</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Hello Shyee&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">/*多行</span></span><br><span class="line"><span class="comment">		注释*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建变量a</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a= &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//定义常量的第二种方法--const</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> Day = <span class="number">7</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Pi= &quot;</span> &lt;&lt; Pi &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Day= &quot;</span> &lt;&lt; Day &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//Day = 18; 修改常量会报错</span></span><br><span class="line">	</span><br><span class="line">	<span class="type">short</span> b = <span class="number">65536</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;b=&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//SizeOf关键字</span></span><br><span class="line">	<span class="comment">//求数据类型站内存的大小</span></span><br><span class="line"></span><br><span class="line">	<span class="type">short</span> num1 = <span class="number">10</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;short占内存大小为：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">short</span>) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;short占内存大小为：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(num1) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	short[短整型)</span></span><br><span class="line"><span class="comment">	2字节</span></span><br><span class="line"><span class="comment">	(-2^15~2^15 - 1)</span></span><br><span class="line"><span class="comment">	int(整型)</span></span><br><span class="line"><span class="comment">	4字节</span></span><br><span class="line"><span class="comment">	(-2 ^ 31 ~2 ^ 31 - 1)</span></span><br><span class="line"><span class="comment">	long(长整形</span></span><br><span class="line"><span class="comment">	Windows为4字节, Linux为4字节(32位)，8字节(64位)</span></span><br><span class="line"><span class="comment">	(-2 ^ 31 ~2 ^ 31 - 1)</span></span><br><span class="line"><span class="comment">	long long(长长整形</span></span><br><span class="line"><span class="comment">	8字节</span></span><br><span class="line"><span class="comment">	(-2 ^ 63 ~2 ^ 63 - 1)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> f1 = <span class="number">3.14f</span>;<span class="comment">//小数默认时双精度，所以后面加一个f</span></span><br><span class="line">	<span class="type">double</span> f2 = <span class="number">3.14</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f1:&quot;</span> &lt;&lt; f1 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f2:&quot;</span> &lt;&lt; f2 &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//科学计数法 </span></span><br><span class="line">	<span class="type">float</span> f3 = <span class="number">3e2</span>;<span class="comment">//e:10^2</span></span><br><span class="line">	cout &lt;&lt; f3 &lt;&lt; endl;</span><br><span class="line">	<span class="type">float</span> f4 = <span class="number">3e-2</span>;<span class="comment">//e:0.1^2</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f4:&quot;</span> &lt;&lt; f4 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//字符型</span></span><br><span class="line">	<span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;ch占用内存空间:&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(ch) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a对应的ASCII码&quot;</span> &lt;&lt; (<span class="type">int</span>)ch &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//c中的字符串</span></span><br><span class="line">	<span class="type">char</span> str1[] = <span class="string">&quot;C String&quot;</span>;</span><br><span class="line">	<span class="comment">//c++中的字符串</span></span><br><span class="line">	</span><br><span class="line">	string str2 = <span class="string">&quot;C++ String&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; str2 &lt;&lt; endl;<span class="comment">//使用时需要加一个头文件&lt;string&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//布尔数据</span></span><br><span class="line">	<span class="type">bool</span> x = <span class="literal">true</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;布尔类型的大小：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(x) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//数据的输入</span></span><br><span class="line">	<span class="comment">//整形</span></span><br><span class="line">	<span class="type">int</span> u=<span class="number">0</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请给整型变量u进行赋值&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cin &gt;&gt; u;</span><br><span class="line">	cout &lt;&lt; u &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//浮点型</span></span><br><span class="line">	<span class="type">float</span> f = <span class="number">1.1f</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;给float进行赋值&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//cin &gt;&gt; f;</span></span><br><span class="line">	cout &lt;&lt; f &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//字符串</span></span><br><span class="line">	string strl = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;给String进行赋值&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//cin &gt;&gt; strl;</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;字符串strl:&quot;</span> &lt;&lt; strl &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//if</span></span><br><span class="line">	<span class="keyword">if</span> (u &lt; <span class="number">45</span>)</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;u小于45&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;u不小于45&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">switch</span> (u)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;u此时被switch找到&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (u&lt;<span class="number">20</span>) &#123;</span><br><span class="line">		u++;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt;<span class="string">&quot;while让u自增到：&quot;</span>&lt;&lt; u &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//三只小猪称体重</span></span><br><span class="line">	<span class="comment">/*int piga = 0, pigb = 0, pigc = 0;</span></span><br><span class="line"><span class="comment">	cout &lt;&lt; &quot;分别输入三个重量&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">	cin &gt;&gt; piga;</span></span><br><span class="line"><span class="comment">	cin &gt;&gt; pigb;</span></span><br><span class="line"><span class="comment">	cin &gt;&gt; pigc;</span></span><br><span class="line"><span class="comment">	string fs = piga &gt; pigb ? (piga &gt; pigc ? &quot;a最重&quot; : &quot;c最重&quot;) : (pigb &gt; pigc ? &quot;b最重&quot; : &quot;c最重&quot;);</span></span><br><span class="line"><span class="comment">	cout &lt;&lt; fs &lt;&lt; endl;*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//猜数字100以内</span></span><br><span class="line">	<span class="comment">//u=numGuess();</span></span><br><span class="line">	</span><br><span class="line">	f = foruse(u);</span><br><span class="line">	cout&lt;&lt;f&lt;&lt;endl;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">arraylearn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//数组</span></span><br><span class="line">	<span class="type">int</span> a[<span class="number">6</span>];</span><br><span class="line">	<span class="type">char</span> c[] = &#123; <span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;t&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;n&#x27;</span>,<span class="string">&#x27;g&#x27;</span> &#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">char</span> i:c) &#123;</span><br><span class="line">		cout &lt;&lt; i;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(a[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(a)&lt;&lt;endl;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(a)/ <span class="built_in">sizeof</span>(a[<span class="number">0</span>])&lt;&lt;<span class="string">&quot;个元素&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &amp;a[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; &amp;a[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; (<span class="type">int</span>)&amp;a[<span class="number">1</span>]-(<span class="type">int</span>)&amp;a[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//数组是常量</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fivePigsWeght</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> h = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> a[<span class="number">5</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>;i++) &#123;</span><br><span class="line">		cin &gt;&gt; a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i:a) &#123;</span><br><span class="line">		h=h &lt; i ? i : h;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; h &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//地址传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>* c = <span class="number">0</span>;</span><br><span class="line">	c = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = c;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap01</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//参数传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap03</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap02</span><span class="params">(<span class="type">int</span> *p1,<span class="type">int</span> *p2)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> temp = *p1;</span><br><span class="line">	*p1 = *p2;</span><br><span class="line">	*p2 = *p1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用swap(&amp;a,&amp;b)可实现地址传递的函数调用</span></span><br><span class="line"><span class="comment">//值传递不会修改实参</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">arrayResive</span><span class="params">(<span class="type">int</span> b[])</span> </span>&#123;</span><br><span class="line">	<span class="comment">//int a[] = b;</span></span><br><span class="line">	<span class="type">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">	<span class="type">int</span> f = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> t = <span class="built_in">sizeof</span>(a) / <span class="built_in">sizeof</span>(a[<span class="number">0</span>])<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i:a) &#123;</span><br><span class="line">		cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (f &lt; t) &#123;</span><br><span class="line">		<span class="built_in">swap</span>(a[f], a[t]);</span><br><span class="line">		f++;</span><br><span class="line">		t--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*for (int i = 0;i&lt; sizeof(a) / sizeof(a[0]);i++) &#123;</span></span><br><span class="line"><span class="comment">		if (f&lt;t) &#123;</span></span><br><span class="line"><span class="comment">			swap(a[f], a[t]);</span></span><br><span class="line"><span class="comment">			f++;</span></span><br><span class="line"><span class="comment">			t--;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		else &#123;</span></span><br><span class="line"><span class="comment">			break;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">		cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">helloworld</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">point</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span>* p;</span><br><span class="line">	p = &amp;a;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a的地址为：&quot;</span> &lt;&lt; &amp;a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;p的值:&quot;</span> &lt;&lt; p &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//指针前加一个*代表解引用，找到指针所指向的内存的数据</span></span><br><span class="line">	*p = <span class="number">100</span>;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pointSe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*在32操作系统下占4个字节</span></span><br><span class="line"><span class="comment">		64位系统占8个字节*/</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span>* p = &amp;a;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">nullpointAndRow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//空指针用于给指针变量进行初始化</span></span><br><span class="line">	<span class="comment">//空指针不可以进行访问</span></span><br><span class="line">	<span class="type">int</span>* p = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="comment">//*p = 100;</span></span><br><span class="line">	<span class="comment">//野指针</span></span><br><span class="line">	<span class="type">int</span>* q = (<span class="type">int</span>*)<span class="number">0x1100</span>;</span><br><span class="line">	cout &lt;&lt; *q &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//const修饰指针</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">constpoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">20</span>;</span><br><span class="line">	<span class="comment">//常量指针</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>* p = &amp;a;</span><br><span class="line">	<span class="comment">/*指针指向可以改</span></span><br><span class="line"><span class="comment">		指针指向的值不可改*/</span></span><br><span class="line">	<span class="comment">//指针常量</span></span><br><span class="line">	<span class="type">int</span>* <span class="type">const</span> q = &amp;a;</span><br><span class="line">		<span class="comment">//指针的指向不可以改</span></span><br><span class="line">		<span class="comment">//指针指向的值可以改</span></span><br><span class="line"></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> x = &amp;a;</span><br><span class="line">	<span class="comment">//两者都不能改</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//指针和数组</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">arrpoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> arr[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line">	<span class="type">int</span>* p = arr;</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; *++p &lt;&lt; endl;</span><br><span class="line">	<span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//cout &lt;&lt; *++p &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">/*while (*p!=NULL)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		n++;</span></span><br><span class="line"><span class="comment">		p++;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	cout &lt;&lt;&quot;n的值为：&quot;&lt;&lt; n &lt;&lt; endl;*/</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//冒泡排序</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bubbleSort</span><span class="params">(<span class="type">int</span>* a ,<span class="type">int</span> length )</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length<span class="number">-1</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; length-i<span class="number">-1</span>;j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (*(a+j)&gt;*(a+j+<span class="number">1</span>)) &#123;</span><br><span class="line">				<span class="comment">//cout&lt;&lt;&quot;if中的&quot;&lt;&lt; *(a + j + 1) &lt;&lt;endl;</span></span><br><span class="line">				<span class="type">int</span> temp = *(a + j + <span class="number">1</span>);</span><br><span class="line">				*(a + j + <span class="number">1</span>) = *(a + j);</span><br><span class="line">				*(a + j) = temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i =<span class="number">0</span> ; i &lt; length;i++) &#123;</span><br><span class="line">		cout &lt;&lt; *(a + i)&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结构体</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">structLearn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//创建学生类型</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">	&#123;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		<span class="type">int</span> score;</span><br><span class="line">	&#125; s3;</span><br><span class="line">	<span class="comment">//通过学生类型创建具体的 变量</span></span><br><span class="line">	<span class="comment">//在C++中结构体创建的时候，Struct可以省略</span></span><br><span class="line">	Student s1;</span><br><span class="line">	s1.name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">	s1.age = <span class="number">14</span>;</span><br><span class="line">	s1.score = <span class="number">90</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名&quot;</span> &lt;&lt; s1.name &lt;&lt; <span class="string">&quot;年龄&quot;</span> &lt;&lt; s1.age &lt;&lt; <span class="string">&quot;成绩&quot;</span> &lt;&lt; s1.score &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span> s2&#123;<span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span> &#125;;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名&quot;</span> &lt;&lt; s2.name &lt;&lt; <span class="string">&quot;年龄&quot;</span> &lt;&lt; s2.age &lt;&lt; <span class="string">&quot;成绩&quot;</span> &lt;&lt; s2.score &lt;&lt; endl;</span><br><span class="line">	s3.name = <span class="string">&quot;王五&quot;</span>;</span><br><span class="line">	s3.age = <span class="number">12</span>;</span><br><span class="line">	s3.score = <span class="number">94</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名&quot;</span> &lt;&lt; s3.name &lt;&lt; <span class="string">&quot;年龄&quot;</span> &lt;&lt; s3.age &lt;&lt; <span class="string">&quot;成绩&quot;</span> &lt;&lt; s3.score &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体数组</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">structArray</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//创建结构体</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">	&#123;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		<span class="type">int</span> score;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="comment">//创建结构体数组</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span> stuArray[<span class="number">3</span>] = &#123;</span><br><span class="line">		&#123;<span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;李四&quot;</span>,<span class="number">15</span>,<span class="number">93</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;王五&quot;</span>,<span class="number">14</span>,<span class="number">95</span>&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	stuArray[<span class="number">2</span>].age = <span class="number">18</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;姓名&quot;</span> &lt;&lt; stuArray[i].name &lt;&lt; <span class="string">&quot;年龄&quot;</span> &lt;&lt; stuArray[i].age &lt;&lt; <span class="string">&quot;成绩&quot;</span> &lt;&lt; stuArray[i].score &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体指针</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">structPoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//第一学生的结构体</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">	&#123;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		<span class="type">int</span> score;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="comment">//创建结构体变量</span></span><br><span class="line">	Student s = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span> &#125;;</span><br><span class="line">	<span class="comment">//通过指针指向结构题变量</span></span><br><span class="line">	Student* p=&amp;s;</span><br><span class="line">	<span class="comment">//通过指针访问结构体变量中的数据</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt;p-&gt;name&lt;&lt;endl ;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结构体嵌套结构体</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strInStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">	&#123;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		<span class="type">int</span> score;</span><br><span class="line">	&#125;stu1 = &#123;<span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span>&#125;;</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Teacher</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> id;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		Student stu;</span><br><span class="line">	&#125;;</span><br><span class="line">	Teacher t1 = &#123;<span class="number">1</span>,<span class="string">&quot;王五&quot;</span>,<span class="number">30</span>,stu1 &#125;;</span><br><span class="line">	Teacher* p1 = &amp;t1;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; p1-&gt;name &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; p1-&gt;age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;编号：&quot;</span> &lt;&lt; p1-&gt;id &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;所教学生：&quot;</span> &lt;&lt; p1-&gt;stu.name &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结构体做函数参数</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">&#123;</span><br><span class="line">	string name;</span><br><span class="line">	<span class="type">int</span> age;</span><br><span class="line">	<span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//值传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStu</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; stu.name &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; stu.age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//地址传递</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStu2</span><span class="params">(Student* p)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;</span><br><span class="line">	p-&gt;age = <span class="number">232</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strArg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu1 = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span> &#125;;</span><br><span class="line">	<span class="comment">//printStu(stu1);</span></span><br><span class="line">	<span class="built_in">printStu2</span>(&amp;stu1);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//const与结构体</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStu2withConst</span><span class="params">(<span class="type">const</span> Student* p)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;年龄：&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;成绩：&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//p-&gt;age = 232;加入const可以防止误操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strConst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Student stu1 = &#123; <span class="string">&quot;张三&quot;</span>,<span class="number">13</span>,<span class="number">91</span> &#125;;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">hero</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">Hero</span> &#123;</span><br><span class="line">		string name;</span><br><span class="line">		<span class="type">int</span> age;</span><br><span class="line">		string sex;</span><br><span class="line">	&#125;;</span><br><span class="line">	Hero heros[<span class="number">5</span>] = &#123;</span><br><span class="line">		&#123;<span class="string">&quot;刘备&quot;</span>,<span class="number">23</span>,<span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;关羽&quot;</span>,<span class="number">22</span>,<span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;张飞&quot;</span>,<span class="number">20</span>,<span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;赵云&quot;</span>,<span class="number">21</span>,<span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;貂蝉&quot;</span>,<span class="number">19</span>,<span class="string">&quot;女&quot;</span>&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">for</span> (Hero hero:heros) &#123;</span><br><span class="line">		cout &lt;&lt; hero.name &lt;&lt; hero.age &lt;&lt; hero.sex &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//冒泡开排</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>;i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>-i; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (heros[j].age&gt;heros[j+<span class="number">1</span>].age)</span><br><span class="line">			&#123;</span><br><span class="line">				Hero hero = heros[j];</span><br><span class="line">				heros[j] = heros[j + <span class="number">1</span>];</span><br><span class="line">				heros[j + <span class="number">1</span>] = hero;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-------------------&quot;</span>&lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (Hero hero : heros) &#123;</span><br><span class="line">		cout &lt;&lt; hero.name &lt;&lt; hero.age &lt;&lt; hero.sex &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局变量、静态变量、常量---都会放在全局区</span></span><br><span class="line"><span class="type">int</span> glob_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> glob_b = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> glob_c = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">vary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> c = <span class="number">10</span>;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> e = <span class="number">10</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;局部变量a的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;局部变量b的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;全局变量glob_a的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;glob_a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;全局变量glob_b的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;glob_b &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;静态变量e的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;e &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;字符串常量的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//const修饰常量</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;const修饰的全局常量glob_c的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;glob_c &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;const修饰的局部常量c的地址:&quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//栈区</span></span><br><span class="line"><span class="comment">//栈区的数据由编译器管理开辟 和释放</span></span><br><span class="line"><span class="comment">//注意：不要返回局部变量的地址</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> * <span class="title">func</span><span class="params">(<span class="type">int</span> b)</span> </span>&#123;<span class="comment">//形参数据也会放在栈区</span></span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//栈区在函数执行后释放</span></span><br><span class="line">	<span class="keyword">return</span> &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">usefunc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>* p = <span class="built_in">func</span>(<span class="number">11</span>);</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;<span class="comment">//第一次可以打印出来正确的结果，因为编译器会做一次保留</span></span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//堆区 由程序员来管理</span></span><br><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//利用new关键字，将数据开辟到堆区</span></span><br><span class="line">	<span class="comment">//指针 本质也是局部变量，放在栈上，指针保存的数据是放在堆区</span></span><br><span class="line">	<span class="type">int</span>* p = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">usefunc2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>* p = <span class="built_in">func2</span>();</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>* p = <span class="built_in">func2</span>();</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//若要删除堆区的数据需要用delete关键字</span></span><br><span class="line">	<span class="keyword">delete</span> p;</span><br><span class="line">	cout &lt;&lt; *p &lt;&lt; endl;<span class="comment">//内存已经释放，再访问就是非法操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> * arr=<span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];<span class="comment">//创建一个数组</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		arr[i] = i + <span class="number">100</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//释放数组的时候要加一个中括号</span></span><br><span class="line">	<span class="keyword">delete</span>[] arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">refrence1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span>&amp; b = a;</span><br><span class="line">	cout &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	a = <span class="number">120</span>;</span><br><span class="line">	cout &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	b = <span class="number">100</span>;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用必须初始化</span></span><br><span class="line"><span class="comment">//引用在初始化后, 不可以改变</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引用做函数参数</span></span><br><span class="line"><span class="comment">//作用 : 函故传参时，可以利用引用的技术让形参修饰实参</span></span><br><span class="line"><span class="comment">//优点:可以简化指针修改实参</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reference2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">8</span>, b = <span class="number">10</span>;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">swap</span>(a,b);</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">swap01</span>(a, b);</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">swap03</span>(a, b);</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用做函数变量的返回值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.不要做局部变量的应用</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.函数的调用可以做左值</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test04</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">static</span> <span class="type">int</span> a = <span class="number">10</span>;<span class="comment">//静态变量，存放在全局区，在程序结束后释放</span></span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reference3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span>&amp; ref = <span class="built_in">test03</span>();</span><br><span class="line">	cout &lt;&lt; ref &lt;&lt; endl;<span class="comment">//编译器会保存一份数据</span></span><br><span class="line">	cout &lt;&lt; ref &lt;&lt; endl;<span class="comment">//第二次的操作就是错误的</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>&amp; ref1 = <span class="built_in">test04</span>();</span><br><span class="line">	cout &lt;&lt; ref1 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; ref1 &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">test04</span>() = <span class="number">1000</span>;</span><br><span class="line">		cout &lt;&lt; ref1 &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; ref1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用的本质</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func0502</span><span class="params">(<span class="type">int</span> &amp; ref)</span> </span>&#123;</span><br><span class="line">	ref = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引用的本质就是一个指针常量</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ref4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span>&amp; ref = a;</span><br><span class="line">	ref = <span class="number">20</span>;</span><br><span class="line">	cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//常量引用</span></span><br><span class="line"><span class="comment">//使用场景：修饰形参，防止误操作</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ref5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">const</span> <span class="type">int</span>&amp; ref = <span class="number">10</span>;<span class="comment">//引用必须引用一块合法的内存空间</span></span><br><span class="line">	<span class="comment">//加上const之后编译器将代码修改为 int temp=10；const int &amp;ref=temp；</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showValue</span><span class="params">( <span class="type">const</span> <span class="type">int</span>&amp; val)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//val = 1000; 不允许修改</span></span><br><span class="line">	cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ref6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line">	<span class="built_in">showValue</span>(a);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;a：&quot;</span>&lt;&lt;a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数的默认参数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func05021</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b=<span class="number">100</span>,<span class="type">int</span> c=<span class="number">10</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注意：</span></span><br><span class="line"><span class="comment">//1.如果某个位置已经有了默认参数，则从这个位置往后，从左到右都必须有默认参数</span></span><br><span class="line"><span class="comment">//2.如果函数声明有默认参数，函数实现就不能有默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func05022</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="built_in">func05021</span>(<span class="number">10</span>,<span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//占位参数</span></span><br><span class="line"><span class="comment">//只放一个数据类型用作占位</span></span><br><span class="line"><span class="comment">//目前阶段的占位参数用不到，占位参数可以有默认参数</span></span><br><span class="line"><span class="comment">//void func05031(int a, 10)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func05031</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span>)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;占位符&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test05031</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">func05031</span>(<span class="number">10</span>,<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数重载</span></span><br><span class="line"><span class="comment">//可以让函数名同名，提高函数的重用性</span></span><br><span class="line"><span class="comment">//·同一个作用域下</span></span><br><span class="line"><span class="comment">//·函数名称相同</span></span><br><span class="line"><span class="comment">//函数参数类型不同或者个数不同或者顺序不同</span></span><br><span class="line"><span class="comment">//函数的返回值不可以做为函数的重载的条件</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;函数reload()重载!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;函数reload(int a)重载&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload</span><span class="params">(<span class="type">double</span> a)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;函数reload(double a)重载&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload</span><span class="params">(<span class="type">double</span> a,<span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;函数reload(double a,int b)重载&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload</span><span class="params">(<span class="type">int</span> a, <span class="type">double</span> b)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;函数reload(int a, double b)重载&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test05032</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">reload</span>(<span class="number">10</span>,<span class="number">1.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数重载的注意事项</span></span><br><span class="line"><span class="comment">//1、引用作为重载的条件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload1</span><span class="params">(<span class="type">int</span> &amp;a)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;reload1(int &amp;a)调用&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload1</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;reload1(const int&amp; a)调用&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test05033</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">reload1</span>(a);<span class="comment">//会调用不带const的</span></span><br><span class="line">	<span class="comment">//reload1(10);//会调用带const的</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2、函数重载碰到默认参数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload2</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b=<span class="number">10</span>)</span> </span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;reload2(int a)&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reload2</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;reload2(int a)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可以编译通过 调用时会出错，二义性，调用函数的时候调用两个参数不会报错</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;MAIN&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//helloworld();</span></span><br><span class="line">	<span class="comment">/*int a = 0, b = 1;</span></span><br><span class="line"><span class="comment">	swap(a,b);</span></span><br><span class="line"><span class="comment">	cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;*/</span></span><br><span class="line">	<span class="comment">/*int a[] = &#123; 1,2,3,4,5,6,7 &#125;;</span></span><br><span class="line"><span class="comment">	arrayResive(a);*/</span></span><br><span class="line">	<span class="comment">//cout &lt;&lt; add(80, 50) &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">/*point();*/</span></span><br><span class="line">	<span class="comment">/*int arr[] = &#123;10,9,8,7,6,5,4,3,2,1&#125;;</span></span><br><span class="line"><span class="comment">	int a=sizeof(arr) / sizeof(arr[0]);</span></span><br><span class="line"><span class="comment">	bubbleSort(arr,a);*/</span></span><br><span class="line">	<span class="comment">/*arrpoint();*/</span></span><br><span class="line">	<span class="comment">//structLearn();</span></span><br><span class="line">	<span class="comment">//structArray();</span></span><br><span class="line">	<span class="comment">/*structPoint();*/</span></span><br><span class="line">	<span class="comment">//strInStr();</span></span><br><span class="line">	<span class="comment">//strArg();</span></span><br><span class="line">	<span class="comment">//hero();</span></span><br><span class="line">	<span class="comment">//vary();</span></span><br><span class="line">	<span class="comment">//test01();</span></span><br><span class="line">	<span class="comment">//reference3();</span></span><br><span class="line">	<span class="comment">//ref6();</span></span><br><span class="line">	<span class="comment">//func05022();</span></span><br><span class="line">	<span class="comment">//test05032();</span></span><br><span class="line">	<span class="built_in">test05033</span>();</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Characteristics of temporal evolution of particle density and electron temperature in helicon discharge</title>
    <url>/2023/08/30/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/</url>
    <content><![CDATA[<p>螺旋放电粒子密度和电子温度随时间演化特征</p>
<h1 id="0-abstract"><a href="#0-abstract" class="headerlink" title="0 abstract"></a>0 abstract</h1><p>在详细考虑电化学反应和碰撞关系的基础上，采用三维二流体方程的螺旋等离子体放电直接数值模拟模型，研究了粒子密度和电子温度随时间演化的特征。在弱电离的假设下，在整个计算域中直接求解与等离子体参数耦合的麦克斯韦方程组。所有偏微分方程均由 COMSOL MultiphysicsTM 中的有限元求解器采用全耦合方法求解。在这项工作中，数值案例是使用 Ar 工作介质和 Shoji 型天线进行计算的。数值结果表明，电子和基原子密度存在两种不同的时间演化模式，这可以通过离子泵浦效应来解释。电子温度的演变由两种方案控制：电磁波加热和粒子碰撞冷却。高射频功率导致高峰值电子温度，而高气压导致低稳定温度。此外，利用改进的CR模型进行了9条Ar I谱线的OES实验，通过模拟验证了结果的有效性，表明电子密度和温度的时间演化趋势与数值模拟结果吻合良好。</p>
<h1 id="1-instruction"><a href="#1-instruction" class="headerlink" title="1 instruction"></a>1 instruction</h1><p>由于螺旋放电可以以相对适中的输入功率产生均匀、高密度的等离子体，因此已广泛应用于等离子体蚀刻和薄膜沉积。在这十年中，太空电力推进领域受到越来越多的关注[1, 2]。脉冲螺旋等离子体与蚀刻速率[3, 4]和薄膜沉积内应力[5]相关的实验表明，性能可以得到很大的提高。此外，还可能解决一些重要的推进器应用问题，例如涉及等离子体分离或湍流交叉场扩散（如在磁性喷嘴中观察到）的问题[6, 7]。</p>
<p>已经对脉冲螺旋放电的瞬态特性进行了一些理论和实验研究。但在实际应用中，它们似乎仍不足以对脉冲宽度和占空比等参数的设计提供直接和精确的指导。以往的理论研究几乎都采用全局模型[8-11]，属于零维范畴。在这些模型中，Lieberman [9] 和 Yoon [10] 使用给定的吸收功率，这与实验结果一致。 Cho[11]通过结合基于平衡模型解的功率吸收计算，将其发展为自洽模型。 Cho模型的结果似乎不太准确，因为它们不包括任何详细的化学反应，并且所有参数在零维模型中都是统一的。在300 W功率下，从射频注入到等离子体稳定的点火持续时间约为20 ms，这比其他人进行的等离子体诊断实验的结果要长得多[12-15]。</p>
<p>先前的工作中，螺旋放电的数值模型主要集中在功率沉积机制和稳态等离子体特性方面[16-18]。然而，就在最近[19]，我们提出了一种三维直接数值模型来模拟稳态等离子体，事实证明该模型表现出良好的性能。在该模型中，在整个计算域中直接求解与等离子体参数耦合的三维麦克斯韦方程。因此，可以轻松计算电磁波在等离子体上沉积的功率。这种方法被命名为“直接数值模拟”，以区别于以前直接给出沉积功率的方法[8,9,20]或用线性扰动理论从理论上推导[21-26]。该模型详细考虑了电化学反应和碰撞关系。通过控制壁面处鞘层理论推导的表面化学反应和粒子通量，将计算域的边界扩展到实体壁面。另一方面，以往的螺旋放电模型大多以前鞘层为边界进行计算，如文献[8-22]，此时无法获得等离子体鞘层的参数。物质的密度和电子能量由漂移扩散方程描述，如[8, 9]中所示。最后，所有偏微分方程均由COMSOL MultiphysicsTM有限元求解器采用全耦合方法求解。</p>
<p>除了稳态工作外，上述高度自洽模型还可以解决瞬态域的问题。本文的主要目的是利用这个更精确的3D数值模型来研究瞬态特性，例如螺旋等离子体在点火阶段的时间尺度和离子泵浦效应。为了验证数值结果的有效性，进行了基于改进的碰撞辐射（CR）模型的光发射光谱（OES）实验，因为它属于螺旋放电中的CR模型类别[13]。</p>
<p>本文的其余部分组织如下：第 2 节简要描述了本工作中采用的数值流体模型；第 3 节显示了螺旋放电中电子密度和温度随时间演化的数值结果；然后第 4 节说明了使用 CR 模型的 Ar I OES 的等离子体诊断实验。最后给出全部内容的结论。</p>
<h1 id="2-数值模型"><a href="#2-数值模型" class="headerlink" title="2 数值模型"></a>2 数值模型</h1><p>全尺寸3D模型示意图如图1所示，在国防科技大学（NUDT）束能量与电磁推进实验室（BEEMP）被称为小型螺旋等离子体源（SHPS）。假设背景磁场和压力是均匀的。 Shoji型天线与放电室处于对称位置，工作介质选用氩气。除非另有说明，本工作采用的放电参数如下：背景磁场B0&#x3D;500 G、射频频率f&#x3D;13.56 MHz、气体温度T0&#x3D;300 K、天线长度La&#x3D;124mm，放电室内径Da&#x3D;32mm，放电室长度Ld&#x3D;350mm。以气体压力P0&#x3D;10 mTorr为初始条件，通过理想气体方程计算中性原子密度。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/63604904881500.png"></p>
<p>图 1. 螺旋放电模拟示意图。</p>
<p>在该模型中，电磁场的交变部分由频域的安培定律计算，而静态部分由双极场计算，扩散由泊松方程求解。物质的密度和电子能量由漂移扩散方程描述</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/63640452122100.png" alt="(1)"></p>
<p>其中磁矢量势为 A，电势为 V，电子密度为 ne，电子能量密度为 n<sub>ε</sub>,基态原子质量分数为 w<sub>Ar</sub>, 激发原子质量分数为 w<sub>Ars</sub>和离子质量分数 w<sub>Ar+</sub> 由控制方程组的七个自变量组成，Je 是产生电磁场的电流密度，R<sub>e</sub>,S<sub>en</sub>,R<sub>k</sub>是电子源项、电子能量和重物质，Γ<sub>e</sub>,Γ<sub>ε</sub>,j<sub>k</sub>是电子、电子能量和重物质的通量矢量，P<sub>dep</sub> 是沉积功率，σ是由等离子体外部材料决定的常数的电导率。弱电离磁化等离子体中的张量可写为：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64081483415100.png" alt="(2)"></p>
<p>其中电子碰撞频率 ve 是电子温度、电子密度和中性粒子密度等参数的复杂函数； Bx、By 和 Bz 是背景磁场的三个分量。</p>
<p>假设漂移扩散近似[27]，通量矢量是通过忽略动量方程的惯性项来定义的。因此，该模型无法解决离子惯性至关重要的动态鞘层过程。然而，鞘层的建立发生在纳秒的尺度上[26]，这比这项工作中等离子体点火的尺度要短得多。因此，本工作中研究稳态鞘层仍然是合理的。此外，已经证明该模型在稳态下参数的分布与经典鞘层理论非常吻合[19]。通量矢量中的温度梯度项也被忽略，因为与密度相比，温度相当均匀[19]，与[28]中相同，其中不考虑传热。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64157821520400.png" alt="(3)"></p>
<p>其中 ρ 是平均质量密度，D<sub>k,f</sub>、z<sub>k</sub> 和 μ<sub>k,f</sub> 分别是重粒子 k 的扩散系数、电荷数和迁移系数。等式（3）中电子的输运参数在存在磁场的情况下是各向异性的，并且由[29]中的关系确定。</p>
<p>P<sub>dep</sub> 由麦克斯韦方程计算：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64246466676400.png" alt="(4)"></p>
<p>其中*表示复共轭，Re表示实部函数，J是等离子体中的电流密度，电场E<sub>rf</sub>&#x3D;-jωA的交变部分。在这项工作中，我们采用关系 P<sub>dep</sub>&#x3D;Q<sub>rh</sub>，这意味着功率沉积发生在碰撞过程中 [27]。</p>
<p>所有的碰撞和化学反应都可以在[19]中找到。考虑了与初级电离有关的七个反应，包括三种重物质：基态原子（Ar）、激发原子（Ars）和离子（Ar+）。由于亚稳态能级中的氩在放电动力学中起着重要作用，因此选择最重要的一个（4s[3&#x2F;2]<sub>2</sub>；自旋三重态 4s 能级的亚稳态）作为激发原子的代表，以简化复杂的动态进展。</p>
<p>放电室内表面的通量边界条件可写为:</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64398073064300.png" alt="(5)"></p>
<p>其中 n 代表边界的向外法线，v<sub>e,th</sub> 是电子热速度，μk 是反应 I 和 II 中物质 k 的迁移率和电荷。最后一个方程的右侧，第一项是化学反应效应，第二项是电场的迁移效应。</p>
<p>除通量边界条件外，本文还采用导电边界，其中壁电位等于0 V。此外，在放电室端板处，采用浮充电压条件形成绝缘边界，该绝缘边界不能被被位移场穿透，如[19]。由于壳层中颗粒密度梯度极高，因此在壁面附近采用边界层网格。第一层厚度为0.08毫米，小于局部德拜长度。网格上的变量通过 COMSOL MultiphysicsTM 有限元求解器的线性形状函数进行离散。在时间 0 时，我们将受激原子密度设为 0，离子密度非常低，为 1012 m−3（电子也是如此）；则方程（1）可以通过适当的时间步来求解。时间步通过后向微分公式离散。步长由求解器自适应方法决定，初始步长设置为10−14 s。</p>
<h1 id="3-数值结果"><a href="#3-数值结果" class="headerlink" title="3. 数值结果"></a>3. 数值结果</h1><h2 id="3-1-不同功率和压力下的离子泵浦效果"><a href="#3-1-不同功率和压力下的离子泵浦效果" class="headerlink" title="3.1.不同功率和压力下的离子泵浦效果"></a>3.1.不同功率和压力下的离子泵浦效果</h2><p>一般来说，实验中的参数范围往往受到多种因素的限制。然而，我们可以使用更大范围的数值模型来研究螺旋放电的瞬态特性。图 2 显示了不同天线电流下电子和基态原子 Ar 的密度随时间的演变。结果表明，电子和基原子密度的时间演化存在两种不同的模型：在高射频功率输入（I≥5A）下，电子密度先飙升至峰值，然后降至稳定，但逐渐增加当射频功率较低时（I≤3.4 A），达到无峰值的稳定状态。</p>
<p>离子泵浦效应是螺旋等离子体的一个重要特征，但尚未得到广泛研究。这是指电离原子以比热中性粒子快得多的速度到达壁，并与电子重新结合形成中性粒子，中性粒子以其热速度被泵出或缓慢扩散回来的现象。 Cho [11] 也观察到两个不同模型的类似情况，并且可以通过离子泵效应来解释：当输入射频功率足够高时，离子生成速率变得相当高，导致离子飙升数密度。因此，基态原子被反应过度消耗，放电室中心的Ar密度在无法得到边界布居及时补充的情况下下降；随之，电离反应速率和离子密度下降。当基态原子通过密度梯度扩散到平衡布居时，离子和原子的密度随后达到稳定分布。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64561128279700.png"></p>
<p>图2. 放电室中心不同天线电流下不同物种密度随时间的演变； (a) 电子，(b) 基态 Ar。</p>
<p>图3显示了天线电流为7.4 A时，不同放电压力下电子密度随时间的演变。它表明等离子体密度随着气体压力的升高而上升，而与射频功率的影响相比，振幅相对较小。随着压力下降，等离子体密度达到峰值所需的时间变短，而等离子体稳定的持续时间没有明显变化。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64627468629400.png"></p>
<p>图 3. 不同放电压力下电子密度随时间的演变。</p>
<h2 id="3-2-电子温度的瞬态特性"><a href="#3-2-电子温度的瞬态特性" class="headerlink" title="3.2.电子温度的瞬态特性"></a>3.2.电子温度的瞬态特性</h2><p>根据方程组（1）中的第五个公式，离子密度由扩散项和生成项控制。在本文中，离子的生成速率由电子温度控制，因为电子和激发态原子的碰撞截面是电子温度的函数。扩散项由电场的迁移效应和密度梯度的扩散效应组成。仿真结果表明，在天线电流为11 A、气压为10 mTorr的条件下，边界峰值以上两种效应产生的离子速度分别为15 250 m s−1和121 m s−1。前者对应鞘层加速度的峰值速度远大于后者。因此，方程（1）的扩散项主要由电场决定，或者说电势梯度由电子温度决定。较高的电子温度通过鞘层调节导致较高的等离子体电势和电场。</p>
<p>由于扩散项和生成项均受电子温度控制，因此离子分布建立的时间尺度必须主要受等式（1）中电子温度的影响。 Curreli等人[26]研究了稳定螺旋等离子体的性质，表明电子温度主要受特定配置的气体压力控制。在低压下，电子与背景原子之间通过碰撞进行的能量交换较少，导致电子温度较高。因此，密度达到稳定状态的过程更快。这与图 3 中的仿真结果一致。图 2(a) 显示，随着射频功率的增加，从初始状态到峰值的周期变得更短。这似乎令人费解，因为电子温度几乎不受稳态等离子体中射频功率的影响。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64672995116000.png"></p>
<p>图 4. 不同天线电流下电子温度随时间的演变。</p>
<p>这可以通过电子温度随时间演化的特征来解释。图 4 显示了不同天线电流下电子温度随时间的变化（以对数标度表示），时间为 1 ns 至 10 ms。这表明电子温度在几十纳秒时开始上升，在约200纳秒时达到峰值，然后在数百毫秒后下降到稳定阶段。如果电子温度发生在线性时间尺度上，则该趋势将表现为突然爆发然后下降，这也在博斯韦尔的实验 [15] 和利伯曼的全局模型 [8, 9] 中观察到。在博斯韦尔点，初始增加电子温度的变化可以用电子的谐振二次电子倍增（倍增效应）来解释，电子在螺旋天线产生的射频场中加速，并且在近 1 μs 的时间后，温度开始下降，因为鞘已经形成，大大减少了多重效应。 Lieberman [9] 使用一个方程来解释电子温度的演化如下：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/64704242318200.png" alt="(6)"></p>
<p>其中We&#x3D;3&#x2F;2en<sub>e</sub>T<sub>e</sub>V<sub>o</sub>为等离子体能量，V<sub>e</sub>为等离子体体积，Δε<sub>iz</sub>为电离碰撞能量损失，v<sub>iz</sub>为电离频率。</p>
<p>最初，Te 较低，并且上面等式 (6) 右侧的第二项较小（即较小），导致 Te 以 P<sub>max</sub>&#x2F;We 的速率急剧上升，直至某个最大值 Temax 。等式（6）的右侧开始变负，因为 v<sub>iz</sub> 随着电离的进行而变大，这导致 Te 减少。</p>
<p>笔者更倾向于后一种观点，原因如下：（1）本文采用非排放边界（排放系数γ&#x3D;1），没有考虑多因子效应，而类似的仍然得到结果； （2）根据[30]中的PIC模拟，鞘层形成的时间尺度小于40 ns，这比Te开始下降所需的时间短得多。事实上，可以证明利伯曼的方程是这项工作的简化形式。换句话说，它们在本质上是相同的。电子能量密度可写为：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65005594650900.png" alt="(7)"></p>
<p>将式(7)代入式组(1)第四式可得</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65028183349600.png" alt="(8)"></p>
<p>表 1. 诊断中使用的从 4p 到 4s 的九个转换。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65047685804900.png"></p>
<p>使用方程组（1）中的第三个公式消除（8）中的 δne&#x2F;δt 得到</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65375653988000.png" alt="(9)"></p>
<p>(9)式右边第三项属于三维模型中的扩散效应，在利伯曼全局模型中不存在；与右侧第一项的区别在于分子乘以 Vo，因为沉积功率实际上是本工作中每个空间网格处由（4）计算的功率密度； (9)式右边第二项可以进一步写为：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65399133101900.png" alt="(10)"></p>
<p>这与（6）不同，因为利伯曼将能量损失定义为绝对值，这里是真值。此外，本工作的表 1 考虑了更复杂的反应（而不仅仅是电离）。因此，本文的模型可以看作是考虑三维效应以及更复杂反应的完整形式，因此更接近真实情况。</p>
<p>在本工作的数值模型点，Te由于电磁波对初始自由电子的直接加热而增加，这可以通过方程组（1）中的前两个公式求解。因此，它具有与 13.56 MHz 下 37 ns 的时间周期相似的时序尺度。然而，电子温度下降的时间尺度比上升的时间尺度大得多，因为它对于电磁波加热过程比粒子碰撞更加宏观。对于典型的螺旋等离子体，电子碰撞频率约为 104–105 s−1。在这种情况下，冷却时间不可能短于10−4 s的碰撞间隔。从图4可以看出，不同天线电流下的稳定电子温度值是相同的，即几乎不受射频功率的影响。另一方面，电子温度的峰值随着射频功率的增加而升高，这导致带电物质的密度分布更快地建立。这也与图2(a)的趋势一致。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65437041544300.png" alt="(a)"></p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65454554068000.png" alt="(b)"></p>
<p>图 5 (a) 沉积功率在轮廓上的轮廓（单位：W·m–3）； (b) 在本工作中和由 Chen 计算的径向归一化沉积功率（单位：W m–2）。</p>
<p>电子温度的时间演化不仅在时间尺度上表现出均匀性，而且在空间域上也表现出均匀性。我们之前的研究[19]中的图6(a)表明，除了边缘处的薄层外，Te在稳态等离子体中相对均匀。更一般地说，它在时间演化的每个时刻都具有相似的特征。 Te的平均值和最大值如图4所示。平均值靠近放电室的中心点，而最大值来自边缘。由于TG波只能在等离子体边缘的薄层中传播，而螺旋波具有更大的集肤深度，因此这项工作中Te的分布支持了[31-34]中的观点，该观点指出，电磁波的能量沉积来自TG波。这在图 5(a) 和 (b) 中更加明显，图 5（a）和（b）分别显示了沉积功率分布的轮廓以及本工作中计算的径向归一化沉积功率与 Chen 计算的径向归一化沉积功率的比较。在[35]中，Chen 使用二维模型和平坦的电子密度分布从理论上计算了 TG 波的径向沉积功率。两条曲线在相对幅度上匹配得相当好，表明TG波在螺旋放电中的关键作用——除了靠近核心的区域，在陈的工作中，端板反射波的相长干涉是在该区域形成的。</p>
<h1 id="4-OES-参数随时间演化的实验"><a href="#4-OES-参数随时间演化的实验" class="headerlink" title="4. OES 参数随时间演化的实验"></a>4. OES 参数随时间演化的实验</h1><h2 id="4-1-等离子体诊断方案"><a href="#4-1-等离子体诊断方案" class="headerlink" title="4.1.等离子体诊断方案"></a>4.1.等离子体诊断方案</h2><p>对于许多应用的低压放电（包括螺旋放电），电子密度太低而无法提供 LTE（局部热平衡），但也太高而无法使用简单的电晕模型 [13]。在这些等离子体中，需要考虑所有相关的激发和去激发过程的碰撞辐射（CR）模型。 Vlček 等人 [36, 37] 在氩的 CR 模型上做了出色的工作，尽管它对碰撞的影响太大并且对于等离子体诊断来说太耗时。在这项工作中，我们采用了遵循 Clarenbach 方法 [6] 的改进 CR 模型，其中由于气压低，激发的氩原子之间的碰撞被忽略。此外，本文采用的CR模型考虑了47个有效能级，直到主量子数n&#x3D;10，因为只有少数受激原子可以达到n&gt;10的如此高的状态，而参考文献 [36, 37] 使用 65 级系统直至 n&#x3D;19。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65533745407700.png" alt="(11)"></p>
<p>其中 Cik 是激发和去激发的速率系数，Si 是电离速率，αi 是三体复合速率，Aik 是从能级 i 到能级 k 跃迁的爱因斯坦系数，θik 是解释辐射的逃逸因子诱捕效果。 (11) 中的最后一项描述了亚稳态原子的扩散，其中 Di 和 Λ 分别是扩散系数和长度。 Clarenbach 指出，如果脉冲条件下的电子密度高于 1017 m−3，则满足准稳态条件。因此，通过给定电子密度ne、电子温度Te、气体温度Tg和气体压力P0，可以在条件δNi(t)&#x2F;δt≈0下获得种群密度Ni。那么，对于光学厚度不太大的等离子体，可以由以下关系式得到等离子体发射率εik：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65646904522500.png" alt="(12)"></p>
<p>其中 h 是普朗克常数，c 是光速，λik 是波长。</p>
<p>通过将εik与测量的线强度进行比较，我们可以借助改进的CR模型构建等离子体参数与光谱信息的对应关系。本文计算了大量具有不同ne和Te参数表的εik，而气体温度和气体压力在初步研究中被设置为常数，因为它们在快速放电脉冲中不会发生如此大的变化。由实际等离子体参数决定的εik必须与测量的线强度很好地匹配。因此，定义了一个目标函数来区分真实参数与工作表：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65685240594500.png"></p>
<p>图 6. 真空支撑系统中的螺旋放电。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65708791128200.png"></p>
<p>图 7. 时间分辨 OES 诊断的实验装置。</p>
<p>广泛地在快速放电脉冲中。由实际等离子体参数决定的εik必须与测量的线强度很好地匹配。因此，定义了一个目标函数来区分真实参数与工作表：</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65748953760499.png" alt="(13)"></p>
<p>式中，Ii_c 为归一化等离子体发射率，Ii_m 为测量得到的归一化线强度，K 为诊断中使用的线数，Eerror 为相对线强度误差之和。</p>
<p>每组参数（本工作中的 ne 和 Te）对应一个错误。哪一组参数能够产生最小的误差就可以被认为是正确的。</p>
<h2 id="4-2-实验装置"><a href="#4-2-实验装置" class="headerlink" title="4.2.实验装置"></a>4.2.实验装置</h2><p>图6为体积为2.8 m3的真空支撑系统中螺旋放电的照片，该系统在放电中保持近0.01 Pa的背景压力。为了研究螺旋放电的瞬态过程，光学发射光谱实验装置如图 7 所示，旨在测量放电管的线强度。测量点的自发发射荧光信号通过光学采集组件聚焦在多模光纤上，然后通过单色仪的光栅衍射，并通过光电倍增管（PMT）转换成100 nA量级的电流。它由电流放大器放大，最后由数字示波器测量。在本工作中，电流放大器的增益为106，带宽为200 kHz。收集光学组件的空间分辨率为 2 mm。数字示波器的采集带宽为20 MHz，PMT的响应时间为2.2 ns。 CR模型实验的时间分辨率在几十微秒量级；因此这里的所有硬件足以响应。最后，通过氘钨-卤素校准光源（Ocean Optics，DH-2000-CAL）对测量的线强度进行校准。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65810281943099.png"></p>
<p>图 8. 不同天线电流下的等离子体电阻和相应功率。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65827628442300.png"></p>
<p>图 9. 数值模拟和测量之间的线强度比较。</p>
<p><img src="/./pic/Characteristics-of-temporal-evolution-of-particle-density-and-electron-temperature-in-helicon-discharge/65848178298000.png"></p>
<p>图 10 天线电流 I&#x3D;7.4 A、气体压力 P0&#x3D;0.91 Pa 时数值模拟与实验测量中等离子体参数随时间的变化； (a) 电子温度，(b) 电子密度。</p>
<p>在这项工作中，测量点正好位于放电管的中心，用压力计（Oerikon Leybold，CTR101N）和相同尺寸的金属模具测量，气体压力为0.91 Pa。磁场通过3D高斯计（翠海嘉城，CH-3600）测量。螺线管线圈电流为 60 A 时，轴向分量约为 500 G，对应于数值模型部分中的值。</p>
<p>在这项工作中，没有直接测量电流，因为这在高频放电中相对困难。放电中的总电阻由两部分组成：网络电路电阻和等离子体电阻。通过数值模型可以得到不同天线电流下的等离子体电阻，而净电路电阻Rc≈12.2 Ω是通过精密LCR表（Agilent，4285 A）在13.56 MHz频率下从入口处测量得到的。的阻抗匹配网络。因此，可以通过公式P&#x3D;I2R计算不同天线电流下的相应功率。图 8 显示了不同天线电流下的等离子体电阻和相应功率。由于本工作中电流由 RF 电源提供，因此可以在 OES 实验中轻松设置功率。天线电流为 7.4 A 时，射频功率约为 900 W。</p>
<h2 id="4-3-实验结果"><a href="#4-3-实验结果" class="headerlink" title="4.3.实验结果"></a>4.3.实验结果</h2><p>在放电中可以检测到从 738.398 nm 到 842.465 nm 的 13 条 Ar I 线，选择其中 9 条线来分析等离子体，因为它们既不是太近而难以区分，也不是太强而无法正确曝光。下表显示了本文中使用的线路。</p>
<p>将数值结果作为CR模型的入口参数来获得等离子体发射率，然后将其与实验测量的线强度进行比较。图 9 显示了表 1 中的四条线以及 811.5311 nm 处的另一条线，该线在峰值处似乎有点过度曝光，因此在分析中被忽略。尽管峰值大小存在一些误差，但两组曲线的趋势吻合得相当好。</p>
<p>在这项工作中，等离子体片由 1013-1020 m3 的 ne 和 0.1-10 eV 的 Te 组成。我们计算式(13)中的所有目标函数并得到最小Eerror，它指向每个采样时间对应的ne和Te。图10(a)和(b)分别显示了天线电流为7.4 A、气压为0.91 Pa时该方法中ne和Te随时间的演变，从中可以看出实验中曲线的变化趋势与 COMSOL 模拟的结果一致。两条电子温度曲线都具有非常急剧的初始上升，然后下降。然而，在最初的点火阶段确实存在一些差异。对于使用 CR 模型的实验 Te，上升时刻发生得较晚，并且初始数据的噪声较大。这可能是由于CR模型适应稳态条件的问题造成的，即间隔时间太短，而点火开始时电子密度不高。另一方面，电子密度与模拟和 CR 模型更加一致。</p>
<h1 id="5。结论"><a href="#5。结论" class="headerlink" title="5。结论"></a>5。结论</h1><p>在这项工作中，使用直接数值模拟的螺旋放电三维模型来研究等离子体的瞬态特性。计算了使用Ar工作液和Shoji型天线的数值案例，其中全尺寸三维结构参考国防科技大学BEEMP实验室的SHPS。</p>
<p>使用相对较大规模的数值模型研究了不同天线电流下粒子密度的时间演化，并表明电子和地面原子密度存在两种不同的时间演化模型：电子密度跳跃到峰值和然后在高射频功率输入（天线电流I≥5A）下逐渐减小到稳定，但在射频功率较低（I≤3.4A）时增加到稳定状态，没有峰值。分析表明这种现象可以用离子泵效应来解释。还研究了气压对电子密度随时间演化的影响。结果表明，随着压力降低，等离子体密度达到峰值所需的时间变得更短。定性分析离子的控制方程，解释压力对电子密度随时间演化的影响，表明电子温度在点火阶段起主要作用。通过对不同天线电流下电子温度随时间演化的研究发现，点火过程分别由电磁波加热和粒子碰撞冷却两个阶段组成。高射频功率导致高峰值电子温度，而高气压导致稳定的低温。最后，通过改进的 CR 模型使用 9 个 Ar I 谱线进行的 OES 实验表明，电子密度和温度的时间演化趋势与数值模拟的结果非常一致。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>Damping characteristics of helicon and Trivelpiece–Gould waves in high density and low magnetic field helicon plasma</title>
    <url>/2023/10/07/Damping-characteristics-of-helicon-and-Trivelpiece%E2%80%93Gould-waves-in-high-density-and-low-magnetic-field-helicon-plasma/</url>
    <content><![CDATA[<p>高密度和低磁场螺旋子等离子体中螺旋子波和 Trivelpiece-Gould 波的阻尼特性</p>
<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>通过采用暖等离子体模型并考虑介电张量元素中的回旋谐波效应，研究了在高密度（1x1013 cm 3）、低磁场（<del>30-50 G）和中低中性气压（</del>0.5-10mTorr）的螺旋子等离子体中，螺旋波和Trivelpiece-Gould（TG）波的方位对称模由于碰撞和动力学阻尼而产生的功率沉积特性。理论计算表明，磁场对螺旋子波和 TG 波之间的模耦合表面特性有显著影响；在典型的螺旋子等离子体电子温度范围 Te∈(3, 5) eV 中，存在临界中性气体压力，低于或高于该压力时，不同阻尼机制产生的不同波在功率沉积中起主导作用；同时，在低中性气体压力（~0.5 mTorr）情况下，朗道阻尼产生的 TG 波在功率沉积中起主导作用，随着磁场的增加，这种主导作用逐渐增强。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1>]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>Design of a novel high efficiency antenna for helicon plasma sources</title>
    <url>/2023/08/29/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/</url>
    <content><![CDATA[<p>一种新型螺旋等离子体源高效天线的设计</p>
<h1 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h1><p>为螺旋等离子体源提出了一种新的天线配置，可以增加吸收功率和等离子体密度。使用标准 COMSOL Multiphysics 5.3 软件分析了电磁波图案对称性对具有普通天线的螺旋等离子体源（名古屋）中等离子体密度和吸收功率的影响。与理论模型预测相反，电磁波并不代表普通名古屋天线的对称图案。在这项工作中，提出了一种新的天线配置，它改善了螺旋等离子体源中波形的不对称性。通过模拟研究了相同条件下普通名古屋天线和我们提出的天线的等离子体参数，例如等离子体密度和吸收率。此外，将具有通用名古屋天线的七个运行螺旋等离子体源装置的等离子体密度与我们提出的天线和通用名古屋天线的仿真结果进行了比较。模拟结果表明，使用我们提出的天线产生的等离子体密度大约是使用普通名古屋天线产生的等离子体密度的两倍。事实上，模拟结果表明，螺旋波的电场和磁场对称性对于增强波粒耦合起着至关重要的作用。结果，波粒能量交换和螺旋等离子体源的等离子体密度将增加。</p>
<h1 id="instruction"><a href="#instruction" class="headerlink" title="instruction"></a>instruction</h1><p>Helicon 等离子体源产生低温、高密度和低压等离子体（Chen 2006）。如今，方便且经济的螺旋等离子体源是有吸引力的资产，它们被用作加速器、惯性静电约束聚变装置和等离子体射流的粒子源，以及磁约束装置中预电离的电子源（Hwang、Hong 和 Eom） 1998；陈2008）。</p>
<p>陈研究了天线的物理机制以及螺旋放电中电磁场和静电场的传播（Chen 1996）。 Park 及其同事研究了螺旋等离子体放电理论以及天线电阻率和等离子体电阻的计算（Park、Choi 和 Yoon 1997）。 Melazzi 从理论上对螺旋等离子体源中常见的几种射频天线进行了比较研究（Melazzi &amp; Lancellotti 2015）。 Caneses 和他的同事研究了高压氢螺旋等离子体源中螺旋波的波传播和碰撞吸收（Caneses &amp; Blackwell 2016）。</p>
<p>已经进行了多项研究来提高螺旋等离子体源的电离效率。研究人员试图设计一种最佳的等离子体源。 Miljak 和 Chen 发现，通过使用相控双线天线，可以通过施加在空间或时间上或同时旋转的场来激发螺旋波。由于螺旋波形是在空间和时间上旋转的螺旋，因此可以通过使用本身是螺旋的天线或具有随时间旋转的场的天线来改善天线与等离子体的耦合，从而获得更高的等离子体密度（Miljak &amp; Chen 1998） 。在 2005 年报道的另一项工作中，Guittienne 和 Chevalier Towards 提出了螺旋天线的最佳配置（Guittienne, Chevalier &amp; Hollenstein 2005）。他们提出了一种用于激励螺旋波的鸟笼形天线。</p>
<p>如今，使用计算代码和标准软件对于螺旋等离子体源中等离子体产生的不同方面的调查和研究很有趣。在这方面，杨和他的同事采用三维二维流体方程的螺旋等离子体放电直接数值模拟模型来研究电子密度和温度随时间演化的特征。他们使用 COMSOL Multiphysics 中的有限元求解器来求解所有偏微分方程（Xiong 等人，2017）。</p>
<p>Caneses 等人使用计算代码和 COMSOL Multiphysics 软件。研究了 MAGPIE 和 Proto MPEX 线性等离子体设备中氢等离子体中螺旋天线附近的天线辐射模式（Caneses、Blackwell 和 Piotrowicz 2017）。影响螺旋等离子体源效率的重要方面之一是有效参数的对称性或不对称性。螺旋等离子体放电部件的构造、图案和分布的对称性可以增加螺旋波与等离子体的耦合。因此，研究螺旋等离子体放电参数的对称性或不对称性可以帮助我们设计和改进螺旋等离子体源的参数。</p>
<p>这样，Black和Chen发现法拉第屏蔽可以阻挡螺旋放电中的静电场(Blackwell &amp; Chen 1997)。他们发现在这种情况下等离子体密度分布具有对称图案。他们可以通过在天线和玻璃室之间插入法拉第屏蔽来观察电容耦合的影响，这在理论上通常被忽略。结果表明，即使在等离子体被称为“波耦合”的高密度区域（Ellingboe &amp; Boswell 1996），电容耦合也会对等离子体特性产生显着影响。另一个重要参数是天线几何形状。我们发现以前的工作没有考虑天线当前端口的影响。我们的仿真结果表明，天线电流端口（名古屋 III 中）可以影响螺旋等离子体放电系统中电磁场图案的对称性。在这项工作中，提出了一种新的天线配置，可以保护波场图案的对称性。我们的模拟表明，如果在螺旋等离子体源中使用具有两组对称端口的名古屋天线（III型），则螺旋波场分量呈现对称图案。使用标准 COMSOL Multiphysics 5.3 软件分析了电磁波模式对称性对普通名古屋天线螺旋等离子体源中等离子体密度和功率吸收的影响。</p>
<p>模拟结果表明，使用我们提出的天线产生的等离子体的密度比普通天线增加了两倍。这一结果表明，场模式的对称性会影响等离子体密度和功率吸收，并对波粒耦合的增强起着至关重要的作用。这一事实在以往的文献中没有报道过。应该注意的是，模拟中包含了能量为 0.001 eV 至 1 MeV 的所有参数以及与横截面的相互作用。</p>
<p>最后，这项工作的目标可以体现在两个方面：首先，提出一种新的天线配置，以增加功率吸收和等离子体密度。其次，借助这种新型天线，我们可以研究模拟结果并将其与可运行的螺旋等离子体源设备的实验结果进行比较。</p>
<p>该手稿的组织如下：第 2 节介绍了工作原理，第 3 节描述了常见名古屋天线以及我们提出的天线的模拟结果，并处理使用这两种天线类型的等离子体生产。最后，本文在第 4 节中进行了总结。</p>
<h1 id="理论"><a href="#理论" class="headerlink" title="理论"></a>理论</h1><p>最简单形式的螺旋波源自三个线性化麦克斯韦方程、动量方程和欧姆定律。使用柱坐标，麦克斯韦方程导出了螺旋波磁场分量的贝塞尔方程。随后，楞次定律导出了螺旋波的电场分量。该柱坐标方程形成了螺旋波磁场分量的贝塞尔方程（Chen 1991、2012；Ziemba 等人 2006）。</p>
<p>螺旋波的磁场分量可由下式获得：</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/2814072835100.png" alt="(2.1)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/2832126126900.png" alt="(2.2)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/2847039631200.png" alt="(2.3)"></p>
<p>其中a等于腔室半径r<sub>p</sub>，J<sub>m−1</sub>、J<sub>m+1</sub>和J<sub>m</sub>分别为m-1、m+1、m阶贝塞尔函数，在上述关系中，A是常数参数，等于至√2&#x2F;2。上式中 α &#x3D; ωω<sup>2</sup><sub>p</sub>&#x2F;k<sub>‖</sub>ω<sub>c</sub>c<sup>2</sup>，ω<sub>c</sub>&#x3D;eB<sub>0</sub>&#x2F;me，ω<sup>2</sup><sub>p</sub>&#x3D; 4πn<sub>0</sub>e<sup>2</sup>&#x2F;m，c 为光速，k 为螺旋波矢量，ω 为螺旋波频率，k<sub>‖</sub>是波矢量的轴向分量，T 是波矢量的横向分量。利用楞次定律和磁场分量，可以得到螺旋波的电场分量为：</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3251796298200.png" alt="(2.4)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3265118284100.png" alt="(2.5)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3280557029500.png" alt="(2.6)"></p>
<p>很明显，螺旋波具有TE（横向电）模式特征。图 1 中绘制了 m &#x3D; +1 模式的螺旋波电场和磁场模式。该图显示了螺旋设备的场分量，其参数如表 1 所列。磁场和磁场的对称模式电场如图 1 所示。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3319607102600.png"></p>
<p>图 1. 在垂直于直流磁场的平面中，螺旋波 m &#x3D; +1 时的磁力线（实线）和电场线（虚线）图案。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3347011648700.png"></p>
<p>表 1. 螺旋等离子体源的参数。</p>
<p>这些结果是根据理论模型得出的，在此分析中忽略了天线的当前端口及其影响。当前端口的影响无法使用分析方法进行研究，而是使用下一节中的 COMSOL Multiphysics 5.3 软件进行分析。</p>
<h1 id="3-设计与仿真"><a href="#3-设计与仿真" class="headerlink" title="3 设计与仿真"></a>3 设计与仿真</h1><p>对两种类型的天线（具有一组电流端口的常见名古屋天线和具有两组对称端口的天线）产生的电磁波的磁场和电场模式进行了仿真。仿真实验是在相同的理论模型和系统参数下进行的，如表1所示。</p>
<p>我们最初想法的精髓是螺旋等离子体源天线的新配置，旨在修改天线的性能并增加等离子体密度。由于普通名古屋天线中的电流端口效应，螺旋源中磁场和电场图案的对称性被打破。图2(a)示出了具有当前一组端口的普通名古屋天线的示意图。在从天线轴中心点经过的（x-y）平面中，螺旋波相对于 y 轴的磁场大小如图 2（b）所示。此外，在图 2(c) 中，对模式 m &#x3D; +1 模拟了这种常见名古屋天线的螺旋波模式。图2（b，c）表明螺旋波图案的电场和磁场的对称性已经消失。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3423606045600.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3435376587300.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3446446288100.png" alt="(c)"></p>
<p>图 2. (a) 普通名古屋天线，(b) 螺旋波磁场强度，(c) 螺旋波图案电场和磁场的对称性。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3470158755700.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3486661259400.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3505628631500.png" alt="(c)"></p>
<p>图 3. (a) 提议的天线（两组电流端口），(b) 螺旋波的磁场强度（提议的天线），(c) 螺旋波的电场和磁场的对称性模式（建议的天线）。</p>
<p>另一方面，图 3(a) 展示了具有两组当前端口的改进天线的示意图。对于与图 2 相同的条件，我们提出的模式 m &#x3D; +1 的天线的螺旋波磁场大小以及螺旋波方向图的电场和磁场方向图 s 绘制在图 3（b， c) 分别。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3542679398100.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3561791655500.png" alt="(b)"></p>
<p>图 4。(a) 普通天线的电磁场方向图（z &#x3D; L&#x2F;2（L 是天线长度）），(b) 普通天线的电磁场方向图（z &#x3D; L（L 是天线长度））。</p>
<p>值得一提的是，在所有上述图中，坐标系的选择使得 z 轴与天线和暗室的轴重合。仿真结果表明，新改进的天线产生的螺旋波图是对称的，正如预期的那样。换句话说，使用位于第一电流端口正对面的额外两个电流端口可以消除螺旋波图案中第一电流端口的失真效应。</p>
<p>图 4 和图 5 显示了具有一组端口的普通天线 (4a,b) 和我们的改进天线（图 5a,b）的两个不同横截面中螺旋波的电磁场方向图。图 4(a) 和 5(a) 是在穿过天线轴 z &#x3D; L&#x2F;2（L 是天线长度）中心点的平面上绘制的。面板 2(a,b) 绘制在通过端点 z &#x3D; L 处的天线轴的平面中。我们提出的天线的电磁场方向图的对称性和普通天线的电磁场方向图的不对称性（具有一组电流端口）在图 4 和图 5 的所有不同横截面中都很明显。</p>
<p>螺旋波的电场和磁场的对称性导致吸收功率和等离子体密度的增加。普通名古屋天线和我们改进的天线系统的功率吸收密度、等离子体密度和饱和时间分别绘制在图6（a-c）和（7a-c）中。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3612808259000.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3626462770800.png" alt="(b)"></p>
<p>图 5. (a) 我们提出的天线的电磁场方向图（z &#x3D; L&#x2F;2（L 是天线长度）），(b) 我们提出的天线的电磁场方向图（z &#x3D; L（L 是天线长度）） 。</p>
<p>根据图6(a,b)，我们改进的两组电流端口天线的功率吸收密度和等离子体密度是普通名古屋天线的一组电流端口的两倍。</p>
<p>在存在轴向磁场的情况下，带电粒子轨迹是对称的螺旋线。另一方面，对于粒子和波之间的强耦合，螺旋波形必须是螺旋（Miljak &amp; Chen 1998）。在我们的工作中，该波是由名古屋天线引起的。螺旋波的磁场和电场分量模式（在没有电流端口效应的情况下）显示偶极子对称性。可以使天线在固定z处产生的电场随时间旋转。如图 2、4 和 6 所示，天线一侧存在一组电流端口会破坏波场方向图的偶极子对称性。波场分量的不对称导致带电粒子在错误的方向和时间上加速或减速。因此，粒子轨迹偏离对称螺旋的形式，与相对于螺旋波异相旋转的粒子相同。结果，螺旋波与带电粒子的耦合减弱，波粒能量交换减少。另一方面，我们在图3、图5和图7中的仿真结果表明，通过使用两组对称的电流端口，螺旋波场分量的不对称性得到了显着改善。因此，期望粒子通过螺旋波场分量在适当的方向、时间和空间上加速&#x2F;减速。结果，螺旋波和带电粒子强烈耦合，波粒能量交换增加。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3673533773600.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3689286505500.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3706670738000.png" alt="(c)"></p>
<p>图 6。(a) 功率吸收密度（普通名古屋天线），(b) 等离子体密度（普通名古屋天线），(c) 普通名古屋天线系统的饱和时间。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3732089583300.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3747330995600.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3760757984900.png" alt="(c)"></p>
<p>图 7。(a) 功率吸收密度（建议的天线），(b) 等离子体密度（建议的天线），(c) 我们改进的天线（建议​​的天线）系统的饱和时间。</p>
<p>COMSOL 软件采用的模型通过以下一组碰撞类型研究氩等离子体化学；弹性、激发、直接电离和逐步电离。该模型还涉及彭宁电离和亚稳态猝灭。1 这些碰撞和反应列于表 2 中。</p>
<p>正如 COMSOL 软件帮助中提到的（参见脚注 1），逐步电离（反应 5）在维持低压氩气放电方面可以发挥重要作用。激发态的氩原子通过与电子的超弹性碰撞、中性氩原子猝灭、电离或潘宁电离而被消耗，其中两个亚稳态氩原子反应形成中性氩原子、氩离子和电子。 7 号反应负责气体的加热。当激发的亚稳态淬灭时，用于产生电子激发的氩原子的 11.5 eV 能量将作为热能返回到气体中。除了体积反应之外，还执行以下表面反应，如表 3 所示：</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3804464051800.png"></p>
<p>表 2. 模拟的碰撞和反应表（参见脚注 1）。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3820798670900.png"></p>
<p>表 3. 表面反应表（参见脚注 1）。</p>
<p>当亚稳态氩原子与壁接触时，它以一定的概率（粘附系数）恢复到基态氩原子（见脚注1）。然而，螺旋等离子体放电过程是通过使用常见的名古屋天线和我们提出的天线来模拟的。普通名古屋天线和我们提出的天线的电子密度（等离子体密度）的变化分别以三维表示形式显示在图8（a）和图9（a）中。模拟结果（图 8a 和 9a）估计普通名古屋天线的螺旋等离子体放电的最大电子密度约为 1.7 × 1018 m−3，我们提出的天线约为 3 × 1018 m−3。此外，对于图8(b)和9(b)中的两种情况，沿着对称轴（天线轴）表示电子密度的变化。这些图表示两种情况沿天线轴的空间电子密度分布。这些结果的比较表明，两种情况下空间电子密度分布的形式没有不同，并且类似于高斯函数。然而，很明显，使用我们提出的天线，最大电子密度增加了大约百分之一百。使用常见的名古屋天线图 8(c) 和我们提出的天线图 9(c) 绘制了电子温度沿对称轴（天线轴）的变化。这些数字表明，在普通名古屋天线和我们提出的天线的情况下，电子可以分别达到约 2.9 和 2.5 eV 的能量。这些模拟结果与文献中先前的报告非常吻合（Chen 1996；Sudit &amp; Chen 1996；Chen &amp; Boswell 1997；Braginskii, Vasil’eva &amp; Kovalev 2001；Navarro-Cavallé et al. 2018；Lee et al. 2011） 。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3908540696300.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3924517283300.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3937172646400.png" alt="(c)"></p>
<p>图 8. 沿天线轴（普通名古屋天线）绘制的三维电子密度变化 (a)、一维电子密度变化 (b) 和电子温度变化 (c)。</p>
<p>在许多实验工作中（Light &amp; Chen 1995；Sudit &amp; Chen 1996；Miljak &amp; Chen 1998）等离子体密度的下游峰值沿着螺旋源中的天线轴出现（在存在均匀静磁场的情况下） 。 Sudit &amp; Chen (1996) 中的压力平衡解释了下游密度峰值。在该参考文献中，电子运动方程的 z 分量表示为：</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/3889672816000.png" alt="(3.1)"></p>
<p>其中 n、Ez、K、Te、uz、vm 和 m 分别是等离子体密度、电场的 z 分量、玻尔兹曼常数、电子温度、电子流体速度、动量传递的电子碰撞频率和电子质量。正如该参考文献中提到的，实际上碰撞项小得可以忽略不计。因此，在给定 Te(z) 和 Ez(z) 剖面的情况下，该方程显示了压力平衡所需的下游密度峰值（Sudit &amp; Chen 1996）。</p>
<p>但我们认为，实际中静磁场不可能完全均匀。等离子体密度的下游峰值应该用静磁场径向分量存在时的压力平衡来解释。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/4010431047700.png" alt="(a)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/4023774033400.png" alt="(b)"></p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/4038685115300.png" alt="(c)"></p>
<p>图 9. 沿着天线轴绘制的电子密度在三个维度 (a)、一维 (b) 和电子温度 (c) 的变化（建议的天线）。</p>
<p>事实上，洛伦兹力的轴向分量（由等离子体电流的方位角分量 (Jθ ) 和静磁场的径向分量的叉积产生）可以沿压力平衡方向移动压力平衡的位置。放电管并沿着天线的轴移动等离子体密度的峰值。在我们的工作中，为了减少仿真运行时间，系统在精确均匀的静态磁场（沿着系统的对称轴）存在的情况下进行仿真。结果，洛伦兹力的轴向分量消失，等离子体密度峰值出现在天线区域，如图8和图9所示。这个想法可能与ICP报道的实验数据一致。系统。密度峰值出现在 ICP（感应耦合等离子体）系统的天线区域（Sudit &amp; Chen 1996）。</p>
<p>如上所述，我们提出的改进天线的对称性提供了具有对称电场和磁场模式的螺旋波。在这方面，七个螺旋等离子体源装置的结果和数据在参考文献Light &amp; Chen (1995)、Chen (1996)、Molvik 等人中报道。 (1996)，郭等人。 (1999)，同振等人。 (2001)，陈等人。 （2006），李等人。 （2011），进行了研究。根据这些器件的参数，分别采用普通名古屋天线的一组电流端口和我们的改进型天线的两组电流端口对这七种器件进行了仿真分析。为了验证我们的模拟结果，将这些设备的实验报告结果与我们从这些设备的模拟中获得的结果进行比较。该比较表明，根据实验结果报告的这些装置的等离子体电子密度与通过模拟实验估计的等离子体密度平均相差约15%。因此，这种比较表明我们的模拟结果是可靠的并且是一个很好的近似值。表 4 列出了这些设备的参数、报告的产生电子密度的实验数据以及我们的模拟结果。在此表中，电子等离子体密度是文献中报道的实验结果（a 列），电子等离子体密度是通过我们使用具有一组电流端口的通用天线对设备进行模拟而获得的（b 列）并使用我们修改后的建议天线和两组当前端口（c 列）进行表示。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/4094823827500.png"></p>
<p>图 10. 这七种设备的等离子体密度实验结果（蓝色）、我们使用普通天线（名古屋）的模拟结果（红色）以及使用我们改进的天线的模拟结果（绿色）。</p>
<p>如表 4 所示，仿真结果表明，所报告的实验结果证实了我们对具有一组当前端口的普通天线的仿真结果。此外，模拟结果表明，与使用普通天线相比，使用我们提出的天线和两组电流端口，在所有情况下都能增加螺旋源的等离子体密度，平均约增加 40%。这七个设备的实验结果（蓝色）、我们使用普通天线（名古屋）的模拟结果（红色）和使用我们改进的天线的模拟结果（绿色）的等离子体密度绘制在图 10 中。绿色柱上的黑色箭头代表使用我们建议的天线相对于这七个设备报告的实验数据的等离子体密度增量（以百分比表示）。</p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>在本文中，使用标准 COMSOL Multiphysics 5.3 软件对螺旋等离子体源进行了模拟和分析。此外，模拟中还包含 0.001 eV 至 1 MeV 能量的所有参数以及与横截面的相互作用。仿真结果表明，具有一组电流端口的普通名古屋天线产生电场和磁场不对称模式的螺旋波。提出了一种具有两组电流端口的新型改进天线，以减轻电流端口对波形的干扰影响。研究发现，普通名古屋天线采用两组对称的电流端口，可以显着改善螺旋波场分量的不对称性。因此，期望粒子通过螺旋波场分量在适当的方向、时间和空间上加速&#x2F;减速。结果，螺旋波和带电粒子强烈耦合，波粒能量交换增加。分析表明，与报告的实验结果以及具有一组当前端口的常见天线模拟结果（名古屋）相比，使用我们的改进天线，等离子体密度和功率吸收平均增加了约 40%。这一事实表明电磁波图案的对称性对于提高功率吸收率以及等离子体密度起着至关重要的作用。</p>
<p><img src="/./pic/Design-of-a-novel-high-efficiency-antenna-for-helicon-plasma-sources/4165606249499.png"></p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>Discharge Directionality and Dominance of Right-Handed Modes in Helicon Plasmas due to Radial Electron Density Gradients</title>
    <url>/2023/07/19/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/</url>
    <content><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>螺旋波是磁化等离子体波，类似于地球电离层中的哨声波，用于产生高密度实验室等离子体。我们证明可以通过改变天线螺旋度或磁场方向来反转放电方向。如果存在径向密度梯度，模拟将重现这些发现。包含这种密度梯度的螺旋波动方程会产生一个调制磁场，该磁场会放大右旋螺旋模式，但会减弱左旋螺旋模式。这首次一致地解释了右手模式相对于左手模式的主导地位以及螺旋等离子体中的放电方向性。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/6039952572400.png" alt="图 1"></p>
<p>如图右手半螺旋天线。半个射频周期内的电流以绿色显示，圆柱坐标系以黑色显示，不同方位角模式的发射方向以蓝色显示。</p>
<h1 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h1><p>这里介绍的实验是在 Madison Awake 原型机 (MAP) 上进行的，如图 2 所示。MAP 由一根 2 m 长的硼硅酸盐玻璃管组成，内径为 52 mm，外径为 58 mm。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/6332773188200.png" alt="图 2.MAP 实验核心组件的 CAD 模型"></p>
<p>MAP 由一根 2 m 长的硼硅酸盐玻璃管组成，内径为 52 mm，外径为 58 mm。 14 个线圈在设备中心 1.6 m 处产生 49 mT 的非常均匀的磁场，在末端达到 55 mT。在图 2 中，场可以向左或向右定向。带有 1 厘米宽带的 10 厘米长天线以右侧或左侧方向缠绕，用于激发螺旋等离子体。天线位于实验中心，轴向位置 z &#x3D; 0。所有实验均在 10−2 mbar 的氩气填充压力下进行，射频功率输入设置为 1.3 kW，频率为 13.56 MHz。使用阻抗匹配网络将反射功率降低到可忽略不计的水平，低于 10 W。气体从右侧进入，被迫通过真空容器，然后到达左侧的涡轮泵。</p>
<p>等离子体密度通过单电离氩气上的 <strong>激光诱导荧光(LIF)</strong> 进行测量，如 [17, 29] 中所述。此外还拍摄了天线周围放电的照片。结果如图3所示。RH天线在向右磁场中产生向左放电（蓝色曲线），而在向左磁场中产生向右放电（绿色曲线）。密度分布在天线位置周围镜像。对于 LH 天线，向右场（黄色）放电在右侧，向左场（红色）放电在左侧。这表明天线螺旋度或背景场方向的反转会反转放电方向，并且两者的反转会恢复原始放电方向。匹配网络能够匹配所有四种等离子体，无需任何调整，这表明等离子体阻抗在所有放电中都是相同的。这些结果是通过非常好的轴向磁场均匀性和与可能导致轴向各向异性的真空元件的适当距离获得的，消除了由于实验设置而导致的其他组的实验解释中的模糊性，例如通过将天线放置在附近的轴向边界或等离子体密度或场强超出色散关系允许值的区域[30]。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/8740836632700.png" alt="图 3 螺旋等离子体密度和光发射对天线螺旋度和磁场方向的依赖性"></p>
<h1 id="模拟"><a href="#模拟" class="headerlink" title="模拟"></a>模拟</h1><p>使用 COMSOL 中开发的<strong>准 3D 有限元代码（使用冷等离子体波描述）</strong> 对 MAP 中的螺旋放电进行建模。在高密度螺旋等离子体中，很大一部分功率是通过 Trivelpiece-Gould[31] 模式沉积的，该模式在亚毫米级上具有非常短的径向波长。这就需要使用轴向 500 μm、径向 30 μm 的非常精细的网格单元。该模型假设波场在方位角方向上具有 e<sup>imφ</sup> 依赖性，其中 m 是方位角模式数。由于高阶模式的强阻尼，完整的 3D 解决方案可以从六个主阶模式计算，即 m &#x3D; {±1, ±3, ±5}，如稍后图 5 所示。由于朗道阻尼可以忽略不计，功率沉积是通过电子-离子和电子中性碰撞严格欧姆计算的[32]。通过将均匀等离子体中的结果与分析螺旋色散关系进行比较来验证该模型。</p>
<p>使用 LIF 技术在 116 个点处测量了左向场中 RH 天线的密度分布。等离子体温度和中性压力分别设置为均匀的 3 eV 和 10<sup>−3</sup> mbar，后者假设 90% 中性耗尽。该模拟的结果如图 4 和 5 所示。图4示出了总波磁场的大小，其中白色等高线表示等离子体密度。螺旋波从天线位置径向向内传播并轴向向前传播。图 5 显示了不同方位角模式的径向积分功率沉积贡献。很明显，负 m 模式和正 m 模式分别向前和向后沉积功率，如图 1 所示。在该设置中，占主导地位的右手模式 m &#x3D; -1，沉积总功率的 58.7%，大部分位于右侧。领先的左手模式 m &#x3D; +1，沉积总功率的 29.5%，大部分在相反方向。剩下的 11.8% 是由遵循主导 RH 和 LH 模式的方向性模式的高阶模式所占。总体而言，通过光学和 LIF 观察，功率沉积位于放电方向。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/11603306534400.png" alt="图 4"></p>
<p>图4 磁场为负 z 方向的 RH 天线的总螺旋波磁场幅度的仿真结果。实验测量的密度由白色轮廓线给出。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/11673987796500.png" alt="图 5"></p>
<p>图 4 中模拟的方位模式轴向功率沉积。</p>
<p>为了阐明这种定向功率沉积的原因，我们使用轴向均匀的等离子体密度分布进行了模拟。径向等离子体密度分布被建模为平顶(flat top)形式</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/12569777194700.png" alt="(1)"><br><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/12629467159200.png"></p>
<p>图 6 显示了两种径向密度分布的天线螺旋度和背景场方向的四种可能组合的结果。对于径向密度梯度，在向右场和 RH 天线中，功率沉积主要向左。对于与 LH 天线组合的左向场，会出现相同的沉积剖面。对于其他两种组合，功率沉积主要位于左侧。 z &#x3D; 0 附近的左右功率不平衡为 36.5% 至 63.5%。对于径向均匀等离子体，不存在显着的优先功率沉积，左右不平衡度仅为48.1%至51.9%。</p>
<h1 id="数学模型"><a href="#数学模型" class="headerlink" title="数学模型"></a>数学模型</h1><p>由于在螺旋等离子体中，电子电流远强于位移电流并且离子是不动的，因此频域中的相关麦克斯韦方程变为</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/33458955362800.png" alt="(2)"></p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/33473868691600.png" alt="(3)"></p>
<p>其中不可压缩电子流体的密度为 n，速度为 v。电子受到电力、磁力、摩擦力和压力梯度力的作用，使得它们的动量方程变为</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/38134196466500.png" alt="(4)"></p>
<p>其中 B0 是背景磁场，Te 是电子温度，ν 是电子-离子和电子-中性碰撞的有效组合频率。</p>
<p>利用这组方程，我们可以消除 E、j 和 v，并得到纯径向密度梯度</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/38212351650000.png" alt="(5)"></p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/38251945600700.png" alt="(6)"></p>
<p>在方程 5 中，∓ 符号说明背景磁场沿 z 方向或逆 z 方向指向。方程 5 的左侧是推导出来的均匀等离子体中的螺旋波方程。右侧代表一个新项，仅存在于存在密度梯度的情况下。我们在下文中将该术语称为调制磁场，如下所述。由于 δ 是 RF 频率与电子回旋加速器频率的比率，因此方程 5 右侧的第一项可以忽略不计，调制磁场变为</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/38406293170600.png" alt="(7)"></p>
<p>其中右侧利用 r 在密度最高的等离子体核心处变小，使得 ∇ × B 的 Bz 项占主导地位。</p>
<p>这种形式非常清楚地显示了对磁场方向、密度梯度和方位模数的依赖性。在与 z 对齐的背景场中，附加调制磁场增强正 m 模式，但减弱负 m 模式。加上相反螺旋度的天线以相反方向发送这些模式的事实，这解释了右手模式相对于左手模式的主导地位、螺旋放电的方向性以及为什么螺旋或场反转会翻转放电方向。</p>
<p>通过使用方程 3 将波动方程转化为以下形式，可以理解这种效应背后的物理机制</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/40596730570300.png" alt="(8)"></p>
<p>这表明，径向电流与场方向和密度梯度相结合，产生了与 jr 波电流有 ∓90° 相移的附加调制磁场。</p>
<p>图 7 给出了这种现象的物理解释。在沿 z 的背景场中，携带径向电流 jr 的电子流体元件受到洛伦兹力的作用，从而在方位角方向产生电流。该电流也受到洛伦兹力，从而产生负径向方向的电流。这是螺旋波在均匀等离子体中的径向电流和方位角电流之间交换能量的机制。然而，在存在电子密度梯度的情况下，相邻流体元件将携带大小与电子密度成比例的方位角电流，从而导致方位角剪切电流。这些电流可以通过大电流加上不同径向位置的局部电流来描述。局部部分代表偶极子电流，它在 ± z 方向上产生磁场，我们已通过方程 1 中的调制磁场以数学方式表示该磁场。 8. 对于均匀等离子体中的 RH 螺旋模式，jr 电流使 j​​φ 超前 90°，使得调制场沿着波的规则 Bz 场指向，并导致波场增强。相比之下，LH 模式的 jr 滞后 jφ 90°，因此额外的调制磁场会导致 Bz 波场方向错误，从而整体衰减 jr、jφ 和波。</p>
<p><img src="/./pic/Discharge-Directionality-and-Dominance-of-Right-Handed-Modes-in-Helicon-Plasmas-due-to-Radial-Electron-Density-Gradients/40997373408200.png" alt="图 7 存在径向密度梯度时剪切电流源的机制"></p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker</title>
    <url>/2021/03/12/Docker/</url>
    <content><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p>用于打包，解决环境搭建问题</p>
<p>基于Go</p>
<h2 id="安装-linux-CentOS"><a href="#安装-linux-CentOS" class="headerlink" title="安装(linux-CentOS)"></a>安装(linux-CentOS)</h2><p>查看官方的<a href="https://docs.docker.com/engine/install/centos/">帮助文档</a></p>
<h3 id="卸载旧的版本"><a href="#卸载旧的版本" class="headerlink" title="卸载旧的版本"></a>卸载旧的版本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>

<h3 id="使用仓库安装"><a href="#使用仓库安装" class="headerlink" title="使用仓库安装"></a>使用仓库安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y yum-utils</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置镜像地址</span></span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">这里使用阿里云的镜像</span></span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<h3 id="更新Docker"><a href="#更新Docker" class="headerlink" title="更新Docker"></a>更新Docker</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum makecache</span><br><span class="line">yum update</span><br></pre></td></tr></table></figure>

<h3 id="安装Docker引擎"><a href="#安装Docker引擎" class="headerlink" title="安装Docker引擎"></a>安装Docker引擎</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<h4 id="可能会报错"><a href="#可能会报错" class="headerlink" title="可能会报错"></a>可能会报错</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1. 首先更新yum</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum update</span></span><br><span class="line"></span><br><span class="line">2. 以下方法任选一种</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">方法1： 安装特定版本的docker-ce和containerd.io</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum list docker-ce --showduplicates | <span class="built_in">sort</span> -r</span></span><br><span class="line"></span><br><span class="line">docker-ce.x86_64  3:18.09.1-3.el7                     docker-ce-stable</span><br><span class="line">docker-ce.x86_64  3:18.09.0-3.el7                     docker-ce-stable</span><br><span class="line">docker-ce.x86_64  18.06.1.ce-3.el7                    docker-ce-stable</span><br><span class="line">docker-ce.x86_64  18.06.0.ce-3.el7                    docker-ce-stable</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">方法2： 通过阿里云镜像库安装符合最新docker-ce版本的containerd.io</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum install -y https://mirrors.aliyun.com/docker-ce/linux/centos/8/x86_64/edge/Packages/containerd.io-1.3.7-3.1.el8.x86_64.rpm</span></span><br><span class="line">yum install -y https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-19.03.13-3.el8.x86_64.rpm</span><br><span class="line">yum install -y https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-cli-19.03.13-3.el8.x86_64.rpm</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">装第三个的时候反复<span class="built_in">timeout</span>，人晕了</span></span><br></pre></td></tr></table></figure>

<h3 id="启动Docker"><a href="#启动Docker" class="headerlink" title="启动Docker"></a>启动Docker</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<h3 id="检查安装"><a href="#检查安装" class="headerlink" title="检查安装"></a>检查安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查版本号</span></span><br><span class="line">docker version</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行hello world</span></span><br><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">docker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: TLS handshake timeout.</span><br><span class="line">See &#x27;docker run --help&#x27;.</span><br></pre></td></tr></table></figure>

<p>timeout，应该是镜像源的问题，这个阿里云真够恶心的，用了阿里自己的镜像下rpm的时候都会timeout。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee local]# yum install -y https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-cli-19.03.13-3.el8.x86_64.rpm</span><br><span class="line">Last metadata expiration check: 2:09:13 ago on Tue 19 Jan 2021 06:27:23 PM CST.</span><br><span class="line">[MIRROR] docker-ce-cli-19.03.13-3.el8.x86_64.rpm: Curl error (28): Timeout was reached for https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-cli-19.03.13-3.el8.x86_64.rpm [Operation too slow. Less than 1000 bytes/sec transferred the last 30 seconds]</span><br><span class="line">[MIRROR] docker-ce-cli-19.03.13-3.el8.x86_64.rpm: Curl error (28): Timeout was reached for https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-cli-19.03.13-3.el8.x86_64.rpm [Operation too slow. Less than 1000 bytes/sec transferred the last 30 seconds]</span><br><span class="line">[MIRROR] docker-ce-cli-19.03.13-3.el8.x86_64.rpm: Curl error (28): Timeout was reached for https://download.docker.com/linux/centos/8/x86_64/edge/Packages/docker-ce-cli-19.03.13-3.el8.x86_64.rpm [Operation too slow. Less than 1000 bytes/sec transferred the last 30 seconds]</span><br></pre></td></tr></table></figure>

<p>尝试解决：</p>
<p>在<code>/etc/docker</code>新增<code>daemon.json</code>，添加镜像</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>重启</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker: Get https://registry-1.docker.io/v2/library/hello-world/manifests/sha256:90659bf80b44ce6be8234e6ff90a1ac34acbeb826903b02cfa0da11c82cbc042: net/http: TLS handshake <span class="built_in">timeout</span>.</span><br></pre></td></tr></table></figure>

<p>尝试解决：</p>
<p>更改镜像：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;https://registry.docker-cn.com&quot;</span><span class="punctuation">,</span><span class="string">&quot;https://pee6w651.mirror.aliyuncs.com&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>后来才知道，阿里云有个容器镜像服务，可以开启，并拿到自己的镜像加速器，也是如上配置。</p>
<p>成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure>

<h3 id="检查镜像"><a href="#检查镜像" class="headerlink" title="检查镜像"></a>检查镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              bf756fb1ae65        12 months ago       13.3kB</span><br></pre></td></tr></table></figure>

<h2 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载Docker</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf /var/lib/docker</span><br></pre></td></tr></table></figure>

<h2 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h2><p>C&#x2F;S结构</p>
<p>通过socket连接</p>
<p>1、Docker有着比虚拟机更少的抽象层。</p>
<p>2、docker利用的是宿主机的内核，vm需要是Guest Os。</p>
]]></content>
      <categories>
        <category>计算机</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker常用命令</title>
    <url>/2021/03/12/Docker%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h1 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h1><h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker version <span class="comment">#显示详细信息</span></span><br><span class="line">docker info	<span class="comment">#显示更详细的信息</span></span><br><span class="line">docker命令--<span class="built_in">help</span> <span class="comment">#万能命令</span></span><br></pre></td></tr></table></figure>

<p><a href="https://docs.docker.com/reference/">官网命令教程</a></p>
<h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images <span class="comment">#查询</span></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              bf756fb1ae65        12 months ago       13.3kB</span><br><span class="line">docker images -a  <span class="comment">#查询全部镜像</span></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              bf756fb1ae65        12 months ago       13.3kB</span><br><span class="line">docker images -q <span class="comment">#显示镜像的id</span></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">bf756fb1ae65</span><br><span class="line">docker images -aq <span class="comment">#显示所有的id</span></span><br><span class="line">bf756fb1ae65</span><br></pre></td></tr></table></figure>

<p>可选项</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--all , -a</code></td>
<td></td>
<td>Show all images (default hides intermediate images)</td>
</tr>
<tr>
<td><code>--digests</code></td>
<td></td>
<td>Show digests</td>
</tr>
<tr>
<td><code>--filter , -f</code></td>
<td></td>
<td>Filter output based on conditions provided</td>
</tr>
<tr>
<td><code>--format</code></td>
<td></td>
<td>Pretty-print images using a Go template</td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td></td>
<td>Don’t truncate output</td>
</tr>
<tr>
<td><code>--quiet , -q</code></td>
<td></td>
<td>Only show image IDs</td>
</tr>
</tbody></table>
<p>REPOSITORY ：镜像的仓库源</p>
<p>TAG ： 镜像的标签</p>
<p>IMAGE ID：镜像的id</p>
<p>CREATED：镜像的创建时间</p>
<p>SIZE：镜像的大小</p>
<h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker search mysql <span class="comment">#搜索mysql的镜像信息</span></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">NAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">mysql                             MySQL is a widely used, open-source relation…   10380               [OK]                </span><br><span class="line">mariadb                           MariaDB is a community-developed fork of MyS…   3848                [OK]                </span><br><span class="line">mysql/mysql-server                Optimized MySQL Server Docker images. Create…   758                                     [OK]</span><br><span class="line">percona                           Percona Server is a fork of the MySQL relati…   519                 [OK]                </span><br><span class="line">centos/mysql-57-centos7           MySQL 5.7 SQL database server                   87 </span><br><span class="line">docker search mysql --filter=STARS=3000 <span class="comment">#搜索STARS&gt;3000的mysql的镜像信息</span></span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">NAME                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">mysql               MySQL is a widely used, open-source relation…   10380               [OK]                </span><br><span class="line">mariadb             MariaDB is a community-developed fork of MyS…   3848                [OK]                </span><br></pre></td></tr></table></figure>

<p>可选项</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--filter , -f</code></td>
<td></td>
<td>Filter output based on conditions provided</td>
</tr>
<tr>
<td><code>--format</code></td>
<td></td>
<td>Pretty-print search using a Go template</td>
</tr>
<tr>
<td><code>--limit</code></td>
<td><code>25</code></td>
<td>Max number of search results</td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td></td>
<td>Don’t truncate output</td>
</tr>
</tbody></table>
<p>都是在<a href="https://hub.docker.com/">dockerhub</a>上搜索</p>
<h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull mysql <span class="comment"># 下载MySQL的镜像</span></span><br><span class="line"><span class="comment">#运行结果--默认下载最新版</span></span><br><span class="line">Using default tag: latest <span class="comment">#tag就是版本号，默认为最新</span></span><br><span class="line">latest: Pulling from library/mysql</span><br><span class="line">a076a628af6f: Pull complete <span class="comment">#分层下载</span></span><br><span class="line">f6c208f3f991: Pull complete </span><br><span class="line">88a9455a9165: Pull complete </span><br><span class="line">406c9b8427c6: Pull complete </span><br><span class="line">7c88599c0b25: Pull complete </span><br><span class="line">25b5c6debdaf: Pull complete </span><br><span class="line">43a5816f1617: Pull complete </span><br><span class="line">1a8c919e89bf: Pull complete </span><br><span class="line">9f3cf4bd1a07: Pull complete </span><br><span class="line">80539cea118d: Pull complete </span><br><span class="line">201b3cad54ce: Pull complete </span><br><span class="line">944ba37e1c06: Pull complete </span><br><span class="line">Digest: sha256:feada149cb8ff54eade1336da7c1d080c4a1c7ed82b5e320efb5beebed85ae8c</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> mysql:latest</span><br><span class="line">docker.io/library/mysql:latest <span class="comment">#真实地址</span></span><br><span class="line"><span class="comment">#因此</span></span><br><span class="line">docker pull mysql</span><br><span class="line">等价于</span><br><span class="line">docker pull docker.io/library/mysql:latest</span><br><span class="line"><span class="comment">#下载指定版本的MySQL</span></span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"><span class="comment">#运行结果</span></span><br><span class="line">5.7: Pulling from library/mysql</span><br><span class="line">a076a628af6f: Already exists </span><br><span class="line">f6c208f3f991: Already exists </span><br><span class="line">88a9455a9165: Already exists </span><br><span class="line">406c9b8427c6: Already exists <span class="comment">#与刚刚下载的分层公用了</span></span><br><span class="line">7c88599c0b25: Already exists </span><br><span class="line">25b5c6debdaf: Already exists </span><br><span class="line">43a5816f1617: Already exists </span><br><span class="line">1831ac1245f4: Pull complete </span><br><span class="line">37677b8c1f79: Pull complete </span><br><span class="line">27e4ac3b0f6e: Pull complete </span><br><span class="line">7227baa8c445: Pull complete </span><br><span class="line">Digest: sha256:b3d1eff023f698cd433695c9506171f0d08a8f92a0c8063c1a4d9db9a55808df</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> mysql:5.7</span><br><span class="line">docker.io/library/mysql:5.7</span><br></pre></td></tr></table></figure>

<p>可选项</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--all-tags , -a</code></td>
<td></td>
<td>Download all tagged images in the repository</td>
</tr>
<tr>
<td><code>--disable-content-trust</code></td>
<td><code>true</code></td>
<td>Skip image verification</td>
</tr>
<tr>
<td><code>--platform</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.32/"><strong>API 1.32+</strong></a> Set platform if server is multi-platform capable</td>
</tr>
<tr>
<td><code>--quiet , -q</code></td>
<td></td>
<td>Suppress verbose output</td>
</tr>
</tbody></table>
<h3 id="docker-rmi-删除镜像"><a href="#docker-rmi-删除镜像" class="headerlink" title="docker rmi 删除镜像"></a>docker rmi 删除镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查询镜像</span></span><br><span class="line">docker images -a</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysql               5.7                 a70d36bc331a        16 hours ago        449MB</span><br><span class="line">mysql               latest              c8562eaf9d81        16 hours ago        546MB</span><br><span class="line">hello-world         latest              bf756fb1ae65        12 months ago       13.3kB</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#删除ID为 a70d36bc331a的镜像</span></span><br><span class="line">docker rmi -f a70d36bc331a</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除所有镜像</span></span><br><span class="line">docker rmi -f $(docker images -aq)</span><br></pre></td></tr></table></figure>

<h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><h3 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h3><p>用docker下载一个centOS</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure>

<h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">参数</span></span><br><span class="line">--name=&quot;Name&quot;	容器名字”tomcat01 tomcat02“，用来区分容器</span><br><span class="line">-d	后台方式运行</span><br><span class="line">-it	使用交互方式运行，进入容器查看内容</span><br><span class="line">-P	指定容器的端口-p 8080:8080</span><br><span class="line">			    -p ip:主机端口:容器端口</span><br><span class="line">                 -p 主机端口:容器端口</span><br><span class="line">                 -p 容器端口</span><br><span class="line">                 容器端口</span><br><span class="line">-p	随机指定端口</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入容器</span></span><br><span class="line">[root@Shyee ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@c549e8ba2456 /]# </span><br><span class="line">exit #退出容器</span><br><span class="line">[root@c549e8ba2456 /]# exit</span><br><span class="line">exit</span><br><span class="line">[root@Shyee ~]# </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">后台启动容器</span></span><br><span class="line">docker run -d 容器名</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行结果</span></span><br><span class="line">[root@Shyee ~]# docker run -d centos</span><br><span class="line">c8d9334aae4794a0d6456207fd5d52deb7328190f3059e6b74d90be64616e3e9</span><br><span class="line">[root@Shyee ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动后会被停掉</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">因为docker把容器后台启动后，发现前台没有容器正在运行，认为没有容器，所以就把后台的容器给停掉了</span></span><br></pre></td></tr></table></figure>

<p>可加载项</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--add-host</code></td>
<td></td>
<td>Add a custom host-to-IP mapping (host:ip)</td>
</tr>
<tr>
<td><code>--attach , -a</code></td>
<td></td>
<td>Attach to STDIN, STDOUT or STDERR</td>
</tr>
<tr>
<td><code>--blkio-weight</code></td>
<td></td>
<td>Block IO (relative weight), between 10 and 1000, or 0 to disable (default 0)</td>
</tr>
<tr>
<td><code>--blkio-weight-device</code></td>
<td></td>
<td>Block IO weight (relative device weight)</td>
</tr>
<tr>
<td><code>--cap-add</code></td>
<td></td>
<td>Add Linux capabilities</td>
</tr>
<tr>
<td><code>--cap-drop</code></td>
<td></td>
<td>Drop Linux capabilities</td>
</tr>
<tr>
<td><code>--cgroup-parent</code></td>
<td></td>
<td>Optional parent cgroup for the container</td>
</tr>
<tr>
<td><code>--cgroupns</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.41/"><strong>API 1.41+</strong></a> Cgroup namespace to use (host|private) ‘host’: Run the container in the Docker host’s cgroup namespace ‘private’: Run the container in its own private cgroup namespace ‘’: Use the cgroup namespace as configured by the default-cgroupns-mode option on the daemon (default)</td>
</tr>
<tr>
<td><code>--cidfile</code></td>
<td></td>
<td>Write the container ID to the file</td>
</tr>
<tr>
<td><code>--cpu-count</code></td>
<td></td>
<td>CPU count (Windows only)</td>
</tr>
<tr>
<td><code>--cpu-percent</code></td>
<td></td>
<td>CPU percent (Windows only)</td>
</tr>
<tr>
<td><code>--cpu-period</code></td>
<td></td>
<td>Limit CPU CFS (Completely Fair Scheduler) period</td>
</tr>
<tr>
<td><code>--cpu-quota</code></td>
<td></td>
<td>Limit CPU CFS (Completely Fair Scheduler) quota</td>
</tr>
<tr>
<td><code>--cpu-rt-period</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.25/"><strong>API 1.25+</strong></a> Limit CPU real-time period in microseconds</td>
</tr>
<tr>
<td><code>--cpu-rt-runtime</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.25/"><strong>API 1.25+</strong></a> Limit CPU real-time runtime in microseconds</td>
</tr>
<tr>
<td><code>--cpu-shares , -c</code></td>
<td></td>
<td>CPU shares (relative weight)</td>
</tr>
<tr>
<td><code>--cpus</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.25/"><strong>API 1.25+</strong></a> Number of CPUs</td>
</tr>
<tr>
<td><code>--cpuset-cpus</code></td>
<td></td>
<td>CPUs in which to allow execution (0-3, 0,1)</td>
</tr>
<tr>
<td><code>--cpuset-mems</code></td>
<td></td>
<td>MEMs in which to allow execution (0-3, 0,1)</td>
</tr>
<tr>
<td><code>--detach , -d</code></td>
<td></td>
<td>Run container in background and print container ID</td>
</tr>
<tr>
<td><code>--detach-keys</code></td>
<td></td>
<td>Override the key sequence for detaching a container</td>
</tr>
<tr>
<td><code>--device</code></td>
<td></td>
<td>Add a host device to the container</td>
</tr>
<tr>
<td><code>--device-cgroup-rule</code></td>
<td></td>
<td>Add a rule to the cgroup allowed devices list</td>
</tr>
<tr>
<td><code>--device-read-bps</code></td>
<td></td>
<td>Limit read rate (bytes per second) from a device</td>
</tr>
<tr>
<td><code>--device-read-iops</code></td>
<td></td>
<td>Limit read rate (IO per second) from a device</td>
</tr>
<tr>
<td><code>--device-write-bps</code></td>
<td></td>
<td>Limit write rate (bytes per second) to a device</td>
</tr>
<tr>
<td><code>--device-write-iops</code></td>
<td></td>
<td>Limit write rate (IO per second) to a device</td>
</tr>
<tr>
<td><code>--disable-content-trust</code></td>
<td><code>true</code></td>
<td>Skip image verification</td>
</tr>
<tr>
<td><code>--dns</code></td>
<td></td>
<td>Set custom DNS servers</td>
</tr>
<tr>
<td><code>--dns-opt</code></td>
<td></td>
<td>Set DNS options</td>
</tr>
<tr>
<td><code>--dns-option</code></td>
<td></td>
<td>Set DNS options</td>
</tr>
<tr>
<td><code>--dns-search</code></td>
<td></td>
<td>Set custom DNS search domains</td>
</tr>
<tr>
<td><code>--domainname</code></td>
<td></td>
<td>Container NIS domain name</td>
</tr>
<tr>
<td><code>--entrypoint</code></td>
<td></td>
<td>Overwrite the default ENTRYPOINT of the image</td>
</tr>
<tr>
<td><code>--env , -e</code></td>
<td></td>
<td>Set environment variables</td>
</tr>
<tr>
<td><code>--env-file</code></td>
<td></td>
<td>Read in a file of environment variables</td>
</tr>
<tr>
<td><code>--expose</code></td>
<td></td>
<td>Expose a port or a range of ports</td>
</tr>
<tr>
<td><code>--gpus</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.40/"><strong>API 1.40+</strong></a> GPU devices to add to the container (‘all’ to pass all GPUs)</td>
</tr>
<tr>
<td><code>--group-add</code></td>
<td></td>
<td>Add additional groups to join</td>
</tr>
<tr>
<td><code>--health-cmd</code></td>
<td></td>
<td>Command to run to check health</td>
</tr>
<tr>
<td><code>--health-interval</code></td>
<td></td>
<td>Time between running the check (ms|s|m|h) (default 0s)</td>
</tr>
<tr>
<td><code>--health-retries</code></td>
<td></td>
<td>Consecutive failures needed to report unhealthy</td>
</tr>
<tr>
<td><code>--health-start-period</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.29/"><strong>API 1.29+</strong></a> Start period for the container to initialize before starting health-retries countdown (ms|s|m|h) (default 0s)</td>
</tr>
<tr>
<td><code>--health-timeout</code></td>
<td></td>
<td>Maximum time to allow one check to run (ms|s|m|h) (default 0s)</td>
</tr>
<tr>
<td><code>--help</code></td>
<td></td>
<td>Print usage</td>
</tr>
<tr>
<td><code>--hostname , -h</code></td>
<td></td>
<td>Container host name</td>
</tr>
<tr>
<td><code>--init</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.25/"><strong>API 1.25+</strong></a> Run an init inside the container that forwards signals and reaps processes</td>
</tr>
<tr>
<td><code>--interactive , -i</code></td>
<td></td>
<td>Keep STDIN open even if not attached</td>
</tr>
<tr>
<td><code>--io-maxbandwidth</code></td>
<td></td>
<td>Maximum IO bandwidth limit for the system drive (Windows only)</td>
</tr>
<tr>
<td><code>--io-maxiops</code></td>
<td></td>
<td>Maximum IOps limit for the system drive (Windows only)</td>
</tr>
<tr>
<td><code>--ip</code></td>
<td></td>
<td>IPv4 address (e.g., 172.30.100.104)</td>
</tr>
<tr>
<td><code>--ip6</code></td>
<td></td>
<td>IPv6 address (e.g., 2001:db8::33)</td>
</tr>
<tr>
<td><code>--ipc</code></td>
<td></td>
<td>IPC mode to use</td>
</tr>
<tr>
<td><code>--isolation</code></td>
<td></td>
<td>Container isolation technology</td>
</tr>
<tr>
<td><code>--kernel-memory</code></td>
<td></td>
<td>Kernel memory limit</td>
</tr>
<tr>
<td><code>--label , -l</code></td>
<td></td>
<td>Set meta data on a container</td>
</tr>
<tr>
<td><code>--label-file</code></td>
<td></td>
<td>Read in a line delimited file of labels</td>
</tr>
<tr>
<td><code>--link</code></td>
<td></td>
<td>Add link to another container</td>
</tr>
<tr>
<td><code>--link-local-ip</code></td>
<td></td>
<td>Container IPv4&#x2F;IPv6 link-local addresses</td>
</tr>
<tr>
<td><code>--log-driver</code></td>
<td></td>
<td>Logging driver for the container</td>
</tr>
<tr>
<td><code>--log-opt</code></td>
<td></td>
<td>Log driver options</td>
</tr>
<tr>
<td><code>--mac-address</code></td>
<td></td>
<td>Container MAC address (e.g., 92:d0:c6:0a:29:33)</td>
</tr>
<tr>
<td><code>--memory , -m</code></td>
<td></td>
<td>Memory limit</td>
</tr>
<tr>
<td><code>--memory-reservation</code></td>
<td></td>
<td>Memory soft limit</td>
</tr>
<tr>
<td><code>--memory-swap</code></td>
<td></td>
<td>Swap limit equal to memory plus swap: ‘-1’ to enable unlimited swap</td>
</tr>
<tr>
<td><code>--memory-swappiness</code></td>
<td><code>-1</code></td>
<td>Tune container memory swappiness (0 to 100)</td>
</tr>
<tr>
<td><code>--mount</code></td>
<td></td>
<td>Attach a filesystem mount to the container</td>
</tr>
<tr>
<td><code>--name</code></td>
<td></td>
<td>Assign a name to the container</td>
</tr>
<tr>
<td><code>--net</code></td>
<td></td>
<td>Connect a container to a network</td>
</tr>
<tr>
<td><code>--net-alias</code></td>
<td></td>
<td>Add network-scoped alias for the container</td>
</tr>
<tr>
<td><code>--network</code></td>
<td></td>
<td>Connect a container to a network</td>
</tr>
<tr>
<td><code>--network-alias</code></td>
<td></td>
<td>Add network-scoped alias for the container</td>
</tr>
<tr>
<td><code>--no-healthcheck</code></td>
<td></td>
<td>Disable any container-specified HEALTHCHECK</td>
</tr>
<tr>
<td><code>--oom-kill-disable</code></td>
<td></td>
<td>Disable OOM Killer</td>
</tr>
<tr>
<td><code>--oom-score-adj</code></td>
<td></td>
<td>Tune host’s OOM preferences (-1000 to 1000)</td>
</tr>
<tr>
<td><code>--pid</code></td>
<td></td>
<td>PID namespace to use</td>
</tr>
<tr>
<td><code>--pids-limit</code></td>
<td></td>
<td>Tune container pids limit (set -1 for unlimited)</td>
</tr>
<tr>
<td><code>--platform</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.32/"><strong>API 1.32+</strong></a> Set platform if server is multi-platform capable</td>
</tr>
<tr>
<td><code>--privileged</code></td>
<td></td>
<td>Give extended privileges to this container</td>
</tr>
<tr>
<td><code>--publish , -p</code></td>
<td></td>
<td>Publish a container’s port(s) to the host</td>
</tr>
<tr>
<td><code>--publish-all , -P</code></td>
<td></td>
<td>Publish all exposed ports to random ports</td>
</tr>
<tr>
<td><code>--pull</code></td>
<td><code>missing</code></td>
<td>Pull image before running (“always”|”missing”|”never”)</td>
</tr>
<tr>
<td><code>--read-only</code></td>
<td></td>
<td>Mount the container’s root filesystem as read only</td>
</tr>
<tr>
<td><code>--restart</code></td>
<td><code>no</code></td>
<td>Restart policy to apply when a container exits</td>
</tr>
<tr>
<td><code>--rm</code></td>
<td></td>
<td>Automatically remove the container when it exits</td>
</tr>
<tr>
<td><code>--runtime</code></td>
<td></td>
<td>Runtime to use for this container</td>
</tr>
<tr>
<td><code>--security-opt</code></td>
<td></td>
<td>Security Options</td>
</tr>
<tr>
<td><code>--shm-size</code></td>
<td></td>
<td>Size of &#x2F;dev&#x2F;shm</td>
</tr>
<tr>
<td><code>--sig-proxy</code></td>
<td><code>true</code></td>
<td>Proxy received signals to the process</td>
</tr>
<tr>
<td><code>--stop-signal</code></td>
<td><code>SIGTERM</code></td>
<td>Signal to stop a container</td>
</tr>
<tr>
<td><code>--stop-timeout</code></td>
<td></td>
<td><a href="https://docs.docker.com/engine/api/v1.25/"><strong>API 1.25+</strong></a> Timeout (in seconds) to stop a container</td>
</tr>
<tr>
<td><code>--storage-opt</code></td>
<td></td>
<td>Storage driver options for the container</td>
</tr>
<tr>
<td><code>--sysctl</code></td>
<td></td>
<td>Sysctl options</td>
</tr>
<tr>
<td><code>--tmpfs</code></td>
<td></td>
<td>Mount a tmpfs directory</td>
</tr>
<tr>
<td><code>--tty , -t</code></td>
<td></td>
<td>Allocate a pseudo-TTY</td>
</tr>
<tr>
<td><code>--ulimit</code></td>
<td></td>
<td>Ulimit options</td>
</tr>
<tr>
<td><code>--user , -u</code></td>
<td></td>
<td>Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</td>
</tr>
<tr>
<td><code>--userns</code></td>
<td></td>
<td>User namespace to use</td>
</tr>
<tr>
<td><code>--uts</code></td>
<td></td>
<td>UTS namespace to use</td>
</tr>
<tr>
<td><code>--volume , -v</code></td>
<td></td>
<td>Bind mount a volume</td>
</tr>
<tr>
<td><code>--volume-driver</code></td>
<td></td>
<td>Optional volume driver for the container</td>
</tr>
<tr>
<td><code>--volumes-from</code></td>
<td></td>
<td>Mount volumes from the specified container(s)</td>
</tr>
<tr>
<td><code>--workdir , -w</code></td>
<td></td>
<td>Working directory inside the container</td>
</tr>
</tbody></table>
<h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps <span class="comment">#查看正在运行的容器</span></span><br><span class="line">docker ps -a <span class="comment">#查看运行过的容器</span></span><br><span class="line">docker ps -a -n=? <span class="comment">#显示最近？个容器</span></span><br></pre></td></tr></table></figure>

<h3 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span> <span class="comment">#停止并退出</span></span><br><span class="line">Ctrl+P+Q <span class="comment">#不停止退出</span></span><br></pre></td></tr></table></figure>

<h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> 容器<span class="built_in">id</span> <span class="comment">#不能删除正在运行的容器</span></span><br><span class="line">docker <span class="built_in">rm</span> -f $(docker ps -aq) <span class="comment">#删除所有容器</span></span><br><span class="line">docker ps -a -q|xargs docker <span class="built_in">rm</span> <span class="comment">#删除所有容器</span></span><br></pre></td></tr></table></figure>

<h3 id="启动和停止"><a href="#启动和停止" class="headerlink" title="启动和停止"></a>启动和停止</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker start 容器<span class="built_in">id</span> <span class="comment">#启动</span></span><br><span class="line">docker restart 容器<span class="built_in">id</span> <span class="comment"># 重启</span></span><br><span class="line">docker stop 容器<span class="built_in">id</span> <span class="comment">#停止</span></span><br><span class="line">docker <span class="built_in">kill</span> 容器<span class="built_in">id</span> <span class="comment">#强行停止 </span></span><br></pre></td></tr></table></figure>

<h3 id="查看命令"><a href="#查看命令" class="headerlink" title="查看命令"></a>查看命令</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker logs</span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow log output</span><br><span class="line">      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)</span><br><span class="line">      --tail string    Number of lines to show from the end of the logs (default &quot;all&quot;)</span><br><span class="line">  -t, --timestamps     Show timestamps</span><br><span class="line">      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行一个容器，让他不停打印</span></span><br><span class="line">[root@Shyee ~]# docker run -d centos /bin/sh -c &quot;while true;do echo Shyee;sleep 1;done&quot;</span><br><span class="line">936f798488f4afb85055dea3d75c40703b827823467af54f0ee20834f2298760</span><br><span class="line">[root@Shyee ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">936f798488f4        centos              &quot;/bin/sh -c &#x27;while t…&quot;   9 seconds ago       Up 8 seconds                            laughing_feistel</span><br><span class="line">[root@Shyee ~]# docker logs -tf --tail 10 936f798488f4</span><br><span class="line">2021-01-20T04:17:47.958314992Z Shyee</span><br><span class="line">2021-01-20T04:17:48.960104271Z Shyee</span><br><span class="line">2021-01-20T04:17:49.962248118Z Shyee</span><br><span class="line">2021-01-20T04:17:50.964089661Z Shyee</span><br><span class="line">2021-01-20T04:17:51.965808705Z Shyee</span><br><span class="line">2021-01-20T04:17:52.967578590Z Shyee</span><br><span class="line">2021-01-20T04:17:53.969388856Z Shyee</span><br><span class="line">2021-01-20T04:17:54.971137786Z Shyee</span><br><span class="line">2021-01-20T04:17:55.972977481Z Shyee</span><br><span class="line">2021-01-20T04:17:56.974827278Z Shyee</span><br><span class="line">2021-01-20T04:17:57.976766489Z Shyee</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">一直会刷新</span></span><br></pre></td></tr></table></figure>

<h3 id="查看docker容器内部信息"><a href="#查看docker容器内部信息" class="headerlink" title="查看docker容器内部信息"></a>查看docker容器内部信息</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker top</span><br><span class="line">[root@Shyee ~]# docker top a87e6c731659</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                101771              101755              1                   12:22               ?                   00:00:00            /bin/sh -c while true;do echo Shyee;sleep 1;done</span><br><span class="line">root                101826              101771              0                   12:22               ?                   00:00:00            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br></pre></td></tr></table></figure>

<h3 id="查看容器的信息"><a href="#查看容器的信息" class="headerlink" title="查看容器的信息"></a>查看容器的信息</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect</span><br><span class="line">[root@Shyee ~]# docker inspect a87e6c731659</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-01-20T04:22:02.208432632Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/bin/sh&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;-c&quot;,</span><br><span class="line">            &quot;while true;do echo Shyee;sleep 1;done&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 101771,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2021-01-20T04:22:02.751586945Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:300e315adb2f96afe5f0b2780b87f28ae95231fe3bdd1e16b9ba606307728f55&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a/a87e6c731659ecff036fac2cede73e586466f15bbc026f5a1f3d106bc990a38a-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/dazzling_matsumoto&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: null,</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;Capabilities&quot;: null,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                0,</span><br><span class="line">                0</span><br><span class="line">            ],</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;KernelMemory&quot;: 0,</span><br><span class="line">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/24893cfd3f87c08a9366dac239c9fd5b02fea33a192fcc3f0c243a671c4da2c8-init/diff:/var/lib/docker/overlay2/f660b0f563e2db7f1e4e7c42e598560f1c25d2e10d534e781bfb2ccd45e9b38b/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/24893cfd3f87c08a9366dac239c9fd5b02fea33a192fcc3f0c243a671c4da2c8/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/24893cfd3f87c08a9366dac239c9fd5b02fea33a192fcc3f0c243a671c4da2c8/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/24893cfd3f87c08a9366dac239c9fd5b02fea33a192fcc3f0c243a671c4da2c8/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;a87e6c731659&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;while true;do echo Shyee;sleep 1;done&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;org.label-schema.build-date&quot;: &quot;20201204&quot;,</span><br><span class="line">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class="line">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class="line">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class="line">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;b1519a918616f880d5139e041386bce0c0a2e49c4330750c5f4ca8da34cae7e9&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/b1519a918616&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;1b101194ef0bb0cb2990db0acfa26a50e9dd20d10a0f633993ab1ef7a8b4ff98&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;a414e1e71fc0c80a2484ca0c656819a0532ccc902b70b9123a07dab25baaf04a&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;1b101194ef0bb0cb2990db0acfa26a50e9dd20d10a0f633993ab1ef7a8b4ff98&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="进入正在运行的容器"><a href="#进入正在运行的容器" class="headerlink" title="进入正在运行的容器"></a>进入正在运行的容器</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it 容器ID</span><br><span class="line"></span><br><span class="line">[root@Shyee ~]# docker exec -it a87e6c731659 /bin/bash</span><br><span class="line">[root@a87e6c731659 /]# </span><br><span class="line">[root@a87e6c731659 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@a87e6c731659 /]# ps -ef</span><br><span class="line">UID          PID    PPID  C STIME TTY          TIME CMD</span><br><span class="line">root           1       0  0 04:22 ?        00:00:00 /bin/sh -c while true;do echo Shyee;sleep 1;done</span><br><span class="line">root         396       0  0 04:28 pts/0    00:00:00 /bin/bash</span><br><span class="line">root         464       1  0 04:29 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br><span class="line">root         465     396  0 04:29 pts/0    00:00:00 ps -ef</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">另一种方法</span></span><br><span class="line">docker attach 容器ID</span><br><span class="line">[root@Shyee ~]# docker attach a87e6c731659 </span><br></pre></td></tr></table></figure>

<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从容器内拷到容器外</span></span><br><span class="line">docker cp</span><br><span class="line">[root@Shyee ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos              latest              300e315adb2f        6 weeks ago         209MB</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入容器</span></span><br><span class="line">[root@Shyee ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@112cbae27efa /]# cd /home</span><br><span class="line">[root@112cbae27efa home]# ls</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建测试文件</span></span><br><span class="line">[root@112cbae27efa home]# touch a.txt</span><br><span class="line">[root@112cbae27efa home]# ls</span><br><span class="line">a.txt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">退出容器</span></span><br><span class="line">[root@112cbae27efa home]# exit</span><br><span class="line">exit</span><br><span class="line">[root@Shyee local]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@Shyee local]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">112cbae27efa        centos              &quot;/bin/bash&quot;              4 minutes ago       Exited (0) 14 seconds ago                         laughing_leakey</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将测试文件拷贝出来</span></span><br><span class="line">[root@Shyee local]# docker cp 112cbae27efa:/home/a.txt /usr/local</span><br><span class="line">[root@Shyee local]# ls</span><br><span class="line">aegis  a.txt  bin  blog  etc  games  include  jdk-15.0.1  lib  lib64  libexec  nginx  nginx-1.19.6  sbin  share  src</span><br></pre></td></tr></table></figure>

<h2 id="docker-部署nginx"><a href="#docker-部署nginx" class="headerlink" title="docker 部署nginx"></a>docker 部署nginx</h2><h3 id="查找并下载容器"><a href="#查找并下载容器" class="headerlink" title="查找并下载容器"></a>查找并下载容器</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search nginx</span><br><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>

<h3 id="启动并配置"><a href="#启动并配置" class="headerlink" title="启动并配置"></a>启动并配置</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">-d 后台启动</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将25565映射到容器内的80</span> </span><br><span class="line">[root@Shyee local]# docker run -d --name nginx01 -p 25565:80 nginx</span><br><span class="line">6cf85750f6e82fbeaffd84e90c28cdcbbc91e70a2771ff1ea81cba9f35281c33</span><br><span class="line">[root@Shyee local]# curl localhost:25565</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="进入nginx"><a href="#进入nginx" class="headerlink" title="进入nginx"></a>进入nginx</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee local]# docker exec -it nginx01 /bin/bash</span><br><span class="line">root@6cf85750f6e8:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line">root@6cf85750f6e8:/# cd etc/nginx</span><br><span class="line">root@6cf85750f6e8:/etc/nginx# ls</span><br><span class="line">conf.d	fastcgi_params	koi-utf  koi-win  mime.types  modules  nginx.conf  scgi_params	uwsgi_params  win-utf</span><br></pre></td></tr></table></figure>

<h2 id="dockers部署tomcat"><a href="#dockers部署tomcat" class="headerlink" title="dockers部署tomcat"></a>dockers部署tomcat</h2><p>官方方式</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -it --<span class="built_in">rm</span> tomcat:9.0</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">--<span class="built_in">rm</span> 适用于测试，用完即关</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee local]# docker run -d -p 19132:8080 --name tomcat01 tomcat</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">测试报404</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入tomcat01</span></span><br><span class="line">[root@Shyee local]# docker exec -it tomcat01 /bin/bash</span><br><span class="line">root@b1085cdbfb07:/usr/local/tomcat# ls</span><br><span class="line">BUILDING.txt  CONTRIBUTING.md  LICENSE	NOTICE	README.md  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  native-jni-lib  temp  webapps  webapps.dist  work</span><br><span class="line">root@b1085cdbfb07:/usr/local/tomcat# cd webapps</span><br><span class="line">root@b1085cdbfb07:/usr/local/tomcat/webapps# ls</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">webapp是空的</span></span><br></pre></td></tr></table></figure>

<p>webapps原有的文件都在 webapps.dist 中，所以把webapps.dist中的文件拷到webapps里。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@b1085cdbfb07:/usr/local/tomcat# cp -r webapps.dist/* webapps</span><br><span class="line">root@b1085cdbfb07:/usr/local/tomcat# cd webapps</span><br><span class="line">root@b1085cdbfb07:/usr/local/tomcat/webapps# ls</span><br><span class="line">ROOT  docs  examples  host-manager  manager</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试通过</span></span><br></pre></td></tr></table></figure>

<h2 id="部署es-kibana"><a href="#部署es-kibana" class="headerlink" title="部署es+kibana"></a>部署es+kibana</h2><p>es暴露的端口很多!</p>
<p>es十分的耗内存</p>
<p>es的数据一般需要放置到安全目录!挂载</p>
<p>官方文档</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> elasticsearch:7.10.1</span></span><br></pre></td></tr></table></figure>

<p>卡死了。</p>
<p>限制内存</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span>  -e ES_JAVA_OPTS=<span class="string">&quot;-Xms64m -Xmx512m&quot;</span> elasticsearch:7.10.1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS                                            NAMES</span><br><span class="line">22dcdeaf2f79        elasticsearch:7.10.1   &quot;/tini -- /usr/local…&quot;   7 seconds ago       Up 6 seconds        0.0.0.0:9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp   elasticsearch02</span><br><span class="line">[root@iZ2zeeg68odufzgdsoyyujZ ~]# docker stats</span><br><span class="line"></span><br><span class="line">CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS</span><br><span class="line">22dcdeaf2f79        elasticsearch02     5.87%               358.7MiB / 1.774GiB   19.74%              1.1kB / 0B          162MB / 0B          31</span><br></pre></td></tr></table></figure>

<p>检查</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee ~]# curl localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;22dcdeaf2f79&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;docker-cluster&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;_YJ5sKDETeqelK3n1v2U_w&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;7.10.1&quot;,</span><br><span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">    &quot;build_type&quot; : &quot;docker&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;1c34507e66d7db1211f66f3513706fdf548736aa&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2020-12-05T01:00:33.671820Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;8.7.0&quot;,</span><br><span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,</span><br><span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h2><p>portainer</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<p>从浏览器链接8088端口进入</p>
<p>选择local</p>
<p>![image-20210221204835330](D:\bloglocal\Docker 常用命令.assets\image-20210221204835330.png)</p>
<p>会进入到这种页面</p>
<p>![image-20210221205209445](D:\bloglocal\Docker 常用命令.assets\image-20210221205209445.png)</p>
<h2 id="commit镜像"><a href="#commit镜像" class="headerlink" title="commit镜像"></a>commit镜像</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker commit #提交容器为一个新的副本</span><br><span class="line">docker commit -m=&quot;提交的描述信息&quot; -a=&quot;作者&quot; 容器id 目标镜像名</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动一个默认tomcat，</span></span><br><span class="line">docker run -it -p 8080:8080 tomcat</span><br><span class="line">docker exec -it 5fea3e1cfa5a /bin/bash</span><br><span class="line">root@5fea3e1cfa5a:/usr/local/tomcat# cd webapps</span><br><span class="line">root@5fea3e1cfa5a:/usr/local/tomcat/webapps# ls</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发现webapps中没有东西（都在webapps.dist中）</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将其拷贝到webapps中</span></span><br><span class="line">root@5fea3e1cfa5a:/usr/local/tomcat# cp -r webapps.dist/* webapps</span><br><span class="line">root@5fea3e1cfa5a:/usr/local/tomcat# cd webapps</span><br><span class="line">root@5fea3e1cfa5a:/usr/local/tomcat/webapps# ls</span><br><span class="line">ROOT  docs  examples  host-manager  manager</span><br></pre></td></tr></table></figure>

<h3 id="进行提交"><a href="#进行提交" class="headerlink" title="进行提交"></a>进行提交</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee ~]# docker commit -a =&quot;Shyee&quot; -m=&quot;init tomcat done&quot; 5fea3e1cfa5a tomcat02:1.0</span><br><span class="line">sha256:75830e7057278f119161e5e0745c90fc9d58ea475476d64d50d522186ce58df4</span><br><span class="line">[root@Shyee ~]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">tomcat02              1.0                 75830e705727        6 seconds ago       654MB</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Effects of magnetic field on electron power absorption in helicon fluid simulation</title>
    <url>/2023/10/14/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/</url>
    <content><![CDATA[<p>磁场对螺旋流体模拟中电子功率吸收的影响</p>
<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本研究开发了一种名为 “北京大学螺旋放电”（PHD）的代码，可以模拟背景磁场大于 500 G 和压力小于 1 Pa 的螺旋放电过程。代码中使用了两个流体方程。PHD 模拟得出了两个重要发现：（1）等离子体密度随背景磁场的时间演化呈现出第二次快速增长（称为第二次密度跃迁），类似于螺旋子等离子体中的模式转换；（2）在存在磁场的情况下，电子功率吸收的峰值位置出现在中心轴附近，这与没有磁场的情况不同。这些结果可能有助于加深对放电机制的理解。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>螺旋等离子体具有高等离子体密度、低压运行、稳态放电、高功率耦合效率以及等离子体区域无需电极等理想特性。除了用于等离子体研究以及可变比冲磁等离子体火箭、氦质子等离子体推进器和氦质子双层推进器等应用[1-7]，它们还因其多种优势而被用于材料加工[1, 8]。</p>
<p>关于螺旋子等离子体放电机制的统一理论尚未建立[9]。氦质子等离子体主要表现出电磁和静电两种耦合模式。电磁模式为弱阻尼，称为氦子波，而静电模式为强阻尼，称为 Trivelpiece-Gould (T-G) 波 [10-12]。陈指出，朗道阻尼机制在螺旋子放电中发挥了重要作用 [13]；这一点也得到了实验验证 [14]。进一步的实验研究表明，快速电子的数量不足以提供完全电离，这证明朗道阻尼并不重要[15, 16]。一些关于功率沉积的模拟，如基于 ANTENA2 和 HELIC 的模拟表明，T-G 波是电离机制的重要组成部分 [11，17]。此外，实验也验证了 T-G 波的存在 [18]。目前，人们普遍认为螺旋波和 T-G 波可能是导致电离的主要因素[1]。</p>
<p>表 1.一些螺旋仪及其典型运行参数。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96033279192200.png"></p>
<p>数值模拟是研究谐振子等离子体的有效方法。特别是，通过模拟可以很容易地获得空间和时间上每一点的所有物理量；相比之下，这些物理量通常很难通过实验获得。完整的模拟包括功率沉积、传输过程和电离过程 [19]。Bose 等人建立了一个详细的二维轴对称流体模型，并结合麦克斯韦方程对波的传播、等离子体传输和电离过程进行了数值模拟。研究发现，随着磁场强度的增加，天线激发的波会向等离子体更深处传播[8]。Yang 等人提出了一种利用三维流体力学方程的螺旋子等离子体放电直接数值模拟模型。他们研究了不同天线电流下的放电特性以及螺旋子放电中低场峰的出现 [19，20]。Jaafarian 等人利用粒子在小室中的蒙特卡罗碰撞模拟技术研究了工作参数对螺旋子放电的影响[21]。CST [10]、HELIC [17]、MAXEB [11]、ANTENA2 [22]、SPIREs [23] 和 ADAMANT [24] 被用来研究电离机制。</p>
<p>如表 1 所示，许多螺旋子装置在低压（∼0.5 Pa）、强磁场（∼1kG）和高功率（∼kW）条件下工作。迄今为止，数值模拟研究只关注波的传播和功率沉积，而电离和传输过程通常被忽视[10, 17, 22-24]。据我们所知，在背景磁场超过 500 G 和压力小于 1Pa 的同一时间内，包括功率沉积、传输过程和电离过程的模拟尚未见报道，尽管这些参数可以通过实验实现。因此，我们开发了北京大学螺旋放电（PHD）代码来研究这些参数下的螺旋子放电过程。PHD 模型在平行磁场方向使用了伏极扩散近似，大大提高了计算效率。此外，我们还首次发现了螺旋子放电过程模拟中的二次密度跃迁。</p>
<p>名古屋 III 型天线、半螺旋天线、博斯韦尔天线和单环天线等多种类型的天线都可以产生太阳等离子体[1, 32, 33]。前三种天线主要激发 &#x3D;m±1 极模式，而单环天线主要激发 &#x3D;m 0 模式。我们结合北京大学等离子体试验（PPT）装置[31]的实验研究，对单环天线产生的 &#x3D; m 0 谐子等离子体的放电过程进行了研究。图 1 是 PPT 实验装置的示意图。PPT 实验使用亥姆霍兹线圈产生背景磁场，而 PHD 模拟使用均匀背景磁场。我们将流体方程和泊松方程与麦克斯韦方程相结合，对螺旋子放电过程（包括电子功率吸收、电离过程和传输过程）进行了数值模拟。本文的其余部分安排如下。第 2 节介绍了模拟模型和放电配置。第 3 节讨论了基准工作，包括 PHD 与 COMSOL MultiphysicsTM 和 PPT 实验结果的比较。第 4 节详细介绍了在各种背景磁场下获得的主要模拟结果。第 5 节讨论了这些结果并提出了主要结论。</p>
<h1 id="2-模拟模型"><a href="#2-模拟模型" class="headerlink" title="2.模拟模型"></a>2.模拟模型</h1><p>本研究建立了一个圆柱坐标下的双流体排放模型。我们首先讨论本研究中考虑的假设和近似值。物理量在极坐标方向上是均匀的，即所有变量的 <img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96369168704300.png">，矢量有三个分量。粒子流用漂移-扩散近似法描述。</p>
<p>电子能量分布函数（EEDF）是麦克斯韦式的。此外，中性原子和离子的温度被认为恒定在常温（300 K）。输入功率仅来自电子功率吸收和天线的焦耳热。只考虑了氩的基态电离反应，而忽略了其他化学反应，如潘宁电离、复合反应和发光。负离子和高价正离子也被忽略。接下来我们将考虑非麦克斯韦 EEDF，因为在实验中已经观察到 [34-37]。之前的实验表明，中性剖面以及电离导致的中性损耗会显著影响等离子体剖面或其动态行为 [38-42]。未来将考虑更复杂的中性动力学，如中性温度、压力平衡等。</p>
<p>值得注意的是，我们对平行磁场方向（平行方向）的粒子流采用了伏极扩散近似。在均匀背景磁场和周期性边界条件下，我们可以将平行方向输运模型从漂移扩散近似简化为伏极扩散近似。等离子体密度和温度相似，误差率约为 5%。我们的研究发现，在求解泊松方程时，低压和高磁场条件下会出现数值不稳定性。这是因为平行方向和垂直方向的扩散系数相差几个数量级。为了克服数值不稳定性，我们使用了伏极扩散近似。使用近似值的时间步长可比不使用近似值的时间步长大 100 多倍，即计算效率提高了 100 多倍。</p>
<h2 id="等离子体模型"><a href="#等离子体模型" class="headerlink" title="等离子体模型"></a>等离子体模型</h2><p>PHD 代码采用氩放电，模型中考虑的粒子是电子、离子和中性原子。等离子体模型的控制方程[43]如下。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96640714955800.png" alt="(1)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96658470720900.png" alt="(2)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96674739182700.png" alt="(3)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/96697522016400.png" alt="(4)"></p>
<p>n<sub>α</sub>、D<sub>α</sub>、Г<sub>α</sub> (α&#x3D;e,i,n)分别为颗粒密度、通量、扩散率和流动性。中性原子密度的计算公式为n<sub>n</sub> &#x3D; 2.41 x 10<sup>14</sup> p<sub>n</sub>cm<sup>-3</sup>,其中p<sub>n</sub>为气压，其单位为Pa。下标 e、i 和 n 分别表示电子、离子和中性原子。T<sub>e</sub> 是电子温度，单位为 eV。此外，e、V 和ε<sub>0</sub> 分别是基本电荷、电势和自由空间的介电常数。与电荷分离 E<sub>s</sub> 相对应的静电场由电势梯度给出，即 E<sub>s</sub> &#x3D; -▽V·H<sub>i</sub> &#x3D; 15.7eV 是第一电离能，基态电离的速率系数为<img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/97580702251500.png">。方程 (1) 中的通量 Г<sub>α</sub> 是由修正的漂移-扩散近似法给出的：</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/97649456510300.png" alt="(5)"></p>
<p>其中，B<sub>0</sub> 为外部静磁场，μ<sub>α</sub> 为迁移率。我们沿 z 方向设置了一个均匀的背景磁场，即B<sub>0</sub> &#x3D; B<sub>0</sub>e<sub>z</sub>。电子迁移率μ<sub>e</sub> 和电子扩散系数 D<sub>e</sub> 的计算公式为<img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/97930878324100.png">和<img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/97945230656700.png">。其中，电子碰撞频率 ν<sub>e</sub> 由 ν<sub>e</sub> &#x3D; ν<sub>en</sub>+ν<sub>ei</sub> [19] 得出。ν<sub>en</sub> 和 ν<sub>ei</sub> 分别是电子与中性原子的碰撞频率和电子与离子的碰撞频率。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98080742800900.png" alt="(6)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98094582460500.png" alt="(7)"></p>
<p>其中，lnΛ 是库仑对数，δ<sub>en</sub> 是电子与中性原子之间的碰撞截面。<br>方程 (5) 包括三元方程和三元未知数。我们可以用以下方程求解方程 (5)</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98170717224400.png" alt="(8)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98190423563700.png" alt="(9)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98206407145200.png" alt="(10)"></p>
<p>采用平行通量的伏极扩散近似，方程 (10) 变为</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98230014961900.png" alt="(11)"></p>
<p>其中<img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98257901401100.png">是两极扩散系数。</p>
<p>中性原子的通量只考虑方程 (2) 中的扩散项</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98300658460100.png" alt="(12)"></p>
<p>在公式 (3) 中，计算能量通量q<sub>e</sub>时忽略了磁场对电子温度传输的影响。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98349957237000.png" alt="(13)"></p>
<p>p<sub>tot</sub> 是电子吸收功率，计算公式如下：</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98388205908300.png" alt="(14)"></p>
<p>等离子体电流 J<sub>p</sub> 和感应电场 E<sub>mf</sub> 由麦克斯韦方程计算得出。</p>
<h2 id="麦克斯韦方程"><a href="#麦克斯韦方程" class="headerlink" title="麦克斯韦方程"></a>麦克斯韦方程</h2><p>高频电场 E<sub>mf</sub> 和感应磁场 B<sub>p</sub> 是通过麦克斯韦方程和等离子体电流演化方程计算得出的，计算公式如下：</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98494375753000.png" alt="(15)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98509511122700.png" alt="(16)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98524222654400.png" alt="(17)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98537750599500.png" alt="(18)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98550958344600.png" alt="19"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98564822116300.png" alt="(20)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98577204520600.png" alt="(21)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98590182765300.png" alt="(22)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98600949721400.png" alt="23"></p>
<p>其中，m<sub>e</sub>、μ<sub>0</sub>、ε<sub>r</sub>、分别为电子质量、自由空间的磁导率和自由空间的相对介电常数。**<em>J</em>**<sub>a</sub> 是天线电流，计算公式为</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98764542247000.png" alt="(24)"></p>
<p>S<sub>a</sub>是天线的横截面积，**<em>I</em>**<sub>a</sub> 是电流振幅。总输入功率由等离子体吸收的电子功率和天线的焦耳热产生。电流幅值 <strong><em>I</em></strong><sub>a</sub> 根据电子吸收功率进行调整，以保持恒定的总功率。等离子体电流 <strong><em>J</em></strong><sub>p</sub> 由电子电流产生。因此，方程 (21)-(23) 也表示电子的运动。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98860535457300.png" alt="图 2.放电配置（不按比例）。"></p>
<h2 id="初始条件"><a href="#初始条件" class="headerlink" title="初始条件"></a>初始条件</h2><p>模拟的初始条件如下：</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98913734303700.png" alt="(25)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98928237379600.png" alt="(26)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98945088711800.png" alt="(27)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/98956036777100.png" alt="(28)"></p>
<p>参考文献[43]和 PHD 模拟表明，稳态与一定范围的等离子体密度无关。然而，在低压和强磁场条件下，初始等离子体密度必须较大（约 10<sup>10</sup>cm<sup>-3</sup>）。否则，等离子体密度不会增加。实验中采用的这种大等离子体密度值可归因于电容模式，而 PHD 并未考虑这种模式。另一个重要方面是电磁场初始条件的设定。我们计算了初始等离子体密度的 E<sub>mf</sub> 和B<sub>p</sub>的 “本征 “结构，并将其设置为初始条件。我们设定 E<sub>mf</sub>&#x3D;B<sub>p</sub>&#x3D;0，然后在放电过程开始前计算 20 个射频（RF）周期的麦克斯韦方程，即等离子体状态保持不变，包括n<sub>e</sub>,n<sub>i</sub>和T<sub>e</sub>我们的评估结果表明，这种方法可在较短时间内收敛，而使用其他初始条件则会导致发散。</p>
<h2 id="排放配置和边界条件"><a href="#排放配置和边界条件" class="headerlink" title="排放配置和边界条件"></a>排放配置和边界条件</h2><p>图2显示了放电配置。真空室的边界位于 r<sub>0</sub>&#x3D;0.075m处,铝屏蔽位于R<sub>0</sub>&#x3D;0.125m处。径向宽度为 10 mm、轴向宽度为 30 mm 的单环天线的位置分别为r<sub>a</sub>&#x3D;0.09 m和z<sub>a</sub>&#x3D;0.3m。这种放电结构与 PPT 的等离子体源区大致相同。</p>
<p>边界条件如下</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99680532851200.png" alt="(29)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99693204956200.png" alt="(30)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99743621450500.png" alt="(31)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99755956829200.png" alt="(32)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99769392288300.png" alt="(33)"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99785909363800.png" alt="(34)"></p>
<p>我们只考虑了等离子体源区域的放电过程。为了减少边界的影响，我们对 z 方向上的所有变量都采用了周期性边界条件。</p>
<h2 id="数值方法"><a href="#数值方法" class="headerlink" title="数值方法"></a>数值方法</h2><p>对于流体方程 (1)-(3)，我们采用了空间交错网格，即标量占一个完整网格点，矢量占半个网格点。空间离散采用中心差分法。时间离散采用全隐式格式，并通过连续松弛（SOR）求解。</p>
<p>对于泊松方程 (4)，我们也采用了中心差空间离散法，并用 SOR 求解。为了克服时间步长的限制，我们采用了一种半隐式方法来求解电动势[45, 46]。这种方法的主要思想是利用当前时间步长的电场和等离子体密度分布来预测下一时间步长的电场。</p>
<p>方程 (15)-(23) 采用有限差分时域法。我们在空间离散化中使用了Yee 的交错网格[47]，在时间离散化中使用了两步交替隐式格式法。</p>
<h1 id="PHD-与-COMSOL-和-PPT-的比较"><a href="#PHD-与-COMSOL-和-PPT-的比较" class="headerlink" title="PHD 与 COMSOL 和 PPT 的比较"></a>PHD 与 COMSOL 和 PPT 的比较</h1><p>本节分为两部分。在没有背景磁场的情况下，对 PHD 和 COMSOL Multiphysics 软件进行了简单的基准比较。此外，还将 PHD 代码的结果与 PPT 的实验结果进行了比较。除非另有说明，仿真参数和常数均取自表 2。</p>
<p>表 2.模拟参数和常数。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/99802933876800.png"></p>
<h2 id="使用-COMSOL-进行基准测试"><a href="#使用-COMSOL-进行基准测试" class="headerlink" title="使用 COMSOL 进行基准测试"></a>使用 COMSOL 进行基准测试</h2><p>COMSOL 是一款商业软件，广泛用于许多科学模拟。考虑到其电感耦合等离子体模块的可靠性以及在背景磁场下获得的结果并不广为人知，我们使用该模块建立了一个基准。仿真参数如表 3 所示。为了使模拟条件更接近 COMSOL 的模拟条件，我们考虑了一系列与 COMSOL 一致的涉及可转移原子的化学反应[43, 48, 49]。轴向端板的边界条件与侧壁的边界条件相同，电子碰撞频率 ne 也与 COMSOL 中的相同。</p>
<p>表 3.模拟参数。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/102242626839200.png"></p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/102124606811500.png" alt="图 3.最大值n&lt;sub&gt;e&lt;/sub&gt;的时间演变。"></p>
<p>图 3 显示了电子密度随时间的演变。PHD 计算出的n<sub>e</sub> 的时间演变与 COMSOL 得出的结果非常相似。电子密度稳态结构的形状也很相似；此外，如图 4（a）和（b）所示，当色标调整到相似范围时，它们的形状更加相似。最大等离子体密度的两个径向位置都在轴线上，轴向位置与天线位置相同。等离子体主要位于天线附近。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/102713591100300.png" alt="图 4. cm&lt;sup&gt;-3&lt;/sup&gt;中n&lt;sub&gt;e&lt;/sub&gt;的稳态结构（t=2000 T&lt;sub&gt;rf&lt;/sub&gt;,T&lt;sub&gt;rf&lt;/sub=7.37x10&lt;sup&gt;-8&lt;/sup&gt;为射频周期），由 (a) PHD 和 (b) COMSOL 模拟；(c) 电子密度的径向结构（z=0.3 m）。"></p>
<p>我们进一步比较了z&#x3D;0.3 m处的电子密度径向分布，如图 4（c）所示。使用 COMSOL 得出的最大电子密度为 9.88x10<sup>11</sup> cm<sup>-3</sup>,而使用 PHD 得出的最大电子密度为1.05x10<sup>12</sup>cm<sup>-3</sup>。两者相差约 6%，这在放电过程中是可以容忍的。</p>
<h2 id="PHD-模拟与-PPT-实验的比较"><a href="#PHD-模拟与-PPT-实验的比较" class="headerlink" title="PHD 模拟与 PPT 实验的比较"></a>PHD 模拟与 PPT 实验的比较</h2><p>我们将本次 PHD 模拟的结果与之前 PPT 实验的结果进行了比较。需要注意的是，在 PPT 实验中，实验等离子体密度只能在扩散区进行评估，而 PHD 只模拟了源区，以节省计算资源。图 5 显示了最大离子密度与 (a) 功率 P<sub>0</sub>,(b) 气体压力 p<sub>n</sub>,和 (c) 磁场 B<sub>0</sub> 的关系。模拟值和实验值的大小相似，趋势一致。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/102960036786700.png" alt="图 5.最大离子密度与 (a) 功率 P&lt;sub&gt;0&lt;/sub&gt;,(b)气体压力 p&lt;sub&gt;n&lt;/sub&gt; 和 (c) 磁场 B&lt;sub&gt;0&lt;/sub&gt;的关系。"></p>
<p>压力曲线在 0.6 Pa 以下的一致性较好。原因可能是随着压力的增加，源区和扩散区之间的等离子体密度差增大。总的来说，模拟结果与实验结果在定性上是一致的，定量比较的结果并不十分相似。这可能与模拟配置的简化、建立模型时使用的若干假设、边界条件的选择等有关。</p>
<p>就磁场曲线而言，在强磁场条件下，PHD 与 PPT 之间的偏差似乎越来越大。可能的原因如下。(1) PPT 实验中颗粒的主要损失是侧壁和端板，而 PHD 模拟只考虑了侧壁。(2) 模拟中使用的是经典扩散，颗粒的传输可能比实验结果慢。因此，粒子的损失变小，等离子体密度变大。(3) 诊断位置离源头较远，因此会有一定的变化。此外，朗缪尔探针在强磁场下的诊断误差可能会变大。</p>
<p>总之，两次模拟的生长过程和电子密度曲线相似，数值差异很小。因此，PHD 代码在一定程度上是可靠的。</p>
<h1 id="背景磁场变化时的放电过程"><a href="#背景磁场变化时的放电过程" class="headerlink" title="背景磁场变化时的放电过程"></a>背景磁场变化时的放电过程</h1><p>本节主要介绍无磁场和有磁场时的放电过程。放电情况在P<sub>0</sub>&#x3D;2000W、p<sub>n</sub>&#x3D;0.35Pa、0≤B<sub>0</sub>≤1180G条件下进行。如图 6 所示，电子密度经历了线性增长和非线性饱和，最终达到稳态。可以看出，背景磁场越强，稳态等离子体密度越高。有趣的是，我们发现在磁场存在的情况下，密度在达到稳态之前迅速增加。我们称之为第二次密度跃迁，这与螺旋子等离子体中的模式转换类似。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/115913718601700.png" alt="图 6.不同B&lt;sub&gt;0&lt;/sub&gt;条件下最大n&lt;sub&gt;e&lt;/sub&gt;值的时间变化。"></p>
<p>在B<sub>0</sub> &#x3D; 1180G的情况下，第二密度跃迁时间约为 t&#x3D;3000 <strong><em>T</em></strong><sub>rf</sub>。B &#x3D; 1180G时的电子密度约为无磁场时的 82 倍。这里有两种可能的解释。首先，可能存在一个共振等离子体密度，它是磁场 B<sub>0</sub> 和气体压力 p<sub>n</sub> 的函数。在这个特定的等离子体密度下，电磁波和等离子体达到共振状态。这种共振会导致高电子功率吸收。其次，磁场抑制了等离子体的传输，从而减少了等离子体在壁上的损耗。因此，等离子体密度会增加。然而，第二次密度跃迁的确切起源仍不清楚。</p>
<p>图 7 显示了 n<sub>e</sub> 的稳态结构。随着磁场的增大，轴向分布的均匀性增加，等离子体逐渐从局部区域扩散到整个真空区域。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/116250559916700.png" alt="图 7.以 cm&lt;sup&gt;-3&lt;/sup&gt;为单位的 n&lt;sub&gt;e&lt;/sub&gt; 的稳态结构。"></p>
<p>图 8 显示了稳定状态下电子温度 Te 和电子吸收功率 Ptot 的周期平均分布。Ptot 的负值意味着电子失去能量，电子的能量转化为波能。在此，我们将简要讨论放电发生的方式。电子功率的吸收会提高电子温度，从而使电离截面变大，进而产生大量电离过程。如果源项与等离子体损耗相平衡，就会达到稳定状态。随着磁场的增加，电子温度降低。除B &#x3D; 50G的情况外，最大 Te 的轴向位置与天线的轴向位置相同。此外，在有磁场的情况下，最大电子功率吸收发生在中心轴附近，而在无磁场的情况下，则出现在边界附近，如图 8（b）所示。在螺旋推进器配置中也观察到了天线附近或源壁附近的高温区[50-54]。PHD 模拟结果在一定程度上再现了这一现象。另一个有趣的现象是，当引入磁场时，电子功率吸收区域在 z 方向从一个峰值变为两个峰值。通过仔细观察，我们发现径向图案的数量会随着磁场的增加而增加。具体解释如下</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/116669166231300.png" alt="图 8.稳定状态下 (a) Te（单位：eV）和 (b) 电子吸收功率 Ptot（单位：W m&lt;sup&gt;-3&lt;/sup&gt;）的周期平均结构。"></p>
<p>通常认为，由于阻尼率较弱，螺旋波可以向中心轴传播。周期性边界条件很可能产生驻波解。在实验中也观察到了驻波螺旋波[55-57]。因此，我们推测这些系统中的主波是驻波螺旋子波。图 9 显示了不同时刻极性电场E<sub>mfθ</sub>和感应磁场B<sub>pz</sub>的振幅。在初始时刻（t &#x3D; 40 <strong><em>T</em></strong><sub>rf</sub>），E<sub>mfθ</sub>的振幅从天线位置开始衰减。当触发第二次跃迁（t &#x3D; 3160 <strong><em>T</em></strong><sub>rf</sub>）和第三次跃迁（t &#x3D; 3400 <strong><em>T</em></strong><sub>rf</sub>）时，它变成了驻波结构，等离子体中的振幅高于天线位置。然而，电场在稳态（t &#x3D; 20000 <strong><em>T</em></strong><sub>rf</sub>）时并不是一个明显的驻波结构，这可能是在实验中不易测得高驻波比（用等离子体中最大E<sub>mfθ</sub>&#x2F;最小E<sub>mfθ</sub>表示）结果的原因。驻波产生了电子功率吸收的两个轴向和中心峰值。磁场越大，密度越高。密度越高，径向波长越短。因此，径向图案的数量也会增加。</p>
<p>从图 6-8 可以看出，电子密度、电子温度和电子功率吸收之间存在合理的关系。模拟结果符合放电定律。</p>
<p><img src="/./pic/Effects-of-magnetic-field-on-electron-power-absorption-in-helicon-fluid-simulation/116826493366700.png"></p>
<p>图 9.在 2000 W、0.35 Pa、1180 G 的情况下，不同时刻 (a) 极电场E<sub>mfθ</sub>的振幅（单位 V m<sup>-1</sup>）和 (b) 感应磁场 B 的振幅（单位 T），其中t &#x3D; 40 <strong><em>T</em></strong><sub>rf</sub>、t &#x3D; 3160 <strong><em>T</em></strong><sub>rf</sub>、t &#x3D; 3400 <strong><em>T</em></strong><sub>rf</sub>、t &#x3D; 20000 <strong><em>T</em></strong><sub>rf</sub>分别对应图 6 中的 A、B、C、D 点。</p>
<h1 id="讨论和结论"><a href="#讨论和结论" class="headerlink" title="讨论和结论"></a>讨论和结论</h1><p>本研究建立了一个包含电子功率吸收、电离过程和传输过程的双流体放电模型，并利用该模型获得了数值解。PHD 代码可用于模拟低压（<del>0.5 Pa）和强背景磁场（</del>1kG）下的放电过程。在无磁场条件下得到的结果与使用 COMSOL 得到的结果基本一致，在典型的螺旋子放电参数下得到的结果基本符合放电过程的规律。扫描参数的结果在定性上与实验结果一致，但在定量上并不一致。与无背景磁场的情况相比，强磁场下的等离子体密度要高出一个数量级，这与实验验证的放电定律是一致的。在有磁场的情况下，稳定状态下的最大电子功率吸收发生在中心轴附近。这可能是由于驻留的螺旋波造成的。在完整的放电过程中发现了第二次密度跃迁。这些结果有助于我们理解放电机制。特别是，随着功率的增加出现稳态密度跃迁是一个重要的结果。然而，由于应用了周期性边界条件，等离子体损耗不足，因此无法获得全面的结果。这是本研究的局限性。总的来说，本研究的模拟是初步的，在边界条件、放电配置、垂直温度传输、对称性破坏、天线优化、陨落原子反应等方面还需要进一步研究。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>Helicon wave coupling to a finite plasma column</title>
    <url>/2023/06/07/Helicon_wave_coupling_to_a_finite_plasma_column/</url>
    <content><![CDATA[<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-46.png" alt="实验装置(带天线版)"></p>
<h2 id="计算了"><a href="#计算了" class="headerlink" title="计算了"></a>计算了</h2><h3 id="螺旋波体系中的色散关系"><a href="#螺旋波体系中的色散关系" class="headerlink" title="螺旋波体系中的色散关系"></a>螺旋波体系中的色散关系</h3><p>介电张量（dielectric tensor）</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-29.png" alt="介电张量"></p>
<p>其中张量元素为：</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-30.png" alt="tensor elements"></p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-31.png" alt=" "></p>
<p>上图为等离子体色散函数</p>
<p>wpj、wcj和vj分别为等离子体、回旋、电子和离子碰撞频率，vTe&#x3D;(2Te&#x2F;me)^(1&#x2F;2)为热电子速度。</p>
<p>磁化等离子体中的波传播</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-32.png" alt="色散关系"></p>
<p>其中 N &#x3D; kc&#x2F;ω &#x3D; k&#x2F;k<sub>0</sub>，k 是波矢量，<em>I</em> 是单位张量。</p>
<p>由于平行折射率 N<sub>∥</sub> &#x3D; k<sub>∥</sub>&#x2F;k<sub>0</sub>与发射天线的平行波数谱相关，因此很自然地将垂直折射率 N<sub>⊥</sub>&#x3D; k<sub>⊥</sub>&#x2F;k<sub>0</sub> 中的色散关系写为双二次方程，</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-33.png" alt="perpendicular refractive index"></p>
<p>解得</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-34.png" alt="solution"></p>
<p>其中</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-35.png" alt="各参数"></p>
<p>对应于垂直于外部磁场的相速度分量，与两个解相关的波被表示为慢波（s，+符号）和快波（f，-符号）。</p>
<p>本文考虑频率范围内的波传播</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-36.png" alt="wave propagation in the frequency regime"></p>
<p>为了处理易于管理的公式，假设波是弱阻尼的。然后我们得到ε元素的简化表达式，</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-37.png" alt="simplified expressions"></p>
<p>结合碰撞阻尼和朗道阻尼γ<sub>e,i</sub>&#x3D;υ <sub>e,i</sub>&#x2F;ω≪1，γ<sub>eff</sub>&#x3D;γ<sub>e</sub>+γ<sub>ELD</sub>,则</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-38.png" alt="further assumption"></p>
<p>慢波色散公式如下：</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-39.png" alt="慢波色散公式"></p>
<p>慢波以大于几何平均频率ω<sub>0</sub>&#x3D;(ω<sub>ci</sub>ω<sub>ce</sub>)<sup>1&#x2F;2</sup>的频率传播，反过来可以忽略离子阻尼，</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-40.png" alt="neglected ion damping"></p>
<p>快波色散关系可以写为：</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-41.png" alt="fast wave dispersion relation"></p>
<p>进一步得出螺旋波色散关系</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-42.png" alt="helicon wave dispersion"></p>
<p>由于实验中波数分量由天线等离子体系统的几何形状给出，所以色散关系可以写为</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-43.png" alt="another form"></p>
<h3 id="与有限等离子圆柱体的电感耦合"><a href="#与有限等离子圆柱体的电感耦合" class="headerlink" title="与有限等离子圆柱体的电感耦合"></a>与有限等离子圆柱体的电感耦合</h3><p>电磁波场的傅里叶表示可写为</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-44.png" alt="Fourier representation of the electromagnetic wave field"></p>
<p>因为磁化等离子体存在不同的左旋和右旋极化波方程，所以需要引入复杂的方位角本征函数。<br>代入麦克斯韦方程</p>
<p><img src="/Helicon_wave_coupling_to_a_finite_plasma_column/image-45.png" alt="ansatz into Maxwell"></p>
<h2 id="得出了"><a href="#得出了" class="headerlink" title="得出了"></a>得出了</h2><h3 id="天线频谱"><a href="#天线频谱" class="headerlink" title="天线频谱"></a>天线频谱</h3><h3 id="能量沉积"><a href="#能量沉积" class="headerlink" title="能量沉积"></a>能量沉积</h3><h2 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h2><p>结果就是本文结论部分提到了用了一种code，但是通篇都没说用的啥code</p>
<p>除了通过当前的计算推断出更深入的物理理解之外，还有几个方面应该使我们能够使用当前的代码。 </p>
<p>(i)只要沿磁场线不存在等离子体不均匀性，就可以处理发射天线的任意电流分布。因此，假设真实的等离子体数据（包括径向密度分布），可以研究不同天线的效率以找到最佳的天线几何形状。 </p>
<p>(ii) 该代码产生系统的复阻抗，以便通过与阻抗测量结果比较，获得有关射频功率吸收的信息。</p>
<p>(iii) 原则上，该代码允许我们计算未来计划的等离子体中的电磁场分布。除了与等离子柱中电磁场的测量进行比较（例如使用磁探针）之外，利用电磁场的知识来研究测试电子的运动可能是有价值的。通过这种方式，可以获得可能导致螺旋波器件高效率的加速机制的一些物理见解。</p>
<h1 id="ELD"><a href="#ELD" class="headerlink" title="ELD"></a>ELD</h1><p><span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2FK4RNDNZR%22%2C%22pageLabel%22%3A%222003%22%2C%22position%22%3A%7B%22rects%22%3A%5B%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/K4RNDNZR?page=NaN">“Chen (1991, 1992) provided some evidence that electron Landau damping (ELD) combined with particle trapping may be a decisive factor in accelerating a considerable portion of the electrons to the ionization energy.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/8VSXP4TG">Fischer 等, 1994, p. 2003</a></span>)</span> Chen (1991, 1992) 提供了一些证据表明，电子朗道阻尼 (ELD) 与粒子捕获相结合可能是将相当一部分电子加速到电离能的决定性因素。</p>
<h1 id="快波（fast-waves）-amp-慢波（slow-waves）"><a href="#快波（fast-waves）-amp-慢波（slow-waves）" class="headerlink" title="快波（fast waves）&amp; 慢波（slow waves）"></a>快波（fast waves）&amp; 慢波（slow waves）</h1><p><span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2FK4RNDNZR%22%2C%22pageLabel%22%3A%222003%22%2C%22position%22%3A%7B%22rects%22%3A%5B%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/K4RNDNZR?page=NaN">“We attempt to understand the results in terms of the fast and slow wave dispersion relations, and study, in this context, the validity of the approximate (fast) helicon wave dispersion relation.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/8VSXP4TG">Fischer 等, 1994, p. 2003</a></span>)</span> 我们试图根据快波和慢波色散关系来理解结果，并在这种情况下研究近似（快）螺旋波色散关系的有效性。</p>
<h1 id="这篇文章讲了什么？"><a href="#这篇文章讲了什么？" class="headerlink" title="这篇文章讲了什么？"></a>这篇文章讲了什么？</h1><p><span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2FK4RNDNZR%22%2C%22pageLabel%22%3A%222003%22%2C%22position%22%3A%7B%22rects%22%3A%5B%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/K4RNDNZR?page=NaN">“Inductive helicon wave coupling to a plasma column is studied numeridy. In our theoretical model, the RF current distribution of the launching antenna is taken into account as well as the finite size of the plasma cylinder. Computational mults based on the data of presentday helicon devices are shown. The efficiency of various types of antennae is Studied for a wide range ofexperimental parameters. In particular, we discuss the role of magnetic-field-aligned electron Landau damping far the helicon wave absorption. In many cases, the numerical findings can be understood reasonably in term of the wavenumber spectra of the antenna and the helicon wave dispersion relation. In general, however, the full electromagnetic treatment is necessary in order to describe and to understand the inductive coupling in the helicon wave regime.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F11147738%2Fitems%2F8VSXP4TG%22%5D%2C%22locator%22%3A%222003%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/8VSXP4TG">Fischer 等, 1994, p. 2003</a></span>)</span> 耦合到等离子体柱的感应螺旋波被大量研究。在我们的理论模型中，发射天线的射频电流分布被考量以及等离子圆柱体的有限尺寸。显示了基于当今螺旋装置数据的计算倍数。针对广泛的实验参数研究了各种类型天线的效率。特别是，我们讨论了磁场对齐的电子 Landau 对螺旋波吸收的阻尼作用。在许多情况下，可以根据天线的波数谱和螺旋波色散关系合理地理解数值结果。然而，一般来说，为了描述和理解螺旋波区域中的电感耦合，完整的电磁处理是必要的。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang</title>
    <url>/2020/04/03/Golang/</url>
    <content><![CDATA[<h1 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h1><h2 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h2><p>官网下载，next安装。</p>
<p>在喜欢的磁盘找一个路径放GoPath并添加到系统变量</p>
<p>在GoPath中创建<code>pkg</code> <code>src</code> <code>bin</code> 路径，并配到环境变量中。</p>
<p>src存放开发代码，可创建多个域名以及子路径</p>
<h2 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h2><p>使用VS code 开发下载所需要的 <code>Go</code> 插件。</p>
<p>使用VsCode打开go\src\域名\子路径(随意)。</p>
<h2 id="Hello-Go"><a href="#Hello-Go" class="headerlink" title="Hello Go"></a>Hello Go</h2><p>创建Hello路径，路径中创建main.go</p>
<p>输入</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>使用<code>go build</code></p>
<p>1.在项目目录下执行<code>go build</code></p>
<p>2.在其他路径下执行<code>go build</code>，需要在后面加上项目的路径（项目路径从<code>GOPATH/Src</code>后开始写起，编译之后的可执行文件就保存在当前目录下)</p>
<p>3.<code>go build -o hello.exe</code> (更改可执行文件的名称)</p>
<hr>
<p><code>go run</code>类似于执行脚本文件</p>
<p><code>go install</code> 先编译后执行</p>
<p>跨平台编译–自行百度</p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>小白</tag>
        <tag>啥都学点</tag>
      </tags>
  </entry>
  <entry>
    <title>Heliogabalus的玫瑰</title>
    <url>/2020/03/16/Heliogabalus%E7%9A%84%E7%8E%AB%E7%91%B0/</url>
    <content><![CDATA[<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Do95fdPyXZuUia7KdmKhH4rChJ6BEr696NcE4pMmOr6q5AOoyhPBD64uIs94t39BCe1SRTlPDZKicnUlmpXeQc9Q/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>The Roses of Heliogabalus depicts the young Roman emperor Elagabalus (203–222 CE) hosting a banquet, being swamped by drifts of pink rose petals falling from a false ceiling above. The youthful emperor, wearing a golden silk robe and tiara, watches the spectacle from a platform behind them, with other garlanded guests. A woman plays the double pipes beside a marble pillar in the background, wearing the leopard skin of a maenad, with a bronze statue of Dionysus, based on the Ludovisi Dionysus, in front of a view of distant hills.</p>
<p>Heliogabalus的玫瑰描绘了年轻的罗马皇帝Elagabalus（公元203-222年）举办的一场宴会，会场上，从屋顶假天花板上掉下来的粉红玫瑰花瓣淹没了宾客。这位年轻的皇帝穿着金色的丝绸长袍，带着头饰，半卧在客人身后的平台上，和其他有花环的客人一起观看了这场奇观。一名妇女在后面的大理石柱子旁边演奏着双管，她身穿梅纳德的豹纹裙，在她身边，是以卢多维西·狄俄尼索斯（Ludovisi Dionysus）为基础雕刻的狄俄尼索斯铜像，向雕像后方眺望，远处便是成片的山峦。</p>
<p>The painting depicts a (probably invented) episode taken from the Augustan History. Although the Latin refers to “violets and other flowers,” Alma-Tadema depicts Elagabalus smothering his unsuspecting guests with rose petals. The original reference is this: “In a banqueting-room with a reversible ceiling he once buried his guests in violets and other flowers, so that some were actually smothered to death, being unable to crawl out to the top.”</p>
<p>这幅画描绘了摘自奥古斯都历史的一部分（可能是杜撰）。尽管拉丁语提到的是“紫罗兰色和其他花朵”，但Alma-Tadema所描绘是Elagabalus用玫瑰花瓣窒息了他那些毫无戒心的客人。最初的参考是这样的：“在一个有可翻转天花板的宴会厅里，他曾经把客人们埋在紫罗兰和其他花朵中，使一些人被窒息而死，无法爬到山顶。”</p>
<p>The painting was commissioned by Sir John Aird in 1888. As roses were out of season in the United Kingdom, Alma-Tadema is reputed to have had rose petals sent from the south of France each week during the four months in which it was painted.</p>
<p>这幅画是约翰·艾尔德爵士（Sir John Aird）于1888年创作的。由于玫瑰在英国已经不合时宜，据说Alma-Tadema在创作的四个月中，每周都有从法国南部寄来的玫瑰花瓣。</p>
<hr>
<p>Elagabalus（埃拉伽巴路斯）</p>
<p>他的本名为瓦瑞乌斯·阿维图斯·巴西安努斯（Varius Avitus Bassianus），登基之後改名为马尔库斯·奥瑞里乌斯·安东尼努斯（Marcus Aurelius Antoninus）。他是罗马帝国建立以来，第一位出身自帝国东方——叙利亚——的皇帝。在卡拉卡拉遇刺身亡後，政军情势纷扰不已，东方军团拥立这位流有塞维鲁王族血统的少年继位；218年，在战胜马克里努斯之後，埃拉伽巴路斯成为罗马帝国的皇帝。</p>
<p>——百度百科</p>
]]></content>
      <categories>
        <category>艺术</category>
      </categories>
      <tags>
        <tag>艺术</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable-3</title>
    <url>/2020/03/10/LinearTable-3/</url>
    <content><![CDATA[<p>单链表vs双链表–初篇</p>
<p>单链表对于某一结点前面的区域是未知的。即无法逆向检索，有时候不太方便</p>
<p>双链表则可以逆向检索，但是存储密度相比较稍微低一点。</p>
<h2 id="双链表"><a href="#双链表" class="headerlink" title="双链表"></a>双链表</h2><img src="/2020/03/10/LinearTable-3/image-20200310151506398.png" class="" width="20200224154635459">

<h3 id="初始化（带头结点）"><a href="#初始化（带头结点）" class="headerlink" title="初始化（带头结点）"></a>初始化（带头结点）</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span></span><br><span class="line">	Elemtype data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span></span><br><span class="line">&#125;DNode,*DLinklist;</span><br><span class="line"><span class="comment">//初始化双链表</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitDLinklist</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">	L = (DNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode));<span class="comment">//分配一个头结点</span></span><br><span class="line">	<span class="keyword">if</span> (L == <span class="literal">NULL</span>)<span class="comment">//内存不足 分配失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	L-&gt;prior = <span class="literal">NULL</span>;<span class="comment">//头结点的prior永远指向NULL</span></span><br><span class="line">	L-&gt;next = <span class="literal">NULL</span>;<span class="comment">//头结点之后暂时还没有结点</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">testDLinklist</span><span class="params">()</span> &#123;</span><br><span class="line">	DLinklist L;</span><br><span class="line">	InitDLinklist(L);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断双链表是否为空 带头结点</span></span><br><span class="line"><span class="type">bool</span> Empty（DLinklist L)&#123;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;next==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>修改指针时注意顺序</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//后插</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertNextDNode</span><span class="params">(DNode* p, DNode* s)</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>||s==<span class="literal">NULL</span>)<span class="comment">//非法参数</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	s-&gt;next = p-&gt;next;</span><br><span class="line">	<span class="keyword">if</span> (p-&gt;next != <span class="literal">NULL</span>)<span class="comment">//如果p结点有后继节点</span></span><br><span class="line">		p-&gt;next-&gt;prior = s;</span><br><span class="line">	s-&gt;prior = p;</span><br><span class="line">	p-&gt;next = s;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//删除p结点的后继结点</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">DeleteNextDNode</span><span class="params">(DNode* p)</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	DNode* q = p-&gt;next;<span class="comment">//找到p的后继节点給q</span></span><br><span class="line">	<span class="keyword">if</span> (q == <span class="literal">NULL</span>)<span class="comment">//p没有后继节点</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	p-&gt;next = q -&gt;next;</span><br><span class="line">	<span class="keyword">if</span> (q-&gt;next != <span class="literal">NULL</span>)<span class="comment">//判断q是不是最后一个结点</span></span><br><span class="line">		q-&gt;next-&gt;prior = p;</span><br><span class="line">	<span class="built_in">free</span>(q);<span class="comment">//释放q</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时若要销毁这个双链表，只需找到头结点，然后循环删除后继节点即可。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">DestroyList</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">	<span class="comment">//循环释放各个数据节点</span></span><br><span class="line">	<span class="keyword">while</span> (L-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">		DeleteNextDNode(L);</span><br><span class="line">	<span class="built_in">free</span>(L);<span class="comment">//释放L</span></span><br><span class="line">	L = <span class="literal">NULL</span>;<span class="comment">//使头指针指向NULL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>后向遍历</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(p!==<span class="literal">NULL</span>)&#123;</span><br><span class="line">	<span class="comment">//对结点p做相应处理，例如打印p</span></span><br><span class="line">    p=p-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前向遍历</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(p!==<span class="literal">NULL</span>)&#123;</span><br><span class="line">	<span class="comment">//对结点p做相应处理，例如打印p</span></span><br><span class="line">    p=p-&gt;prior;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跳过头结点的前向便利</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(p-&gt;prior!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">    <span class="comment">//对结点p做相应处理，例如打印p</span></span><br><span class="line">    p=p-&gt;prior;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>双链表不可以随机存取，按位查找，按值查找都只能用遍历的方式实现。时间复杂度为O(n)</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>双链表</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable-2</title>
    <url>/2020/03/06/LinearTable-2/</url>
    <content><![CDATA[<p>先来比较一下顺序表跟单链表的优缺点:</p>
<p>顺序表：</p>
<p>优点: 可随机存取，存取密度高</p>
<p>缺点:要求大片连续空间，改变容量不方便</p>
<p>单链表：</p>
<p>优点：不要求大量的存储空间，改变容量方便</p>
<p>缺点：不可随机存取，要耗费一定空间存放指针</p>
<h2 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h2><p>用线性存储的方式实现线性结构。</p>
<p>结点：空间+指针</p>
<h3 id="定义一个单链表"><a href="#定义一个单链表" class="headerlink" title="定义一个单链表"></a>定义一个单链表</h3><p>∵单链表都是靠其结构中的指针找寻下一个结点的头指针而连起来的，∴找到这个单链表只需要找到其头指针即可。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	ElemType data;<span class="comment">//data成为数据域</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span><span class="comment">//指针存放下一个节点</span></span><br><span class="line">&#125;LNode,*LinkList;</span><br><span class="line">LinkList L;<span class="comment">//声明一个指向单链表第一个节点的指针 等价于LNode*L</span></span><br><span class="line"><span class="comment">//向单链表中增加一个新的节点：在内存中申请一个节点空间，并用指针p指向这个节点</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">p</span> =</span> (<span class="keyword">struct</span> LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>LinkList等价于LNode*</p>
<p>前者强调这个是单链表，后者强调这是结点</p>
<p>区分来写为了提高代码可读性。</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><h4 id="不带头节点"><a href="#不带头节点" class="headerlink" title="不带头节点"></a>不带头节点</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//初始化一个单链表</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinList &amp;L)</span>&#123;</span><br><span class="line">	L=<span class="literal">NULL</span>;<span class="comment">//防止脏数据</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断单链表是否为空</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">Empty</span><span class="params">(LinkList L)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (L==<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">	LinkList L;<span class="comment">//声明一个指向单链表的指针</span></span><br><span class="line">	InitList(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="带头节点"><a href="#带头节点" class="headerlink" title="带头节点"></a>带头节点</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	ElemType data;<span class="comment">//data成为数据域</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span><span class="comment">//指针存放下一个节点</span></span><br><span class="line">&#125;LNode,*LinkList;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinList &amp;L)</span>&#123;</span><br><span class="line">	L= (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));<span class="comment">//分配头结点</span></span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span>)<span class="comment">//内存不足，分配失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    L-&gt;next=<span class="literal">NULL</span>;<span class="comment">//头结点之后没有其他结点</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(LinList L)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> L-&gt;next==<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">	LinkList L;<span class="comment">//声明一个指向单链表的指针</span></span><br><span class="line">	InitList(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>带头节点先办会比不带头节点更方便。</p>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>LineInsert(&amp;L,i,e):插入操作。在表L中的第i个位置上插入指定元素。</p>
<h4 id="带头节点-1"><a href="#带头节点-1" class="headerlink" title="带头节点"></a>带头节点</h4>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"><span class="comment">//在第i个位置插入元素e(带头节点)</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInert</span><span class="params">(LinkList &amp;L,<span class="type">int</span> i,ElemType e)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *p;<span class="comment">//指针p指向当前扫描到的结点</span></span><br><span class="line">    <span class="type">int</span> j =<span class="number">0</span>;<span class="comment">//当p指向的是第几个节点</span></span><br><span class="line">    p =L;<span class="comment">//L指向头节点，头节点是第0个结点（不保存数据）</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i<span class="number">-1</span>)&#123;<span class="comment">//循环找到第i-1个结点</span></span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)<span class="comment">//i值不合法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    s-&gt;data=e;</span><br><span class="line">    s-&gt;next=p-&gt;next;</span><br><span class="line">    p-&gt;next=s;<span class="comment">//将结点s连接到p之后</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//插入成功</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>平均时间复杂度&#x3D;O(n)</p>
<h4 id="不带头结点"><a href="#不带头结点" class="headerlink" title="不带头结点"></a>不带头结点</h4><p>如果不带头结点，则插入、删除第1个元素时，需要更改头指针L。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"><span class="comment">//在第i个位置插入元素e(不带头节点)</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInert</span><span class="params">(LinkList &amp;L,<span class="type">int</span> i,ElemType e)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">        LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">        s-&gt;data=e;</span><br><span class="line">        s-&gt;next=L;</span><br><span class="line">        L=s;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//头指针指向新结点</span></span><br><span class="line">    &#125;</span><br><span class="line">    LNode *p;<span class="comment">//指针p指向当前扫描到的结点</span></span><br><span class="line">    <span class="type">int</span> j =<span class="number">1</span>;<span class="comment">//当p指向的是第几个节点</span></span><br><span class="line">    p =L;<span class="comment">//L指向头节点，头节点是第1个结点</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i<span class="number">-1</span>)&#123;<span class="comment">//循环找到第i-1个结点</span></span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)<span class="comment">//i值不合法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    s-&gt;data=e;</span><br><span class="line">    s-&gt;next=p-&gt;next;</span><br><span class="line">    p-&gt;next=s;<span class="comment">//将结点s连接到p之后</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//插入成功</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="指定结点的后插操作"><a href="#指定结点的后插操作" class="headerlink" title="指定结点的后插操作"></a>指定结点的后插操作</h4><p>在指定结点之前插入都是未知区域，之后都是可知区域</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在p结点之后插入元素</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertNextNode</span><span class="params">(LNode *p,ElemType e)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    <span class="keyword">if</span>(s==<span class="literal">NULL</span>)<span class="comment">//内存分配失败情况</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//某些情况可能分配失败</span></span><br><span class="line">    s-&gt;data=e;<span class="comment">//用结点s保存数据元素e</span></span><br><span class="line">    s-&gt;next=p-&gt;next;</span><br><span class="line">    p-&gt;next=s;<span class="comment">//将结点s连到p之后</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>时间复杂度&#x3D;O(1)</p>
<p>对照上面的带头节点的第i个元素插入元素e可直接找到第i-1个结点，调用此时的后插操作。</p>
<h4 id="指定结点的前插操作"><a href="#指定结点的前插操作" class="headerlink" title="指定结点的前插操作"></a>指定结点的前插操作</h4><p>直接去找前驱除非指定头结点，否则很难办到</p>
<p>这时可以将要插入的结点与该结点替换</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在p结点之前插入元素e</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertPriorNode</span><span class="params">(LNode *p,ElemType e)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *s=(LNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    <span class="keyword">if</span>(s==<span class="literal">NULL</span>)<span class="comment">//内存分配失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    s-&gt;next=p-&gt;next;</span><br><span class="line">    p-&gt;next=s;<span class="comment">//将新结点s连接到p之后</span></span><br><span class="line">    s-&gt;data=p-&gt;data;<span class="comment">//将p中元素复制到s中</span></span><br><span class="line">    p-&gt;data=e;<span class="comment">//p中元素覆盖为e</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>or</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bool InsertPriorNode(LNode *p,LNode *s)&#123;</span><br><span class="line">    if(p==NULL||s=NULL)</span><br><span class="line">        return false;</span><br><span class="line">    s-&gt;next=p-&gt;next;</span><br><span class="line">    p-&gt;next=s;//将新结点s连接到p之后</span><br><span class="line">    ElemType temp=-&gt;p-&gt;data;//交换数据部分</span><br><span class="line">    p-&gt;data=s-&gt;data;//将p中元素复制到s中</span><br><span class="line">    s-&gt;data=temp;//p中元素覆盖为e</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>ListDelete(&amp;L,i,&amp;e):删除操作。删除表L中第i个位置的元素，并用e返回删除元素的值。</p>
<p>找到第i-1个结点，将其指针指向第i+1个结点，并释放第i个结点。</p>
<h4 id="带头指针"><a href="#带头指针" class="headerlink" title="带头指针"></a>带头指针</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"><span class="comment">//在第i个位置插入元素e(带头节点)</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListDelete</span><span class="params">(LinkList &amp;L,<span class="type">int</span> i,ElemType &amp;e)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *p;<span class="comment">//指针p指向当前扫描到的结点</span></span><br><span class="line">    <span class="type">int</span> j =<span class="number">0</span>;<span class="comment">//当p指向的是第几个节点</span></span><br><span class="line">    p =L;<span class="comment">//L指向头节点，头节点是第0个结点（不保存数据）</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i<span class="number">-1</span>)&#123;<span class="comment">//循环找到第i-1个结点</span></span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>)<span class="comment">//i值不合法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(p-&gt;next==<span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span><span class="comment">//第i-1个之后没有结点了</span></span><br><span class="line">    &#125;</span><br><span class="line">    LNode *q=p—&gt;next;<span class="comment">//令q指向被删除结点</span></span><br><span class="line">    e=q-&gt;data;<span class="comment">//用e返回元素的值</span></span><br><span class="line">    p-&gt;next=q-&gt;next;<span class="comment">//将*q结点从链中断开</span></span><br><span class="line">    <span class="built_in">free</span>(q);<span class="comment">//释放结点的存储空间</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//删除成功</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最坏、平均时间复杂度&#x3D;O(n)</p>
<p>最好时间复杂度&#x3D;O(1)</p>
<h4 id="指定结点的删除"><a href="#指定结点的删除" class="headerlink" title="指定结点的删除"></a>指定结点的删除</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">DeleteNode</span> <span class="params">(LNode *p)</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (p==<span class="literal">NULL</span>)</span><br><span class="line">    	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	LNode *q=p-&gt;next;<span class="comment">//令q指向*p的后继结点</span></span><br><span class="line">    p-&gt;data=p-&gt;next-&gt;data;<span class="comment">//和后继结点交换数据域</span></span><br><span class="line">    p-&gt;next=q-&gt;next;<span class="comment">//将*q结点从链中“断开”</span></span><br><span class="line">    <span class="built_in">free</span>(q);<span class="comment">//释放后继结点的存储空间</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要被删除的结点恰巧是最后一个结点，p指向next的后继的时候会出现bug</p>
<p>此时只能从头开始检索</p>
<p>时间复杂度&#x3D;O(1)</p>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><h4 id="按位查找"><a href="#按位查找" class="headerlink" title="按位查找"></a>按位查找</h4><p>GetElem(L,i):按位查找操作，获取表中第i个位置的元素的值。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">LNode * <span class="title function_">GetElem</span><span class="params">(LinkList L,<span class="type">int</span> i)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *p;<span class="comment">//指针p指向当前扫描到的结点</span></span><br><span class="line">    <span class="type">int</span> j =<span class="number">0</span>;<span class="comment">//当p指向的是第几个节点</span></span><br><span class="line">    p =L;<span class="comment">//L指向头节点，头节点是第0个结点（不保存数据）</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; j&lt;i)&#123;<span class="comment">//循环找到第i-1个结点</span></span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>平均时间复杂度&#x3D;O(n)</p>
<p>则带头结点的插入操作也可简化</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">ListInert</span><span class="params">(LinkList &amp;L,<span class="type">int</span> i,ElemType e)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode *p=GetElem(L,i<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span> InsertNextNode(p,e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="按值查找"><a href="#按值查找" class="headerlink" title="按值查找"></a>按值查找</h4><p>LocateElem(L,e):按值查找操作，在表L中查找具有给定关键字值的元素。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//找到数据域==e的结点</span></span><br><span class="line">LNode * <span class="title function_">LocateElem</span><span class="params">(LinkList L,ElemType e)</span>&#123;</span><br><span class="line">    LNode *p =L-&gt;next;</span><br><span class="line">    <span class="comment">//从第一个结点开始查找数据域为e的结点</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">NULL</span> &amp;&amp; p-&gt;data!=e)<span class="comment">//这里默认就是int型数据，如果是struct类型则!=应该被替换</span></span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">    <span class="keyword">return</span> p;<span class="comment">//找到后返回该结点指针，否则返回NULL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>时间复杂度为O(n)</p>
<h3 id="求表的长度"><a href="#求表的长度" class="headerlink" title="求表的长度"></a>求表的长度</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">Length</span><span class="params">(LinkList L)</span>&#123;</span><br><span class="line">	<span class="type">int</span> len=<span class="number">0</span>;<span class="comment">//计数器</span></span><br><span class="line">    LNode *p=L;</span><br><span class="line">    <span class="keyword">while</span>(p-&gt;next !=<span class="literal">NULL</span>)&#123;</span><br><span class="line">        p=p-&gt;next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>时间复杂度为O(n)</p>
<h3 id="单链表的建立"><a href="#单链表的建立" class="headerlink" title="单链表的建立"></a>单链表的建立</h3><h4 id="尾插法"><a href="#尾插法" class="headerlink" title="尾插法"></a>尾插法</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">LinkList <span class="title function_">List_TailInsert</span><span class="params">(ListList &amp;L)</span>&#123;<span class="comment">//正向建立单链表</span></span><br><span class="line">	<span class="type">int</span> x;<span class="comment">//设ElemType为整型</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//初始化空表</span></span><br><span class="line">    L=(LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));<span class="comment">//建立头结点</span></span><br><span class="line">    </span><br><span class="line">    LNode *s,*r=L;<span class="comment">//r为表尾指针</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);<span class="comment">//输入结点的值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//后插操作</span></span><br><span class="line">    <span class="keyword">while</span>(x!=<span class="number">8848</span>)&#123;<span class="comment">//输入8848表示结束</span></span><br><span class="line">        s=(LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">        s-&gt;data=x;</span><br><span class="line">        r-&gt;next=s;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//保持r指向最后一个结点</span></span><br><span class="line">        r=s;<span class="comment">//r指向新的表尾结点</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">    &#125;</span><br><span class="line">    r-&gt;next=<span class="literal">NULL</span>;<span class="comment">//尾结点指针置空</span></span><br><span class="line">    <span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="头插法"><a href="#头插法" class="headerlink" title="头插法"></a>头插法</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">LinkList <span class="title function_">List_HeadInsert</span><span class="params">(ListList &amp;L)</span>&#123;<span class="comment">//逆向建立单链表</span></span><br><span class="line">	LNode *s;</span><br><span class="line">    <span class="type">int</span> x;<span class="comment">//设ElemType为整型</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//初始化空表</span></span><br><span class="line">    L=(LinkList)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));<span class="comment">//建立头结点</span></span><br><span class="line">    L-&gt;next=<span class="literal">NULL</span>;<span class="comment">//初始化为空链表</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);<span class="comment">//输入结点的值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//后插操作</span></span><br><span class="line">    <span class="keyword">while</span>(x!=<span class="number">8848</span>)&#123;<span class="comment">//输入8848表示结束</span></span><br><span class="line">        s=(LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">        s-&gt;data=x;</span><br><span class="line">        r-&gt;next=L-&gt;next;</span><br><span class="line">        L-&gt;next=s;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为每次直接往头结点后面插入</p>
<p>这样会使得插入的数据逆置</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>饿🍲</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>C</tag>
        <tag>单链表</tag>
        <tag>头结点</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable-4</title>
    <url>/2020/03/11/LinearTable-4/</url>
    <content><![CDATA[<p>在单链表和双链表上加上一点小小的改进–循环链表</p>
<h2 id="循环单链表"><a href="#循环单链表" class="headerlink" title="循环单链表"></a>循环单链表</h2><p>最后一个结点的next指针指向头结点</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	ElemType data;<span class="comment">//data成为数据域</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span><span class="comment">//指针存放下一个节点</span></span><br><span class="line">&#125;LNode,*LinkList;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinList &amp;L)</span>&#123;</span><br><span class="line">	L= (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));<span class="comment">//分配头结点</span></span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">NULL</span>)<span class="comment">//内存不足，分配失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    L-&gt;next=L;<span class="comment">//头结点之后没有其他结点</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(LinList L)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> L-&gt;next==L;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">	LinkList L;<span class="comment">//声明一个指向单链表的指针</span></span><br><span class="line">	InitList(L);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="循环双链表"><a href="#循环双链表" class="headerlink" title="循环双链表"></a>循环双链表</h2><p>表头结点的prior指向表尾结点</p>
<p>表尾结点的next指针指向头结点</p>
<h3 id="初始化-1"><a href="#初始化-1" class="headerlink" title="初始化"></a>初始化</h3><img src="/2020/03/11/LinearTable-4/image-20200312175542402.png" class="" width="20200224154635459">

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span></span><br><span class="line">	Elemtype data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span></span><br><span class="line">&#125;DNode,*DLinklist;</span><br><span class="line"><span class="comment">//初始化双链表</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitDLinklist</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">	L = (DNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode));<span class="comment">//分配一个头结点</span></span><br><span class="line">	<span class="keyword">if</span> (L == <span class="literal">NULL</span>)<span class="comment">//内存不足 分配失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	L-&gt;prior = L;</span><br><span class="line">	L-&gt;next = L;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">testDLinklist</span><span class="params">()</span> &#123;</span><br><span class="line">	DLinklist L;</span><br><span class="line">	InitDLinklist(L);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断双链表是否为空 带头结点</span></span><br><span class="line"><span class="type">bool</span> Empty（DLinklist L)&#123;</span><br><span class="line">    <span class="keyword">if</span>(L-&gt;next==L)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于添加(和删除)操作的时候</p>
<p>直接抢p(尾)结点 的next指针的prior指向下(删除反过来)一个结点</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>C</tag>
        <tag>循环链表</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable-5</title>
    <url>/2020/03/12/LinearTable-5/</url>
    <content><![CDATA[<p>静态链表–简简单单做个NPC</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><img src="/2020/03/12/LinearTable-5/image-20200312180624806.png" class="" width="20200224154635459">

<p>分配一整片连续的内存空间，各个结点集中安置。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10<span class="comment">//静态链表的最大长度</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span><span class="comment">//静态链表结构类型的定义</span></span><br><span class="line">ElemType data;<span class="comment">//存储数据元素</span></span><br><span class="line"><span class="type">int</span> next;<span class="comment">//下一个元素的数组下标</span></span><br><span class="line">&#125;SLinkList[MaxSize];</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    SLinkList a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>初始化</p>
<p>把头结点的游标设为-1，并且将其他结点的游标设为一个默认值 如8848</p>
<p>查找</p>
<p>从头结点出发依次往后遍历结点</p>
<p>插入</p>
<p>插入位序为i的结点</p>
<ol>
<li><p>找到一个空的结点(循环遍历找到那个”8848“)，存入数据元素</p>
</li>
<li><p>从头结点出发找到位序为i-1的结点</p>
</li>
<li><p>修改新结点的next</p>
</li>
<li><p>修改i-1号结点的next</p>
</li>
</ol>
<p>删除</p>
<ol>
<li>从头结点出发找到前驱结点</li>
<li>修改前驱节点的游标</li>
<li>被删除结点的next设为”8848“</li>
</ol>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>静态链表:用数组的方式实现的链表<br>优点:增、删操作不需要大量移动元素<br>缺点:不能随机存取，只能从头结点开始依次往后查找；容量固定不可变</p>
<p>适用场景:①不支持指针的低级语言:②数据元素数量固定不变的场景(如操作系统的文件分配表FAT)</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>C</tag>
        <tag>静态链表</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable-6</title>
    <url>/2020/03/12/LinearTable-6/</url>
    <content><![CDATA[<p>线性表学习终章–顺序表与链表的最终对决！</p>
<h3 id="逻辑结构"><a href="#逻辑结构" class="headerlink" title="逻辑结构"></a>逻辑结构</h3><p>都属于线性表，都是线性结构🙋‍♂️</p>
<h3 id="物理结构"><a href="#物理结构" class="headerlink" title="物理结构"></a>物理结构</h3><h4 id="顺序表-顺序存储"><a href="#顺序表-顺序存储" class="headerlink" title="顺序表(顺序存储)"></a>顺序表(顺序存储)</h4><p>优点:支持随机存取、存储密度高👍<br>缺点:大片连续空间分配不方便，改变容量不方便👎</p>
<h4 id="链表-链式存储"><a href="#链表-链式存储" class="headerlink" title="链表(链式存储)"></a>链表(链式存储)</h4><p>优点:离散的小空间分配方便，改变容量方便👍<br>缺点:不可随机存取，存储密度低👎</p>
<h3 id="数据的运算-基本操作"><a href="#数据的运算-基本操作" class="headerlink" title="数据的运算\基本操作"></a>数据的运算\基本操作</h3><h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><h5 id="顺序表👎"><a href="#顺序表👎" class="headerlink" title="顺序表👎"></a>顺序表👎</h5><p>需要预分配大片连续空间。若分配空间过小，则之后不方便拓展容量;若分配空间<br>过大，则浪费内存资源。</p>
<p>静态分配:静态数组 </p>
<p>容量不可改变<br>动态分配:动态数组 </p>
<p>容量可改变，但需要移动大量元素，时间代价高</p>
<h5 id="链表👍"><a href="#链表👍" class="headerlink" title="链表👍"></a>链表👍</h5><p>只需分配一个头结点(也可以不要头结点，只声明一个头指针)，之后方便拓展。</p>
<h4 id="销毁"><a href="#销毁" class="headerlink" title="销毁"></a>销毁</h4><h5 id="顺序表👎-1"><a href="#顺序表👎-1" class="headerlink" title="顺序表👎"></a>顺序表👎</h5><p>修改Length &#x3D; 0</p>
<p>静态分配:静态数组-&gt;系统自动回收空间<br>动态分配:动态数组-&gt;需要手动free</p>
<p>malloc函数申请的空间为堆区，系统不会自动回收</p>
<h5 id="链表👍-1"><a href="#链表👍-1" class="headerlink" title="链表👍"></a>链表👍</h5><p>依次删除各个结点(free)</p>
<h4 id="增删"><a href="#增删" class="headerlink" title="增删"></a>增删</h4><h5 id="顺序表👎-2"><a href="#顺序表👎-2" class="headerlink" title="顺序表👎"></a>顺序表👎</h5><p>插入&#x2F;删除元素要将后续元素都后移&#x2F;前移</p>
<p>时间复杂度0(n),时间开销主要来自移动元素</p>
<p><strong>若数据元素很大，则移动的时间代价很高</strong></p>
<h5 id="链表👍-2"><a href="#链表👍-2" class="headerlink" title="链表👍"></a>链表👍</h5><p>插入&#x2F;删除元素只需修改指针即可</p>
<p>时间复杂度0(n)，时间开销主要来自查找目标元素</p>
<p><strong>查找元素的时间代价更低</strong></p>
<h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><h5 id="顺序表👍"><a href="#顺序表👍" class="headerlink" title="顺序表👍"></a>顺序表👍</h5><p>按位查找: 0(1)</p>
<p>按值查找: 0(n)若表内元素有序，可在O(logn)(以2为底)时间内找到</p>
<h5 id="链表👎"><a href="#链表👎" class="headerlink" title="链表👎"></a>链表👎</h5><p>按位查找: O(n)</p>
<p>按值查找: O(n)</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>线性表·完🎊</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>双链表</tag>
        <tag>C</tag>
        <tag>单链表</tag>
      </tags>
  </entry>
  <entry>
    <title>MAVEN</title>
    <url>/2020/03/04/MAVEN/</url>
    <content><![CDATA[<h1 id="MAVEN"><a href="#MAVEN" class="headerlink" title="MAVEN"></a>MAVEN</h1><p>管理jar</p>
<p>i 增加第三方的jar</p>
<p>ii jar包之间的依赖关系</p>
<p>将项目拆分成若干个模块</p>
<p>maven 自动话构建工具</p>
<p>清理</p>
<p>编译 java-class</p>
<p>测试 针对于关键点的测试</p>
<p>报告 </p>
<p>打包</p>
<p>安装</p>
<p>部署</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><a href="http://maven.apache.org/download.cgi">安装</a></h3><p>下载二进制压缩包</p>
<p>下载后解压，我的解压路径为<code>D:\apache-maven-3.6.3</code></p>
<p>右键<code>我的电脑</code>打开<code>系统</code>，点击<code>高级系统设置(advance)</code>，点击<code>环境变量</code>，在<code>系统变量中</code>新建一个变量，变量名<code>MAVEN_HOME</code>，变量值<code>D:\apache-maven-3.6.3</code></p>
<p><img src="/%5Cpic%5CMAVEN%5Cimage-20210108150437064.png" alt="image-20210108150437064"></p>
<p>在<code>系统变量</code>中找到<code>path</code>，打开添加一条<code>%MAVEN_HOME%\bin</code></p>
<p><img src="/%5Cpic%5CMAVEN%5Cimage-20210108150641400.png" alt="image-20210108150641400"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>打开<code>cmd</code></p>
<p>输入<code>mvn -v</code></p>
<p><img src="/%5Cpic%5CMAVEN%5Cimage-20210108151005405.png" alt="image-20210108151005405"></p>
<h3 id="配置仓库"><a href="#配置仓库" class="headerlink" title="配置仓库"></a>配置仓库</h3><p>打开<code>D:\apache-maven-3.6.3\conf\settings.xml</code></p>
<p>找到<code>localRepository</code></p>
<p><img src="/%5Cpic%5CMAVEN%5Cimage-20210108152001111.png" alt="image-20210108152001111"></p>
<p>把<code>&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</code>摘出来，改成自己的路径<code>&lt;localRepository&gt;D:\maven_repo&lt;/localRepository&gt;</code>。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="pom文件"><a href="#pom文件" class="headerlink" title="pom文件"></a>pom文件</h4>]]></content>
      <categories>
        <category>计算机</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>MAVEN</tag>
        <tag>仓库</tag>
      </tags>
  </entry>
  <entry>
    <title>Machine learning Trends perspectives and prospects</title>
    <url>/2023/07/05/Machine-learning-Trends-perspectives-and-prospects/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Machine Learning Algorithms A Review</title>
    <url>/2023/07/05/Machine-Learning-Algorithms-A-Review/</url>
    <content><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>机器学习 (ML) 是对计算机系统用于执行特定任务而无需显式编程的算法和统计模型的科学研究。我们日常使用的许多应用程序中的学习算法。每次使用像谷歌这样的网络搜索引擎来搜索互联网时，其如此有效的原因之一是因为学习算法已经学会了如何对网页进行排名。这些算法用于各种目的，例如数据挖掘、图像处理、预测分析等。使用机器学习的主要优点是，一旦算法学会如何处理数据，它就可以自动完成其工作。本文对机器学习算法的广泛应用进行了简要回顾和未来展望。</p>
<h1 id="算法分类"><a href="#算法分类" class="headerlink" title="算法分类"></a>算法分类</h1><ul>
<li>supervised learning<ul>
<li>decision tree</li>
<li>naive bayes</li>
<li>support vector machine</li>
</ul>
</li>
<li>unsupervised learning<ul>
<li>principal component analysis</li>
<li>k-means</li>
</ul>
</li>
<li>semi-supervised learning<ul>
<li>generative model</li>
<li>self training</li>
<li>transductive support vector machine</li>
</ul>
</li>
<li>reinforcement learning</li>
<li>multi-task learning</li>
<li>ensemble learning<ul>
<li>boosting</li>
<li>bagging</li>
</ul>
</li>
<li>neutral network<ul>
<li>supervised neural network</li>
<li>unsupervised neural network</li>
<li>reinforce neural network</li>
</ul>
</li>
<li>instance based learning<ul>
<li>k-nearest neighbor</li>
</ul>
</li>
</ul>
<h2 id="决策树（decision-tree）"><a href="#决策树（decision-tree）" class="headerlink" title="决策树（decision tree）"></a>决策树（decision tree）</h2><p>决策树是以树的形式表示选择及其结果的图。图中的节点表示事件或选择，图的边表示决策规则或条件。每棵树都由节点和分支组成。每个节点代表要分类的组中的属性，每个分支代表该节点可以取的值。</p>
<p><img src="/./pic/Machine-Learning-Algorithms-A-Review/decisiontree.png" alt="decisiontree"></p>
<p>决策树的实现伪代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def decisionTreeLearning(examples, attributes, parent_examples): </span><br><span class="line">    if len(examples) == 0: </span><br><span class="line">        return pluralityValue(parent_examples) </span><br><span class="line">    # return most probable answer as there is no training data left </span><br><span class="line">    elif len(attributes) == 0: </span><br><span class="line">        return pluralityValue(examples) </span><br><span class="line">    elif (all examples classify the same): </span><br><span class="line">      return their classification </span><br><span class="line">    A = max(attributes, key(a)=importance(a, examples) </span><br><span class="line">      # choose the most promissing attribute to condition on </span><br><span class="line">    tree = new Tree(root=A) </span><br><span class="line">    for value in A.values(): </span><br><span class="line">        exs = examples[e.A == value] </span><br><span class="line">    subtree = decisionTreeLearning(exs, attributes.remove(A), examples) </span><br><span class="line">      # note implementation should probably wrap the trivial case returns into trees for consistency </span><br><span class="line">    tree.addSubtreeAsBranch(subtree, label=(A, value) </span><br><span class="line">    return tree</span><br></pre></td></tr></table></figure>

<p>朴素贝叶斯（naive bayes）</p>
<p>它是一种基于贝叶斯定理的分类技术，假设预测变量之间独立。简而言之，朴素贝叶斯分类器假设类中特定特征的存在与任何其他特征的存在无关。朴素贝叶斯主要针对文本分类行业。它主要用于依赖于发生的条件概率的聚类和分类目的。</p>
<p><img src="/pic/Machine-Learning-Algorithms-A-Review/1688540715285.png" alt="朴素贝叶斯"></p>
<p>伪代码如下：</p>
<p>输入：训练数据集T，</p>
<p>F&#x3D; (f1, f2, f3,.., fn) &#x2F;&#x2F; 测试数据集中预测变量的值。</p>
<p>输出：一类测试数据集。</p>
<p>步骤：</p>
<ol>
<li>读取训练数据集T； </li>
<li>计算每类预测变量的均值和标准差； </li>
<li>重复计算每类中使用高斯密度方程计算fi的概率；直到计算出所有预测变量（f1、f2、f3、..、fn）的概率。 </li>
<li>计算每个类别的可能性； </li>
<li>获得最大的可能性</li>
</ol>
<h2 id="支持向量机（support-vector-machine）"><a href="#支持向量机（support-vector-machine）" class="headerlink" title="支持向量机（support vector machine）"></a>支持向量机（support vector machine）</h2><p>另一种最广泛使用的最先进的机器学习技术是支持向量机（SVM）。在机器学习中，支持向量机是具有相关学习算法的监督学习模型，用于分析用于分类和回归分析的数据。除了执行线性分类之外，SVM 还可以使用所谓的核技巧有效地执行非线性分类，将其输入隐式映射到高维特征空间。它基本上是在类之间绘制边距。边距的绘制方式使得边距与类别之间的距离最大，从而最大限度地减少分类误差。</p>
<p><img src="/pic/Machine-Learning-Algorithms-A-Review/1688541026956.png" alt="SVM"></p>
<p>伪代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">初始化 Yi = YI for i ⋹ I </span><br><span class="line">重复</span><br><span class="line">计算具有估算标签的数据集的 svm 解决方案 vv , b</span><br><span class="line">计算正袋中所有 xi 的输出 ii = (vv , xi) + b</span><br><span class="line">对每个 i e i 设置 yi = sgn(fi)，yi = 1</span><br><span class="line">对于（每个正bag bi）结束</span><br><span class="line">if (liei(l + yi)/2 == 0)</span><br><span class="line">计算 i* = arg maxiei ii</span><br><span class="line">set yi* = 1</span><br><span class="line">end </span><br><span class="line">while (imputed labels have changed)</span><br><span class="line">output (vv, b)</span><br></pre></td></tr></table></figure>

<h2 id="主成分分析（Principal-Component-Analysis）"><a href="#主成分分析（Principal-Component-Analysis）" class="headerlink" title="主成分分析（Principal Component Analysis）"></a>主成分分析（Principal Component Analysis）</h2><p>主成分分析是一种统计过程，它使用正交变换将一组可能相关变量的观测值转换为一组称为主成分的线性不相关变量的值。在这种情况下，数据的维度被减少，使得计算更快更容易。它用于通过线性组合来解释一组变量的方差-协方差结构。它经常被用作降维技术。</p>
<p><img src="/pic/Machine-Learning-Algorithms-A-Review/1688541651835.png" alt="PCA"></p>
<p>K 均值聚类（k-means）</p>
<p>K-means 是解决众所周知的聚类问题的最简单的无监督学习算法之一。该过程遵循一种简单易行的方法，通过一定数量的聚类对给定数据集进行分类。主要思想是定义 k 个中心，每个簇一个。这些中心应该巧妙地放置，因为不同的位置会导致不同的结果。因此，更好的选择是将它们放置得尽可能远离彼此。</p>
<hr>
<p>这篇文章没有什么意义，主要是介绍，很多内容直接抄的，连字都懒得打，直接截图。</p>
<p>避雷Batta Mahesh，这个人的其它文章中还提到了制造永动机。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>机器学习</tag>
        <tag>综述</tag>
      </tags>
  </entry>
  <entry>
    <title>Measurement and modeling of ion energy distribution functions in a low pressure argon plasma diffusing from a 13.56 MHz helicon source</title>
    <url>/2023/06/28/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/</url>
    <content><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>与扩散室耦合的螺旋源提供了一种更好地控制等离子体处理的新方法。然而，重要的是要了解扩散对从源到位于腔室中的晶片的等离子体的影响。 300 W 氩等离子体从 13.56 MHz（直径 6 厘米，长 20 厘米）圆柱形无磁场源扩散到直径 30 厘米，长 20 厘米的腔室中，已经进行了实验和理论研究。使用移动静电能量分析仪来测量沿源和室的公共轴的<strong>电子温度、等离子体电势、等离子体密度和离子能量分布函数（EDF）</strong>。开发了基于实验结果的分析模型。尽管源和衬底台之间存在约 40 V 的电势差，但与等离子体膨胀相关的电荷交换碰撞将撞击腔室底部接地探针的离子的平均能量降低至约 3 eV。在 1 μbar 时，碰撞次数太少，无法冷却场中加速的所有离子，并且离子分布函数中仍保留尾部。虽然没有测量，但热中性物也应该作为电荷交换碰撞的结果而产生，并且会撞击基板。</p>
<h2 id="实验装置"><a href="#实验装置" class="headerlink" title="实验装置"></a>实验装置</h2><p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-21.png" alt="实验装置"></p>
<h2 id="用什么方法（模型）测量什么参数？"><a href="#用什么方法（模型）测量什么参数？" class="headerlink" title="用什么方法（模型）测量什么参数？"></a>用什么方法（模型）测量什么参数？</h2><h3 id="密度"><a href="#密度" class="headerlink" title="密度"></a>密度</h3><p>测定了Density，使用empirical fit</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-22.png" alt="经验公式"></p>
<p>其中 n(0) 是源中心的密度，C 是与等离子体的几何形状和耦合相关的常数。</p>
<h3 id="等离子体电势"><a href="#等离子体电势" class="headerlink" title="等离子体电势"></a>等离子体电势</h3><p>等离子体电势是根据分析仪测量的离子电流与鉴别器电压的关系推导出来的。</p>
<p>对于给定恒定的麦克斯韦电子分布，玻尔兹曼关系可用于将密度的演变与电势联系起来</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-23.png" alt="玻尔兹曼关系"></p>
<p>其中Vp(0)是源中心的电势，Te是电子温度。</p>
<h3 id="离子能量分布函数"><a href="#离子能量分布函数" class="headerlink" title="离子能量分布函数"></a>离子能量分布函数</h3><p>离子 EDF 由测量电流的导数获得</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-24.png" alt="(5)"></p>
<p>vf(Vd)能测出来</p>
<p>能估计出平均离子速度。</p>
<p>轴向电场由等离子体电势的导数获得</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-25.png" alt="轴向电场"></p>
<p>分布函数取决于从产生点到测量点的电势和平均自由程变化。</p>
<p>平均自由程：</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-26.png" alt="mean free path"></p>
<p>其中n<sub>n</sub>(x)是中性数密度，a是横截面。</p>
<p>分析仪在轴向位置 xp 和鉴别器电势 Vd 处收集的离子电流的表达式</p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-27.png" alt="电流"></p>
<p><img src="/pic/Measurement-and-modeling-of-ion-energy-distribution-functions-in-a-low-pressure-argon-plasma-diffusing-from-a-13-56-MHz-helicon-source/image-28.png" alt=" "></p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>我们提出了氩等离子体低压扩散远离源区的实验结果。开发了一个简单的分析模型，该模型与实验结果一致，并显示了扩散区域中电荷交换碰撞的重要性。离子EDF的形状是膨胀产生的自洽场的加速效应与电荷交换碰撞的热化效应之间的平衡。这两种现象的直接后果将是产生快速中性粒子，该中性粒子会撞击扩散区域底部的基板。这些中性粒子代表了基底表面的额外能量输入，在估计表面反应时应予以考虑。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
      </tags>
  </entry>
  <entry>
    <title>Modeling of profile effects for inductive helicon plasma sources</title>
    <url>/2023/07/01/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/</url>
    <content><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>已经开发出用于对现有和新的材料加工螺旋源进行建模的计算机代码。 Nagoya Ⅲ型、螺旋形和 Stix 线圈天线已被建模，用于研究和检查等离子体密度和温度分布对一小部分 (nfe&#x2F;ne≈5%) 快电子 (T≈40eV) 功率吸收的影响，这提供了实验中中性气体的电离，以及氩气中体相（T≈3 eV）电子的分布。 “ANTENA”计算机代码最初由 B.McVey 编写，用于研究离子回旋波，经过修改后用于研究和模拟螺旋源。代码中添加了包含径向密度和温度分布的碰撞模型，以研究碰撞对加热机制的影响。详细研究了碰撞和朗道阻尼加热机制的竞争效应，结果表明碰撞在高密度（ne ≥10<sup>13</sup> cm<sup>-3</sup>）的等离子体吸收剖面中起着重要作用。射频波吸收曲线对等离子体密度和温度曲线敏感。研究发现，仅激发 m &#x3D; +1 方位角模式的部分匝螺旋天线在将功率耦合到假设的等离子体轮廓方面比 Nagoya Ⅲ 型天线更有效。 Stix线圈也因其波热场的轴上峰值而被认为很有前途。</p>
<h2 id="ANTNA"><a href="#ANTNA" class="headerlink" title="ANTNA"></a>ANTNA</h2><p>Brian McVey编写 1984年</p>
<p>该代码计算了各种ICRF天线配置的真空场和线性自洽等离子体场。</p>
<p>随着电场和磁场的变化，计算了径向功率沉积曲线、径向功率流和天线阻抗(包括线圈之间的相互阻抗)。</p>
<h3 id="程序结构图"><a href="#程序结构图" class="headerlink" title="程序结构图"></a>程序结构图</h3><p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-47.png" alt="程序结构图"></p>
<p>通过名称列表，INPUT读取定义图中所示问题所需的所有参数。下面的子例程，INITLZE执行各种计算，例如从cm转换。到m.，设置径向等离子体剖面，等等。绘图和打印子例程将输入信息写入磁盘文件。现在我们到了程序的主循环。IVAR是计算字段的自变量。方程的检验。(1)和(2)表明IVAR可以取多个不同的值;r, Φ, z, W&#x2F;Wci, f, ne, T, T, B0, kz，以及其他用户定义的变量。根据ISPECTR的值，由SPECTRM计算Eq.(1)的被积，或由INTEG进行逆变换。子程序INTEG执行傅里叶求和或使用积分器包DRIVE。这些子程序中的每一个都调用FIELDS来计算给定n, kz模式下的Eq.(2)。最后，将计算出的字段数量写入磁盘文件，并重复该过程以获得新的IVAR值。图是“ANTENA”的一般流程图。</p>
<p>“ANTENA”代码使用包含源代码INTPROG4的集成包。</p>
<p>此代码计算由 RF 感应线圈包围的一维 (1-D) 圆柱形热磁化等离子体中的三维 (3-D) 电磁等离子体场。作者修改了此代码来研究和分析螺旋天线以及名古屋 Ⅲ 型和 m&#x3D;0 Stix 线圈，以了解较低混合频率范围内高密度等离子体源的等离子体吸收曲线。</p>
<p>等离子体密度 ne(T) 和等离子体温度 Te(r) 是半径的函数，并且它们的径向变化通过分层模型来近似。等离子体响应的特征是等离子体等效介电张量，其中包括射频场的自洽朗道阻尼和碰撞阻尼。电子和离子均假定为麦克斯韦速度分布。引入“ANTENA”中实现的粒子守恒Krook碰撞模型，以唯象方式模拟电子碰撞。</p>
<h2 id="物理含义"><a href="#物理含义" class="headerlink" title="物理含义"></a>物理含义</h2><p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-48.png" alt="Antenna-plasma geometry."></p>
<p>上图所示的几何形状（除去天线后）在 z（轴向）和 Φ（方位角）方向上是均匀的。因此，场量在这些方向上的空间变化可以表示为傅立叶表示。傅里叶逆变换由下式给出</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-49.png" alt="(1)"></p>
<p>傅里叶系数可以写为</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-50.png" alt="(2)"></p>
<p>圆柱形管中的真空电磁场可以扩展为相对于圆柱形波导的轴为横向电（TE）和横向磁（TM）的波导模式。轴向场分量满足贝塞尔方程</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-51.png" alt="(3)"></p>
<p>对于由下式给出的径向波数</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-52.png" alt="(4)"></p>
<p>横向场是根据轴向场的麦克斯韦方程确定的。在等离子体中，近 TE 模式的贝塞尔方程变为</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-53.png" alt="(5)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-54.png" alt="(6)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-55.png" alt="(7)"></p>
<p>对于近 TM 模式，我们有</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-56.png" alt="(8)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-57.png" alt="(9)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-58.png" alt="(10)"></p>
<p>径向波数 kr1,kr2 定义为</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-59.png" alt="(11)"></p>
<p>等离子体由“Stix”等效介电张量的众所周知的元素表示</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-60.png" alt="(12)"></p>
<p>其中 P 分量包括碰撞和朗道阻尼效应，由下式给出</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-61.png" alt="(13)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-62.png" alt="(14)"></p>
<p>其中 Z 是 Fried 和 Conte 列出的等离子体色散函数</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-63.png" alt=" "></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-64.png" alt=" "></p>
<p>返回到（1），较小的根（kr1）分配给近横向电模式，较大的根（kr2）分配给近横向磁模式。总轴向等离子体场由下式给出</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-65.png" alt="(15)"></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-66.png" alt="(16)"></p>
<p>轴向分量Hz1(r)和Ez2(r)分别满足贝塞尔方程，横向等离子体场Er,EΦ,Hr,HΦ由轴向分量确定。上述通解是通过在上图所示的三个区域之间的界面处施加边界条件来求解的。</p>
<p>当导电管半径 r &#x3D; c 时，电场的切向分量必须消失</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-67.png" alt=" "></p>
<p>在r&#x3D;a处的等离子体-真空边界上，电场和磁场的切向分量是连续的。那是</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-68.png" alt=" "></p>
<p>其中上标v表示真空，p表示等离子体区域。根据安培定律，在r&#x3D;b处的电流片上，电场的切向分量是连续的，而磁场的切向分量是不连续的。因此，我们可以写</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-69.png" alt=" "></p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-70.png" alt=" "></p>
<h3 id="天线上的电流分布"><a href="#天线上的电流分布" class="headerlink" title="天线上的电流分布"></a>天线上的电流分布</h3><p>假设天线的电流密度为螺线管（V·J &#x3D; 0），我们只需确定方位角电流密度，因为轴向电流密度可以通过连续性方程的 m - kz变换来计算。那是</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-71.png" alt="(17)"></p>
<p>对于分数螺旋线圈:直螺旋绕组极限中的分数螺旋模拟了名古屋Ⅲ型线圈。电流分布以 delta 函数和亥维赛函数表示</p>
<p><img src="/pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/image-72.png" alt="(18)"></p>
<p>L &#x3D; 线圈长度</p>
<h2 id="ANTENA-Ⅱ"><a href="#ANTENA-Ⅱ" class="headerlink" title="ANTENA Ⅱ"></a>ANTENA Ⅱ</h2><p>McVey编写的“ANTENA”代码在 CRAY CTSS 计算机系统上用 FORTRAN 语言编程，用于研究磁聚变等离子体的 ICRF（离子回旋加速器频率范围）加热。作者使用图形包 PlPlot 将代码从 CRAY 设施移植到基于 UNIX 的工作站。</p>
<p>我们减小了圆柱壳的宽度，并检查了2.5厘米和5.0厘米半径分层等离子体密度和温度分布的收敛性（通常为 800 个径向点）。这使我们能够研究频率范围 f ~1-30 MHz 的螺旋波的传播，该波在径向轮廓中表现出短波长。在 IBM RS&#x2F;6000 370 型工作站上，典型的 800 个层（径向点）运行描述了分层等离子体密度和温度分布，并假设只有一种方位角模式，需要大约五分钟的运行时间。</p>
<p>下图中所示的天线被建模为主要激发 m &#x3D; +1 和 m &#x3D; 0 方位角模式以产生等离子体。 Nagoya Ⅲ 型和螺旋线圈主要激发 m &#x3D; +1 模式，而 Stix 线圈由于其方位均匀性，主要激发 m &#x3D; 0 模式。</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688606201806.png" alt="图a-不同天线的配置"></p>
<p>“ANTENA”代码能够计算图a所示的感应天线的辐射电阻和电抗。传输到等离子体的功率可以是。写成</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688608325658.png" alt="(21)power transfer"></p>
<p>天线的阻抗可写为</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688608368528.png" alt="(22)"></p>
<p>其中</p>
<p>RA &#x3D; Rr + RL &#x3D; 天线电阻</p>
<p>Rr &#x3D; 天线的辐射电阻</p>
<p>RL &#x3D; 天线的趋肤损耗电阻</p>
<p>XA &#x3D; 天线电抗</p>
<p>辐射电阻和品质因数Q是确定等离子体耦合功率效率的重要参数。辐射功率贡献于天线阻抗的实部，而存储在近场中的功率由阻抗的无功部分表示。</p>
<p>总体品质因数 Q 可以根据等离子体 Qp&#x3D; wL&#x2F;R 确定，根据“ANTENA”计算得出，以及外部匹配网络 Qc。即1&#x2F;Q&#x3D;1&#x2F;Q+1&#x2F;Qc</p>
<p>通过对所有方位模数 m 进行积分，计算了三种等离子体密度分布的分数螺旋、Nagoya-Ⅲ 型天线和 Stix 线圈的辐射电阻。天线中心位于 z &#x3D; 0 cm，长度 L &#x3D; 25 cm，半径 T &#x3D; 5.5 cm。对于所有三种等离子体剖面建模，螺旋天线比 Nagoya type-Ⅲ 具有更高的辐射电阻值和更低的品质因数。因此，该天线更容易与外部发生器匹配，并有效地将功率耦合到等离子体。螺旋天线较高的辐射电阻还可以实现与等离子体的有效功率耦合，同时线圈结构上的集肤效应损耗最小。还计算了 Stix 线圈的阻抗 (m &#x3D; 0)。与其他天线相比，Stix 线圈激发低幅度 Ez(kz) 频谱。它具有最小的辐射电阻和较大的电抗，导致品质因数Q值非常大。因此，从射频源到天线的输入功率的匹配更加困难。</p>
<h2 id="螺旋源模拟结果"><a href="#螺旋源模拟结果" class="headerlink" title="螺旋源模拟结果"></a>螺旋源模拟结果</h2><p>“ANTENA”代码用于对与螺旋源选定的实验数据相对应的案例进行建模。m &#x3D; +1 螺旋模式的近似色散关系可以写为</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688606964366.png" alt="(23)"></p>
<p>然后获得该模式的轴向波长</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688607028636.png" alt="(24)"></p>
<p>也就是说，对于给定的频率 f 和磁场 Bo，螺旋波长将大致按 1&#x2F;ne 变化。<strong>（波长与电子密度相关）</strong></p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688646743877.png" alt="图 5. 对于 Nagoya Ⅲ型天线，在固定频率 f = 6 MHz 和磁场 Bo = 800 G 下，随着等离子体密度的增加，阻尼波的空间变化。"></p>
<p>图5显示了空间阻尼B波幅随电子密度ne的增加而变化，假设抛物线等离子体密度ne(r)和等离子体温度Te(r)。名古屋Ⅲ型天线的长度为L &#x3D; 25 cm，中心位于 z &#x3D; 0 cm。我们观察到，正如预期的那样，<strong>轴向波长随着密度的增加而减小</strong>，并且波长约为 50 cm，是天线长度的两倍。</p>
<p>作者对低和高等离子体密度区域进行了建模，如图 7 所示。我们将频率固定在 f &#x3D; 7 MHz，并改变磁场 B0 以保持比率 B0&#x2F;ne，因此螺旋轴向波长 λ∥，[见(24)]常数。对于模型中使用的参数，该轴向波长在 10 到 60 cm 的范围内。尺寸如前所述的分数螺旋天线用于激发 m &#x3D; +1 模式。</p>
<p><img src="/./pic/Modeling-of-profile-effects-for-inductive-helicon-plasma-sources/1688649961349.png" alt="图 7. 由于 m = +1 模式和频率 f = 7 MHz 的螺旋波的朗道和碰撞阻尼，分数螺旋天线的体电子（实线）和快电子（虚线）吸收的径向功率。 (a) 低密度 (ne0 = 1 x 10^11 cm-3,B0 = 250 G)。 (b) 高密度 (ne0= 2 x10^13 cm-3,B0 = 700 G)。"></p>
<p>图 7 说明朗道阻尼过程和碰撞阻尼过程均发生在该密度范围内。在低密度下，如图 7(a) 所示，大部分射频功率通过螺旋波的朗道阻尼被一小部分快电子吸收。随着等离子体密度的增加，由于碰撞阻尼而导致的大块慢电子的吸收变得占主导地位，并且碰撞阻尼率变得比朗道过程导致的更大。在高密度（ne≥10^13cm-3）下，碰撞阻尼是这些 3-4 eV 等离子体中的主要加热机制，但快速电子上存在少量朗道吸收。</p>
<p>作者根据二参数相关曲线 ne(r) &#x3D; ne0(1-(r&#x2F;a)^s)^t 模拟了各种等离子体密度分布，以检查它们对功率吸收的影响。假设温度分布均匀，各对参数 (s,t) 如图 10(a) 所示</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis安装</title>
    <url>/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>Mybatis✔</p>
<p>环境：</p>
<ol>
<li><p>JDK 13.0.2</p>
</li>
<li><p>tomcat 9.0.3</p>
</li>
<li><p>mybatis 3.5.4</p>
</li>
<li><p>mysql 8</p>
</li>
</ol>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>早期为：ibatis：apache</p>
<p>2010年被Google收购改称：Mybatis</p>
<p>主要作用：简化JDBC操作，实现数据的持久化。</p>
<p>ORM：Object Relational Mapping，可以使开发人员像操作对象一样操作数据库</p>
<p>mybatis是ORM的一种实现</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>之前看过的一个教程是使用Idea的，也就是直接使用依赖库导入，这次看的是导入jar使用。</p>
<h3 id="去官网"><a href="#去官网" class="headerlink" title="去官网"></a>去<a href="https://mybatis.org/mybatis-3/" title="此时是mybatis3">官网</a></h3><img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/mb1.png" class="" title="mb1">

<p>选择Getting Started</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/mb2.png" class="" title="mb2">

<p>会有Maven方式，当然使用Idea就可以直接复制代码框内代码到idea中，但这次选择jar的超链接。</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/mb4.png" class="" title="mb4">

<p>就来到了熟悉的github，在最新版本下，有三个选项，这里选择第一个zip包下载。</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/image-20200224154635459.png" class="" width="20200224154635459">

<p>下好之后是个zip，</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/zipmb.png" class="" title="zipmb">

<p>打开以后目录文件如图，</p>
<p>lib文件夹存放mybatis的一些依赖包，</p>
<p>license就是<del>字面意思</del> 许可证，</p>
<p><code>mybatis-3.5.4.jar</code>即要用到的jar，</p>
<p>.pdf即使用说明书，</p>
<p>NOTICE也是<del>字面意思</del> 注意事项。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>简单实用一下：</p>
<h3 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h3><p>打开eclipse，新建一个JAVA项目，因为mybatis是操控数据库的，所以暂时可以先间隔Javaproject试一下。</p>
<p>这里起名“TestMyBatis”，将<code>mybatis-3.5.4.jar</code>拖到src里面，顺便add to buildpath，添加环境。</p>
<h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><p>打开cmd或者使用navicat，因为我的navicat建数据库总是会有数据编码混乱的问题，我一般建表都是用cmd。</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/persontable.png" class="" title="persontable">

<h3 id="创建实体类及映射关系"><a href="#创建实体类及映射关系" class="headerlink" title="创建实体类及映射关系"></a>创建实体类及映射关系</h3><p>创建实体类 Person</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/person.png" class="" title="person">

<p>构建这个类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">	<span class="built_in">this</span>.id = id;</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">	<span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建配置文件映射表和类的映射 <code>.xml</code>文件</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/this.png" class="" title="this">

<p>点这里转换视图</p>
<p>在刚刚的.pdf文件中有大概的配置方法，打开后找到“<strong>Exploring Mapped SQL Statements</strong>”</p>
<p>下面有</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span>  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span>    </span><br><span class="line">        select * from Blog where id = #&#123;id&#125;  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>直接复制，到刚刚的xml中，更改<code>namespace</code> 后面的内容为自己的xml<code>top.eshyee.entity.personMapper</code> </p>
<p>改完之后</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span>  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;top.eshyee.entity.personMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryPersonById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Person&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span></span><br><span class="line">		select * from person where id= #&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在创建一个配置文件，在src下创建一个叫<code>config.xml</code>的文件。</p>
<p>在pdf中查找“<strong>Building SqlSessionFactory from XML</strong>”</p>
<p>这里需要提前准备好一个用来链接的jar <em>MySQL connector</em> </p>
<p>网址：<a href="https://dev.mysql.com/downloads/connector/j/">https://dev.mysql.com/downloads/connector/j/</a></p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/connector.png" class="" title="connector">

<p>选zip，下好之后，里面乱七八糟的东西就不细致分析了，会点工地英语看看就好。主要使用<code>mysql-connector-java-8.0.19.jar</code>。拖到eclipse ，add一下环境。</p>
<p>配置xml如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;你的用户名&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;你的密码&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;top/eshyee/entity/personMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ok写个测试用例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">//加载config</span></span><br><span class="line">		<span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span>Resources.getResourceAsReader(<span class="string">&quot;config.xml&quot;</span>);</span><br><span class="line">		SqlSessionFactory sessionFactory=<span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">		SqlSession session= sessionFactory.openSession();</span><br><span class="line">		<span class="type">String</span> <span class="variable">statement</span> <span class="operator">=</span><span class="string">&quot;top.eshyee.entity.personMapper.queryPersonById&quot;</span>;</span><br><span class="line">		Person person=session.selectOne(statement,<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">    <span class="comment">//这里的1234567890是我接下来要插入的字符串</span></span><br><span class="line">		System.out.println(person.toString());</span><br><span class="line">		session.close();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>同时在person下写一个toString()方法，这个可以自己来定，只要能看到person里的值就🉑。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>测试以下~~在数据库中插入一行数据</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/mb6.png" class="" title="mb6">

<p>run一下test</p>
<img src="/2020/02/24/MyBatis%E5%AE%89%E8%A3%85/mb7.png" class="" title="mb7">

<p>🆗</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol>
<li>写完之后run的时候除了问题，报了一坨错其中有个<strong>timezone</strong>…想起来url写的<code>jdbc:mysql://localhost:3306/test</code>,然后后面加了<code>?useSSL=false&amp;serverTimezone=UTC</code>,结果还不对，就百度了一下<code>&amp;</code>在xml中是一种很神奇的存在得写成<code>&amp;amp;</code>.</li>
<li>Resource导包的时候选择<code>org.apache.ibatis.io.*;</code></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>相对于写DButil方便了不少。</p>
]]></content>
      <categories>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
        <tag>入门</tag>
        <tag>初学者</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列</title>
    <url>/2020/04/01/MyBatis%E7%B3%BB%E5%88%97/</url>
    <content><![CDATA[<p>mybatis</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=440411401&auto=1&height=66"></iframe>

<h2 id="关于MyBatis的增删改查实现"><a href="#关于MyBatis的增删改查实现" class="headerlink" title="关于MyBatis的增删改查实现"></a>关于MyBatis的增删改查实现</h2><p>在MyBatis系列(一)中涉及了如何创建一个<em>入门级</em>的mybatis测试。</p>
<p>但是只涉及了查询单行数据，接下来 我把它补全。</p>
<p>上次采用的是MySQL数据库 ，这次我采用的是Oracle。从官网下到了Oracle6的一个<code>jar</code>.</p>
<p>环境：</p>
<p>eclipse 2019-12</p>
<p>Oracle 11g</p>
<p>apache tomcat 9.0.3</p>
<p>mybatis 3.5.4.jar</p>
<p>Oracle.jar</p>
<h4 id="在Oracle中建个表"><a href="#在Oracle中建个表" class="headerlink" title="在Oracle中建个表"></a>在Oracle中建个表</h4><p><code>create table (stuno number,stuname varchar(20),stuage number,graname varchar(20));</code>,</p>
<p>随变插入几行数据，此处就不放图了🈚。</p>
<h4 id="在eclipse里构建这个类"><a href="#在eclipse里构建这个类" class="headerlink" title="在eclipse里构建这个类"></a>在eclipse里构建这个类</h4><p>此处省略代码，详见MyBatis系列(一)。</p>
<h4 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h4><p>新建一个<code>studentMapper.xml</code>(当然是要映射了🍔)。</p>
<p>新建<code>conf.xml</code>(选择数据库以及映射关系)。</p>
<p>这里关于一些细节</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 通过default选择 数据库环境(说白了就是运行哪个数据库) --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- transactionManager事物的提交方式</span></span><br><span class="line"><span class="comment">		JDBC 利用JDBC处理事务，手动(commit rollback,close)</span></span><br><span class="line"><span class="comment">		MANAGED：将事务交由其他组件（spring，jobss）去托管 ，默认使用完之后会关闭连接</span></span><br><span class="line"><span class="comment">		&lt;property name=&quot;closeConnection&quot; value=&quot;false&quot; /&gt;这样就默认不关闭</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 数据源类型：</span></span><br><span class="line"><span class="comment">			POOLED：使用数据链接池</span></span><br><span class="line"><span class="comment">			UNPOOLED：不用连接池，传统JDBC，每次访问数据库均需要打开和关闭数据库 </span></span><br><span class="line"><span class="comment">			JNDI：从tomcat中获取一个内置的数据库链接池(数据库链接池-数据源)</span></span><br><span class="line"><span class="comment">			--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle.jdbc.driver.OracleDriver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:oracle:thin:@127.0.0.1:1521:ORCL&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;scott&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tiger&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--因为我远端也有个数据库所以我可以再配一个环境--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;cloud&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://eshyee,top:3306/test?useSSL=false<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;我的用户名&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;我的密码&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;top/eshyee/entity/studentMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>关于<code>Mapper.xml</code>的新增代码,无非就是增删改查✨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNum&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		select * from student where stuno= #&#123;stuno&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllStudent&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		select * from student</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addStudent&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> &gt;</span></span><br><span class="line">		insert into student(stuno,stuname,stuage,graname) values(#&#123;stuNo&#125;,#&#123;stuName&#125;,#&#123;stuAge&#125;,#&#123;graName&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;upDateStuByNo&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">	update student set stuname=#&#123;stuName&#125;,stuage=#&#123;stuAge&#125;,graname=#&#123;graName&#125; where stuno=#&#123;stuNo&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteStuByNo&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">	delete from student where stuno=#&#123;stuno&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>因为查之前说了，这里就拿改学生信息来做个小测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修改学生--按学号</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">updateStuByNo</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;conf.xml&quot;</span>);</span><br><span class="line">		<span class="type">SqlSessionFactory</span> <span class="variable">sessionfactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">		<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionfactory.openSession();</span><br><span class="line">		<span class="type">String</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="string">&quot;top.eshyee.entity.studentMapper.upDateStuByNo&quot;</span>;</span><br><span class="line">		Student stu=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">2</span>,<span class="string">&quot;小牛&quot;</span>,<span class="number">33</span>,<span class="string">&quot;二年级&quot;</span>);</span><br><span class="line">		<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> session.update(statement, stu);</span><br><span class="line">		session.commit();</span><br><span class="line">		System.out.println(<span class="string">&quot;修改成功，&quot;</span> + count + <span class="string">&quot;行受影响&quot;</span>);</span><br><span class="line">		session.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		selectAll();</span><br><span class="line">		updateStuByNo();</span><br><span class="line">		selectAll();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>测试，得到结果，注意要提交。</p>
<img src="/2020/04/01/MyBatis%E7%B3%BB%E5%88%97/image-20200226220001121.png" class="" title="mb1">

<hr>
<h2 id="mapper动态代理-MyBatis接口开发"><a href="#mapper动态代理-MyBatis接口开发" class="headerlink" title="mapper动态代理(MyBatis接口开发)"></a>mapper动态代理(MyBatis接口开发)</h2><h6 id="原则-约定优于配置"><a href="#原则-约定优于配置" class="headerlink" title="原则:约定优于配置"></a>原则:约定优于配置</h6><p>配置方式:</p>
<p>​	abc.xml</p>
<p>硬编码方式</p>
<p>​	abc.java</p>
<p>约定:默认值就是myProject</p>
<p>与传统配置的不同之处:省略掉statement，即根据约定直接定位出sql语句。</p>
<p>约定：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 1.方法名和mapper.xml文件中的id值相同</span></span><br><span class="line"><span class="comment">*  2.方法名的输入参数和mapper.xml文件中的标签parameterType类型一致</span></span><br><span class="line"><span class="comment">* 3.方法的返回值和mapper.xml文件中的resultType一致</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>接口和mapper一一对应：namespace的value&#x3D;接口的全类名</p>
<h4 id="构建接口"><a href="#构建接口" class="headerlink" title="构建接口"></a>构建接口</h4><p>所以说新建一个接口，根据前一个篇的mapper.xml的文件基础上改，注：我这里是把接口建在了mapper包下</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Student <span class="title function_">queryStudentBystuNum</span><span class="params">(<span class="type">int</span> stuno)</span>;</span><br><span class="line">List&lt;Student&gt; <span class="title function_">queryAllStudent</span><span class="params">()</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">upDateStuByNo</span><span class="params">(Student student)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteStuByNo</span><span class="params">(<span class="type">int</span> stuno)</span>;</span><br></pre></td></tr></table></figure>

<p>注意这里的接口要遵循上面的约定。</p>
<h4 id="更改xml文件"><a href="#更改xml文件" class="headerlink" title="更改xml文件"></a>更改xml文件</h4><p>再mapper.xml file中，namespace也应该改成接口的名字</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;top.eshyee.mapper.StudentMapper&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接下来，就是修改测试类，曾经使用的<code>statement</code>的地方，目前就不用使用了。</p>
<h4 id="使用接口"><a href="#使用接口" class="headerlink" title="使用接口"></a>使用接口</h4><p>这次拿删除学生举例,首先要从<code>session</code>中获取到这个接口，使用<code>getMapper</code>方法。然后从这个接口中要我刚刚写的那个删除的方法<code>deleteStuByNo()</code>,这里我写死删除no为3的 <del>倒霉孩子</del> ✨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;conf.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sessionfactory</span> <span class="operator">=</span> <span class="keyword">new</span> 		<span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionfactory.openSession();</span><br><span class="line"><span class="type">StudentMapper</span> <span class="variable">stuMapper</span> <span class="operator">=</span> session.getMapper(StudentMapper.class);</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stuMapper.deleteStuByNo(<span class="number">3</span>);</span><br><span class="line">session.commit();</span><br><span class="line">System.out.println(<span class="string">&quot;删除成功，&quot;</span> + count + <span class="string">&quot;行受影响&quot;</span>);</span><br><span class="line">session.close();</span><br></pre></td></tr></table></figure>

<h4 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h4><p>3号学生被删除并想你抛了一行log🌚</p>


<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>约定相对于配置来说，出错率更少了，因为不用写statement，而是通过调用接口去实现xml的id的调用，对于写statement的String容易手残的老哥来说，是不错的选择。</p>
<hr>
<p>关于一些优化🍔</p>
<h3 id="数据库连接配置"><a href="#数据库连接配置" class="headerlink" title="数据库连接配置"></a>数据库连接配置</h3><p>在<code>config.xml</code>中如果配置了很多的东西，这时在想去更改数据库配置的一些参数显得尤为麻烦，这是可以新建一个<code>properties</code>来写一些kv对，再在config中使用<code>&lt;properties&gt;</code>标签来传值貌似就会简化一部分操作。</p>
<p>因此在<code>src</code>下新建一个db.properties文件。如下配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">oracle.jdbc.driver.OracleDriver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:oracle:thin:@127.0.0.1:1521:ORCL</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">scott</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">tiger</span></span><br></pre></td></tr></table></figure>

<p>在<code>config.xml</code>中添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>数据源中配置：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>如此，每次想对数据源做更改的时候只需改变kv对即可。</p>
<h3 id="mybatis的全局参数设置更改"><a href="#mybatis的全局参数设置更改" class="headerlink" title="mybatis的全局参数设置更改"></a>mybatis的全局参数设置更改</h3><p>谨慎更改👨‍🔧</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h3><p><code>top.eshyee.entity.Student</code>太长了🤦‍♀️，想要改别名。</p>
<p>(大小写不敏感)</p>
<p>选择两种方式：</p>
<h6 id="设置单个别名"><a href="#设置单个别名" class="headerlink" title="设置单个别名"></a>设置单个别名</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;student&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="批量设置别名"><a href="#批量设置别名" class="headerlink" title="批量设置别名"></a>批量设置别名</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;top.eshyee.entity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>还有一些内置别名。</p>
<h2 id="小节"><a href="#小节" class="headerlink" title="小节"></a>小节</h2><p>怎么方便怎么来呗🏊‍♀️</p>
<hr>
<p>关于类型处理器和resultmap</p>
<h2 id="类型处理器-类型转换器"><a href="#类型处理器-类型转换器" class="headerlink" title="类型处理器(类型转换器)"></a>类型处理器(类型转换器)</h2><ol>
<li><p>MyBatis自带一些常见的类型处理器</p>
</li>
<li><p>也可以自定义Mybatis类型处理器</p>
</li>
</ol>
<p>JAVA 数据类型 –数据库（数据类型）</p>
<p>比如：</p>
<p>实体类 Student ：Boolean  stuSex true：男  &#x2F;false：女</p>
<p>表中Student ： number stuSex 1：男  &#x2F; 0：女</p>
<h3 id="自定义类型转换器"><a href="#自定义类型转换器" class="headerlink" title="自定义类型转换器"></a>自定义类型转换器</h3><h4 id="假设"><a href="#假设" class="headerlink" title="假设"></a>假设</h4><p>我要在Student表里面新建一个性别列 男生用1 表示 女生用0表示(number类型)，</p>
<p>此时实体类中我男生用的true 女生用的false(Boolean,仅仅是举个例子)。</p>
<p>数据类型不匹配此时数据类型不匹配。</p>
<h4 id="创建类型转换器"><a href="#创建类型转换器" class="headerlink" title="创建类型转换器"></a>创建类型转换器</h4><p>需要实现TypeHandler接口 此接口有一个实现类 BaseTypeHandler</p>
<p>因此实现转换器有两种方法 实现 接口TypeHandler 和 继承BaseTypeHandler(简单)</p>
<p>所以这里采用后者，去<code>extend</code>this method。</p>
<h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><p>新建一个Boolean的属性 叫做stuSex 。</p>
<p><code>private Boolean stuSex</code>形成get set方法</p>
<h5 id="转换器"><a href="#转换器" class="headerlink" title="转换器"></a>转换器</h5><p>新建一个转换器继承BaseTypeHandler，编译器会自动生成三个方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	get是DB数据--&gt;java数据</span></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		<span class="keyword">return</span> rs.getInt(columnName)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> rs.getInt(columnIndex)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(CallableStatement cs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">	<span class="keyword">return</span> cs.getInt(columnIndex)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	set是java数据--&gt;DB数据</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="type">int</span> i, Boolean parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(parameter) &#123;</span><br><span class="line">			ps.setInt(i, <span class="number">1</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			ps.setInt(i, <span class="number">0</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<p>ps:PreparedStatement对象<br>i:PreparedStatement对象操作的参数的位置<br>parameter:Java值<br>jdbcType:jdbc操作的数据类型</p>
<p>这里用到了三元运算符，想起了之前一个写个人网站用到的一个三元运算符🤦‍♂️(更)。</p>
<h5 id="conf配置"><a href="#conf配置" class="headerlink" title="conf配置"></a>conf配置</h5><p>在config中加上转换器</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;转换器类名&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Boolean&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样就算是好了 测试一下</p>
<h5 id="mapper配置"><a href="#mapper配置" class="headerlink" title="mapper配置"></a>mapper配置</h5><p>使用了转换器的查询<br>    1如果类中属性和表中的字段类型都能合理识别(String-varchar2),则可以使用resultType resultType&#x3D;”top.eshyee.entity.Student”<br>    否则(boolean-integer)使用resultMap<br>    2如果类中的属性名和表中的字段名都能够合理识别(stuNo-stuno)则可以使用resultType<br>    否则(id-stuno)使用resultMap</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNumConverter&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResult&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		select * from student where stuno= #&#123;stuno&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;studentResult&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuno&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuname&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuage&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graname&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stusex&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;boolean&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h4><p>resultMap可以实现两个功能：<br>    1 类型转换<br>    2 属性-字段名之间的映射关系</p>
<p>分为主键id和非主键result<br>如果实体类中的属性跟数据库中那个的字段名叫法不一样，从下面的映射关系中也可以更改 。</p>
<p>这样就好了，可以在<code>test.java</code>中测试一下了。🥐</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>以前用过别的方法来转换数据库数据与java数据 但是这个更系统一些吧。</p>
<hr>
<h2 id="输入参数和输出参数"><a href="#输入参数和输出参数" class="headerlink" title="输入参数和输出参数"></a>输入参数和输出参数</h2><h3 id="输入参数parameterType"><a href="#输入参数parameterType" class="headerlink" title="输入参数parameterType"></a>输入参数parameterType</h3><h4 id="简单类型"><a href="#简单类型" class="headerlink" title="简单类型"></a>简单类型</h4><p><strong>${}#{}比较</strong></p>
<p>#{任意值}或者${value}(标识符只能是value)</p>
<p>#{}会自动给String加上’’(自动类型转换)</p>
<p>${}会原样输出，但是适合于动态排序(动态字段)</p>
<p>#{}可以防止sql注入</p>
<p>${}不可以</p>
<p><strong>${}#{}相同之处</strong></p>
<p>都可以获取对象的值，(嵌套类型对象)</p>
<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><p>#{属性名}或者${属性名}(对象的属性名例如stuNo)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentByAddress&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where homeaddress=#&#123;homeAddress&#125; or schooladdress=&#x27;$&#123;schoolAddress&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="嵌套类型输入参数为级联属性"><a href="#嵌套类型输入参数为级联属性" class="headerlink" title="嵌套类型输入参数为级联属性"></a>嵌套类型输入参数为级联属性</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentByAddress&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student where homeaddress=#&#123;address.homeAddress&#125; or schooladdress=&#x27;$&#123;address.schoolAddress&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNameOrAge&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where stuname like &#x27;%$&#123;stuName&#125;%&#x27; or stuage=#&#123;stuAge&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="传入为hashmap"><a href="#传入为hashmap" class="headerlink" title="传入为hashmap"></a>传入为hashmap</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNameOrAgewithHashmap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where stuname like &#x27;%$&#123;stuName&#125;%&#x27; or stuage=#&#123;stuAge&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="调用存储过程"><a href="#调用存储过程" class="headerlink" title="调用存储过程"></a>调用存储过程</h3><p>存储过程的传入参数在mybatis中用map来传递(Hashmap)<br>CALLABLE设置sql 的调用方式是存储过程<br>输出参数通过map的get方法获取</p>
<h4 id="查询某个年级的所有学生总数"><a href="#查询某个年级的所有学生总数" class="headerlink" title="查询某个年级的所有学生总数"></a>查询某个年级的所有学生总数</h4><h5 id="数据库里"><a href="#数据库里" class="headerlink" title="数据库里"></a>数据库里</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> queryCountByGradeWithProcadure(gName <span class="keyword">in</span> <span class="type">varchar</span>,scount <span class="keyword">out</span> number )</span><br><span class="line">	<span class="keyword">as</span></span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">into</span> scount <span class="keyword">from</span> student <span class="keyword">where</span> graname<span class="operator">=</span>gname;</span><br><span class="line">	<span class="keyword">end</span>;</span><br><span class="line">	<span class="operator">/</span></span><br></pre></td></tr></table></figure>

<h5 id="mapper中"><a href="#mapper中" class="headerlink" title="mapper中"></a>mapper中</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryCountByGradeWithPrecadure&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">		&#123;CALL queryCountByGradeWithProcadure( </span><br><span class="line">		#&#123;gName,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">		#&#123;sCount,jdbcType=INTEGER,mode=OUT&#125; )&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="根据学号删除学生"><a href="#根据学号删除学生" class="headerlink" title="根据学号删除学生"></a>根据学号删除学生</h4><h5 id="数据库里-1"><a href="#数据库里-1" class="headerlink" title="数据库里"></a>数据库里</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> deleteStuBystunoWithProcedure(sno <span class="keyword">in</span> number)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> stuno<span class="operator">=</span>sno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure>

<h5 id="mapper中-1"><a href="#mapper中-1" class="headerlink" title="mapper中"></a>mapper中</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deletestuByStunoWithPrecadure&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">	&#123;CALL deleteStuBystunoWithProcedure(#&#123;sno,jdbcType=INTEGER,mode=IN&#125;)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

<h3 id="输出参数"><a href="#输出参数" class="headerlink" title="输出参数"></a>输出参数</h3><h4 id="resultType"><a href="#resultType" class="headerlink" title="resultType"></a>resultType</h4><p>简单类型，实体对象类型，实体对象类型的集合之前有提到过，此处不再赘述。</p>
<h5 id="输出为HashMap"><a href="#输出为HashMap" class="headerlink" title="输出为HashMap"></a>输出为HashMap</h5><p>通过别名作为map的key</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentWithHash&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">	select stuno &quot;no&quot;,stuname &quot;name&quot; from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="resultMap-1"><a href="#resultMap-1" class="headerlink" title="resultMap"></a>resultMap</h4><p>解决实体类型属性与数据表字段名不一致（前面有用到）</p>
<p>也可以使用HashMap+resultType</p>
<hr>
<h2 id="关于动态sql"><a href="#关于动态sql" class="headerlink" title="关于动态sql"></a>关于动态sql</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>按姓名和年龄查询</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qStuByNOrAWithSQLTag&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno ,stuname  from student where 1=1</span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuName!=null and stuName!= &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">		student有stuname属性且不为null</span><br><span class="line">		and stuname=#&#123;stuName&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuAge!=null and stuAge!=0&quot;</span>&gt;</span></span><br><span class="line">		student有stunage属性且不为null</span><br><span class="line">		and stuage=#&#123;stuAge&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里and会出问题</p>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p> where:处理第一个and</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qStuByNOrAWithSQLTag&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno ,stuname  from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuName!=null and stuName!= &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">		and stuname=#&#123;stuName&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuAge!=null and stuAge!=0&quot;</span>&gt;</span></span><br><span class="line">		and stuage=#&#123;stuAge&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p>查询学号为1 2 4的学生学号信息</p>
<p>迭代的类型：数组、对象数组、集合、属性</p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组固定写法：array 这是约定</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNoWitharray&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int[]&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;array!=null and array.length&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="放入对象的属性中"><a href="#放入对象的属性中" class="headerlink" title="放入对象的属性中"></a>放入对象的属性中</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNoInGra&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Grade&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuNos!=null and stuNos.size&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;stuNos&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNowithlist&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Grade&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;list!=null and list.size&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="对象数组"><a href="#对象数组" class="headerlink" title="对象数组"></a>对象数组</h4><p>必须使用Object[]</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNowithObjArr&quot;</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Object[]&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;objectArraStuno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 如果sql片段不在一个文件 </span></span><br><span class="line"><span class="comment">		&lt;include refid=&quot;top.eshyee.mapper.StudentMapper.objectArraStuno&quot;&gt;&lt;/include&gt;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="sql片段"><a href="#sql片段" class="headerlink" title="sql片段"></a>sql片段</h4><p>重复使用的提取出来</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;objectArraStuno&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;array!=null and array.length&gt;0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;student&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;student.stuNo&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="关联查询"><a href="#关联查询" class="headerlink" title="关联查询"></a>关联查询</h2><p>关于关联查询主要重点是配置好mapper</p>
<h3 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h3><p>a.业务扩展类</p>
<p>核心:用resultType指定的类的属性包含多表查询的所有字段</p>
<p>b. resultMap</p>
<p>通过属性成员将2个类建立起联系</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 利用业务扩展类实现一对一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithO2O&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.StudentBussiness&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select s.*,c.* from student s inner join studentcard c</span><br><span class="line">    on s.cardid =c.cardid</span><br><span class="line">    where s.stuno=#&#123;stuNo&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 利用resultmap实现一对一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithMapO2O&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;student_card_map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select s.*,c.* from student s inner join studentcard c</span><br><span class="line">    on s.cardid =c.cardid</span><br><span class="line">    where s.stuno=#&#123;stuNo&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student_card_map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 一一映射用association，一对多用collection --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;card&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;StudentCard&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cardId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cardInfo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardInfo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="一对多-多对一"><a href="#一对多-多对一" class="headerlink" title="一对多(多对一)"></a>一对多(多对一)</h3><p>(MyBatis:多对一，多对多的本质就是一对多的变化)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询1班的班级信息 和所有学生的信息 建立一对多关系 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qCAS&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;class_student_classid&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select c.*,s.* from student s</span><br><span class="line">    inner join studentclass c</span><br><span class="line">    on c.classid=s.classid</span><br><span class="line">    where c.classid=#&#123;classId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.StudentClass&quot;</span> <span class="attr">id</span>=<span class="string">&quot;class_student_classid&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;classId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span> <span class="attr">column</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 属性类型用javatype 属性的元素类型用oftype --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3><p>多对多 可由两个多对一等方法实现！</p>
<hr>
<h2 id="log4j和延迟加载"><a href="#log4j和延迟加载" class="headerlink" title="log4j和延迟加载"></a>log4j和延迟加载</h2><p>在之前下载的mybatis包中找到log4j并导入到项目</p>
<h3 id="开启日志"><a href="#开启日志" class="headerlink" title="开启日志"></a>开启日志</h3><p>如果不指定，Mybatis就会根据以下顺序寻找日志<br>SLF4J →Apache Commons Logging →Log4j 2→Log4j → JDK logging<br>日志级别:<br>DEBUG&lt; INFO&lt; WARN&lt; ERROR<br>如果设置为info， 则只显示info及以上级别的信息;<br>建议:<br>在开发时设置debug，在运行时设置为info或以上。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>每次运行就会出现诸如此类的debug</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - Opening JDBC Connection</span><br><span class="line">DEBUG [main] - Created connection 961160488.</span><br><span class="line">DEBUG [main] - Setting autocommit to false on JDBC Connection [oracle.jdbc.driver.T4CConnection@394a2528]</span><br></pre></td></tr></table></figure>

<h3 id="配置延迟加载"><a href="#配置延迟加载" class="headerlink" title="配置延迟加载"></a>配置延迟加载</h3><p><strong>嵌套查询多用于延迟加载的设计</strong></p>
<p>具体如下</p>
<h4 id="一对一：查学生和学生卡信息"><a href="#一对一：查学生和学生卡信息" class="headerlink" title="一对一：查学生和学生卡信息"></a>一对一：查学生和学生卡信息</h4><p>在xml中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 延迟加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithMapO2OLazy&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;student_card_Lazyload_map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 先查学生 --&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student_card_Lazyload_map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 此次采用延迟加载:在查询学生时，并不立即加载学生证信息</span></span><br><span class="line"><span class="comment">  通过select在需要的时候再查学生证</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;card&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;StudentCard&quot;</span> <span class="attr">select</span>=<span class="string">&quot;top.eshyee.mapper.StudentCardMapper.querycardbyid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;id property=&quot;cardId&quot; column=&quot;cardId&quot;/&gt;</span></span><br><span class="line"><span class="comment"> &lt;result property=&quot;cardInfo&quot; column=&quot;cardInfo&quot;/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>新建Cardmapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询学生信息 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;querycardbyid&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.StudentCard&quot;</span>&gt;</span></span><br><span class="line">    select * from studentCard where cardid=#&#123;cardId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="一对多：查班级和学生信息"><a href="#一对多：查班级和学生信息" class="headerlink" title="一对多：查班级和学生信息"></a>一对多：查班级和学生信息</h4><p>新建班级mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qCASLazy&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;class_student_classid_lazy&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select c.* from  studentclass c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.StudentClass&quot;</span> <span class="attr">id</span>=<span class="string">&quot;class_student_classid_lazy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;classId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span> <span class="attr">column</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 属性类型用javatype 属性的元素类型用oftype --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 延迟加载 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">select</span>=<span class="string">&quot;top.eshyee.mapper.StudentMapper.queryStuByClassId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在studentmapper中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 延迟加载一对多 查询班级中的所有学生 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuByClassId&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">	select * from student where classId=#&#123;classId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><p>一对多和一对一的延迟加载配置方法相同</p>
<hr>
<h2 id="mybatis-缓存"><a href="#mybatis-缓存" class="headerlink" title="mybatis 缓存"></a>mybatis 缓存</h2><h3 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h3><h4 id="一级缓存-同一个SqlSession对象"><a href="#一级缓存-同一个SqlSession对象" class="headerlink" title="一级缓存:同一个SqlSession对象"></a>一级缓存:同一个SqlSession对象</h4><img src="/2020/04/01/MyBatis%E7%B3%BB%E5%88%97/image-20200331082951809.png" class="" title="mb1">

<p>MyBatis默认开启一级缓存，如果用同样的SqlSession对象查询相同的数据，则只会在第一次查询时向数据库发送SQL语句，并将查询的结果放入到SQLSESSION中(作为缓存在) ；后续再次查询该同样的对象时则直接从缓存中查询该对象即可(即省略了数据库的访问)。</p>
<p>二级缓存</p>
<p>Mybatis自带二级缓存: [同一个namespace]生成的mapper对象</p>
<p>MyBati s默认情况没有开启二级缓存，需要手工打开。</p>
<p>conf.xml中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 开启二级缓存 --&gt;</span><br><span class="line">&lt;setting name=&quot;cacheEnable&quot; value=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>mapper中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明此namespace开启二级缓存 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>异常提示：NotSerializableException可知，MyBatis的二级缓存是将对象放入硬盘文件中</p>
<p>序列化:内存-&gt;硬盘</p>
<p>反序列化:硬盘-&gt;内存</p>
<p>准备缓存的对象，必须实现了序列化接口( 如果开启的缓存<code>Namespace=&quot;top.eshyee.mapper.StudentMapper&quot; </code>可知序列化对象为Student，因此需要将Student序列化(序 列化Student类，以及Student的级联属性、和父类)</p>
<p>触发将对象写入二级缓存的时机: SqlSession对象的close()方法</p>
<p>回顾: namespace的值 就是接口的全类名(包名.类名) ，通过接口可以产生代理对象(Mapper对象)</p>
<p>–&gt;namespace决定了Mapper对象的产生</p>
<p>结论:只要产生的xxxMapper对象来自于同一个namespace，则这些对象共享二级缓存。</p>
<p>如果是同一个SqISession对象进行多次相同的查询，则直接进入一级缓存查询;</p>
<img src="/2020/04/01/MyBatis%E7%B3%BB%E5%88%97/image-20200331084348373.png" class="" title="mb1">

<p>如果不是同一个SqISession对象进行多次相同的查询(但是均来自同一个namespace)则进入二级缓存查询</p>
<p>如果一个namespace， 如果有多个xxMapper. xml的namespace值相同， 则通过这些xxxMapper. xml产生的xxMapper，仍然共享二级缓存。</p>
<p>禁用：</p>
<p>在需要禁用的select标签中的<code>usecache</code>属性改为<code>false</code></p>
<p>清理：与清理一级缓存的方法相同，一般执行增删改时会清理掉缓存 ，设计的原因是为了防止脏数据</p>
<p>commit();</p>
<p>commit会清理一级和二级缓存;但是清理二级缓存时，不能是查询自身的commit()</p>
<p>改标签</p>
<p>在select标签中设置<code>flushCache= &quot;true&quot;</code></p>
<p>命中率:<br>1 :0% 0.0</p>
<p>2:50% 0.5</p>
<p>3:2&#x2F;3 0.666</p>
<p>4:3&#x2F;4 0.75</p>
<p>三方提供的二级缓存:</p>
<p>ehicache、memcache</p>
<p>要想整合三方提供的二级缓存(或者自定义二级缓存) ，必须实现<code>org.apache.ibatis.cache.Cache</code>接口，该接口的默认实现类是<code>PerpetualCache</code></p>
<p>整合ehcache二级缓存:</p>
<p>Ehcache-core.jar<br>mybatis- Ehcache.jar<br>slf4j-api.jar</p>
<p>编写ehcache配置文件Ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;ehcache.xsd&quot;</span> <span class="attr">updateCheck</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">monitoring</span>=<span class="string">&quot;autodetect&quot;</span> <span class="attr">dynamicConfig</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当二级缓存的对象超过内存限制时（缓存对象的个数&gt;maxElements InMemory</span></span><br><span class="line"><span class="comment"> ），存放入的硬盘路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;D:\Ehcache&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- maxElementsInMemory:设置在内存中缓存对象的个数 </span></span><br><span class="line"><span class="comment"> maxElementsOnDisk:设置在硬盘中缓存对象的个数</span></span><br><span class="line"><span class="comment"> eternal: 设置缓存是否永远不过期</span></span><br><span class="line"><span class="comment"> overflowToDisk:当内存中缓存的对象个数超过maxElementsInMemory的时候，是否转移到硬盘中</span></span><br><span class="line"><span class="comment"> timeToIdleSeconds:当2次访问超过该值的时候，将缓存对象失效</span></span><br><span class="line"><span class="comment"> timeToliveSeconds:一个缓存对象最多存放的时间(生命周期)</span></span><br><span class="line"><span class="comment"> diskExpiryThreadIntervalSeconds:设置每隔多长时间，通过一个线程来清理硬盘中的缓存</span></span><br><span class="line"><span class="comment"> memoryStioreEvictionPolicy: 当超过缓存对象的最大值时，处理的策略 LRU，FIFO,LFU </span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> </span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;1000000&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;100&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>= <span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>= <span class="string">&quot;maxELementsInMemory&quot;</span> <span class="attr">value</span>= <span class="string">&quot;2000&quot;</span> /&gt;</span></span><br><span class="line">    可以覆盖掉默认值</span><br><span class="line"><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>类型处理器</tag>
        <tag>存储过程</tag>
        <tag>动态sql</tag>
        <tag>关联查询</tag>
        <tag>一对多</tag>
        <tag>log4j</tag>
        <tag>延迟加载</tag>
        <tag>二级缓存</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle系列学习(一)</title>
    <url>/2020/02/25/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%B8%80/</url>
    <content><![CDATA[<p>之前都是一直在用MySQL，这回鸟枪换炮玩玩Oracle</p>
<p>环境：</p>
<ol>
<li>Oracle 11g</li>
</ol>
<h2 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h2><p>下载网址:<a href="https://www.oracle.com/cn/downloads/">https://www.oracle.com/cn/downloads/</a></p>
<p>选择11g,会有下载选项，两个file都要下载的。</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\xz.png" alt="image-20200225114215394"></p>
<p>把两个zip解压在一个文件下，双击“<strong>setup</strong>”进行安装</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225120405331.png" alt="image-20200225120405331"></p>
<p>一波疯狂下一步就好了✔</p>
<p>这里安装的是<strong>桌面类，企业版</strong></p>
<p>安装完成后会有<strong>Database Configuration Assistant</strong>，选择<strong>口令管理</strong></p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225140230194.png" alt="image-20200225140230194"></p>
<p>分别选择<strong>sys ，system 和scott</strong>，解锁，修改口令为”<strong>sys</strong>“,”<strong>system</strong>“,”<strong>tiger</strong>“(不带引号)。</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225140548831.png" alt="image-20200225140548831"></p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225140606895.png" alt="image-20200225140606895"></p>
<p>然后点击确定，只要没输错 ，就不要管提示。</p>
<p>ok，Oracle11g就在电脑上成功安装。</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225140804868.png" alt="image-20200225140804868"></p>
<h2 id="使用测试"><a href="#使用测试" class="headerlink" title="使用测试"></a>使用测试</h2><p>打开sqlplus</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225141806309.png" alt="image-20200225141806309"></p>
<p>输入scott,口令就是tiger</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225141901711.png" alt="image-20200225141901711"></p>
<p>查看一下所有表</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225142136582.png" alt="image-20200225142136582"></p>
<h2 id="连接到navicat"><a href="#连接到navicat" class="headerlink" title="连接到navicat"></a>连接到navicat</h2><p>打开navicat</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225143308994.png" alt="image-20200225143308994"></p>
<p>新建链接+，如图配置，我这里选择的是以system链接，password就是安装的时候填的口令。</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225143446828.png" alt="image-20200225143446828"></p>
<p>advanced页面把SYSDBA选一下</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225143714410.png" alt="image-20200225143714410"></p>
<p>测试链接，连接成功！</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225145319695.png" alt="image-20200225145319695"></p>
<p>打开Oracle的连接，查看目录：</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225145447644.png" alt="image-20200225145447644"></p>
<p>打开scott，查看里面的表，当然跟刚刚查询到的是一样的</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225145609209.png" alt="image-20200225145609209"></p>
<p>然后是sysman里面的表(709张😵)：</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225145653505.png" alt="image-20200225145653505"></p>
<p>system里面有156张：</p>
<p><img src="D:\blog\source_posts\Oracle系列学习-一\image-20200225145931982.png" alt="image-20200225145931982"></p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ol>
<li><strong>不要轻易尝试最新版。</strong>我一开始下的是最新版(19)，然后一切都是常规安装，但是当时就卡在45%不动了，卡了一下午。是一个实例没有安装好，sqlplus能运行，但是navicat连不上(可能是配置问题)。最后中止安装删除D盘文件，C盘文件，注册表等。重新下的11g。</li>
<li><strong>安装过程中尽量不要在电脑上干别的事情。</strong>不知道是运气不好，还是怎么着，安装11g的时候一开始好好的，我就去搞别的事情了，但是过一会回来看，卡在60%了。又是一下午，最后无奈中止，重启安装文件，安装成功。</li>
<li>如果忘记设置口令，问题不大，后期可以改。(<strong>alter user scott account unlock;</strong>)</li>
</ol>
]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL进阶</title>
    <url>/2020/04/01/Mysql%20%E8%BF%9B%E9%98%B6/</url>
    <content><![CDATA[<h2 id="使用Docker安装一个MySQL5-7"><a href="#使用Docker安装一个MySQL5-7" class="headerlink" title="使用Docker安装一个MySQL5.7"></a>使用Docker安装一个MySQL5.7</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Shyee ~]<span class="comment"># docker pull mysql:5.7</span></span><br><span class="line">[root@Shyee ~]<span class="comment"># docker images</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#返回结果</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysql               5.7                 a70d36bc331a        13 days ago         449MB</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行前需要一点配置</span></span><br><span class="line">[root@Shyee ~]<span class="comment"># docker run --name mysql5 -v /usr/local/MySQL5:/var/lib/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=密码 -d a70d36bc331a</span></span><br><span class="line"></span><br><span class="line">[root@Shyee ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES</span><br><span class="line">7b829aa38925        a70d36bc331a        <span class="string">&quot;docker-entrypoint.s…&quot;</span>   6 minutes ago       Up 6 minutes        0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql5</span><br><span class="line"></span><br><span class="line"><span class="comment">#进入服务</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">id</span> /bin/bash</span><br></pre></td></tr></table></figure>

<p>数据库目录: datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql<br>pid文件目录:–pid-file&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;ibdata01.pid</p>
<h2 id="MySQL的文件结构"><a href="#MySQL的文件结构" class="headerlink" title="MySQL的文件结构"></a>MySQL的文件结构</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@7b829aa38925:/var/lib/mysql<span class="comment"># ls</span></span><br><span class="line">auto.cnf    ca.pem	     client-key.pem  ib_logfile0  ibdata1  mysql	       private_key.pem	server-cert.pem  sys</span><br><span class="line">ca-key.pem  client-cert.pem  ib_buffer_pool  ib_logfile1  ibtmp1   performance_schema  public_key.pem	server-key.pem</span><br><span class="line"></span><br><span class="line">root@7b829aa38925:/var/lib/mysql<span class="comment"># cd /usr/share/mysql</span></span><br><span class="line">root@7b829aa38925:/usr/share/mysql<span class="comment"># ls</span></span><br><span class="line">bulgarian	errmsg-utf8.txt       innodb_memcached_config.sql  mysql-log-rotate		 mysqld_multi.server  serbian</span><br><span class="line">charsets	estonian	      install_rewriter.sql	   mysql-systemd-start		 norwegian	      slovak</span><br><span class="line">czech		fill_help_tables.sql  italian			   mysql_security_commands.sql	 norwegian-ny	      spanish</span><br><span class="line">danish		french		      japanese			   mysql_sys_schema.sql		 polish		      swedish</span><br><span class="line">dictionary.txt	german		      korean			   mysql_system_tables.sql	 portuguese	      ukrainian</span><br><span class="line">dutch		greek		      magic			   mysql_system_tables_data.sql  romanian	      uninstall_rewriter.sql</span><br><span class="line">english		hungarian	      mysql-helpers		   mysql_test_data_timezone.sql  russian</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查询MySQL的编码"><a href="#查询MySQL的编码" class="headerlink" title="查询MySQL的编码"></a>查询MySQL的编码</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name            <span class="operator">|</span> <span class="keyword">Value</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> character_set_client     <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_connection <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_database   <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_filesystem <span class="operator">|</span> <span class="type">binary</span>                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_results    <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_server     <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_system     <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_sets_dir       <span class="operator">|</span> <span class="operator">/</span>usr<span class="operator">/</span>share<span class="operator">/</span>mysql<span class="operator">/</span>charsets<span class="operator">/</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">需要统一设置编码UTF<span class="number">-8</span></span><br><span class="line">好麻烦，还是直接装在centOS上</span><br></pre></td></tr></table></figure>

<h2 id="CentOS8-安装MySQL5-5"><a href="#CentOS8-安装MySQL5-5" class="headerlink" title="CentOS8 安装MySQL5.5"></a>CentOS8 安装MySQL5.5</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p> <a href="https://dev.mysql.com/get/Downloads/MySQL-5.5/MySQL-server-5.5.59-1.el7.x86_64.rpm">https://dev.mysql.com/get/Downloads/MySQL-5.5/MySQL-server-5.5.59-1.el7.x86_64.rpm</a></p>
<p> <a href="https://dev.mysql.com/get/Downloads/MySQL-5.5/MySQL-client-5.5.59-1.el7.x86_64.rpm">https://dev.mysql.com/get/Downloads/MySQL-5.5/MySQL-client-5.5.59-1.el7.x86_64.rpm</a></p>
<p>上传到服务器</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>无依赖安装（–nodeps）</p>
<p>rpm -ivh –nodeps MySQL-server-5.5.59-1.el7.x86_64.rpm</p>
<p>rpm -ivh –nodeps MySQL-client-5.5.59-1.el7.x86_64.rpm</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#验证</span></span><br><span class="line">[root@Shyee MySQL5]<span class="comment"># mysqladmin --version</span></span><br><span class="line">mysqladmin  Ver 8.42 Distrib 5.5.59, <span class="keyword">for</span> Linux on x86_64</span><br><span class="line"><span class="comment">#启动</span></span><br><span class="line">[root@Shyee MySQL5]<span class="comment"># service mysql start</span></span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/var/lib/mysql/Shyee.err&#x27;</span>.</span><br><span class="line">.                                                          [  OK  ]</span><br><span class="line"><span class="comment">#配置开机自启</span></span><br><span class="line">chkconfig mysql on</span><br></pre></td></tr></table></figure>

<h3 id="改密码"><a href="#改密码" class="headerlink" title="改密码"></a>改密码</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/mysqladmin -u root password <span class="string">&#x27;new-password&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<h3 id="统一编码"><a href="#统一编码" class="headerlink" title="统一编码"></a>统一编码</h3><p>改my-huge.cnf文件，复制到&#x2F;etc，名字改为my.cnf</p>
<p>分别在mysql 和client插入一句default-character-set&#x3D;utf8</p>
<p>mysqld中插入</p>
<p>character_set_server&#x3D;utf8<br>character_set_client&#x3D;utf8<br>collation_server&#x3D;utf8_general_ci</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">修改后</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name            <span class="operator">|</span> <span class="keyword">Value</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> character_set_client     <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_connection <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_database   <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_filesystem <span class="operator">|</span> <span class="type">binary</span>                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_results    <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_server     <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_system     <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_sets_dir       <span class="operator">|</span> <span class="operator">/</span>usr<span class="operator">/</span>share<span class="operator">/</span>mysql<span class="operator">/</span>charsets<span class="operator">/</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="mysql小知识"><a href="#mysql小知识" class="headerlink" title="mysql小知识"></a>mysql小知识</h2><h3 id="MySQL逻辑分层：连接层-gt-服务层-gt-引擎层-gt-存储层"><a href="#MySQL逻辑分层：连接层-gt-服务层-gt-引擎层-gt-存储层" class="headerlink" title="MySQL逻辑分层：连接层-&gt;服务层-&gt;引擎层-&gt;存储层"></a>MySQL逻辑分层：连接层-&gt;服务层-&gt;引擎层-&gt;存储层</h3><h3 id="InnoDB与MyISAM"><a href="#InnoDB与MyISAM" class="headerlink" title="InnoDB与MyISAM"></a>InnoDB与MyISAM</h3><p>InnoDB :事务优先（适合高并发操作;行锁)</p>
<p>My ISAM :性能优先（表锁)</p>
<h4 id="查询MySQL支持哪些引擎"><a href="#查询MySQL支持哪些引擎" class="headerlink" title="查询MySQL支持哪些引擎"></a>查询MySQL支持哪些引擎</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> engines;</span><br></pre></td></tr></table></figure>

<p>![image-20210202093942237](D:\bloglocal\Mysql 进阶.assets\image-20210202093942237.png)</p>
<p>查询当前使用的引擎</p>
<p>show variables like ‘%storage_engine%’;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%storage_engine%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name          <span class="operator">|</span> <span class="keyword">Value</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> default_storage_engine <span class="operator">|</span> InnoDB <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> storage_engine         <span class="operator">|</span> InnoDB <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>默认innoDB</p>
<h4 id="创建一个myISAM引擎的表"><a href="#创建一个myISAM引擎的表" class="headerlink" title="创建一个myISAM引擎的表"></a>创建一个myISAM引擎的表</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> database myDB;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> use myDB</span><br><span class="line">Database changed</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> tb(id <span class="type">int</span>(<span class="number">4</span>) auto_increment,name <span class="type">varchar</span>(<span class="number">5</span>),dept <span class="type">varchar</span>(<span class="number">5</span>),<span class="keyword">primary</span> key(id))ENGINE<span class="operator">=</span>MyISAM AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="sql优化"><a href="#sql优化" class="headerlink" title="sql优化"></a>sql优化</h2><p>编写sql的过程</p>
<p><code>select distinct..from ..join ..on ..where ..group by ...having ..order by ..limit ..</code></p>
<p>MySQL执行代码的过程</p>
<p><code>from .. on.. join ..where ..group by ... having ...select distinct..order by limit ..</code></p>
<p><strong>sql优化，重在优化索引</strong></p>
<p>MySQL默认使用B+树做索引</p>
<p>如果一个字段是primary key，则改字段默认就是主键索引</p>
<h4 id="索引的弊端"><a href="#索引的弊端" class="headerlink" title="索引的弊端:"></a>索引的弊端:</h4><p>1.索引本身很大，可以存放在内存&#x2F;硬盘（通常为硬盘）</p>
<p>2.索引不是所有情况均适用:a.少量数据b.频繁更新的字段c.很少使用的字段</p>
<p>3.索引会降低增删改的效率</p>
<h4 id="优势："><a href="#优势：" class="headerlink" title="优势："></a>优势：</h4><p>1提高查询效率（降低IO使用率)</p>
<p>2.降低CPU使用率(…order by age desc)</p>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类:"></a>分类:</h4><p>单值索引：单列，age ;一个表可以多个单值索引, name</p>
<p>唯一索引:不能重复。id</p>
<p>复合索引:多个列构成的索引（相当于二级目录)（可以有多个列）</p>
<h3 id="索引的创建"><a href="#索引的创建" class="headerlink" title="索引的创建"></a>索引的创建</h3><h4 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h4><p><code>create 索引类型 索引名 on 表(字段)</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--创建一个单值索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> index dept_index <span class="keyword">on</span> tb(dept);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个唯一索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">unique</span> index name_index <span class="keyword">on</span> tb(name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个复合索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> index dept_name_index <span class="keyword">on</span> tb(dept,name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h4><p><code>alter table 表名 add index 索引名(字段)</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--添加一个单值索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> tb <span class="keyword">add</span> index dept_index(dept) ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"><span class="comment">--创建一个唯一索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> tb <span class="keyword">add</span> <span class="keyword">unique</span> index name_index(name) ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"><span class="comment">--创建一个复合索引</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> tb <span class="keyword">add</span> index dept_name_index(dept,name) ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><p><code>drop index 索引名 on 表名;</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> index name_index <span class="keyword">on</span> tb;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="查询索引"><a href="#查询索引" class="headerlink" title="查询索引"></a>查询索引</h3><p><code>show index from 表名;</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">show index from tb;</span><br></pre></td></tr></table></figure>

<p>![image-20210202102426701](D:\bloglocal\Mysql 进阶.assets\image-20210202102426701.png)</p>
<h3 id="sql性能问题"><a href="#sql性能问题" class="headerlink" title="sql性能问题"></a>sql性能问题</h3><p>a.分析SQL的执行计划: <code>explain</code>，可以模拟SQL优化执行SQL语句</p>
<p>b.MySQL查询优化其会干扰我们的优化</p>
<p>官网提供的解决方案：<a href="https://dev.mysql.com/doc/refman/8.0/en/optimization.html">https://dev.mysql.com/doc/refman/8.0/en/optimization.html</a></p>
<p>![image-20210202103105970](D:\bloglocal\Mysql 进阶.assets\image-20210202103105970.png)</p>
<h4 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb;</span><br></pre></td></tr></table></figure>

<p>![image-20210202103206570](D:\bloglocal\Mysql 进阶.assets\image-20210202103206570.png)</p>
<p>id :编号</p>
<p>select_type :查询类型</p>
<p>table :表</p>
<p>type:类型</p>
<p>possible_keys:预测用到的索引</p>
<p>key :实际使用的索引</p>
<p>key_len:实际使用索引的长度</p>
<p>ref:表之间的引用</p>
<p>rows :通过索引查询到的数据量</p>
<p>Extra:额外的信息</p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><h5 id="准备数据"><a href="#准备数据" class="headerlink" title="准备数据"></a>准备数据</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">cid <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">cname <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">tid <span class="type">int</span>(<span class="number">3</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> teacher(</span><br><span class="line">tid <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">tname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">tcid <span class="type">int</span>(<span class="number">3</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> teachercard(</span><br><span class="line">tcid <span class="type">int</span>(<span class="number">3</span>),</span><br><span class="line">tcdesc <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">--插入一些数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> course <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;java&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> course <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;html&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> course <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;sql&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> course <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;web&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tz&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;tw&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;tl&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teachercard <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;tzdesc&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teachercard <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;twdesc&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teachercard <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;tldesc&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="查询课程编号为2或教师证编号为3-的老师信息"><a href="#查询课程编号为2或教师证编号为3-的老师信息" class="headerlink" title="查询课程编号为2或教师证编号为3 的老师信息"></a>查询课程编号为2或教师证编号为3 的老师信息</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher t,course c,teachercard tc <span class="keyword">where</span> c.tid<span class="operator">=</span>t.tid <span class="keyword">and</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span>(c.cid<span class="operator">=</span><span class="number">2</span> <span class="keyword">or</span> tc.tcid<span class="operator">=</span><span class="number">3</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+------+------+-------+------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> tid  <span class="operator">|</span> tname <span class="operator">|</span> tcid <span class="operator">|</span> cid  <span class="operator">|</span> cname <span class="operator">|</span> tid  <span class="operator">|</span> tcid <span class="operator">|</span> tcdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+------+------+-------+------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> tz    <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> html  <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> tzdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> tl    <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> web   <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> tldesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+------+------+-------+------+------+--------+</span></span><br></pre></td></tr></table></figure>

<h5 id="explain-1"><a href="#explain-1" class="headerlink" title="explain"></a>explain</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher t,course c,teachercard tc <span class="keyword">where</span> c.tid<span class="operator">=</span>t.tid <span class="keyword">and</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span>(c.cid<span class="operator">=</span><span class="number">2</span> <span class="keyword">or</span> tc.tcid<span class="operator">=</span><span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>![image-20210202105854202](D:\bloglocal\Mysql 进阶.assets\image-20210202105854202.png)</p>
<p>可以看到执行顺序，自上至下是t(三条记录) tc(三条记录) c(4条记录)</p>
<p>现在给teacher 插入几条记录</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;ta&#x27;</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">5</span>,<span class="string">&#x27;tz&#x27;</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher <span class="keyword">VALUES</span>(<span class="number">6</span>,<span class="string">&#x27;tv&#x27;</span>,<span class="number">6</span>);</span><br></pre></td></tr></table></figure>

<p>再次解释</p>
<p>![image-20210202110851529](D:\bloglocal\Mysql 进阶.assets\image-20210202110851529.png)</p>
<p>可以看到执行顺序是tc(三条记录) c(四条记录) t(6条记录)</p>
<p>顺序改变的原因：笛卡尔积</p>
<p>中间过程(乘积)越小越好–数据小的表优先查询</p>
<h5 id="查询课程名字为sql的教师描述"><a href="#查询课程名字为sql的教师描述" class="headerlink" title="查询课程名字为sql的教师描述"></a>查询课程名字为sql的教师描述</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> tc.tcdesc <span class="keyword">from</span> teacher t,course c,teachercard tc <span class="keyword">where</span> c.tid<span class="operator">=</span>t.tid <span class="keyword">and</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span>(c.cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> tcdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> twdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="explain-2"><a href="#explain-2" class="headerlink" title="explain"></a>explain</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">explain <span class="keyword">select</span> tc.tcdesc <span class="keyword">from</span> teacher t,course c,teachercard tc <span class="keyword">where</span> c.tid<span class="operator">=</span>t.tid <span class="keyword">and</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span>(c.cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>![image-20210202114014023](D:\bloglocal\Mysql 进阶.assets\image-20210202114014023.png)</p>
<p>如果是嵌套查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tcdesc <span class="keyword">from</span> teachercard <span class="keyword">where</span> tcid<span class="operator">=</span>(<span class="keyword">select</span> tcid <span class="keyword">from</span> teacher <span class="keyword">where</span> tid<span class="operator">=</span>(<span class="keyword">select</span> tid <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h5 id="explain-3"><a href="#explain-3" class="headerlink" title="explain"></a>explain</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">SELECT</span> tcdesc <span class="keyword">from</span> teachercard <span class="keyword">where</span> tcid<span class="operator">=</span>(<span class="keyword">select</span> tcid <span class="keyword">from</span> teacher <span class="keyword">where</span> tid<span class="operator">=</span>(<span class="keyword">select</span> tid <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>![image-20210202114510975](D:\bloglocal\Mysql 进阶.assets\image-20210202114510975.png)</p>
<p><strong>Id值不同时，id越大越优先查询</strong></p>
<p>多表连接+嵌套查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> t.tname, tc.tcdesc <span class="keyword">from</span> teachercard tc,teacher t <span class="keyword">where</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span> t.tid<span class="operator">=</span>(<span class="keyword">select</span> tid <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br><span class="line"><span class="operator">|</span> tname <span class="operator">|</span> tcdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br><span class="line"><span class="operator">|</span> tw    <span class="operator">|</span> twdesc <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="explain-4"><a href="#explain-4" class="headerlink" title="explain"></a>explain</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> explain <span class="keyword">SELECT</span> t.tname, tc.tcdesc <span class="keyword">from</span> teachercard tc,teacher t <span class="keyword">where</span> t.tcid<span class="operator">=</span>tc.tcid <span class="keyword">and</span> t.tid<span class="operator">=</span>(<span class="keyword">select</span> tid <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;sql&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>![image-20210202115402526](D:\bloglocal\Mysql 进阶.assets\image-20210202115402526.png)</p>
<p>id有相同有不同 所以执行顺序为 course tc t</p>
<p>select_type:</p>
<p>primary：主查询（最外层）</p>
<p>subquery：子查询（非最外层）</p>
<p>simple：简单查询</p>
<p>derived：衍生查询（查询时 使用到了临时表 在from中只有一张表）</p>
<p>Union</p>
<p>union result</p>
<h4 id="type：索引类型"><a href="#type：索引类型" class="headerlink" title="type：索引类型"></a>type：索引类型</h4><p>system-&gt;const-&gt;eq_ref-&gt;ref-&gt;range-&gt;index-&gt;all</p>
<p>越往左性能越高</p>
<p>system：只有一条数据的系统表或衍生表只有一条数据的主查询 才能达到</p>
<p>const：只能查到一条数据的SQL，用于primary key 或unique索引 （类型与索引类型有关）</p>
<p>eq_ref:唯一性索引：对于每个索引键的额查询，返回匹配唯一行数据（有且只有1个，不能多，不能0）常见于主键或者唯一</p>
<p>ref:非唯一性索引：对于每个索引的查询，返回匹配的所有行（0，多）</p>
<p>range：检索指定范围的行，where  后面是一个有索引的范围查询（between in &lt; &gt; |in有时候会失效)</p>
<p>index：查询全部索引的数据：</p>
<p>all：查询全部表中的数据：</p>
<p>system&#x2F;const:结果只有一条数据</p>
<p>eq_ref:结果多条 但是每条数据都是唯一的</p>
<p>ref：结果多条，但是每条数据是0或多条</p>
<h4 id="possible-keys：可能使用到的索引"><a href="#possible-keys：可能使用到的索引" class="headerlink" title="possible keys：可能使用到的索引"></a>possible keys：可能使用到的索引</h4><p>是一种预测，不准</p>
<h4 id="keys：实际用到的索引"><a href="#keys：实际用到的索引" class="headerlink" title="keys：实际用到的索引"></a>keys：实际用到的索引</h4><h4 id="key-len-索引长度"><a href="#key-len-索引长度" class="headerlink" title="key_len:索引长度"></a>key_len:索引长度</h4><p>用于判断复合索引是否被完全使用</p>
<p>创建一个用于实验的表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_kl(name <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> test_kl <span class="keyword">add</span> index index_name(name);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test_kl <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>![image-20210207152639778](D:\bloglocal\Mysql 进阶.assets\image-20210207152639778.png)</p>
<p>key_len:60</p>
<p>在utf-8中1个字符占3个字节</p>
<p>索引字段是20 所以长度一共为60</p>
<p>如果字段可以为空</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> test_kl <span class="keyword">add</span> <span class="keyword">column</span> name1 <span class="type">char</span>(<span class="number">20</span>) ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> test_kl <span class="keyword">add</span> index index_name1(name1);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>![image-20210207153309555](D:\bloglocal\Mysql 进阶.assets\image-20210207153309555.png)</p>
<p>如果字段可以为null MySQL 会用一个字节来标识</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> index index_name1 <span class="keyword">on</span> test_kl;</span><br><span class="line"><span class="keyword">drop</span> index index_name <span class="keyword">on</span> test_kl;</span><br></pre></td></tr></table></figure>

<p>创建复合索引</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> test_kl <span class="keyword">add</span> index index_name1(name,name1);</span><br></pre></td></tr></table></figure>

<p>![image-20210207153606087](D:\bloglocal\Mysql 进阶.assets\image-20210207153606087.png)</p>
<p>60 +60+1</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  test_kl <span class="keyword">add</span> <span class="keyword">column</span> name2 <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> test_kl <span class="keyword">add</span> index name2_index(name2);</span><br></pre></td></tr></table></figure>

<p>![image-20210207153855236](D:\bloglocal\Mysql 进阶.assets\image-20210207153855236.png)</p>
<p>20*3 +1+2</p>
<p>mysql用两个字节标识可变长度</p>
<p>gbk 一个字符2字节</p>
<p>Latin 一个字符一个字节</p>
<h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>与type中的ref不同</p>
<p>指明当前表所参照的字段</p>
<h4 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h4><p>被索引优化查询的 数据个数</p>
<h4 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h4><p>using filesort：性能消耗大，需要额外的一次排序</p>
<p>常出现于order by</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test02(a1 <span class="type">char</span>(<span class="number">3</span>),a2 <span class="type">char</span>(<span class="number">3</span>), a3 <span class="type">char</span>(<span class="number">3</span>),index idx_a1(a1),index idx_a2(a2),index idx_a3(a3));</span><br></pre></td></tr></table></figure>

<p>![image-20210207154713367](D:\bloglocal\Mysql 进阶.assets\image-20210207154713367.png)</p>
<p>复合索引：不能跨列（最佳最前缀）</p>
<p>where 和order by 按照复合索引的顺序使用 ，不要跨列和无序使用</p>
<p>using temporary：性能损耗大，用到了临时表</p>
<p>一般出现在group by中</p>
<p>减少跨列使用</p>
<p>using index：索引覆盖（性能提升）</p>
<p>没有读取源文件，只从索引中获取数据</p>
<p>using where</p>
<p>需要回表查询</p>
<p>impossible where </p>
<p>where 字句为false</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>MySQL</tag>
        <tag>事务</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle系列学习(三)</title>
    <url>/2020/03/12/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%B8%89/</url>
    <content><![CDATA[<p>创建用户、创建表、简单操作</p>
<h2 id="创建用户与授权"><a href="#创建用户与授权" class="headerlink" title="创建用户与授权"></a>创建用户与授权</h2><h3 id="表空间"><a href="#表空间" class="headerlink" title="表空间"></a>表空间</h3><p>对应物理磁盘上建立一个数据文件,作为数据库对象(用户、表、存储过程等等)的物理存储<br>空间; </p>
<p>创建表空间：</p>
<p>便于管理</p>
<p>性能提升</p>
<p>防止IO竞争</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE 表空间名</span><br><span class="line">DATAFILE 文件路径 SIZE 文件大小</span><br><span class="line">AUTOEXTEND <span class="keyword">ON</span> NEXT 扩展大小 MAXSIZE 最大空间;</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE MYFIR_TBS</span><br><span class="line">DATAFILE <span class="string">&#x27;D:\app\EShyee\oradata\orcl\MYFIR_TBS.DBF&#x27;</span> SIZE <span class="number">100</span>M</span><br><span class="line">AUTOEXTEND <span class="keyword">ON</span> NEXT <span class="number">10</span>M MAXSIZE <span class="number">200</span>M;</span><br></pre></td></tr></table></figure>

<p>查看表空间:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> file_name,tablespace_name,bytes <span class="keyword">from</span> dba_data_files;</span><br></pre></td></tr></table></figure>

<h3 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h3><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> 用户名 identified <span class="keyword">by</span> 密码 [<span class="keyword">default</span> tablespace 表空间名];</span><br></pre></td></tr></table></figure>

<p>创建用户时如果不指定 会使用默认的表空间users</p>
<h4 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,resource <span class="keyword">to</span> 用户名 [<span class="keyword">with</span> <span class="keyword">grant</span> option];</span><br></pre></td></tr></table></figure>

<h5 id="三种角色权限"><a href="#三种角色权限" class="headerlink" title="三种角色权限"></a>三种角色权限</h5><p>dba系统管理员最高权限，啥都能干</p>
<p>resource操作数据库数据，但是不能管理数据库(如用户管理)</p>
<p>connect连接数据库，但是不能操作数据库</p>
<p>角色是权限的集合，一个角色里，包含有很多个细分权限，</p>
<p>比如，resource角色包含create drop select insert等</p>
<p>-般为普通用授予connect和resource权限即可，如scott账户</p>
<p>with grant option表示该用户还可以将其权限授权给其他用户。</p>
<blockquote>
<p>注意:</p>
<p>12c版本开始，回收的unlimited tablespace权限，导致即使给用户指定了表空间，也不能使用。</p>
<p>解决办法是给用户授予该权限:</p>
<p>grant unlimited tablespace to用户</p>
</blockquote>
<h5 id="实体权限"><a href="#实体权限" class="headerlink" title="实体权限"></a>实体权限</h5><p>对数据库实体的具体操作(如增删改查等)，使用实体权限能细化授权</p>
<p>实体权限有select, update, insert, alter, index, delete,execute, all (all包括所有权限) 等</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>, <span class="keyword">update</span>, <span class="keyword">insert</span> <span class="keyword">on</span>表名<span class="keyword">to</span>用户</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span>表名<span class="keyword">to</span>用户</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>, <span class="keyword">update</span>, <span class="keyword">insert</span> <span class="keyword">on</span> emp <span class="keyword">to</span> EShyee</span><br></pre></td></tr></table></figure>

<h2 id="补充其他管理操作"><a href="#补充其他管理操作" class="headerlink" title="补充其他管理操作"></a>补充其他管理操作</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">查询当前用户的默认表空间</span><br><span class="line"><span class="keyword">select</span> default_tablespace <span class="keyword">from</span> user_users ;</span><br><span class="line"></span><br><span class="line">修改密码</span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">user</span> EShyee identified <span class="keyword">by</span> tt456;</span><br><span class="line"></span><br><span class="line">冻结用户与解锁用户</span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">user</span> scott account lock</span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">user</span> scott account unlock</span><br><span class="line"></span><br><span class="line">删除用户</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> 用户名;</span><br></pre></td></tr></table></figure>

<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><h5 id="三要素"><a href="#三要素" class="headerlink" title="三要素"></a>三要素</h5><p>1、表名<br>2、表中有哪些列(列名)<br>3、列的数据类型</p>
<p>create table名(列名数据类型列名数据类型..); </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">stuno varchar2(<span class="number">20</span>) ，</span><br><span class="line">name varchar2(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">height number(<span class="number">4</span>, <span class="number">1</span>)</span><br><span class="line">);</span><br><span class="line">创建一个表，名字是student该表中，有</span><br><span class="line">stuno学号</span><br><span class="line">name姓名</span><br><span class="line">age年龄</span><br><span class="line">height身高</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="常用数据类型"><a href="#常用数据类型" class="headerlink" title="常用数据类型"></a>常用数据类型</h3><p>数字类型:<br>number(p,s)数字</p>
<p>p为总位数，s为小数点后最多几位</p>
<p>例如，number(5,3) 可以表示99999 123.32 135.5等</p>
<p>Integer&#x2F;int 整数,相当于number(38,0), 可以表示很大的数</p>
<p>float:小数</p>
<h3 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h3><p>varchar2(p)表示能存储一个字符串， 其最大的长度为p</p>
<p>char(p)表示能存储一个字符串，固定长度为p，如果长度不够,自动补充空格</p>
<p>比如: varchar2 (20) 与char(20)同时存放一个字符串’123’:</p>
<p>varchar2只存放’123’这三个字符</p>
<p>char会存放’123  (17个空格)’。</p>
<h3 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h3><p>date:存储日期类型，可以精确到秒,通常存储格式是年月日时分秒</p>
<p>timestamp:和DATE相比，这个可以精确到纳秒,存储时间精度更高</p>
<h3 id="大对象类型"><a href="#大对象类型" class="headerlink" title="大对象类型"></a>大对象类型</h3><p>CLOB:最大为(4GB-1)*数据库块大小，存储字符数据，主要用于存储大型英文字符</p>
<p>BLOB:最大为(4GB- 1)*数据库块大小，存储非结构化二进制数据,主要存储图像、声音、视频等文件。</p>
<h3 id="查看已创建的表"><a href="#查看已创建的表" class="headerlink" title="查看已创建的表"></a>查看已创建的表</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> user_tables ;</span><br></pre></td></tr></table></figure>

<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、重命名</span><br><span class="line">rename student <span class="keyword">to</span> stu;</span><br><span class="line">将student表 名改为stu</span><br><span class="line"><span class="number">2</span>、 重命名列</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>表rename <span class="keyword">column</span>列名<span class="keyword">to</span>新列名</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu rename <span class="keyword">column</span> class <span class="keyword">to</span> banji;</span><br><span class="line">将stu表的class 列改为banji</span><br><span class="line"><span class="number">3</span>、添加一列</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表<span class="keyword">add</span> 列名数据类型;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> sex <span class="type">char</span>(<span class="number">1</span>);</span><br><span class="line">在表stu中添加一列，性别sex，类型为<span class="type">char</span>(<span class="number">1</span>); <span class="number">1</span>表示字节byte长度<span class="number">1</span></span><br><span class="line"><span class="number">4</span>、修改列</span><br><span class="line">一般修改列时，修改其长度大小</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify sex <span class="type">char</span>(<span class="number">2</span>);</span><br><span class="line">修改表stu中的sex列，将其长度改为<span class="number">2</span></span><br><span class="line"><span class="number">5</span>、删除列</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">column</span> 列名;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">drop</span> <span class="keyword">column</span> sex;</span><br><span class="line"><span class="number">6</span>、删除表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span>表名;</span><br></pre></td></tr></table></figure>

<h2 id="单双引号"><a href="#单双引号" class="headerlink" title="单双引号"></a>单双引号</h2><p>双引号表明是个关键字</p>
<p>Oracle 默认<strong>大写</strong> 如果非要规定 <strong>大小写</strong> 用双引号</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">创建一个带双引号的表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> &quot;student2&quot;(</span><br><span class="line">&quot;stuno&quot; varchar2 (<span class="number">20</span>),</span><br><span class="line">&quot;school&quot; varchar2 (<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line">查看表的时候也得加上双引号</span><br><span class="line"><span class="keyword">desc</span> &quot;student2&quot;</span><br><span class="line">对表操作的时候也得加上</span><br></pre></td></tr></table></figure>

<p>单引号表示的值</p>
<h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><p><img src="D:\blog\source_posts\Oracle系列学习-三\image-20200317102333059.png" alt="image-20200317102333059"></p>
<p>实例中包含多个表空间</p>
<p>用户关联表空间</p>
<p>表放在表空间中</p>
<p>用户拥有表 表可能来自不同的表空间</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test(id <span class="type">int</span>) tablespace 别的表;</span><br></pre></td></tr></table></figure>



<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2>]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>初学者</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>LinearTable</title>
    <url>/2020/03/04/LinearTable/</url>
    <content><![CDATA[<p>线性表–顺序表</p>
<h2 id="顺序表"><a href="#顺序表" class="headerlink" title="顺序表"></a>顺序表</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>用顺序存储的方式实现线性表顺序存储。把逻辑上相邻的元素存储在位置上也相邻的存储单元中，元素之间的关系由存储单元的邻接关系来体现。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">a1-&gt;a2-&gt;a3-&gt;a4-&gt;a5</span><br><span class="line">在内存中也是</span><br><span class="line">a1-a2-a3-a4-a5</span><br></pre></td></tr></table></figure>

<p>每个数据元素都是一样大的，即如果a1存放的位置为LOC(L),a2的位置&#x3D;LOC(L)+数据元素的大小，a3的位置&#x3D;LOC(L)+2*数据元素的大小…。</p>
<h4 id="sizeof"><a href="#sizeof" class="headerlink" title="sizeof()"></a>sizeof()</h4><p>C语言中查看一个数据元素大小，使用sizeof(ElemType)。</p>
<p>例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sizeof</span>(<span class="type">int</span>)==<span class="number">4B</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">int</span> people</span><br><span class="line">&#125; Customer;</span><br><span class="line"><span class="keyword">sizeof</span>(Customer)==<span class="number">8B</span></span><br></pre></td></tr></table></figure>

<h3 id="数据表的实现"><a href="#数据表的实现" class="headerlink" title="数据表的实现"></a>数据表的实现</h3><h4 id="静态分配"><a href="#静态分配" class="headerlink" title="静态分配"></a>静态分配</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 <span class="comment">//定义最大长度</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	Elemtype data [MaxSize]; <span class="comment">//用静态的&quot;数组&quot;存放数据元素</span></span><br><span class="line">    <span class="type">int</span> length; <span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SqList;<span class="comment">//顺序表的类型定义</span></span><br></pre></td></tr></table></figure>

<p>这里就相当于一上来就定好了这么一个数据元素，内存为其分配连续的存储空间，大小为10.</p>
<p>初始化</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(SqList &amp;L)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;MaxSize;i++)</span><br><span class="line">        L.data[i]=<span class="number">0</span>;<span class="comment">//各个元素初始化(根据需要不一定置零)，如果不进行这一行代码，可能会使元素中存入之前内存遗留的&quot;脏数据&quot;.</span></span><br><span class="line">    L.length=<span class="number">0</span>;<span class="comment">//长度标识置零</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SqList L;<span class="comment">//声名这个表</span></span><br><span class="line">    InitList(L);<span class="comment">//初始化这个表</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缺点：<strong>存储空间不可变！</strong></p>
<h4 id="动态分配"><a href="#动态分配" class="headerlink" title="动态分配"></a>动态分配</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 <span class="comment">//定义最大长度</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	Elemtype *data; <span class="comment">//指示动态分配数组的指针</span></span><br><span class="line">    <span class="type">int</span> MaxSize;<span class="comment">//顺序表的最大容量</span></span><br><span class="line">    <span class="type">int</span> length; <span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SeqList;<span class="comment">//顺序表的类型定义</span></span><br></pre></td></tr></table></figure>

<h6 id="malloc-free"><a href="#malloc-free" class="headerlink" title="malloc \free"></a>malloc \free</h6><p>c语言中用于申请内存空间和释放内存空间的函数</p>
<p>c++中是使用new 和delete</p>
<p>malloc 会返回一个地址</p>
<p><code>L.data=(ElemType *)malloc(sizeof(ElemType) * InitSize);</code></p>
<p>比如 如果Elemtype为int，则上行代码为<code>L.data=(int *)malloc(sizeof(int)* InitSize);</code>，然后把返回的这个指针赋值给data。</p>
<p>这里sizeof就是查看这数据元素的长度 然后成上大小，就完成这个内存空间的分配 然后返回地址，然后取出地址的指针赋给data。</p>
<p>具体例子</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 <span class="comment">//定义最大长度</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	<span class="type">int</span> *data; <span class="comment">//指示动态分配数组的指针</span></span><br><span class="line">    <span class="type">int</span> MaxSize;<span class="comment">//顺序表的最大容量</span></span><br><span class="line">    <span class="type">int</span> length; <span class="comment">//顺序表的当前长度</span></span><br><span class="line">&#125;SeqList;<span class="comment">//顺序表的类型定义</span></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(SeqList &amp;L)</span>&#123;</span><br><span class="line"><span class="comment">//用malloc函数申请一篇连续的存储空间</span></span><br><span class="line">    L.data=(<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>)* InitSize);</span><br><span class="line">    L.length=<span class="number">0</span>;</span><br><span class="line">    L.MaxSize=InitSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//增加动态数组的长度</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IncreaseSize</span><span class="params">(SeqList &amp;L,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">    <span class="type">int</span> *p=L.data;</span><br><span class="line">    L.data=(<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>)* (L.MaxSize+len));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">        L.data[i]=p[i];<span class="comment">//将数据复制到新区域</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.MaxSize=L.MaxSzie+len;<span class="comment">//顺序表最大长度增加len</span></span><br><span class="line">    <span class="built_in">free</span>(p);<span class="comment">//释放原来的内存空间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SeqList L;</span><br><span class="line">    InitList(L);<span class="comment">//初始化</span></span><br><span class="line">    IncreaseSize(L,<span class="number">5</span>);<span class="comment">//增加动态数据的长度</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在增加长度的过程中，会先申请一个新的空间(增加后的大小),然后把之前存放的数据元素放到新空间里，然后释放旧空间。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>随机访问，可以在O(1)时间内找到第i个元素。<code>data[i-1]</code></p>
<p>存储密度搞，每个节点只存储数据元素</p>
<p>拓展容量不方便（即使采用动态存储分配的方式实现，拓展长度的时间复杂度也比较高）</p>
<p>插入、删除操作不方便，需要移动大量元素</p>
<h3 id="顺序表的基本操作"><a href="#顺序表的基本操作" class="headerlink" title="顺序表的基本操作"></a>顺序表的基本操作</h3><h4 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h4><p>ListInsert(&amp;L ,i,e):插入操作，在表L中的第i个位置上插入指定元素e。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> data[MaxSize];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">&#125;SqList;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInsert</span><span class="params">(SqList &amp;L ,<span class="type">int</span> i,<span class="type">int</span> e)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; L.length + <span class="number">1</span>)<span class="comment">//判断i的范围是否有效</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (L.length &gt;= MaxSize)<span class="comment">//当前存储空间已满，不能插入</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=L.length;j&gt;=i;j--)</span><br><span class="line">        L.data[j]=L.data[j<span class="number">-1</span>];<span class="comment">//将第i个元素及之后的元素后移</span></span><br><span class="line">    L.data[i<span class="number">-1</span>]=e;<span class="comment">//在位置i处放入e</span></span><br><span class="line">    L.length++;<span class="comment">//长度+1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SqList L;</span><br><span class="line">    InitList(L);</span><br><span class="line">    ListInsert(L,<span class="number">3</span>,<span class="number">3</span>);<span class="comment">//往第三个位置插入数据元素3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p>最好情况：新元素插入到表尾，不需要移动元素</p>
<p>i&#x3D;n+1，循环0次，<strong>最好时间复杂度&#x3D;O(1)</strong></p>
<p>最坏情况：新元素插入到表头，需要把原有的n个元素向后移动</p>
<p>i&#x3D;1,循环n次,<strong>最坏时间复杂度&#x3D;O(n)</strong></p>
<p>平均情况：新元素随即插入任何位置，平均概率为p&#x3D;1&#x2F;(n+1)</p>
<p>则平均循环次数为n&#x2F;2,化简后，<strong>平均时间复杂度&#x3D;O(n)</strong></p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>ListDelete(&amp;L ,i,&amp;e):删除操作。删除表L中第i个位置的元素，并用e返回删除元素的值。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> data[MaxSize];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">&#125;SqList;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListDelete</span><span class="params">(SqList &amp;L ,<span class="type">int</span> i,<span class="type">int</span> &amp;e)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; L.length + <span class="number">1</span>)<span class="comment">//判断i的范围是否有效</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	e=L.data[i<span class="number">-1</span>];<span class="comment">//将被删除的元素复制给e</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;L.length;j++)</span><br><span class="line">        L.data[j<span class="number">-1</span>]=L.data[j];<span class="comment">//将第i个元素及之后的元素后前移</span></span><br><span class="line">    L.length--;<span class="comment">//长度-1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SqList L;</span><br><span class="line">    InitList(L);</span><br><span class="line">    <span class="type">int</span> e=<span class="number">-1</span>;<span class="comment">//用变量e把删除的元素带回来</span></span><br><span class="line">    <span class="keyword">if</span>(ListDelete(L,<span class="number">3</span>,e))</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;删除成功，删除元素为%d\n&quot;</span>,e);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;删除失败，位序i不合法\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p>与插入操作的类似且相反</p>
<p>最好情况 删除表尾元素 O(1)</p>
<p>最坏情况 删除表头元素O(n)</p>
<p>平均情况 随机位置删除 O(n&#x2F;2)即O(n)</p>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>位序i与数组小标为i的区别（前者从1开始，后者从0开始）</p>
<h4 id="按位查找"><a href="#按位查找" class="headerlink" title="按位查找"></a>按位查找</h4><p>GetElem(L,i):按位查找操作，获取L中第i个位置的元素的值。</p>
<h5 id="静态分配方式"><a href="#静态分配方式" class="headerlink" title="静态分配方式"></a>静态分配方式</h5><p>直接选择第i个元素就行了</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	Elemtype data [MaxSize]; </span><br><span class="line">    <span class="type">int</span> length; </span><br><span class="line">&#125;SqList;</span><br><span class="line">ElemType <span class="title function_">GetElem</span><span class="params">(SqList L,<span class="type">int</span> i)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> L.data[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="动态分配方式"><a href="#动态分配方式" class="headerlink" title="动态分配方式"></a>动态分配方式</h5><p>也是直接选择第i个位置就行</p>
<p>data是个指针，data[i]返回的即内存中data开始到往后sizeof(ElemType)个字节 的数据。</p>
<p>即如果sizeof(ElemType)&#x3D;3B，data指向123，data[i]&#x3D; 123+i*3的内容。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	Elemtype *data; </span><br><span class="line">    <span class="type">int</span> MaxSize;</span><br><span class="line">    <span class="type">int</span> length; </span><br><span class="line">&#125;SeqList;</span><br><span class="line">ElemType <span class="title function_">GetElem</span><span class="params">(SqList L,<span class="type">int</span> i)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> L.data[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="时间复杂度-2"><a href="#时间复杂度-2" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p>O(1)</p>
<h4 id="按值查找"><a href="#按值查找" class="headerlink" title="按值查找"></a>按值查找</h4><p>LocateElem(L,e):按值查找操作，在表中查找给定关键字值的元素。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	Elemtype *data; </span><br><span class="line">    <span class="type">int</span> MaxSize;</span><br><span class="line">    <span class="type">int</span> length; </span><br><span class="line">&#125;SeqList;</span><br><span class="line"><span class="type">int</span> <span class="title function_">LocateElem</span><span class="params">(SqList L,<span class="type">int</span> e)</span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;L.length;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(L.data[i]==e)</span><br><span class="line">			<span class="keyword">return</span> i+<span class="number">1</span>;<span class="comment">//返回的是位序</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="时间复杂度-3"><a href="#时间复杂度-3" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p>最好情况 要查找的元素在第一个位置 最好时间复杂度&#x3D;O(1)</p>
<p>最坏情况 要查找的元素在最后一个位置 最坏时间复杂度&#x3D;O(n)</p>
<p>平均情况 要查找的元素在随机位置 平均时间复杂度&#x3D;O((n+1)&#x2F;2)即O(n)</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>还总结？要啥自行车啊🥡</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>线性表</tag>
        <tag>C</tag>
        <tag>顺序表</tag>
        <tag>动态分配</tag>
        <tag>静态分配</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle系列学习(二)</title>
    <url>/2020/03/03/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%BA%8C/</url>
    <content><![CDATA[<a href="/2020/02/25/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%B8%80/" title="上一篇">上一篇</a>的补充

<p>一些小科普</p>
<h3 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h3><p>主要常用的两个服务</p>
<p>OracleServiceORCL：主服务<br>Oracle***home1TNSListener TNS监听服务</p>
<p>TNS（透明网络底层）</p>
<p>如果没有监听服务，通过NetCA添加</p>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><h5 id="本地连接"><a href="#本地连接" class="headerlink" title="本地连接"></a>本地连接</h5><p><code>sys as sysdba</code>:以管理员身份链接</p>
<p><code>scott/tiger</code>:以scott身份链接</p>
<h5 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h5><p><code>sqlplus sys/123456@//localhost:1521/orcl as sysdba</code></p>
<p>或者</p>
<p><code>sqlplus sys/orcl123@orcl as sysdba</code></p>
<h4 id="tns标识符"><a href="#tns标识符" class="headerlink" title="tns标识符"></a>tns标识符</h4><p>sqlplus sys&#x2F;orcl123@orcl as sysdba</p>
<p>在<code>D:\app\EShyee\product\11.2.0\dbhome_1\NETWORK\ADMIN</code>有一个tns标识文件</p>
<p>其中有</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ORCL =</span><br><span class="line">  (DESCRIPTION =</span><br><span class="line">    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))</span><br><span class="line">    (CONNECT_DATA =</span><br><span class="line">      (SERVER = DEDICATED)</span><br><span class="line">      (SERVICE_NAME = orcl)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<h3 id="创建多个数据库"><a href="#创建多个数据库" class="headerlink" title="创建多个数据库"></a>创建多个数据库</h3><p>通过DBCA创建其他的数据库</p>
<p>当电脑里有多个数据库的时候，用SQL plus去链接 default都是链接ORCL，可以在注册表里改</p>
<p>链接其他的数据库就用<code>sqlplus sys/orcl123@//localhost: 1521/其他数据库名 as sysdba;</code></p>
<h3 id="数据库和数据库实例"><a href="#数据库和数据库实例" class="headerlink" title="数据库和数据库实例"></a>数据库和数据库实例</h3><p>完整的数据库通常由两部分组成：Oracle数据库和数据库实例。</p>
<p>1)数据库是一系列<strong>物理文件</strong>的集合(数据文件,控制文件,联机日志，参数文件等) ;<br>2) Oracle数据库实例则是一组<strong>Oracle后台进程</strong>&#x2F;线程以及在服务器分配的共享内存区。<br>在启动Oracle数据库服务器时，实际上是在服务器的内存中创建一个Oracle实例(即在服务器内存中<br>分配共享内存并创建相关的后台内存) , 然后由这个Oracle数据库实例来访问和控制磁盘中的数据文<br>件。</p>
<h3 id="数据库监听"><a href="#数据库监听" class="headerlink" title="数据库监听"></a>数据库监听</h3><p>一个重要的数据库服务进程，用来支持外部应用和远程连接数据库。</p>
<h3 id="关系图示"><a href="#关系图示" class="headerlink" title="关系图示"></a>关系图示</h3><img src="/2020/03/03/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%BA%8C/image-20200312085626885.png" class="" width="20200224154635459">]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>初学者</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle系列学习(五)</title>
    <url>/2020/03/30/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E4%BA%94/</url>
    <content><![CDATA[<h1 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h1><h2 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h2><p>主要涉及到sq|运算符、单行函数、多行函数、排序、去重</p>
<p>首先创建一个学生表stu, 包含如下字段:</p>
<p>学号id、姓名name、年龄age、性别sex、java成绩score、 体重(kg) weight、 星座xz、 生日birth、 寝室room</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu(</span><br><span class="line">id varchar2(<span class="number">30</span>) <span class="keyword">primary</span> key,</span><br><span class="line">name varchar2(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">sex varchar2(<span class="number">10</span>)，</span><br><span class="line">score number(<span class="number">4</span>,<span class="number">1</span>)，</span><br><span class="line">weight number(<span class="number">4</span>,<span class="number">1</span>)，</span><br><span class="line">xz varchar2(<span class="number">10</span>)，</span><br><span class="line">birth <span class="type">date</span> ,</span><br><span class="line">room varchar2(<span class="number">10</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>向表中插入一条学生信息:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu <span class="keyword">values</span>( <span class="string">&#x27;17820135&#x27;</span>, <span class="string">&#x27;张三&#x27;</span> ,<span class="number">19</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">81</span>,<span class="number">50</span>，<span class="string">&#x27;狮子&#x27;</span> ,to_date(<span class="string">&#x27;1999-08-12,&#x27;</span>yyyy<span class="operator">-</span>mm<span class="operator">-</span>dd<span class="string">&#x27;),&#x27;</span><span class="number">201</span><span class="string">&#x27;);</span></span><br></pre></td></tr></table></figure>

<h2 id="sq-运算符"><a href="#sq-运算符" class="headerlink" title="sq|运算符"></a>sq|运算符</h2><h3 id="Like匹配-通配符"><a href="#Like匹配-通配符" class="headerlink" title="Like匹配 通配符**%**"></a><strong>Like</strong>匹配 通配符**%**</h3><p>例如:</p>
<p>查询所有姓张的学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> STU <span class="keyword">WHERE</span> NAME <span class="keyword">LIKE</span> <span class="string">&#x27;张%&#x27;</span></span><br></pre></td></tr></table></figure>

<p>查找姓名中带有“文”字的学生信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> STU <span class="keyword">WHERE</span> NAME <span class="keyword">LIKE</span> <span class="string">&#x27;%文%&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="between…-and…"><a href="#between…-and…" class="headerlink" title="between… and…"></a>between… and…</h3><p>在两个值之间</p>
<p>例如:</p>
<p>查找班级里体重在60~70kg的学生姓名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> STU <span class="keyword">WHERE</span> weight <span class="keyword">BETWEEN</span> <span class="number">60</span> <span class="keyword">AND</span> <span class="number">70</span></span><br><span class="line"><span class="comment">--等价于</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> weight<span class="operator">&gt;</span>F60 <span class="keyword">and</span> weight<span class="operator">&lt;=</span><span class="number">70</span>;</span><br></pre></td></tr></table></figure>

<h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--查询体重是60或体重是70，或体重是80的同学</span></span><br><span class="line"><span class="comment">--查询体重是60，和体重是70，和体重是80的同学</span></span><br><span class="line"><span class="comment">--都是</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> weight <span class="keyword">in</span> (<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>);</span><br><span class="line"><span class="comment">--或者</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> weight<span class="operator">=</span><span class="number">60</span> <span class="keyword">or</span> weight<span class="operator">=</span><span class="number">70</span> <span class="keyword">or</span> weight<span class="operator">=</span><span class="number">80</span>;</span><br></pre></td></tr></table></figure>

<h3 id="is-null"><a href="#is-null" class="headerlink" title="is null"></a>is null</h3><p>值为空，即没有填写值</p>
<p>例如:<br>查找没有填写星座的学生信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> XZ <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="not"><a href="#not" class="headerlink" title="not"></a>not</h3><p>与其他sq|运算符一起使用， 表示取反:</p>
<p>not like not between not in is not null</p>
<p>例如:</p>
<p>查找所有不姓张的学生信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> name <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h2><p>使用规范: 函数名(参数)根据参数, 获取函数的结果</p>
<h3 id="to-date"><a href="#to-date" class="headerlink" title="to_date"></a>to_date</h3><p>将字符串转换为日期</p>
<p>例如: to_ date( ‘2018-09-01’ ,’ yyyy-mm-dd’ )</p>
<p>表示将2018-09-01这个字符串，转换为日期数据类型</p>
<p>查询所有1999年出生的学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> birth <span class="keyword">between</span> to_date( <span class="string">&#x27;1999-01-01&#x27;</span> ,<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) <span class="keyword">and</span> to_date(<span class="string">&#x27;1999-12-31&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="to-char"><a href="#to-char" class="headerlink" title="to_char"></a>to_char</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> to_char(birth, <span class="string">&#x27;YYYY&#x27;</span> )<span class="operator">=</span><span class="string">&#x27;1999&#x27;</span> ;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> to_char(birth, <span class="string">&#x27;YYYY-MM-DD&#x27;</span>) <span class="keyword">like</span> <span class="string">&#x27;1999%&#x27;</span> ;<span class="operator">|</span></span><br></pre></td></tr></table></figure>

<h3 id="length"><a href="#length" class="headerlink" title="length"></a>length</h3><p>获取指定字符串值的长度</p>
<p>例如:</p>
<p>查找所有姓名是两个字的学生信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> STU <span class="keyword">WHERE</span> LENGTH(NAME)<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>查询学生的姓名，以及姓名的长度</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NAME &quot;学生姓名&quot;, LENGTH(NAME) &quot;姓名长度&quot; <span class="keyword">FROM</span> STU ;</span><br></pre></td></tr></table></figure>

<h3 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h3><p>拼接两个值，concat(值1,值2)—&gt; 值1值2</p>
<p>查询学生的学号信息(学号信息是指 学号+姓名)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(id,name) <span class="keyword">as</span> 学生信息 <span class="keyword">from</span> stu;</span><br></pre></td></tr></table></figure>

<h6 id="修改stu表-规范星座信息，将所有的星座保存为-座"><a href="#修改stu表-规范星座信息，将所有的星座保存为-座" class="headerlink" title="修改stu表,规范星座信息，将所有的星座保存为**座."></a>修改stu表,规范星座信息，将所有的星座保存为**座.</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> stu <span class="keyword">set</span> xz<span class="operator">=</span>concat(xz,<span class="string">&#x27;座&#x27;</span>) <span class="keyword">where</span> length(xz)<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>查询截止到当前时间每个学生都活了多少天、多少个月</p>
<p>月</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> months_between(sysdate,(BIRTH))<span class="keyword">As</span> 相差月份 <span class="keyword">from</span> STU;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> NAME 姓名,<span class="built_in">FLOOR</span>(months_between(sysdate,(BIRTH)))<span class="keyword">As</span> 相差月份 <span class="keyword">from</span> STU;</span><br></pre></td></tr></table></figure>

<p>天</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> TO_NUMBER(sysdate<span class="operator">-</span> (BIRTH))<span class="keyword">As</span> 相差天数 <span class="keyword">from</span> STU;</span><br></pre></td></tr></table></figure>

<p>查询当前日期向后50天是多少天</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> sysdate<span class="operator">+</span><span class="number">50</span> next_day <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<p>查询每个学生名字的最后一个字是什么字</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> substr(NAME,LENGTH(NAME),<span class="number">1</span>) <span class="keyword">from</span> STU</span><br></pre></td></tr></table></figure>

<h2 id="多行函数"><a href="#多行函数" class="headerlink" title="多行函数"></a>多行函数</h2><p>多行&#x2F;聚合&#x2F;分组函数,作用在多行记录上，</p>
<h3 id="avg-字段-字段的平均值"><a href="#avg-字段-字段的平均值" class="headerlink" title="avg(字段)字段的平均值"></a>avg(字段)字段的平均值</h3><p>查询班级java成绩的平均分</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(SCORE) <span class="keyword">as</span> java平均分 <span class="keyword">FROM</span> &quot;STU&quot;</span><br></pre></td></tr></table></figure>

<p>查询平均体重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">avg</span>(WEIGHT) <span class="keyword">as</span> 平均体重 <span class="keyword">FROM</span> stu</span><br></pre></td></tr></table></figure>

<p>查询班级男同学的平均体重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">avg</span>(WEIGHT) <span class="keyword">as</span> 平均体重 <span class="keyword">FROM</span> stu <span class="keyword">WHERE</span> SEX<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="sum-字段-字段求和"><a href="#sum-字段-字段求和" class="headerlink" title="sum(字段)字段求和"></a>sum(字段)字段求和</h3><p>查询班级所有学生的体重的和</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">sum</span>(SCORE) <span class="keyword">FROM</span> stu</span><br></pre></td></tr></table></figure>

<h3 id="max-字段-最大值"><a href="#max-字段-最大值" class="headerlink" title="max(字段)最大值"></a>max(字段)最大值</h3><p>查询最高分的学生的成绩</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">max</span>(SCORE) <span class="keyword">as</span> 最高分数 <span class="keyword">FROM</span> stu</span><br></pre></td></tr></table></figure>

<p>查询最重的学生的体重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">max</span>(WEIGHT) <span class="keyword">as</span> 最大体重 <span class="keyword">FROM</span> stu</span><br></pre></td></tr></table></figure>

<p>注意:多行函数，不能出现在where子包含</p>
<p>例如:查询最重的学生的姓名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">as</span> 最大体重学生姓名 <span class="keyword">FROM</span> stu <span class="keyword">where</span> WEIGHT<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="built_in">max</span>(WEIGHT) <span class="keyword">FROM</span> stu)</span><br></pre></td></tr></table></figure>

<h3 id="min-字段-最小值"><a href="#min-字段-最小值" class="headerlink" title="min(字段)最小值"></a>min(字段)最小值</h3><p>查询最轻的学生的体重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">min</span>(WEIGHT) <span class="keyword">as</span> 最大体重 <span class="keyword">FROM</span> stu</span><br></pre></td></tr></table></figure>

<p>查询男同学中，最轻的学生的体重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">min</span>(WEIGHT) <span class="keyword">as</span> 男同学最小体重 <span class="keyword">FROM</span> stu <span class="keyword">where</span> sex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="count-查询数量"><a href="#count-查询数量" class="headerlink" title="count(*)查询数量"></a>count(*)查询数量</h3><p>查询表中有多少条记录</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> STU</span><br></pre></td></tr></table></figure>

<p>查询班里有多少个男生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> STU <span class="keyword">where</span> sex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br></pre></td></tr></table></figure>

<p>查询班级里60~ 70分之间的学生有多少个</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> STU <span class="keyword">WHERE</span> SCORE <span class="keyword">BETWEEN</span> <span class="number">60</span> <span class="keyword">AND</span> <span class="number">70</span></span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h4 id="order-by字段-desc"><a href="#order-by字段-desc" class="headerlink" title="order by字段 desc"></a>order by字段 desc</h4><p>默认从小到大升序，添加desc从大到小降序</p>
<p>查询所有学生信息，并按照体重从小到大排列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">FROM</span> stu <span class="keyword">ORDER</span> <span class="keyword">BY</span> WEIGHT</span><br></pre></td></tr></table></figure>

<p>查询所有学生信息，按照成绩从大到小排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">FROM</span> stu <span class="keyword">ORDER</span> <span class="keyword">BY</span> SCORE <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>

<h3 id="去重distinct"><a href="#去重distinct" class="headerlink" title="去重distinct"></a>去重distinct</h3><p>一般distinct都用在select查询字段中</p>
<p>查询本班级有哪些寝室</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">DISTINCT</span> room <span class="keyword">FROM</span> stu </span><br></pre></td></tr></table></figure>

<hr>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--@1确定按照哪个字段进行分组</span></span><br><span class="line"><span class="comment">--@2确定用哪个分组函数</span></span><br><span class="line"><span class="comment">--@3按照语法组建sq1语句</span></span><br></pre></td></tr></table></figure>

<p>查询班级里分别有多少个男生和女生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sex,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> stu <span class="keyword">GROUP</span> <span class="keyword">BY</span> SEX</span><br></pre></td></tr></table></figure>

<p>查询男生和女生的平均分都是多少</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sex,<span class="built_in">AVG</span>(SCORE) <span class="keyword">FROM</span> stu <span class="keyword">GROUP</span> <span class="keyword">BY</span> SEX</span><br></pre></td></tr></table></figure>

<p>查询每个寝室有多少成绩大于80分的同学</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--注意，从语法上where子句要写在group by前，从逻辑上，where 也是在分组前进行条件过滤</span></span><br><span class="line"><span class="keyword">SELECT</span> room,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> stu <span class="keyword">WHERE</span> SCORE<span class="operator">&gt;</span><span class="number">80</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> ROOM </span><br></pre></td></tr></table></figure>

<p>通过查询确认一下是否有同年同月同日生的学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> birth,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">WHERE</span> BIRTH <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">NULL</span> <span class="keyword">group</span> <span class="keyword">by</span> birth;</span><br></pre></td></tr></table></figure>

<p>查询每个男生寝室有多少成绩大于80分的同学和名字</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> wm_concat(name) , room, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">where</span> sex<span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">and</span> score<span class="operator">&gt;</span><span class="number">80</span> <span class="keyword">group</span> <span class="keyword">by</span> room;</span><br></pre></td></tr></table></figure>

<h2 id="分组后的筛选"><a href="#分组后的筛选" class="headerlink" title="分组后的筛选"></a>分组后的筛选</h2><h3 id="having"><a href="#having" class="headerlink" title="having"></a>having</h3><p>having子句里添加条件,对group by的结果进行条件筛选</p>
<p>having写在group by之后，并且逻辑上也是先得到分组结果，再执行筛选</p>
<p>查询寝室中人数大于5人的那些寝室和人数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> stu <span class="keyword">group</span> <span class="keyword">by</span> room <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>查询班里有没有同年同月同日生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>查询平均分大于75分的寝室的寝室号和平均分</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>初学者</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle系列学习(四)</title>
    <url>/2020/03/26/Oracle%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0-%E5%9B%9B/</url>
    <content><![CDATA[<h1 id="增删改查和完整性约束"><a href="#增删改查和完整性约束" class="headerlink" title="增删改查和完整性约束"></a>增删改查和完整性约束</h1><p>建表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">stuno varchar2(<span class="number">20</span>),</span><br><span class="line">name varchar2(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">height number(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p>insert into表 values值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span> (<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">20</span>,<span class="number">180.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student( stuno, name ) <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student ( stuno, name,age )<span class="keyword">values</span>( <span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;王五1&#x27;</span>,<span class="keyword">null</span>) ;</span><br></pre></td></tr></table></figure>

<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>select字段from表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> name,age <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> 姓名 <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> student <span class="keyword">where</span> stuno<span class="operator">=</span> <span class="string">&#x27;1004 &#x27;</span> ;</span><br><span class="line"><span class="comment">--隐私转换，字符串和数之间，可以自动转换</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> student <span class="keyword">where</span> stuno<span class="operator">=</span><span class="number">1004</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><p>update表set字段&#x3D;值 [字段&#x3D;值]</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> age<span class="operator">=</span><span class="number">30</span>, height<span class="operator">=</span><span class="number">170</span>;<span class="comment">--所有字段的更新</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> age<span class="operator">=</span>age<span class="operator">+</span><span class="number">5</span> <span class="keyword">where</span> name<span class="operator">=</span> <span class="string">&#x27;ZHANGSAN&#x27;</span>;</span><br><span class="line"><span class="comment">--当字段值为null的是后执行类似age=age+5的语句不会对字段值产生影响</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> age<span class="operator">=</span>age<span class="operator">+</span><span class="number">5</span>;<span class="comment">--即age得现有值 才能顺利执行age+5</span></span><br></pre></td></tr></table></figure>

<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>delete from 表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> age<span class="operator">=</span><span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h2 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h2><p>在查询，修改，删除时可以使用where子句作为条件筛选，表示操作那些符合条件的记录</p>
<h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h2><p>对表的修改必须提交后才生效</p>
<p>提交指令: commit</p>
<p>回滚指令: rollback</p>
<h2 id="表的完整性约束"><a href="#表的完整性约束" class="headerlink" title="表的完整性约束"></a>表的完整性约束</h2><p>当我们向表中添加数据时，如student, 可以会由于数据错误或误操作，表中会产生一些错误数据。而表的完整性约束就是为了解决这个问题。</p>
<p>如:通过唯一性约束确保学号不能重复;通过非空约束确保姓名不能为空;</p>
<p>当我们给表中的列设置约束条件后，再向表中插入数据或修改表的数据时,会检查插入或修改的数据是否满足我们的”约束条件”,如果不满足，就不会执行，这样就防止了垃圾数据的产生。</p>
<h3 id="唯一"><a href="#唯一" class="headerlink" title="唯一"></a>唯一</h3><p>unique<br>添加唯一-约束的列， 该列值不能重复。</p>
<h4 id="添加时机"><a href="#添加时机" class="headerlink" title="添加时机"></a>添加时机</h4><p>1创建表时</p>
<p>直接在字段后添加约束名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">stuno varchar2(<span class="number">20</span>) <span class="keyword">unique</span>,</span><br><span class="line">name varchar2(<span class="number">20</span>) ,</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">height number(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2建表后再添加</p>
<p>alter table表名add constraint约束名约束关键字(字段)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> uq_ stu_ stuno <span class="keyword">unique</span>( stuno ) ;</span><br></pre></td></tr></table></figure>

<p>唯一约束的列可以有多个空值(NULL)</p>
<h3 id="非空not-null"><a href="#非空not-null" class="headerlink" title="非空not null"></a>非空not null</h3><p>该列的值不能为空</p>
<p>例如:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--给student表的name字段添加非空约束</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> nn_stu_name <span class="keyword">not</span> <span class="keyword">null</span>(name);</span><br><span class="line"><span class="comment">--修改的时候</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &quot;MYB&quot;. &quot;STUDENT&quot; MODIFY (&quot;NAME&quot; <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br></pre></td></tr></table></figure>

<h3 id="检查check"><a href="#检查check" class="headerlink" title="检查check"></a>检查check</h3><p>自定义某- -列的值必须满足某个条件<br>例如,</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 学生年龄必须在10~40之间</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> ck_stu_age <span class="keyword">check</span>(age <span class="keyword">between</span> <span class="number">10</span> <span class="keyword">and</span> <span class="number">40</span>);</span><br></pre></td></tr></table></figure>

<p>性别只有男和女两个值<br>(注意当前student表并无sex字段)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> ck_stu_sex <span class="keyword">check</span>(sex <span class="keyword">in</span>(<span class="string">&#x27;男&#x27;</span>，<span class="string">&#x27;女&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="主键约束与主键列的选择-primary-key"><a href="#主键约束与主键列的选择-primary-key" class="headerlink" title="主键约束与主键列的选择 primary key"></a>主键约束与主键列的选择 primary key</h3><p>主键列的数据就不能为空，并且不能重复(非空且唯一 )</p>
<p>一个表最多只能有一个主键(建议创建主键)</p>
<p>使用主键来唯一标识某条记录</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>“MYB&quot;.&quot;STUDENT&quot; ADD PRIMARY KEY (&quot;STUNO&quot;)</span><br></pre></td></tr></table></figure>

<h4 id="逻辑主键-和-业务主键"><a href="#逻辑主键-和-业务主键" class="headerlink" title="逻辑主键 和 业务主键"></a>逻辑主键 和 业务主键</h4><h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><p>除此之外还有外键约束，这个等之后讲到多表关联之后再讲解</p>
<h2 id="约束的真实项目使用说明"><a href="#约束的真实项目使用说明" class="headerlink" title="约束的真实项目使用说明"></a>约束的真实项目使用说明</h2><blockquote>
<p>在真正的企业开发中，除了主键约束这类具有强需求的约束，像唯一约束、外键约束、检查约束等更多时候仅仅出现在数据库设计阶段,真实环境却很少应用，更多是放到程序逻辑中去进行处理。</p>
</blockquote>
]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>初学者</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>PL/SQL</title>
    <url>/2020/02/25/PLSQL/</url>
    <content><![CDATA[<p>PL&#x2F;SQL是一种高级数据库程序设计语言,它是ORACLE对标准数据库语言的扩展，是PL (Procedural Language,过程语言)与SQL (Structured Query Language,结构化查询语言)结合而成的编程语言。它支持多种数据类型，如大对象和集合类型，可使用条件和循环等控制结构，可用于创建存储过程、触发器和程序包，还可以处理业务规则、数据库事件或给SQL语句的执行添加程序逻辑。另外，PL&#x2F;SQL 还支持许多增强的功能，包括集合类型、面向对象的程序设计和异常处理等。</p>
<p>PL&#x2F;SQL的特点</p>
<p>PL&#x2F;SQL是一种可移植的高性能事务处理语言，支持SQL和面向对象编程，具有良好的性能和高效的处理能力。其特点包括以下几方面。</p>
<p>(1)支持SQL</p>
<p>通过使用SQL,用户可以轻松地操纵存储在关系数据库中的数据。PL&#x2F;SQL中可以使用数据操纵命令、事务控制命令、游标控制命令、SQL函数和SQL运算符，因此可以更加灵活、有效地操纵表中的数据。</p>
<p>(2)可移植性</p>
<p>使用PLSQL编写的应用程序可移植到安装在任何操作系统和平台上的Oralce数据库服务器上。</p>
<p>(3)高性能</p>
<p>SQL是一种非过程语言，一次只能执行一条语句，在连续的语句之间没有关联。PL&#x2F;SQL一次可处理整个语句块，减少了在应用程序和Oracle服务器之间进行通信所花费的时间，从而提高了性能。PL&#x2F;SQL 经过编译执行，过程调用快速而高效。</p>
<p>(4)与SQL紧密集成</p>
<p>PL&#x2F;SQL与SQL紧密集成，支持所有SQL数据类型,支持NULL值,支持%TYPE和%ROWTYPE属性类型，简化数据处理。</p>
<p>(5)安全性强</p>
<p>可以通过PLSQL存储过程对客户机和服务器之间的应用程序逻辑进行分隔，阻止客户机应用程序操纵敏感的Oracle数据，仅允许用户通过存储过程操纵数据，限制用户对数据的访问。</p>
<p>结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">DECLARE</span>]</span><br><span class="line"><span class="comment">-- declaration statements声明部分</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="comment">-- executable statements可执行部分</span></span><br><span class="line">[EXCEPTION]</span><br><span class="line"><span class="comment">--exception statements异常处理部分</span></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>用一个完整的PL&#x2F;SQL块实现查询雇员号为7934的雇员信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Declare</span></span><br><span class="line">p_sal number(<span class="number">7</span>,<span class="number">0</span>);</span><br><span class="line">P_comm number(<span class="number">7</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line"><span class="keyword">select</span> sal,comm <span class="keyword">into</span> P_sal,p_comm <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">7934</span>;</span><br><span class="line">Exception</span><br><span class="line"><span class="keyword">When</span> no_data_found <span class="keyword">Then</span></span><br><span class="line">Dbms_output.put_line(<span class="string">&#x27;员工号不存在&#x27;</span>);</span><br><span class="line"><span class="keyword">End</span>;</span><br></pre></td></tr></table></figure>

<p>声明常量或变量</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>变量常量名<span class="operator">&gt;</span>[CONSTANT]<span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[<span class="keyword">NOT</span> <span class="keyword">NULL</span>][:<span class="operator">=</span>IDEFAULT<span class="operator">&lt;</span>初始值<span class="operator">&gt;</span>];</span><br><span class="line"><span class="comment">--例如：</span></span><br><span class="line">total constant number: <span class="operator">=</span><span class="number">100</span>;</span><br><span class="line">v_name varchar2 (<span class="number">10</span>) ;</span><br></pre></td></tr></table></figure>

<p>①变量名和常量名必须以字母A<del>Z开头，不区分大小写，其后面可跟-一个或多个字母、数字(0</del>9)、特殊字符($、#或_ )，长度不能超过30个字符，变量名和常量名中不能有空格。</p>
<p>②CONSTANT是声明常量的关键字，只在声明常量时使用。</p>
<p>③每一个变量或常量都有一个特定的数据类型。</p>
<p>④每个变量或常量声明占- -行， 行尾使用分号结束。</p>
<p>⑤常量必须在声明时赋值。变量在声明时可以不赋值，如果变量在声明时没有赋初值,那么PL&#x2F;SQL语言自动为其赋值NULL。若在变量声明中使用了NOT NULL, 则表示该变量是非空变量，即必须在声明时给该变量赋初值，否则会出现编译错误。在PLSQL程序中，变量值是可以改变的，而常量的值不能改变。变量的作用域是从声明开始到PL&#x2F;SQL程序块结束。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--①%TYPE:引用变量和数据库列的数据类型。例如:</span></span><br><span class="line">empcode emp.empno<span class="operator">%</span>TYPE;</span><br><span class="line"><span class="comment">--该语句声明了变量empcode,其数据类型与表emp中的empno列数据类型相同。</span></span><br><span class="line"><span class="comment">--②%ROWTYPE:表示表、视图或游标的完整一行的记录类型。 例如:</span></span><br><span class="line">emp_ex emp<span class="operator">%</span>ROWTYPE;</span><br><span class="line"><span class="comment">--该语句声明了变量emp ex,它可以用于存储从emp中提取的记录。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>编写 PL&#x2F;SQL程序，使用%TYPE和%ROWTYPE声明变量，用于查<br>询雇员号及雇员信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span><span class="keyword">set</span> serverout <span class="keyword">on</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">empcode emp.empno<span class="operator">%</span>type;</span><br><span class="line">emp_ex emp<span class="operator">%</span>ROWTYPE;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> empno <span class="keyword">into</span> empcode <span class="keyword">from</span> emp <span class="keyword">where</span> ename<span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">into</span> emp_ex <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span><span class="string">&#x27;ALLEN&#x27;</span>;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;员工SMITH的雇员号为: &#x27;</span><span class="operator">||</span>empcode);</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;员工ALLEN的雇员信息为:&#x27;</span><span class="operator">||</span><span class="string">&#x27;雇员号&#x27;</span><span class="operator">||</span>emp_ex.empno<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;工作职位&#x27;</span><span class="operator">||</span>emp_ex.job<span class="operator">||</span><span class="string">&#x27;薪水&#x27;</span><span class="operator">||</span>emp_ex.sal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>记录类型</p>
<p>PL&#x2F;SQL记录是由- -组相关的记录成员组成的，记录通常用来表示对应数据库表中的一行。使用PL&#x2F;SQL 记录时应自定义记录类型和记录变量，也可以使用%ROWTYPE属性定义记录变量。引用记录成员时，必须要以记录变量作为前缀。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">TYPE <span class="operator">&lt;</span>记录类型名<span class="operator">&gt;</span> <span class="keyword">IS</span> RECORD (</span><br><span class="line"><span class="operator">&lt;</span>数据项<span class="number">1</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[NOTNULL[:<span class="operator">=</span> <span class="operator">&lt;</span>表达式<span class="number">1</span><span class="operator">&gt;</span>]],</span><br><span class="line"><span class="operator">&lt;</span>数据项<span class="number">2</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[NOTNULL[:<span class="operator">=</span><span class="operator">&lt;</span>表达式<span class="number">2</span><span class="operator">&gt;</span>]],</span><br><span class="line">......</span><br><span class="line"><span class="operator">&lt;</span>数据项n<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>[NOTNULL[:<span class="operator">=</span><span class="operator">&lt;</span>表达式n<span class="operator">&gt;</span>]]) ;</span><br><span class="line"><span class="operator">&lt;</span>记录变量名<span class="operator">&gt;</span> <span class="operator">&lt;</span>记录类型名<span class="operator">&gt;</span> ;</span><br></pre></td></tr></table></figure>

<p>将雇员信息定义为记录类型。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">type emp_record_type <span class="keyword">is</span> record</span><br><span class="line">(v_ename emp.ename<span class="operator">%</span>type,</span><br><span class="line">v_job emp.job<span class="operator">%</span>type,</span><br><span class="line">v_sal emp.sal<span class="operator">%</span>type);</span><br><span class="line">emp_rec emp_record_type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">into</span> emp_rec</span><br><span class="line"><span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="operator">&amp;</span>eno;</span><br><span class="line">dbms_output.put_line(emp_rec.v_ename<span class="operator">||</span><span class="string">&#x27;:&#x27;</span><span class="operator">||</span></span><br><span class="line">emp_rec.v_job<span class="operator">||</span><span class="string">&#x27;: &#x27;</span><span class="operator">||</span>emp_rec.v_sal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>PL&#x2F;SQL表</p>
<p>PL&#x2F;SQL表是一种比较复杂的数据结构，与数据库中的表是有区别的。数据库表是一种二维表，是以数据库表的形式存储。这里的表是一种复合数据类型，是保存在数据缓冲区中的没有特别存储次序、可以离散存储的数据结构，它可以是-维的，也可以是二维的。当使用PLSQL表时，首先必须在声明部分定义该类型和变量,然后在执行部分引用该变量。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">TYPE <span class="operator">&lt;</span>表类型名<span class="operator">&gt;</span> <span class="keyword">IS</span> <span class="keyword">TABLE</span> <span class="keyword">OF</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> INDEX <span class="keyword">BY</span> BINARY_INTEGER;</span><br><span class="line"><span class="operator">&lt;</span>表变量名<span class="operator">&gt;</span><span class="operator">&lt;</span>表类型名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p>索引表类型的定义。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">TYPE ename_table_type <span class="keyword">IS</span> <span class="keyword">TABLE</span> <span class="keyword">OF</span> emp.ename<span class="operator">%</span>TYPE</span><br><span class="line">INDEX <span class="keyword">BY</span> BINARY_INTEGER;</span><br><span class="line">Ename_table ename_table_type;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">INTO</span> ename_table(<span class="number">1</span>) <span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">WHERE</span> empno<span class="operator">=</span> <span class="number">7902</span>;</span><br><span class="line">Dbms_output.put_line(<span class="string">&#x27;员工名:&#x27;</span><span class="operator">||</span> ename_table(<span class="number">1</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>数组</p>
<p>数组也是一种复合类型，和表类似，与表不同的是声明了-一个数组，就确定了数组中元素的数目。同时，数组存储时，其元素的次序是固定且连续的，而且索引变量从1开始一直到其定义的最大值为止。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">TYPE <span class="operator">&lt;</span>数组类型名<span class="operator">&gt;</span> <span class="keyword">IS</span> VARRAY (<span class="operator">&lt;</span>MAX_SIZE<span class="operator">&gt;</span>) <span class="keyword">OF</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>;</span><br><span class="line"><span class="operator">&lt;</span>表变量名<span class="operator">&gt;</span><span class="operator">&lt;</span>表类型名<span class="operator">&gt;</span> ;</span><br></pre></td></tr></table></figure>

<p>NULL</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>赋值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>variable<span class="operator">&gt;</span>:<span class="operator">=</span> <span class="operator">&lt;</span>expression<span class="operator">&gt;</span> ;</span><br></pre></td></tr></table></figure>

<p>对变量赋值的两种方法。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_job varchar2(<span class="number">10</span>);</span><br><span class="line">v_sal number;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">v_job:<span class="operator">=</span><span class="string">&#x27;CLERK&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="keyword">into</span> v_sal <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span>v_job;</span><br><span class="line">dbms_output.put_line(v_sal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>IF…THEN</p>
<p>F…THEN..ELSE</p>
<p>F..THEN..ELSIF</p>
<p>通过IF条件控制语句为不同部门的员工增加工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">v_deptno emp.deptno<span class="operator">%</span>type;</span><br><span class="line">v_empno emp.empno<span class="operator">%</span>type;</span><br><span class="line">v_sal number(<span class="number">6</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">v_empno:<span class="operator">=</span><span class="operator">&amp;</span><span class="keyword">no</span>;</span><br><span class="line"><span class="keyword">SELECT</span> deptno,sal <span class="keyword">INTO</span> v_deptno,v_sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line">IF v_deptno <span class="operator">=</span><span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">100</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span>v_empno;</span><br><span class="line">ELSIF v_deptno <span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">200</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span>v_empno;</span><br><span class="line">ELSIF v_deptno <span class="operator">=</span><span class="number">30</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">300</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span>v_empno;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">400</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span>v_empno;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>CASE</p>
<p>带选择器按值比较的CASE语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CASE</span>选择器</span><br><span class="line"><span class="keyword">WHEN</span>表达式<span class="number">1</span><span class="keyword">THEN</span>执行语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">WHEN</span>表达式<span class="number">2</span> <span class="keyword">THEN</span>执行语句<span class="number">2</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">WHEN</span>表达式N <span class="keyword">THEN</span> 执行语句N;</span><br><span class="line"><span class="keyword">ELSE</span>执行语句N<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure>

<p>通过CASE条件控制语句为不同部门的员工增加工资。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">v_deptno emp.deptno<span class="operator">%</span>type;</span><br><span class="line">v_empno emp.empno<span class="operator">%</span>type;</span><br><span class="line">v_sal number(<span class="number">6</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">v_empno:<span class="operator">=</span> <span class="operator">&amp;</span><span class="keyword">no</span>;</span><br><span class="line"><span class="keyword">SELECT</span> deptno,sal <span class="keyword">INTO</span> v_deptno,v_sal <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line"><span class="keyword">CASE</span> v_deptno</span><br><span class="line"><span class="keyword">When</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span> <span class="number">100</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line"><span class="keyword">When</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">300</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line"><span class="keyword">When</span> <span class="number">30</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">300</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line"><span class="keyword">When</span> <span class="number">40</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> emp <span class="keyword">SET</span> sal<span class="operator">=</span>v_sal<span class="operator">+</span><span class="number">300</span> <span class="keyword">WHERE</span> empno<span class="operator">=</span> v_empno;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">Dbms_output.put_line(<span class="string">&#x27;不存在该部门!&#x27;</span>);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>不带选择器按条件比较的CASE语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CASE</span></span><br><span class="line"><span class="keyword">WHEN</span>条件表达式<span class="number">1</span> <span class="keyword">THEN</span>执行语句l;</span><br><span class="line"><span class="keyword">WHEN</span>条件表达式<span class="number">2</span> <span class="keyword">THEN</span>执行语句<span class="number">2</span>;</span><br><span class="line"><span class="keyword">WHEN</span>条件表达式N <span class="keyword">THEN</span>执行语句N;</span><br><span class="line">[<span class="keyword">ELSE</span>执行语句N<span class="operator">+</span><span class="number">1</span>;]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure>

<p>LOOP</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">LOOP</span><br><span class="line">statements;</span><br><span class="line">...</span><br><span class="line">EXIT [<span class="keyword">WHEN</span> <span class="keyword">condition</span>];</span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br></pre></td></tr></table></figure>

<p>使用LOOP循环依次输出1~5的立方数。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">i number:<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">LOOP</span><br><span class="line">Dbms_output.put_line(i <span class="operator">||</span><span class="string">&#x27;的立方为&#x27;</span><span class="operator">||</span> i<span class="operator">*</span>i<span class="operator">*</span>i);</span><br><span class="line">i:<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">EXIT <span class="keyword">WHEN</span> i<span class="operator">&gt;</span><span class="number">5</span>;</span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>while</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">WHILE <span class="keyword">condition</span> LOOP</span><br><span class="line">Statementl;</span><br><span class="line">Statement2;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br></pre></td></tr></table></figure>

<p>使用WHILE循环依次输出1~5的立方数。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">i number:<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">WHILE i<span class="operator">&lt;=</span><span class="number">5</span> LOOP </span><br><span class="line">Dbms_output.put_line(i<span class="operator">||</span><span class="string">&#x27;的立方为&#x27;</span><span class="operator">||</span> i<span class="operator">*</span>i<span class="operator">*</span>i);</span><br><span class="line">i:<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> LOOP; </span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>FOR</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FOR</span> counter <span class="keyword">IN</span> [REVERSE] start_rang...end_range LOOP</span><br><span class="line">statements;</span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br></pre></td></tr></table></figure>

<p>使用FOR循环依次输出1~5的立方数。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">i number:<span class="operator">=</span><span class="number">1</span>; </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">FOR</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span> LOOP</span><br><span class="line">Dbms_output.put_line(i <span class="operator">||</span><span class="string">&#x27;的立方为&#x27;</span><span class="operator">||</span> i<span class="operator">*</span>i<span class="operator">*</span>i);</span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Oracle系列</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>Oracle</tag>
        <tag>PL/SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>PSTN和以太网互连实验</title>
    <url>/2020/03/05/PSTN%E5%92%8C%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%92%E8%BF%9E%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h2 id="PSTN和以太网互连实验"><a href="#PSTN和以太网互连实验" class="headerlink" title="PSTN和以太网互连实验"></a>PSTN和以太网互连实验</h2><p>实验内容</p>
<p>1、构建互连网,由路由器实现以太网和PSTN互连</p>
<p>2、通过路由器实现终端A和终端B之间相互通信的过程</p>
<p><img src="D:\bloglocal\image-20200403083419597.png" alt="image-20200403083419597"></p>
<p>实验目的</p>
<p>1、验证路由器接口配置过程</p>
<p>2、验证路由器自动生成直连路由项的过程</p>
<p>3.验证连接在以太网.上的两个结点之间的IP分组传输过程</p>
<p>4、验证连接在PSTN上的两个结点之间的IP分组传输过程</p>
<p>5、验证IP分组经过不同类型传输网络传输时,封装成该传输网络对应的帧格式的过程</p>
<p>6、验证两个连接在不同类型网络上的终端之间的IP分组传输过程</p>
<p>7、验证路由器实现以太网和PSTN互连的过程</p>
<p>实验原理</p>
<p>1.路由器接口模块和IP地址配置</p>
<ul>
<li>两个不同类型接口模块:以太网接口和PSTN网接口</li>
<li>两个接口分别配置两个不同网络号的IP地址</li>
</ul>
<p>2、路由器端口与所连接的网络终端属于同一网络,配置相同网络号IP地址</p>
<p>3、路由器接口IP地址成为连接在同一网络上的终端的默认网关地址</p>
<p>4、配置完路由器接口IP地址和子网掩码,路由器自动生成直连路由项</p>
<p>5,根据路由表实现终端A与终端B之间的通信过程</p>
<p>关键命令说明</p>
<p>1.路由器接口配置命令</p>
<blockquote>
<p><strong>Router(config)#</strong> interface FastEthernet0&#x2F;0</p>
<p>全局模式下使用,进入路由器接口FastEthernet0&#x2F;0的接口配置模式,其中FastEthernet表明是快速以太网接口, 0&#x2F;0是接口编号。</p>
<p><strong>Router(config-if)#</strong> ip address 192.1.1.254 255.255.255.0</p>
<p>接口配置模式下使用,为路由器接口FastEthernet0&#x2F;0分配IP地址192.1.1.254和子网掩码255.255.255.0</p>
</blockquote>
<p>关键命令说明</p>
<p>2.定义授权用户</p>
<p>➢授权用户:允许对路由器进行某种指定操作的远程用户</p>
<p>➢身份鉴别:当远程用户对路由器进行指定操作时,路由器需要对远程用户进行身份鉴别:需要提供定义授权用户时指定的用户名和口令。</p>
<p>➢定义授权用户命令</p>
<p>Router(config)#username aaa password bbb</p>
<p>全局模式下定义了-个用户名为aaa口令为bbb的授权用户。</p>
<h2 id="静态路由项配置实验"><a href="#静态路由项配置实验" class="headerlink" title="静态路由项配置实验"></a>静态路由项配置实验</h2><p>实验内容</p>
<p>1、构建网络,路由器实现不同类型网络互连</p>
<ul>
<li>单独的以太网、单独的无线局域网</li>
<li>由AP实现互连的以太网和无线局域网</li>
</ul>
<p><img src="D:\bloglocal\image-20200403084542715.png" alt="image-20200403084542715"></p>
<p>2、配置静态路由项</p>
<p>通过配置静态路由项指出通</p>
<p>往非直连网络的传输路径</p>
<p>实验目的</p>
<p>1、验证路由器无线局域网接口的配置过程</p>
<p>2、验证AP和路由器之间的区别</p>
<p>3.验证静态路由项配置过程</p>
<p>4、验证路由器重新封装IP分组的过程</p>
<p>5、验证建立IP分组传输路径的过程</p>
<p>实验原理<br>1、AP和路由器工作原理</p>
<p>AP互连的以太网和无线局域网构成扩展服务集,分配相同的网络地址</p>
<p>路由器不同接口连接不同的网络,分配不同的网络地址</p>
<p>2、直连路由项生成原理</p>
<ul>
<li>指出通往直连网络的传输路径</li>
<li>配置接口IP地址和子网掩码后自动生成</li>
</ul>
<p>3、静态路由项生成原理</p>
<ul>
<li>指出通往非直连网络的传输路径</li>
<li>需要手工配置每一项静态路由项</li>
</ul>
<p>关键命令</p>
<p>1.无线局域网安全机制配置命令</p>
<p>➢Router(config)#dot11 ssid 123456</p>
<p>定义一个SSID&#x3D;123456的无线局域网,井进入该无线局域网配置模式,即SSID配置模式</p>
<p>➢Router(config-ssid)#authentication open</p>
<p>终端与该无线局域网建立关联时使用:开放系统鉴别机制</p>
<p>➢Router(onfigssid)#no authentication network-eap</p>
<p>无线局域网在确定终端是否是授权终端时,不使用EAP鉴别机制</p>
<p>➢Router(config-ssid)# authentication key-management wpa</p>
<p>指定WPA作为该无线局域网的鉴别和密钥管理机制</p>
<p>➢Router(config-ssid)#wpa-psk ascii 1234567890</p>
<p>指定ASCII码形式的字符串1234567890为预共享密钥wpa-psk</p>
<p>➢Router(configssid)#guest mode</p>
<p>指定无线局域网支持guest模式。guest模式下:</p>
<ul>
<li>一是信标帧中包含该无线局域网的SSID ;</li>
<li>二是如果该无线局域网接收到用通配符作为SSID的探测请求帧,发送探测响应帧中包含该SSID.</li>
</ul>
<p>2.无线接口配置命令</p>
<p>➢Router(config)#interface Dot11Radio0&#x2F;3&#x2F;0</p>
<p>进入路由器接口Dot11Radio0&#x2F;3&#x2F;0的接口配置模式,包含信息:</p>
<p>一是接口类型Dot11Radio ,表明该接口是无线局域网接口</p>
<p>二是接口编号为0&#x2F;3&#x2F;0</p>
<p>➢Router(config-if)#no shutdown</p>
<p>开启该接口</p>
<p>➢Router(config-if)#ip address 192.1.2.254 255.255.255.0</p>
<p>为路由器接口分配IP地址192.1.2.254和子网掩码255.255.255.0</p>
<p>➢Router(config-if)#ssid 123456</p>
<p>配置SSID为123456</p>
<p>➢Router(configif)#encryption mode ciphers aes-ccm</p>
<p>命令的作用是指定密码体制aes-ccm</p>
<h2 id="RIPv1配置实验"><a href="#RIPv1配置实验" class="headerlink" title="RIPv1配置实验"></a>RIPv1配置实验</h2>]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>双绞线</tag>
        <tag>直通线</tag>
        <tag>交叉线</tag>
      </tags>
  </entry>
  <entry>
    <title>Queue</title>
    <url>/2020/04/11/Queue/</url>
    <content><![CDATA[<p>队列(Queue)是只允许在一端进行插入，在另一端删除的线性表。</p>
<p>队列的实现</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;	<span class="comment">//定义队列中元素最大个数</span></span><br><span class="line">	<span class="type">int</span> data[MaxSize]; <span class="comment">//用静态数组存放队列元素</span></span><br><span class="line">	<span class="type">int</span> front, rear; <span class="comment">//队头指针和队尾指针</span></span><br><span class="line">&#125; SqQueue;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">testQuene</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqQuene Q; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//初始化队列</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitQueue</span><span class="params">(SqQueue &amp;Q)</span> </span>&#123;</span><br><span class="line"><span class="comment">//初始时队头.队尾指针指向0</span></span><br><span class="line">Q.rear=Q.front=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断队列是否为空</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QueueEmpty</span> <span class="params">(SqQueue Q)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Q.rear==Q.front) <span class="comment">//队空条件</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span> ;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//入队操作--只能从队尾插入</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10</span></span><br><span class="line"><span class="comment">//定义队列中元素的最大个数</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">ElemType data [MaxSize];</span><br><span class="line"><span class="comment">//用静态数组存放队列元素</span></span><br><span class="line"><span class="type">int</span> front, rear;</span><br><span class="line"><span class="comment">//队头指针和队尾指针</span></span><br><span class="line">&#125; SqQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">//入队</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">EnQueue</span><span class="params">(SqQueue &amp;Q, ElemType x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>((Q.rear+<span class="number">1</span>)%MaxSize==Q.front)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//队满则报错</span></span><br><span class="line">Q.data [Q.rear]=x;</span><br><span class="line"><span class="comment">//将x插入队尾</span></span><br><span class="line">Q.rear=(Q.rear+<span class="number">1</span>)%MaxSize;<span class="comment">//区域运算形成循环队列</span></span><br><span class="line"><span class="comment">//队尾指针后移</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//出队(删除一个队头元素，并用x返回)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DeQueue</span><span class="params">(SqQueue &amp;Q, ElemType &amp;x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Q.rear==Q.front)</span><br><span class="line"><span class="comment">//判断队空</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//队空则报错</span></span><br><span class="line">x=Q.data [Q.front];</span><br><span class="line">Q.front=(Q.front+<span class="number">1</span> )%MaxSize;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>队列已满的条件:队尾指针<br>的再下一个位置是队头，即<br><code>(Q.rear+ 1)%MaxSize==Q.front</code></p>
<p>队空条件:<br><code>Q.rear= =Q.front</code></p>
<p>不浪费最后一个存储区域的做法，设置一个int队列长度，或者设置一个tag，当删除操作的时候tag&#x3D;1,插入的时候为0,当rear&#x3D;&#x3D;front&amp;&amp;tag&#x3D;&#x3D;1时为空。</p>
]]></content>
      <categories>
        <category>计算机</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
        <tag>队列</tag>
      </tags>
  </entry>
  <entry>
    <title>Physical Properties of a Low-Power Helicon Source Operating on a High-Frequency Discharge with a Capacitive Component</title>
    <url>/2023/09/18/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/</url>
    <content><![CDATA[<p>利用带电容元件的高频放电运行的低功率螺旋源的物理特性</p>
<h1 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h1><p>本文介绍了对放置在纵向磁场中的低功率射频等离子体源（螺旋推进器）进行实验研究的结果，该等离子体源在电容射频放电和带有电容成分的感应射频放电中工作。结果表明，离子源的离子流和电子流特性与恒定磁场的感应有很大关系。在所研究的等离子体源中，电容性射频放电作为一种工作过程的基本适用性得到了证明。研究表明，随着放电中电容成分的出现，离子源出口处离子流的平均能量会略有增加。</p>
<h1 id="introduction"><a href="#introduction" class="headerlink" title="introduction"></a>introduction</h1><p>伴随着航天工业的发展，所用航天器的功率和质量范围也在不断扩大，这反过来又使得开发新型高效机载电动火箭推进器（ERT）变得尤为重要。同时，由电子补偿离子束（即不需要补偿阴极）的 ERT 方案对许多实际应用特别有吸引力。特别是，低轨道（200-400 公里）的成功开发需要这种 ERT，因为那里有残余大气，而传统的阴极方案由于氧化过程而不适用。</p>
<p>有希望获得补偿离子通量的 ERT 设计是螺旋推进器（HT）。其工作原理详见文献[1-5]。在此，我们仅简要说明该装置基于纵向外磁场中的感应射频（RF）放电。在气体放电室（GDC）中产生的等离子体从出口流出，流经一个发散磁场区域，即所谓的 “磁性喷嘴”，在这里形成一个具有电位跃迁的双电层，等离子体被加速。根据具体科学论文作者对哪种加速机制的偏好，文献中出现了 “磁性喷嘴螺旋桨推进器”[6, 7]和 “双层螺旋桨推进器”[8, 9]等名称，但实际上人们谈论的是同一种装置。值得注意的是，在历史上，只有具有相当大的 GDC 长度（1 米或以上）和高于 1 kG 的外部磁场感应的足够强大的设备（高于 1 kW）才被称为螺旋推进器。在这类装置中，可以通过实验检测到螺旋波。不过，由于已有的传统，功率低（~100 W）、GDC 短（10-20 cm）和磁场感应低（&lt;100 G）的类似装置也被称为低功率螺旋波推进器，尽管在大多数情况下，它们本身并不满足激发螺旋波的条件。这些装置，即低功率螺旋子推进器，是本研究的关注对象。</p>
<p>尽管 HT 有许多优点，包括设计简单、可对离子流进行补偿以及在 GDC 中没有与等离子体接触的金属电极，但目前，HT 并未用于发射到太空的航天器，这主要是由于它的一个重大缺点：流出离子的能量较低（在氩气环境中运行时约为 70-100 eV）[6,7,10-12]。能量低的后果是推力效率低。根据现代概念，高温热气流中离子成分的加速是通过转换磁性喷嘴中电子成分的热能来实现的 [6、7、12-16]。出射离子能量的多重增加似乎是一项棘手的任务，因为这要求 GDC 内部的温度和电子密度相应增加。在这种情况下，温度的大幅提高必然会导致等离子体粒子逃逸到 GDC 壁（根据玻姆公式）和发光造成的损耗增加，从而对等离子体的形成效率产生负面影响。因此，在传统 HT 方案中，将离子能量从 70 eV 提高到 300-400 eV（氩离子）的可接受水平似乎并不可行。</p>
<p>这项工作的作者考虑了增加 HT 中离子流能量的另一种方法：使用电容性射频放电。这种情况的逻辑如下。离子流的能量主要由 GDC 内部相对于接地电极的准静态（射频场振荡周期内的平均值）等离子体电势决定，而接地电极通常是推进器外壳或真空室壁。众所周知，在电容式射频放电中，等离子体相对于电极可能具有很高的准稳态电位[17]。同时，在组织电容式射频放电时，不需要在 GDC 中放置与等离子体接触的电极，否则会影响源出口处离子流量的补偿。从物理角度来看，可以通过额外的电容式射频功率输入节点来提高 GDC HT 中的等离子体电位。电容分量对放电特性的影响也是研究的重点，因为即使在传统 HT 电路中，也不可避免地存在电容分量，这是由于电感器的匝间电容和真空室中可能存在的由工作气体残压引起的非自持电容放电。</p>
<p>在这项工作中，我们通过实验测量了螺旋推进器实验室模型在四种模式下工作时的参数：电容性射频放电、电感性射频放电和两种混合放电（其中一种主要是电容性放电，另一种是电感性放电）。</p>
<h1 id="experimental"><a href="#experimental" class="headerlink" title="experimental"></a>experimental</h1><p>为了使本研究报告中的结果能够与早先对高温热动力推进器在电感射频放电 “标准 “模式下运行时的参数进行直接比较[18]，对推进器的设计进行了最小限度的改动。电感器的匝间距减小了，因此现在只占 GDC 侧表面的一半，电容式射频放电电路的有源电极位于另一半。HT 实验室模型的示意图如图 1 所示。GDC 和气体分配器由石英制成，GDC 内部没有金属元件。恒定磁场的最大值落在推进器出口区域，在气体分配器或真空室方向距离出口 10 厘米处，磁场感应下降约三倍。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83458165793700.png"></p>
<p>图 1.实验室 HT 方案：(1) GDC 石英壁，(2) 金属外壳，(3) 电磁铁，(4) 射频感应器，(5) 有源电极电容通道，(6) 气体分配器。H &#x3D; 9 厘米，R &#x3D; 5.6 厘米，r &#x3D; 2.5 厘米，L1 &#x3D; 3.5 厘米，L2 &#x3D; 4 厘米。</p>
<p>混合放电有两种实现方式：放电的电容通道和电感通道由相同或不同的射频源供电。在这项工作中，我们优先考虑两个通道都由单个射频源供电的放电方案，因为这种方案可以更准确地跟踪电感放电中电容成分的影响，在电感放电中，射频功率会根据放电等离子体参数在通道之间自发地重新分配。除此之外，为不同来源的通道供电的方案实施起来比较困难，而且不太适用于打算安装在航天器上的等离子推进器。</p>
<p>需要注意的是，在所选频率（13.56 MHz）下，电容式射频放电的最佳匹配系统不同于电感式射频放电的匹配系统。因此，本研究中的混合放电意味着通过单一射频电源的电容和电感通道向放电等离子体输入功率，同时使用一个匹配系统，其方案如图 2 所示。通过断开电容 C3 或电感 L，可将这种电路转换为 C1 电路，用于电容式射频放电，或转换为 L 电路，用于电感式射频放电。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83580202784500.png"></p>
<p>图 2.匹配系统方案：(1) 射频电源；C1、C2 和 C3 为可变真空电容；L 为电感；(a) 电容通道出口（有源电极）；(b) 电感通道出口（射频电感）。</p>
<p>如图 3 所示，实验室 HT 放置在一个宽 80 厘米、深 80 厘米、高 75 厘米的真空室中。在 HT 出口对面，有一个用于安装测量设备的平台，放置在线性传输装置的滑块上，能够沿着系统的轴线移动，定位精度为 0.3 毫米。实验的参数如下：射频电源的功率为 125 W（频率为 13.56 MHz），恒定磁场在其最大区域（推进器出口附近）的感应量在 0-70 G 范围内变化，工作气体（氩气）的流速为 10 mL&#x2F;min。在所述流速下，真空室中的压力为 3×10-4 Torr，GDC 中的压力估计为 8×10-4 Torr。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83612952305700.png"></p>
<p>图 3.实验装置图：(1) 射频电源；(2) 匹配系统；(3) 实验室 HT；(4) 测量设备平台；(5) 真空室壁；(6, 7) 分别为电感通道电路中的罗戈夫斯基线圈和电容分压器；(8, 9) 分别为电容通道电路中的罗戈夫斯基线圈和电容分压器。</p>
<p>通过电感和电容通道输入放电的射频功率是通过对相应通道的射频电流和电压在几十个射频振荡周期内的乘积进行积分，然后将积分结果除以积分时间间隔来确定的。罗戈夫斯基线圈和电容分压器用于测量射频电流和电压。对于电感放电，我们还使用了从电路中通过电感的射频电流读数估算输入功率的方法，该方法在文献[19]中有详细描述。</p>
<p>使用射频补偿探头沿 HT 实验室模型的轴线测量等离子体参数。为了进行射频补偿，在探针顶端附近固定了一个额外的电极，通过一个 1 nF 的陶瓷电容与探针相连，并在探针电路中加入了频率为 13.56 和 27 MHz 的谐振陷波滤波器。实验室模型 HT 的接地外壳和真空室壁被用作参考探头。获取和处理探头电流-电压特性的程序符合标准。空间电势根据探针电子电流对数与直线的偏差确定，等离子体密度则根据探针电势等于空间电势时的电子电流确定。由于恒定磁场会导致探针特性严重失真，因此所有探针测量都是在磁场最大值不超过 24 G 的情况下进行的。</p>
<p>为了获得实验室模型中出现的高温等离子体流的参数，在距离出口 30 厘米处的系统轴上安装了一台四栅能量分析仪。所选类型粒子（电子或离子）的能量分布是根据集电极电流 Ic 对延缓电压 Ur 的一阶导数（延时曲线）提取的：</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83728975197500.png" alt="(1)"></p>
<p>其中，m、e 分别为所选粒子的质量和电荷，S 为入口面积，η 为网格系统的透明度系数，ε&#x3D;eU<sub>r</sub>。</p>
<p>电子束的各向异性是通过一个旋转的平面探针估算出来的，探针位于系统轴线上距离出口 10 厘米处。探针面积为 1 平方厘米，旋转角度由伺服电机调节，精度为 5°。</p>
<p>由于高温等离子体中可以激发出各种波，特别是斜朗缪尔波[1925]（Trivelpiece-Gould 波）和螺旋波[20, 21, 26-31]，在这项工作中，我们使用磁探针测量了射频磁场沿系统轴线的纵向 Bz 分量。磁探针放置在上述线性传输装置的可移动支架上，是一个等离子体浸没的螺旋体，由 6 圈直径为 0.3 毫米的钨丝组成。螺旋直径为 4 毫米，高度为 5 毫米。如文献[18]所述，使用初级绕组中心点接地的变压器隔离滤除电容拾波，探头本身通过两个各为 3 nF 的陶瓷电容与地直流隔离，使其在浸入放电等离子体时处于浮动电位下。</p>
<h1 id="RESULTS-AND-DISCUSSION"><a href="#RESULTS-AND-DISCUSSION" class="headerlink" title="RESULTS AND DISCUSSION"></a>RESULTS AND DISCUSSION</h1><p>所考虑的四种放电形式（电容式、电感式和两种混合式）从外观上看都非常相似：在 GDC 内有一个发光的等离子体，在出口磁场的作用下，发散的等离子体流进入真空室。放电照片见图 4。为简洁起见，今后将把电感成分占主导地位的混合放电称为混合放电 I，电容成分占主导地位的混合放电称为混合放电 II。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83917974601100.png"></p>
<p>图 4 HT 出口运行时的照片。</p>
<p>值得注意的是，由于电压和电流的相位差接近 π&#x2F;2，直接积分法无法获得与电感通道有关的输入功率，这导致误差比测量值大一个数量级。一个可行的解决方案是在电感通道的电路中串联一个阻抗与电感通道阻抗虚部大致相等的电容。这样，如果阻抗的虚部与实部的绝对值相当，相移就可以远离 π&#x2F;2。事实上，电容的串联并没有达到预期效果，因为它严重影响了匹配和流过电感器的电流，进而导致通道阻抗的虚部和放电等离子体参数发生变化。因此，对于电感放电，我们只能采用根据流过电感器的电流在放电和不放电时的差异来估算输入的方法。</p>
<p>我们还注意到，在实验中无法实现放电燃烧模式，即通过电容和电感通道输入的功率彼此接近。在尝试从电容放电平稳过渡到电感放电时，我们发现在某一时刻会出现急剧的不匹配，放电过程也随之停止。因此，我们只考虑上述两种混合放电。</p>
<p>表 1 列出了 24 G 磁场中放电燃烧模式的功率输入参数。Px、Ux 和 Ix 分别表示功率输入、射频电压基谐波幅值和射频电流，其中 x 在电容通道中用索引 c 代替，在电感通道中用索引 i 代替。</p>
<p>表 1.考虑的排放类型参数</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/83994017319900.png"></p>
<p>尽管在所考虑的混合放电中，通过次要通道输入的功率很小，但如图 5 所示，该通道对等离子体参数的影响不容忽视。图 5 显示了等离子体密度的纵向分布。从图中可以看出，在电感放电和混合 I 放电中，出口附近区域的等离子体密度急剧下降，而在电容成分占主导地位的放电中，等离子体密度沿 GDC 平稳下降。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84035629003700.png"></p>
<p>图 5.等离子体密度 n 沿实验室 HT 轴的分布。x &#x3D; 0 厘米坐标对应出口位置。数字表示不同放电类型的曲线：(1) 感应式、(2) 混合式 I、(3) 混合式 II 和 (4) 电容式。</p>
<p>电容式放电的 GDC 内部等离子体密度较低，电子温度较高，为 9-11 eV，而电感式和混合式 I 放电的电子温度为 6-7 eV。混合 II 放电的电子温度介于 8-9 eV 之间。值得注意的是，电感放电也不乏电容成分，这与电感器的匝间电容有关。不过，在实验所考虑的 125 W 射频功率值下，这种放电处于 H 模式，在所研究的四种放电方案中，它的电容分量最小，因此，为了方便起见，本文将其称为感应放电。</p>
<p>由于进行这项研究的主要动机之一是希望找到一种方法来提高高温炉出口处离子流的能量，因此图 6 所示的准稳态等离子体势能沿系统轴线的纵向分布尤其引人关注。离子作为大质量粒子，在射频场频率为 13.56 MHz 时的受迫振荡振幅可以忽略不计，并在平均场中运动。因此，图 6 中的分布显示了决定系统中离子动态的电场。可以看出，对于所考虑的放电形式，该分布的主要形式大致相同，并且有三个不同的区域：GDC 内部电位约为 40 V 的区域、从出口向真空室方向 2 cm 处的电位最低点，以及随着向真空室方向的进一步推进而增加的电位。GDC 出口处的电位降为 25-30 V，对于离开 HT 的离子来说，电位正在加速下降。可以注意到，与密度下降相同，在电容式放电和混合 I 放电中，GDC 内部的电位下降更为平滑。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84117969727000.png"></p>
<p>图 6.沿实验室 HT 轴线的射频振荡周期内平均等离子体空间势能 Us 的分布。x &#x3D; 0 cm 坐标对应出口位置。数字表示不同放电类型的曲线：(1) 感应式；(2) 混合式 I；(3) 混合式 II；(4) 电容式。</p>
<p>图 6 所示的电势分布模式应导致形成离开实验室 HT 的加速离子通量。我们考虑使用能量分析仪测量离子通量参数的结果。图 7 显示了典型的延缓曲线以及由此获得的离子能量分布。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84198908214800.png"></p>
<p>图 7.在电容放电操作过程中，离子离开高温炉时的阻滞曲线（1，左轴）和由此得出的能量分布（2，右轴）。</p>
<p>获得的离子流平均能量与恒定磁场关系不大，电感式和混合式 I 放电的平均能量为 50-65 eV，混合式 II 放电的平均能量为 60-70 eV，电容式放电的平均能量为 70-80 eV。需要注意的是，本研究中使用的能量分析仪的外壳和外栅是接地的，这不可避免地会在能量分析仪附近形成空间电荷层。该层的准稳态电压跃变幅度与安装能量分析仪区域的等离子体空间电位接近。探头测量结果表明，对于所有放电类型，距离出口 30 厘米处系统轴线上的等离子体电位为 40-45 V。这意味着任何从周围等离子体进入能量分析仪电极系统的离子都会在空间电荷层中获得 40-45 eV 的额外加速度。如果在能量分析仪的位置有一个接地电极，那么进入该电极的离子的平均能量与能量分析仪测得的能量完全一致。然而，将其理解为实验室高温炉产生的离子流的平均能量是错误的。即使没有来自高温炉出口的离子流，将能量分析仪置于电势为 4045 V 的等离子体中，也会导致能量分析仪检测到能量分布在 40-45 eV 对应能量附近的离子。离子通量的证据是能量分析仪所在等离子体区域的空间电势（乘以离子电荷）的测量平均能量的过量。在我们的案例中，就记录了这样的过量，电容性放电的过量约为 35 eV，混合 II 放电的过量约为 25 eV，其他放电的过量约为 15 eV。在这种情况下，磁场的大小对这种过量的影响很小，也就是说，可以认为离子流在没有外部磁场的情况下也是存在的。</p>
<p>另一方面，外部磁场对能量分析仪的集电极电流有显著影响，但不产生阻滞电压，集电极电流与等离子体流向外部电网的总离子电流成正比。集电极电流曲线如图 8 所示。在曲线 1 附近的 20-25 G 区域有一个明显的最大值，与感应放电相对应。这一结果与之前获得的数据一致 [18]。其他曲线也有类似的最大值，但范围较小。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84228454838700.png"></p>
<p>图 8.离子电流 Ici 对能量分析仪集电极的影响，不含磁场感应的抑制电压。数字表示不同类型放电的曲线：(1) 感应式，(2) 混合式 I，(3) 混合式 II，以及 (4) 电容式。</p>
<p>除了离子流参数之外，还使用了四栅能量分析仪来确定到达该仪器的电子的能量分布。为此，第三个栅格上的抑制电压和第二个栅格上消除相反类型粒子的电压的极性也相应改变（与等离子体接触的第一个栅格接地）。在记录电子流时，不需要第四个栅格上的电压，因为第四个栅格的作用是抑制集电极二次离子-电子发射导致的阻滞曲线畸变，因此第四个栅格与集电极相连。图 9 显示了所产生的缓滞曲线的典型视图以及相应的电子能量分布。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84271716361700.png"></p>
<p>图 9.电子在电容放电过程中离开高温炉的延迟曲线（1，左轴）和由此产生的能量分布（2，右轴）。</p>
<p>与离子的情况不同，电子流只在磁场下记录。在这种情况下，记录的电子流平均能量取决于磁场感应，如图 10 所示。需要注意的是，对于电子来说，能量分析仪附近空间电荷层的电位跃迁速度会减慢。与在平均场中运动的离子不同，在 13.56 MHz 的驱动场频率下，电子按照瞬时电场强度矢量运动。因此，在射频振荡的不同阶段，电子离开真空室等离子体到达能量分析仪的有效阻滞电势从 ~0 V 到 80-90 V 不等。因此，能量分析仪获得的电子束参数是实验室 HT 在整个阻滞电势范围内产生的电子束实际参数的平均值。不过，所获得的结果可以被视为电子分布中高能量部分的定性特征，因为在更大的射频振荡相位范围内，高能量电子可以通过能量分析仪的外部网格。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84313251848400.png"></p>
<p>图 10.到达能量分析仪的电子束平均能量 εe 与磁场感应的关系。数字表示不同放电类型的曲线：(1) 感应式，(2) 混合式 I，(3) 混合式 II 和 (4) 电容式。</p>
<p>与离子的情况相同，集电极的电子流很大程度上取决于磁场的大小，如图 11 所示。在这种情况下，能量分析仪记录的电子流可能是定向的，也可能是热的（或两者的任意组合）。为了估算电子流的方向性，我们使用了一个平面旋转射频补偿探头进行测量。当探针平面法线沿实验室 HT 轴（纵向）定向时，探针的电子流应由两部分组成：各向同性的热分量和出口等离子体外流产生的定向分量。如果探头平面的法线方向垂直于系统轴（横向方向），则探头的电子通量仅由热分量表示。因此，通过探头电流-电压特性（CVC）在指定探头方向上的差异，可以估算出电子束的方向分量。图 12 显示了不同磁场感应值下平面探针横向和纵向的 CVC 系列。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84388523535500.png"></p>
<p>图 11.能量分析仪集电极上电子电流冰的磁场感应相关性（无延缓电压）。数字表示不同放电类型的曲线：(1) 感应式，(2) 混合式 I，(3) 混合式 II，以及 (4) 电容式。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84414672632300.png"></p>
<p>图 12.平面探针纵向（浅色曲线）和横向（深色曲线）的 CVC 系列。曲线数字与磁场感应值相对应：(1) 0、(2) 15、(3) 24、(4) 36、(5) 48、(6) 60 和 (7) 72 G。</p>
<p>为便于数据展示，我们考虑空间电位下两个探针方向的电子电流（根据横向探针的 I-V 特性确定）与相同电位下横向探针的电子电流 Is 之差 Ib 的比值。该值等于纵向探针电子电流的定向分量与热分量之比。不同放电类型的相应磁场依赖关系如图 13 所示。在一般情况下，流向平面探针的电子流的各向异性自然与探针区域的磁场有关。在本次实验中，探针区域的磁场大约是出口区域磁场的三倍；因此，在研究的磁场范围内，探针附近的磁感应强度从 0 G 到 24 G 不等。然而，磁场的影响应导致 Ib&#x2F;Is(B)的单调依赖性，而实验却得到了急剧的非单调性，图 12 和图 13 证明了这一点。此外，在所考虑的磁场范围内，当实验室 HT 在感应放电状态下工作时，没有观察到明显的电子束各向异性（Ib 值为零）。如果我们认为这些结果不是由探针区域的磁场影响造成的，而是由高温炉侧出现的定向电子流造成的，那么这些结果就可以得到解释。事实也证明了这一点，即观察到电子束对探针的各向异性的磁场范围大致对应于 Ic(B) 依赖性出现最大值的磁场范围。需要注意的是，当平面探针远离出气口时，Ib 值会减小，当出气口到探针的距离大于等于 30 厘米时，Ib 值会小于测量误差。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84457412870100.png"></p>
<p>图 13.平面探针两个方向上的电流差 Ib 与空间电势下平面探针上的电子电流 Is 之比的磁场感应相关性。数字表示不同放电类型的曲线：(1) 电容式，(2) 混合式 I 和 (3) 混合式 II。</p>
<p>假设探针在两个方向上的电子通量差异是由 HT 的定向流造成的，我们就可以写出定向探针的电子电流表达式：</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84503471320200.png" alt="(2)"></p>
<p>其中，e、m 分别为电子电荷和质量，S 为探针面积，Up 为探针电压，fe 和 fb 分别为热电子和定向电子的能量分布。根据这一表达式，定向流的电子能量分布函数定义为</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84530414214200.png" alt="(3)"></p>
<p>由此得出的能量分布图如图 14 所示。除了感应式放电（不存在定向流）外，所有放电类型的 f 低电子平均能量估计为 30-40 eV。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84575971542000.png"></p>
<p>图 14.定向电子流的能量分布 fb。电容性放电。</p>
<p>尽管 GDC 与其外部区域之间存在电子阻滞电势，但电子加速机制仍会导致形成定向电子流，这就产生了一个问题。在实验室 HT 的出口处，有一个准静态电势最小的区域（图 6 中 -4 至 -2 厘米的 x 处），它可以作为快速电子的来源。然而，在这种情况下，所获得的定向流特性对磁场感应的依赖性并不明显：该最小值的参数对 B 没有明显的依赖性。</p>
<p>导致快速电子流的第二种可能机制是在 GDC 内部靠近有源电极（或靠近与匹配系统相连的电感器线圈）的近电极层中形成加速电子束。众所周知[17]，有源电极附近 GDC 壁上的二次离子电子发射会导致发射的电子在放电等离子体方向上被近电极层的场加速。在射频振荡阶段形成的电子能量最高，对应于有源电极附近的最大电压和 GDC 出口处的最小电子阻挡电压。在这种情况下，在磁场作用下，这些快速电子沿着磁场的力线从 GDC 的壁移动到出口，而不是撞击对面的 GDC 壁。因此，在没有外部磁场的情况下，电子通量的显著减少看起来非常自然。在这种情况下，GDC 出口处电子流参数的非单调 B 依赖性应该与 B 对近电极层参数或放电等离子体中束流弛豫的影响有关（例如，由于束流-等离子体不稳定性的发展）。</p>
<p>另一种选择是电子与系统中的等离子体波相互作用，例如，部分电子被电场纵向分量的波俘获。与电子相互作用的波的主要候选者是螺旋波和斜朗缪尔波。为了验证这一假设，我们沿着实验室 HT 的轴线测量了射频磁场的纵向分量 Bz。图 15 显示了所获得的感应放电 Bz 振幅和相位的纵向分布，包括没有放电等离子体的情况。虽然 Bz 分布的形式显示出对磁场感应的显著依赖性，但在Δφ(x) 的依赖性中没有发现行波或驻波的特征模式。其他研究的放电类型也得到了类似的结果，如图 16 所示。请注意，没有相位 Δφ(x)的特征波分布并不表示系统中没有上述波。遗憾的是，在实验中要获得 Br(x) 和 Bφ(x)的纵向分布极为困难，因为这些射频磁场分量无法在系统的轴上测量。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84688585849600.png"></p>
<p>图 15.感应放电时射频磁场 z 分量的振幅 BRF (a) 和相移 Δφ (b) 的纵向分布。曲线 2 和 3 分别绘制了 0 G 和 24 G 的恒定磁场感应。曲线 1 描述的是没有放电时的分布（射频功率为 40 W）。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84717156519400.png"></p>
<p>图 16.射频磁场 z 分量的振幅 BRF (a) 和相移 Δφ (b) 的纵向分布。数字表示不同放电类型的曲线：(1) 感应式、(2) 混合式 I、(3) 混合式 II 和 (4) 电容式。</p>
<p>我们将考虑上述所有实验结果的几个后果。首先，值得注意的是，当实验室 HT 在感应射频放电下工作时，其出口处没有定向电子流。在文献[18]中，记录了这种电子流。考虑到与文献[18]相比，实验室 HT 的设计元素中唯一发生重大变化的是电感器，因此很自然地将所获得的差异与电感器几何形状对放电特性的影响联系起来。其次，电容放电和介于电容放电和电感放电之间的混合放电可以在 GDC HT 中发挥电离和随后加速工作气体粒子的过程的作用（工作过程的作用）。第三，过渡到电容放电并不能显著提高离子束的平均能量。所研究的电容式放电的阻抗主要是负号的虚部，因此，有源电极和等离子体之间的介质间隙与放电一起构成了一个电容分压器。已知 GDC 石英壁的厚度（2 毫米）和电容放电回路中有源电极的面积，就可以利用测量到的电容通道电流和电压幅值 I0 和 U0 求出直接施加到放电等离子体上的射频电压幅值 Ud。</p>
<p><img src="/./pic/Physical-Properties-of-a-Low-Power-Helicon-Source-Operating-on-a-High-Frequency-Discharge-with-a-Capacitive-Component/84737228136800.png"></p>
<p>其中 C 是有源电极和放电等离子体之间的电容。将电容值 233 pF 和实验值 U0 &#x3D; 524 V、I0 &#x3D; 4.5 A 相加，得出 Ud &#x3D; 297 V。</p>
<p>真空室的墙壁在电容放电电路中扮演接地电极的角色，这导致接地电极的有效面积大于有源电极的面积。众所周知（如文献[17]），在不对称程度较高的电容放电中，大部分射频电压会在小电极附近的层中下降，等离子体的电位接近于面积较大的电极的电位，实验结果也证明了这一点。从物理角度来看，利用电容放电在高温炉中获得高离子能量的可能性依然存在，但是，要实现这种可能性，有必要考虑组织电容射频放电的替代方法，在这种方法中，真空室壁不能有效地发挥接地电极的作用。</p>
<h1 id="CONCLUSIONS"><a href="#CONCLUSIONS" class="headerlink" title="CONCLUSIONS"></a>CONCLUSIONS</h1><p>这项实验研究表明，可以使用电容和混合射频放电作为螺旋推进器的工作过程。与感应式射频放电的情况相同，在电容式和混合式射频放电的情况下，实验室高温高压模型的出口处会形成能量在 50 至 80 eV 之间的加速离子束，其密度与外部磁场感应呈非单调关系。在外部磁场和实验室高温炉的作用下，除感应式放电外，所有研究的放电类型都会形成平均粒子能量为 3040 eV 的定向电子束。鉴于电子在 GDC 出口处准静态电位的跃迁速度减慢，因此需要对电子加速机制进行额外研究。电子在从 GDC 到真空室的过渡过程中获得能量的一个可能途径是它们与系统中可能出现的等离子体波的相互作用。对射频磁场纵向分量 Bz 的振幅和相位沿系统轴线分布的研究表明，没有等离子体波（具有 Bz 分量）的长度与系统的线性尺寸相当。在实验室高温高压工作过程中过渡到电容式射频放电并不能显著提高从 GDC 中产生的离子的能量。原因在于大面积接地元件（真空室壁）作为电容式射频放电电路的接地电极的参与。为了提高离子流的能量，最好考虑在 GDC 中组织电容式射频放电的其他方法。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>Radio Frequency Excited Plasma Discharge Simulation for Potential Helicon Plasma Thruster</title>
    <url>/2023/08/28/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/</url>
    <content><![CDATA[<h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>先进推进装置的发展是实施强有力的太空探索计划的关键要素。先进的推进器概念，例如开发具有高密度螺旋等离子体源的无电极等离子体推进器，有望缓解电力推进固有的有限寿命的现有问题。无电极等离子推进器可能比使用栅格离子、霍尔推进器、电弧喷射器和电阻喷射器等电极的传统推进器更耐用。该研究的目标是模拟紧凑型高功率密度螺旋等离子体源的运行，目前正在检查其潜在的电力推进应用。等离子体建模在 COMSOL Multiphysics 等离子体模块中执行。 Nagoya III 型天线放置在介电管周围并以 13.56 MHz 电激励。等离子体在含有低压氩气的电离室中形成。利用电磁感应来维持等离子体。</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><p>电力推进能够实现高比冲，并且控制推力水平的能力使其成为空间推进应用中传统化学推进器的合适替代品。最近的改进将使电动推进器能够用作未来航天器的主要推进系统。具有多种太空加油能力的可变比冲推进器将允许成功的小行星重定向任务。</p>
<p>电力推进将电能从外部电源施加到推进剂上。电动推进器分为两大类：使用电力加热推进剂（以中性气体形式出现），以及使用电场或磁场加速离子。自太空时代开始以来，化学火箭因其高推力质量比而占据主导地位。然而，化学火箭的寿命有限。</p>
<p>电力推进具有多种基于利用电力加速流动的机制的推进器。不同空间推进器的特征比冲范围如表1所示。目前，空间应用中采用的是电热式、静电式或电磁式推进器。电热推进器的工作原理是利用电将推进剂加热至高温，通过喷嘴产生加速产生驱动力。推进剂流体的热能转化为动能。静电推进器利用静电场通过加速带电等离子体来产生推力。电磁场可以是外部产生的，也可以是自感产生的。</p>
<p>表 1. 已部署和实验的电动推进器的比冲量、推力效率和推力。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/295269660622400.png"></p>
<p>到目前为止，所有运行的电动推进器都使用无电极来电离推进剂，以加速离子和电子。电离输入功率的增加会导致腐蚀，主要是通过溅射降低此类设备的使用寿命。为了解决这个问题，开发了无电极推进器，这种推进器使用电或磁体力来电离气体以产生具有定向速度的推进剂流。在无电极等离子推进器的开发中，Helicon 等离子源在各种情况下都有用处。它们可以产生高密度 ~ 1013cm−3 螺旋等离子体，具有广泛的操作参数范围。螺旋等离子体产生的实验和理论方法及其加速方案已被描述和表征。</p>
<h1 id="2-Helicon等离子推进器"><a href="#2-Helicon等离子推进器" class="headerlink" title="2.Helicon等离子推进器"></a>2.Helicon等离子推进器</h1><p>为了实现电力推进系统的长寿命，我们一直在研究利用螺旋等离子体源的各种无电极电力推进概念。目前，多个研究小组正在致力于螺旋等离子体推进器（HPT）的开发。该研究的重点是永磁体的实现、优化磁体以满足所需的磁通量、工作功率范围、天线优化。</p>
<p>麻省理工学院的迷你螺旋实验 (mHTX)、欧空局的螺旋等离子体联氨组合微型 (HPHCOM) 和澳大利亚国立大学的螺旋双层推进器 (HDLT) 是潜在的 HPT 原型。这些不同技术演示原型的推进器性能如表 2 所示并如下所述。</p>
<p>HPHCOM 原型机的标称功率为 700 W，磁场强度为 200 G，称为 S-helicon 的新型谐振天线在 13.25 MHz 频率下运行，天线的管理功率优化至低于 100 W 的极低范围。提出了永磁体不同排列方式，磁场强度范围400-1100 G。</p>
<p>HDTL 使用磁场强度为 100-200 G 的电磁体，工作范围为 200-800 W。射频天线的工作频率为 13.25 MHz。实验结果检测到使用氩推进剂时的稳态电流、预期推力高达 6 mN 和比冲 800 S。</p>
<p>迷你螺旋推进器实验（mHTX）投射了具有单磁体配置的准直等离子体羽流，这对于电力推进应用具有潜力。不同的测量技术证明，微型螺旋在原子Ar和分子N2上产生真实的推力。与 HDTL 相比，其高度电离的推进剂的燃料利用率高达 90%。采用单磁体配置，气体沿着介电石英管流动，天线包围着它。标称工作功率范围为 700-1000 W。</p>
<p>天线工作频率为13.25 MHz。 mHTX 的实验结果显示，比冲为 2000 S，效率为 12%，推力高达 20 mN。使用不同的控制方式改变等离子束速度使得螺旋最适合可变比冲。</p>
<p>表 2.HPT 主要原型：推进性能总结。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296044033346700.png"></p>
<p>可变比冲磁等离子火箭（VASIMR）是一种混合推进器。目前，Ad Astra Rocket Co.正在开发中。它并不完全被视为螺旋等离子体推进器，但它使用螺旋等离子体源来产生等离子体。离子回旋共振为等离子体提供能量并通过磁性喷嘴加速，相反，产生推力。标称工作功率200kW，推力效率达到近50%，可产生3N的推力。射频工作功率估计约为 30 kW。需要&gt;1T的相当大的磁场，这只能通过超导磁体来实现。热行为也是一个重要问题。高温影响磁体的最佳运行，解释了不同轨道的太阳辐射效应。</p>
<h1 id="3-Helicon-推进器的工作原理"><a href="#3-Helicon-推进器的工作原理" class="headerlink" title="3. Helicon 推进器的工作原理"></a>3. Helicon 推进器的工作原理</h1><p>Helicon 等离子体推进器原型的特征在于推进器运行时的射频功率范围和磁场强度。该设计包含了广泛的控制变量；电离室长度 L、质量流量 m、射频功率 PRF、磁场强度 B、射频频率。决定推进器性能的主要设计参数是电离室尺寸、输入质量流量、输入射频功率和频率。天线形状和位置、磁场强度。这些设计参数以微不足道的方式相互作用，并影响推进器中的整个过程，从电离到内部等离子体损失和外部膨胀。</p>
<h2 id="3-1-电离室"><a href="#3-1-电离室" class="headerlink" title="3.1.电离室"></a>3.1.电离室</h2><p>从中性气体到等离子体的有效电离发生在电离室中。中性气体推进剂沿介电石英管流动；射频天线产生电磁波传播并激发电子，使气体电离。在电离过程中，低于 5-7 eV 的低电子温度下的主要损失机制是激发、去激发或永久亚稳态。</p>
<p>为了实现有效的电离，需要高电子温度（&gt;10 eV）和小于腔室长度λ<sub>ion</sub>&lt;&lt;L的平均自由程。腔室的尺寸必须符合要求，以便电磁波模式可以在其中传播。</p>
<p>电子拉莫尔半径需要小于石英管半径 le&lt;&lt;R，以获得更好的电子磁化，从而减少壁上的等离子体损失。介电石英管具有高耐热性，并且当电子和离子到达管壁并不断沉积能量并且管暴露于恒定的热通量时热膨胀低。等离子体约束需要强磁场。磁铁、天线和管子的最佳位置是推进器高效运行所必需的。</p>
<h2 id="3-2-射频天线"><a href="#3-2-射频天线" class="headerlink" title="3.2.射频天线"></a>3.2.射频天线</h2><p>螺旋天线向等离子体产生电磁波分解功率。螺旋波被称为哨声波，一种低频波，其中 ω 低于等离子体频率 ωp，介于较低混合频率和电子回旋频率 ωc 之间，螺旋放电具有高电离效率。使用较低的射频功率 1-2 kW 可以实现相对完全电离的等离子体 η ≥ 10<sup>14</sup> cm<sup>−3</sup>。施加到天线的电流和波可以被等离子体反射，部分辐射到自由空间并被等离子体重新吸收。天线作为无功功率。高等离子体电阻和功率因数是天线优化设计的关键因素。</p>
<h2 id="3-3-超导磁体"><a href="#3-3-超导磁体" class="headerlink" title="3.3.超导磁体"></a>3.3.超导磁体</h2><p>磁场发生器是Helicon等离子体推进器的重要组成部分。螺旋等离子体推进器设计主要采用磁场存在下的射频等离子体放电。用于产生必要磁场的电磁体的优化设计是决定推进器性能和效率的关键因素之一。磁场允许电磁波穿过等离子体传播，减少等离子体对壁的损失，并为超音速等离子体膨胀创建磁性喷嘴。</p>
<h1 id="4-运作制度"><a href="#4-运作制度" class="headerlink" title="4. 运作制度"></a>4. 运作制度</h1><p>HPT推进器的流程示意图如图1所示。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296304218911400.png"></p>
<p>图 1. 迷你螺旋推进器操作示意图。</p>
<h2 id="4-1-设计限制"><a href="#4-1-设计限制" class="headerlink" title="4.1.设计限制"></a>4.1.设计限制</h2><p>用于模拟的等离子体推进器的标称值如表3所示。</p>
<p>表 3. 等离子推进器原型的标称值。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296350811008800.png"></p>
<h1 id="5-仿真-COMSOL-Multiphysics"><a href="#5-仿真-COMSOL-Multiphysics" class="headerlink" title="5. 仿真 COMSOL Multiphysics"></a>5. 仿真 COMSOL Multiphysics</h1><p>螺旋等离子体推进器设计主要采用磁场存在下的射频等离子体放电。使用跨平台 FEA 多物理软件 COMSOL Multiphysics 进行射频等离子体放电。等离子体模块模拟低温等离子体源、系统和放电。射频模块用于模拟天线电磁波传播，AC&#x2F;DC模块用于模拟磁场配置。模拟过程描述如下。</p>
<h2 id="5-1-二维几何"><a href="#5-1-二维几何" class="headerlink" title="5.1.二维几何"></a>5.1.二维几何</h2><p>仿真过程中使用的推进器的二维横截面如图2所示。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296407943786100.png"></p>
<p>图 2. 迷你螺旋推进器仿真二维草图</p>
<h2 id="5-2-模拟步骤"><a href="#5-2-模拟步骤" class="headerlink" title="5.2.模拟步骤"></a>5.2.模拟步骤</h2><h3 id="5-2-1-等离子模块："><a href="#5-2-1-等离子模块：" class="headerlink" title="5.2.1.等离子模块："></a>5.2.1.等离子模块：</h3><p>COMSOL 求解电子密度和能量密度的漂移扩散方程。 COMSOL 等离子体仿真的数学模型在数学建模部分进行了解释。</p>
<h3 id="5-2-2-磁场："><a href="#5-2-2-磁场：" class="headerlink" title="5.2.2.磁场："></a>5.2.2.磁场：</h3><p>超导磁体配置由围绕电离室的螺线管线圈组成，根据所需的磁场强度选择。螺线管线圈相应地放置，因此限制了与射频天线的相互作用。</p>
<h3 id="5-2-3-电磁波导："><a href="#5-2-3-电磁波导：" class="headerlink" title="5.2.3.电磁波导："></a>5.2.3.电磁波导：</h3><p>用于模拟的名古屋 III 型天线。天线放置在介电石英管的外部。天线长度为 100 毫米，专为氩等离子体而设计。射频天线发射频率为13.56 MHz，标称功率约为1000 W。</p>
<h2 id="5-3-数学建模"><a href="#5-3-数学建模" class="headerlink" title="5.3.数学建模"></a>5.3.数学建模</h2><p>COMSOL Multiphysics 频率瞬态研究中使用的数学模型如下所述。</p>
<p>波加热等离子体放电大多具有较高的数密度。通过求解漂移扩散方程计算电子密度和平均电子密度。电子数密度：</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296528207264600.png" alt="(1)"></p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296543468580400.png" alt="(2)"></p>
<p>n<sub>e</sub> 表示电子密度，(1&#x2F;m<sup>3</sup>)，R<sub>e</sub> 是电子速率表达式 (1&#x2F;(m<sup>3</sup>·s))， 是电子迁移率，(m<sup>2</sup>&#x2F;(V·s))，E 是电场 (V&#x2F;m)， D<sub>e</sub> 是电子扩散率。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296700142481800.png" alt="(3)"></p>
<p>电子能量密度：</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296724032807600.png" alt="(4)"></p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/296738794008700.png" alt="(5)"></p>
<p>R<sub>ɛ</sub>是非弹性碰撞引起的能量损失&#x2F;增加 (V&#x2F;m<sup>3</sup>·s)，μ<sub>ε</sub> 是电子能量迁移率 (m<sup>2</sup>&#x2F;V·s)，E是电场 (V&#x2F;m)， 是电子能量扩散率（平方米&#x2F;秒）。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297109048683300.png" alt="(6)"></p>
<p>计算静电场，</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297129282756800.png" alt="(7)"></p>
<p>高频电场在频域中计算，</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297159087542300.png" alt="(8)"></p>
<p>当等离子体电流密度和电场比较复杂时，</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297181176570800.png" alt="(9)"></p>
<p>电磁波与磁场之间的等离子体耦合。是等离子体电导率张量，是电子密度碰撞频率和磁通量的函数。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297206113418100.png" alt="(10)"></p>
<p>其中，q&#x3D; 电子电荷，me&#x3D; 电子质量，ne&#x3D; 碰撞频率，ω 是电磁场的角频率。</p>
<h2 id="5-4-截面数据-氩-Ar"><a href="#5-4-截面数据-氩-Ar" class="headerlink" title="5.4.截面数据 氩 (Ar)"></a>5.4.截面数据 氩 (Ar)</h2><p>等离子体由三种离子、电子以及大部分中性的原子和分子组成。电子和离子的密度只占中性原子和分子的一小部分，但地基等离子体核聚变除外，它是完全电离的。工业和商业应用中使用的等离子体不一定完全电离。由于中性原子和分子的高密度，它们之间以及电子和离子之间的碰撞变得显着。碰撞过程的中心参数是横截面。电子与气体粒子或离子碰撞，可能发生多种反应。电子可以使气体电离，赋予其动量，可以激发分子和离子周围电子的能级，并且可以与离子重新结合等等。在所有这些随机过程中，电子都会失去能量。中性气体 Ar 的横截面数据如表 4 所示，横截面表示电子发生碰撞时可用的面积。横截面数据允许使用电子能量分布函数 (EEDF) 计算特定反应的速率系数。</p>
<p>表 4. 氩气碰撞和反应建模。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297263457546800.png"></p>
<h1 id="6-结果与讨论"><a href="#6-结果与讨论" class="headerlink" title="6 结果与讨论"></a>6 结果与讨论</h1><p>COMSOL 求解电子密度和能量密度的漂移扩散方程。图 3 显示了沿中间横截面朝向电离室长度方向的电子密度分布。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297294527937200.png"></p>
<p>图 3. 沿电离室长度的电子能量密度分布。</p>
<p>等离子体柱内电子密度最大，约为1.8×10<sup>12</sup>cm<sup>−3</sup>。采用Nagoya III型螺旋天线，置于电离室中部环抱石英管内。射频驱动等离子体发动机的关键因素在于天线，它将初始中性气体的中性流激发成具有高电离密度的磁化等离子体。等离子体放电在天线附近开始，并向电离室的中心位置扩展。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297348063168700.png"></p>
<p>图 4. 沿电离室长度的电子温度分布。</p>
<p>电子温度分布如图4所示。最高电子温度达到2.25 eV。在磁场存在下，电子被磁化并通过回旋与中性原子碰撞。在此过程中，电子因原子碰撞而失去能量，并失去达到更高等离子体温度的能力。电子势分布如图5所示。</p>
<p><img src="/./pic/Radio-Frequency-Excited-Plasma-Discharge-Simulation-for-Potential-Helicon-Plasma-Thruster/297390222055000.png"></p>
<p>图 5. 沿电离室长度的电子势分布。</p>
<p>命名法</p>
<ul>
<li>λion 离子平均自由程 </li>
<li>ω RF 射频 </li>
<li>B 磁通密度矢量 </li>
<li>E 电场矢量 </li>
<li>EM 电磁波 </li>
<li>PRF 射频功率 </li>
<li>HPT 螺旋等离子体推进器 </li>
<li>L 电离室长度</li>
</ul>
<p>该研究的重点是<strong>永磁体的实现、优化磁体以满足所需的磁通量、工作功率范围、天线优化。</strong></p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>COMSOL</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis</title>
    <url>/2020/04/11/Redis/</url>
    <content><![CDATA[<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Nosql"><a href="#Nosql" class="headerlink" title="Nosql"></a>Nosql</h2><p>not only sql 泛指非关系型数据库</p>
<h3 id="Nosql的四大分类"><a href="#Nosql的四大分类" class="headerlink" title="Nosql的四大分类"></a>Nosql的四大分类</h3><p><strong>KV键值对</strong></p>
<p>redis</p>
<p><strong>文档型数据库（boson格式）</strong></p>
<ul>
<li><p>MongoDB<br>MongoDB是一个基于分布式文件存储的数据库，C++编写，主要用来处理大量的文档!</p>
<p>MongoDB是一个介于关系型数据库和非关系型数据中间的产品</p>
</li>
<li><p>conchDB</p>
</li>
</ul>
<p><strong>列存储数据库</strong></p>
<p>HBase</p>
<p>分布式文件系统</p>
<p><strong>图关系型数据库</strong></p>
<p>NEO4J</p>
<h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><p>1、内存存储、持久化，内存中是断电即失、所以说持久化很重要( rdb、aof )</p>
<p>2、效率高，可以用于高速缓存</p>
<p>3、发布订阅系统</p>
<p>4、地图信息分析</p>
<p>5、计时器、计数器（浏览量)</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>下包 安装 运行</p>
<h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>1、<a href="https://redis.io/">官网</a>下载压缩包</p>
<p>2、解压安装包</p>
<p><code>tar -zxvf redis-6.0.10.tar.gz</code> </p>
<p><img src="D:\bloglocal\Redis.assets\image-20210116132318923.png" alt="image-20210116132318923"></p>
<p>基本文件结构如下</p>
<p><img src="D:\bloglocal\Redis.assets\image-20210116132421492.png" alt="image-20210116132421492"></p>
<p>安装gcc：<code>yum install gcc-c++</code></p>
<p>在当前路径下<code>make</code></p>
<p>完成后再make检查一下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Shyee redis-6.0.10]<span class="comment"># make</span></span><br><span class="line"><span class="built_in">cd</span> src &amp;&amp; make all</span><br><span class="line">make[1]: Entering directory <span class="string">&#x27;/usr/local/redis-6.0.10/src&#x27;</span></span><br><span class="line">    CC Makefile.dep</span><br><span class="line"></span><br><span class="line">Hint: It<span class="string">&#x27;s a good idea to run &#x27;</span>make <span class="built_in">test</span><span class="string">&#x27; ;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">make[1]: Leaving directory &#x27;</span>/usr/local/redis-6.0.10/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[root@Shyee redis-6.0.10]# make install</span></span><br><span class="line"><span class="string">cd src &amp;&amp; make install</span></span><br><span class="line"><span class="string">make[1]: Entering directory &#x27;</span>/usr/local/redis-6.0.10/src<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Hint: It&#x27;</span>s a good idea to run <span class="string">&#x27;make test&#x27;</span> ;)</span><br><span class="line"></span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/usr/local/redis-6.0.10/src&#x27;</span></span><br><span class="line">[root@Shyee redis-6.0.10]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h4 id="redis的默认安装路径"><a href="#redis的默认安装路径" class="headerlink" title="redis的默认安装路径"></a>redis的默认安装路径</h4><p><code>user/local/bin</code></p>
<h3 id="简单的配置"><a href="#简单的配置" class="headerlink" title="简单的配置"></a>简单的配置</h3><p>将redis文件夹下的redis.configcopy到local&#x2F;bin中的rconfig文件夹(自行创建)中</p>
<h4 id="设置后台启动"><a href="#设置后台启动" class="headerlink" title="设置后台启动"></a>设置后台启动</h4><p>修改config文件中的 <code>daemonize no</code>，改为yes</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>在<code>user/local/bin</code>下，<code>redis-server rconfig/redis.conf </code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Shyee bin]<span class="comment"># redis-server rconfig/redis.conf </span></span><br><span class="line">[root@Shyee bin]<span class="comment"># redis-cli -p 6379/6235</span></span><br><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> name Shyee</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get name</span><br><span class="line"><span class="string">&quot;Shyee&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<p>如果启动不成功，则在刚刚make之后在去src中<code>make install</code> 一下</p>
<h3 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SHUTDOWN</span><br><span class="line">not connected&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<h3 id="查看redis服务是否启动"><a href="#查看redis服务是否启动" class="headerlink" title="查看redis服务是否启动"></a>查看redis服务是否启动</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Shyee ~]# ps -ef|grep redis</span><br><span class="line">root      216409       1  0 15:49 ?        00:00:00 redis-server 127.0.0.1:6379</span><br><span class="line">root      216414  216382  0 15:49 pts/1    00:00:00 redis-cli -p 6379</span><br><span class="line">root      216443  216421  0 15:50 pts/2    00:00:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>

<h3 id="benchmark-测试"><a href="#benchmark-测试" class="headerlink" title="benchmark 测试"></a>benchmark 测试</h3><p>redis 性能测试工具可选参数如下所示：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">选项</th>
<th align="left">描述</th>
<th align="left">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>-h</strong></td>
<td align="left">指定服务器主机名</td>
<td align="left">127.0.0.1</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>-p</strong></td>
<td align="left">指定服务器端口</td>
<td align="left">6379</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>-s</strong></td>
<td align="left">指定服务器 socket</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>-c</strong></td>
<td align="left">指定并发连接数</td>
<td align="left">50</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>-n</strong></td>
<td align="left">指定请求数</td>
<td align="left">10000</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>-d</strong></td>
<td align="left">以字节的形式指定 SET&#x2F;GET 值的数据大小</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>-k</strong></td>
<td align="left">1&#x3D;keep alive 0&#x3D;reconnect</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>-r</strong></td>
<td align="left">SET&#x2F;GET&#x2F;INCR 使用随机 key, SADD 使用随机值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>-P</strong></td>
<td align="left">通过管道传输 <numreq> 请求</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>-q</strong></td>
<td align="left">强制退出 redis。仅显示 query&#x2F;sec 值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>–csv</strong></td>
<td align="left">以 CSV 格式输出</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>-l</strong></td>
<td align="left">生成循环，永久执行测试</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>-t</strong></td>
<td align="left">仅运行以逗号分隔的测试命令列表。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>-I</strong></td>
<td align="left">Idle 模式。仅打开 N 个 idle 连接并等待。</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>测试100个并发链接 100000个请求</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure>

<p>部分分析</p>
<p><img src="D:\bloglocal\Redis.assets\image-20210221163231907.png" alt="image-20210221163231907"></p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>redis 默认有16个数据库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SELECT 3 --选择第三个数据库</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[3]&gt; DBSIZE --查看数据库大小</span><br><span class="line">(integer) 0</span><br></pre></td></tr></table></figure>

<p>set一个kv后</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379[3]&gt; SET name Shyee</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[3]&gt; DBSIZE</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>

<p>查看所有的key</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379[3]&gt; KEYS *</span><br><span class="line">1) &quot;name&quot;</span><br></pre></td></tr></table></figure>

<p>清空当前库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379[3]&gt; FLUSHDB</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[3]&gt; KEYS *</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure>

<p>清空全部数据库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">flushall</span><br></pre></td></tr></table></figure>

<h3 id="redis-是单线程的"><a href="#redis-是单线程的" class="headerlink" title="redis 是单线程的"></a>redis 是单线程的</h3><p>基于内存操作的 redis 的瓶颈是机器内存及网络带宽。</p>
<p>redis是c语言写的</p>
<p>redis 将所有的数据放在内存中的，所以使用单线程操作时效率最高的。对于内存，没有上下文切换，效率是最高的，多次读写实在一个cpu上的。</p>
<h2 id="redis-的基本数据类型"><a href="#redis-的基本数据类型" class="headerlink" title="redis 的基本数据类型"></a>redis 的基本数据类型</h2><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set name Shyee </span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SET age 12</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; EXISTS name #查看是否存在关键字</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; EXPIRE name 10 #设置过期时间</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ttl name #查看当前k的剩余时间</span><br><span class="line">(integer) 6</span><br><span class="line">127.0.0.1:6379&gt; ttl name</span><br><span class="line">(integer) 4</span><br><span class="line">127.0.0.1:6379&gt; ttl name</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; ttl name</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; ttl name #-2代表已经过期</span><br><span class="line">(integer) -2</span><br><span class="line">127.0.0.1:6379&gt;  get name </span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; move name 1 #将该关键字转移到1号库</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; type name #查看当前k的类型</span><br><span class="line">string</span><br><span class="line">127.0.0.1:6379&gt; TYPE age</span><br><span class="line">string</span><br></pre></td></tr></table></figure>

<h3 id="String（字符串）"><a href="#String（字符串）" class="headerlink" title="String（字符串）"></a>String（字符串）</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; APPEND name &quot; Hello&quot; #字符串的拼接，如果当前key不存在，就相当于set</span><br><span class="line">(integer) 11</span><br><span class="line">127.0.0.1:6379&gt; GET name</span><br><span class="line">&quot;Shyee Hello&quot;</span><br><span class="line">127.0.0.1:6379&gt; STRLEN name	#查看当前字符串的长度</span><br><span class="line">(integer) 11</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设计自增减</span></span><br><span class="line">127.0.0.1:6379&gt; set views 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; GET views </span><br><span class="line">&quot;0&quot;</span><br><span class="line">127.0.0.1:6379&gt; INCR views #自增</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; GET views </span><br><span class="line">&quot;1&quot;</span><br><span class="line">127.0.0.1:6379&gt; DECR views #自减</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; GET views </span><br><span class="line">&quot;0&quot;</span><br><span class="line">127.0.0.1:6379&gt; INCRBY views 10  #设置步长的增减</span><br><span class="line">(integer) 10</span><br><span class="line">127.0.0.1:6379&gt; DECRBY views 8</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; GET views </span><br><span class="line">&quot;2&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">截取</span></span><br><span class="line">127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;Shyee Hello&quot;</span><br><span class="line">127.0.0.1:6379&gt; GETRANGE name 2 5  #截取2~5</span><br><span class="line">&quot;yee &quot;</span><br><span class="line">127.0.0.1:6379&gt; GETRANGE name 0 -1 #查看全部</span><br><span class="line">&quot;Shyee Hello&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">setrange</span></span><br><span class="line">127.0.0.1:6379&gt; set k1 abcdefg</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SETRANGE k1 2 ggg #修改第二个以后的三个字符</span><br><span class="line">(integer) 7</span><br><span class="line">127.0.0.1:6379&gt; GET k1</span><br><span class="line">&quot;abgggfg&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">setex(<span class="built_in">set</span> with expire) 设置过期时间</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">setnx(<span class="built_in">set</span> <span class="keyword">if</span> not exist) 不存在设置</span></span><br><span class="line">127.0.0.1:6379&gt; SETEX k2 5 &quot;只有5秒&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; ttl k2</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; SETNX k2 &quot;ifexist&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; SETNX k2 &quot;ife&quot;</span><br><span class="line">(integer) 0 #SET 失败，因为存在了</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">一下设置很多值</span></span><br><span class="line">127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3 k4 v4</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; KEYS *</span><br><span class="line">1) &quot;k4&quot;</span><br><span class="line">2) &quot;k3&quot;</span><br><span class="line">3) &quot;k2&quot;</span><br><span class="line">4) &quot;k1&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">一下拿很多值</span></span><br><span class="line">127.0.0.1:6379&gt; MGET k1 k2 k3 k4 </span><br><span class="line">1) &quot;v1&quot;</span><br><span class="line">2) &quot;v2&quot;</span><br><span class="line">3) &quot;v3&quot;</span><br><span class="line">4) &quot;v4&quot;</span><br><span class="line">127.0.0.1:6379&gt; MSETNX k1 vv1 k5 v5</span><br><span class="line">(integer) 0  #mset是原子性的操作，要么一起成功，要么一起失败</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">对象的批量<span class="built_in">set</span></span></span><br><span class="line">127.0.0.1:6379&gt; MSET user:1:name Shyee user:1:age 13  user:3:name XY</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; MGET user:3:name user:1:name user:1:age</span><br><span class="line">1) &quot;XY&quot;</span><br><span class="line">2) &quot;Shyee&quot;</span><br><span class="line">3) &quot;13&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">取值并设置值</span></span><br><span class="line">127.0.0.1:6379&gt; getset name XY #如果不存在 则返回nil</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; GETSET name Shyee</span><br><span class="line">&quot;XY&quot;</span><br><span class="line">127.0.0.1:6379&gt; GET name</span><br><span class="line">&quot;Shyee&quot;</span><br></pre></td></tr></table></figure>

<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>redis中的list是双向链表</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lpush list1 abcd</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; rpush list1 aaa</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; get list1</span><br><span class="line">(error) WRONGTYPE Operation against a key holding the wrong kind of value</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">不能直接使用get来取list中的值</span></span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 5</span><br><span class="line">1) &quot;abcd&quot;</span><br><span class="line">2) &quot;aaa&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpush list1 a b c d e</span><br><span class="line">(integer) 7</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;e&quot;</span><br><span class="line">2) &quot;d&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;b&quot;</span><br><span class="line">5) &quot;a&quot;</span><br><span class="line">6) &quot;abcd&quot;</span><br><span class="line">7) &quot;aaa&quot;</span><br><span class="line">127.0.0.1:6379&gt; rrange 0 -1</span><br><span class="line">(error) ERR unknown command `rrange`, with args beginning with: `0`, `-1`, </span><br><span class="line">127.0.0.1:6379&gt; rpop list1 2</span><br><span class="line">1) &quot;aaa&quot;</span><br><span class="line">2) &quot;abcd&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;e&quot;</span><br><span class="line">2) &quot;d&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;b&quot;</span><br><span class="line">5) &quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpush o p q r s t</span><br><span class="line">(integer) 5</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;e&quot;</span><br><span class="line">2) &quot;d&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;b&quot;</span><br><span class="line">5) &quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpush list1 o p q r s t</span><br><span class="line">(integer) 11</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line"> 1) &quot;e&quot;</span><br><span class="line"> 2) &quot;d&quot;</span><br><span class="line"> 3) &quot;c&quot;</span><br><span class="line"> 4) &quot;b&quot;</span><br><span class="line"> 5) &quot;a&quot;</span><br><span class="line"> 6) &quot;o&quot;</span><br><span class="line"> 7) &quot;p&quot;</span><br><span class="line"> 8) &quot;q&quot;</span><br><span class="line"> 9) &quot;r&quot;</span><br><span class="line">10) &quot;s&quot;</span><br><span class="line">11) &quot;t&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpop list1 5</span><br><span class="line">1) &quot;e&quot;</span><br><span class="line">2) &quot;d&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;b&quot;</span><br><span class="line">5) &quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;p&quot;</span><br><span class="line">3) &quot;q&quot;</span><br><span class="line">4) &quot;r&quot;</span><br><span class="line">5) &quot;s&quot;</span><br><span class="line">6) &quot;t&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pop到最后没值了，键就不存在了</span></span><br></pre></td></tr></table></figure>

<p>rpoplpush <key1><key2> ：从key1 的右边pop一个值放到key2的左边</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;p&quot;</span><br><span class="line">3) &quot;q&quot;</span><br><span class="line">4) &quot;r&quot;</span><br><span class="line">5) &quot;s&quot;</span><br><span class="line">6) &quot;t&quot;</span><br><span class="line">127.0.0.1:6379&gt; lpush list2 a</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpush list2 b c d</span><br><span class="line">(integer) 4</span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">2) &quot;b&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;d&quot;</span><br><span class="line">127.0.0.1:6379&gt; rpoplpush list1 list2</span><br><span class="line">&quot;t&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;t&quot;</span><br><span class="line">2) &quot;a&quot;</span><br><span class="line">3) &quot;b&quot;</span><br><span class="line">4) &quot;c&quot;</span><br><span class="line">5) &quot;d&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;p&quot;</span><br><span class="line">3) &quot;q&quot;</span><br><span class="line">4) &quot;r&quot;</span><br><span class="line">5) &quot;s&quot;</span><br></pre></td></tr></table></figure>

<p>取指定下标元素</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lindex list1 4</span><br><span class="line">&quot;s&quot;</span><br></pre></td></tr></table></figure>

<p>获取list长度</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; llen list1</span><br><span class="line">(integer) 5</span><br></pre></td></tr></table></figure>

<p>linsert</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; linsert list1 before &quot;p&quot; ddd</span><br><span class="line">(integer) 6</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;ddd&quot;</span><br><span class="line">3) &quot;p&quot;</span><br><span class="line">4) &quot;q&quot;</span><br><span class="line">5) &quot;r&quot;</span><br><span class="line">6) &quot;s&quot;</span><br><span class="line">127.0.0.1:6379&gt; linsert list1 after &quot;p&quot; aaa</span><br><span class="line">(integer) 7</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;ddd&quot;</span><br><span class="line">3) &quot;p&quot;</span><br><span class="line">4) &quot;aaa&quot;</span><br><span class="line">5) &quot;q&quot;</span><br><span class="line">6) &quot;r&quot;</span><br><span class="line">7) &quot;s&quot;</span><br></pre></td></tr></table></figure>

<p>lrem key n value</p>
<p>从左边删除n个value</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lrem list1 2 &quot;aaa&quot;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;ddd&quot;</span><br><span class="line">3) &quot;p&quot;</span><br><span class="line">4) &quot;q&quot;</span><br><span class="line">5) &quot;r&quot;</span><br><span class="line">6) &quot;s&quot;</span><br></pre></td></tr></table></figure>

<p>lset 替换</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lset list1 4 qwerewr</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;o&quot;</span><br><span class="line">2) &quot;ddd&quot;</span><br><span class="line">3) &quot;p&quot;</span><br><span class="line">4) &quot;q&quot;</span><br><span class="line">5) &quot;qwerewr&quot;</span><br><span class="line">6) &quot;s&quot;</span><br></pre></td></tr></table></figure>

<h4 id="list-的数据结构"><a href="#list-的数据结构" class="headerlink" title="list 的数据结构"></a>list 的数据结构</h4><p>list的数据结构是quicklist</p>
<p>当列表中元素较少的时候会使用一块连续的存储空间，这个结构是ziplist，压缩列表</p>
<p>当数据量比较多的时候才会使用quicklist ，是一种双向链表</p>
<p>且redis 将ziplist组合起来组成quicklist</p>
]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>redis</tag>
        <tag>非关系型</tag>
      </tags>
  </entry>
  <entry>
    <title>Relationship of mode transitions and standing waves in helicon plasmas</title>
    <url>/2023/10/25/Relationship-of-mode-transitions-and-standing-waves-in-helicon-plasmas/</url>
    <content><![CDATA[<p>螺旋子等离子体中的模式转换与驻波的关系</p>
<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>螺旋波等离子体（HWP）源具有众所周知的高效率和高等离子体密度的优点，在许多领域有着广泛的应用。其关键机制在于模式转换，这也是多年来的一个突出问题。我们建立了一个流体模拟模型，并进一步开发了北京大学螺旋放电（PHD）代码。首次在模拟中再现了单回路天线放电的模式转换（也称为密度跃迁）。研究发现，大振幅 SHWs 是模式转换的原因，这与用于激光发生的谐振腔的模式转换类似。本文试图给出一个完整而定量的驻留谐振波（SHW）共振理论，以解释模式转换与 SHW 的关系。驻留螺旋波共振理论合理地解释了螺旋子等离子体中的几个关键问题，如模式转换和高效功率吸收，有助于改进未来的等离子体生成方法。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>PPT</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM</title>
    <url>/2021/02/24/SSM%E6%95%B4%E5%90%88/</url>
    <content><![CDATA[<h2 id="创建一个web项目"><a href="#创建一个web项目" class="headerlink" title="创建一个web项目"></a>创建一个web项目</h2><p>添加JAR</p>
<p>commons-dbcp2-2.9.0.jar<br>commons-logging-1.2.jar<br>commons-pool2-2.11.1.jar<br>log4j-1.2.17.jar<br>log4j-1.2.17-javadoc.jar<br>mybatis-3.5.8.jar<br>mybatis-spring-2.0.6.jar<br>mysql-connector-java-8.0.27.jar<br>spring-aop-5.3.14.jar<br>spring-beans-5.3.14.jar<br>spring-context-5.3.14.jar<br>spring-context-support-5.3.14.jar<br>spring-core-5.3.14.jar<br>spring-expression-5.3.14.jar<br>spring-jdbc-5.3.14.jar<br>spring-tx-5.3.14.jar<br>spring-web-5.3.14.jar</p>
<p>创建相关User表</p>
<p>Mybatis的Conf.xml可以不配置，全部交给Spring去管理</p>
<p>在src中创建applicationContext.xml</p>
<p>创建mapper，并写一个userMapper.xml</p>
<p>web.xml中引入applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- web项目中引入Spring --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- needed for ContextLoaderListener --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Bootstraps the root web application context before servlet initialization --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="整合SM"><a href="#整合SM" class="headerlink" title="整合SM"></a>整合SM</h2><h2 id="整合SS"><a href="#整合SS" class="headerlink" title="整合SS"></a>整合SS</h2><p>加入jar</p>
<p>spring-webmvc-5.3.14.jar</p>
<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 整合SpringMVC --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- The front controller of this Spring Web application, responsible for handling all application requests --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext-controller.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写SpringMVC配置文件</p>
<p>applicationContext-controller.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置视图解析器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/views/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置注解驱动 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>MVC</tag>
        <tag>SSM</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring - MyBatis</title>
    <url>/2021/02/24/Spring%20-%20MyBatis/</url>
    <content><![CDATA[<h2 id="思路"><a href="#思路" class="headerlink" title="思路:"></a>思路:</h2><p>SqlSessionFactory -&gt; SqlSession -&gt;StudentMapper -&gt;CRUD<br>可以发现，MyBatis最终是通过SqlSessionFactory来操作数据库,<br>Spring整合MyBatis其实就是将MyBatis的SqlSessionFactory交给Spring</p>
<p>SM整合步骤:</p>
<ol>
<li>jar<br>mybatis-spring. jar<br>spring- tx. jar<br>spring- jdbc. jar<br>spring- -expression. jar<br>spr ing- context- support. jar<br>spring- -core. jar<br>spring- -context. jar<br>spr ing- -beans. jar<br>spring- aop. jar<br>spring- web. jar<br>commons- logging. jar</li>
</ol>
<p>commons-dbcp. jar </p>
<p>ojdbc. jar </p>
<p>mybatis. jar </p>
<p>log4j. jar</p>
<p>commons - pool. jar</p>
<p>2.类-表</p>
<p>3.MyBatis配置文件conf. xml</p>
<p>4.通过mapper. xml将类、表建立映射关系</p>
<p>5.之前使mybatis：用conf.xml -&gt;SqlSessionFacotry</p>
<p>现在整合的时候，需要通过Spring管理SqlSessionFacotry，因此产生sqlSessionFacotry 所需要的数据库信息不在放入conf.xml而需要放入spring配置文件中</p>
<p>配置Spring配置文件(applicationContext. xml ) </p>
<p>6.使用Spring-MyBatis整合产物开发程序</p>
<p>目标:通过spring产 生mybatis最终操作需要的动态mapper对 象(StudentMapper对象)</p>
<p>Spring产生动态mapper对象有三种方法:<br>a. DAO层实现类继承SqlSessionDaoSupport类</p>
<p>SqlSessionDaoSupport类提供了一个 属性SqlSession</p>
<h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>![image-20220128223004647](D:\bloglocal\Spring - MyBatis.assets\image-20220128223004647.png)</p>
<h2 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 加载db.properties --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;config&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;locations&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:db.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp2.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;maxIdle&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 在Spring中整合SqlSession --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 加载mybatis配置文件 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;property name=&quot;configLocation&quot; value=&quot;classpath:conf.xml&quot;&gt;&lt;/property&gt; --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 加载映射文件路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">value</span>=<span class="string">&quot;club/shyee/mapper/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 注入 --&gt;</span><span class="comment">&lt;!-- 第一种方式实现 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean id=&quot;userDao&quot; class=&quot;club.shyee.dao.impl.UserDaoImpl&quot;&gt; 需要将sqlsessionfactory配到Dao里 </span></span><br><span class="line"><span class="comment">		&lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactoryBean&quot;&gt;&lt;/property&gt; </span></span><br><span class="line"><span class="comment">		&lt;/bean&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 第二种方式，直接使用mybatis提供的mapper实现类 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean id=&quot;userDao&quot;</span></span><br><span class="line"><span class="comment">		class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;property name=&quot;mapperInterface&quot;</span></span><br><span class="line"><span class="comment">			value=&quot;club.shyee.dao.IUserDao&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">		&lt;property name=&quot;sqlSessionFactory&quot;</span></span><br><span class="line"><span class="comment">			ref=&quot;sqlSessionFactoryBean&quot;&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	&lt;/bean&gt; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 第三种方式，批量产生Mapper 批量产生的Mapper在SpringIOC中的id值默认是接口名(首字母小写)--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span></span></span><br><span class="line"><span class="tag">			<span class="attr">value</span>=<span class="string">&quot;sqlSessionFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定批量产生哪个包 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;club.shyee.mapper,club.shyee.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;club.shyee.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>采用第三种方式，不走Dao层，人家直接写好了。</p>
<p>而且不用conf.xml，因为直接加载到IOC中了</p>
<p>db.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">url</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">user</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">password</span></span><br><span class="line"><span class="attr">maxIdle</span>=<span class="string">1000</span></span><br></pre></td></tr></table></figure>



<h2 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> club.shyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> uId;</span><br><span class="line"><span class="keyword">private</span> String uName;</span><br><span class="line"><span class="keyword">private</span> String uPass;</span><br><span class="line"><span class="keyword">private</span> String phone;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getuId</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> uId;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setuId</span><span class="params">(<span class="type">int</span> uId)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.uId = uId;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getuName</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> uName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setuName</span><span class="params">(String uName)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.uName = uName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getuPass</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> uPass;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setuPass</span><span class="params">(String uPass)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.uPass = uPass;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> phone;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.phone = phone;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;User [uId=&quot;</span> + uId + <span class="string">&quot;, uName=&quot;</span> + uName + <span class="string">&quot;, uPass=&quot;</span> + uPass + <span class="string">&quot;, phone=&quot;</span> + phone + <span class="string">&quot;, email=&quot;</span> + email + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> uId, String uName, String uPass, String phone, String email)</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">	<span class="built_in">this</span>.uId = uId;</span><br><span class="line">	<span class="built_in">this</span>.uName = uName;</span><br><span class="line">	<span class="built_in">this</span>.uPass = uPass;</span><br><span class="line">	<span class="built_in">this</span>.phone = phone;</span><br><span class="line">	<span class="built_in">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h2><p>UserMapper.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> club.shyee.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> club.shyee.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryUserById</span><span class="params">(<span class="type">int</span> uId)</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>userMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;club.shyee.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">&quot;club.shyee.entity.User&quot;</span>&gt;</span></span><br><span class="line">		select * from user where uId=$&#123;uId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;club.shyee.entity.User&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		insert into user(uName,uPass,phone,email) values(#&#123;uName&#125;,#&#123;uPass&#125;,#&#123;phone&#125;,#&#123;email&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="service"><a href="#service" class="headerlink" title="service"></a>service</h2><p>接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> club.shyee.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> club.shyee.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类</p>
<p>set方法必要</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> club.shyee.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> club.shyee.entity.User;</span><br><span class="line"><span class="keyword">import</span> club.shyee.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> club.shyee.service.IUserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> UserMapper <span class="title function_">getUserMapper</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> userMapper;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserMapper</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Service 实现类中的User&quot;</span>+user);</span><br><span class="line">		userMapper.addUser(user);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>写一个测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> club.shyee.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> club.shyee.entity.User;</span><br><span class="line"><span class="keyword">import</span> club.shyee.service.IUserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;测试&quot;</span>);</span><br><span class="line">		test1();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">		ApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;classpath:applicationContext.xml&quot;</span>);</span><br><span class="line">		<span class="type">IUserService</span> <span class="variable">userService</span> <span class="operator">=</span>(IUserService)context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">		User user=<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;老刘&quot;</span>,<span class="string">&quot;12596874&quot;</span>,<span class="string">&quot;14523654254&quot;</span>,<span class="string">&quot;ttt@qq.com&quot;</span>);</span><br><span class="line">		userService.addUser(user);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我放了两个打印，一个在service层一个在Dao层，会发现，application Context会自动写好了Dao的过程，所以不会打印出dao层的数据。即不用设计dao层。</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring web 开发</title>
    <url>/2021/02/24/Spring%20web%20%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<p>至少需要7个jar</p>
<p><img src="D:\bloglocal\image-20210123154134146.png" alt="image-20210123154134146"></p>
<p>新建一个动态web项目</p>
<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>SpringWeb1<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 指定IOC容器的位置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置Spring-web.jar提供的监听器，此监听器可以在服务器启动时，初始化IOC容器 初始化IOC容器，必须告诉此容器的位置：contextparam --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>新建一个<code>applicationContext</code></p>
<p>启动tomcat</p>
<p><code>信息: Loading XML bean definitions from class path resource [applicationContext.xml]</code></p>
<p>加载多个XML</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 指定IOC容器的位置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span></span><br><span class="line">		classpath:applicationContext.xml,</span><br><span class="line">		classpath:applicationContext-*.xml</span><br><span class="line">		<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 加载多个applicationContext --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>或者</p>
<p>在主配置文件中</p>
<p><code>&lt;import resource=&quot;applicationContext-Controller.xml&quot;/&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;applicationContext-Controller.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring 入门</title>
    <url>/2021/01/18/Spring%20%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1 id="Spring-入门"><a href="#Spring-入门" class="headerlink" title="Spring 入门"></a>Spring 入门</h1><h2 id="简单工厂"><a href="#简单工厂" class="headerlink" title="简单工厂"></a>简单工厂</h2><p>实例：学生学习课程</p>
<p>创建课程工厂、课程接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.newinstance;</span><br><span class="line"><span class="comment">//课程接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ICourse</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.newinstance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaCourse</span> <span class="keyword">implements</span> <span class="title class_">ICourse</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;java课程&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.newinstance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HtmlCourse</span> <span class="keyword">implements</span> <span class="title class_">ICourse</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;html课程&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>课程工厂</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.shyee.factory;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.HtmlCourse;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.ICourse;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.JavaCourse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> ICourse <span class="title function_">getCourse</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name.equals(<span class="string">&quot;java&quot;</span>) ? <span class="keyword">new</span> <span class="title class_">JavaCourse</span>() : name.equals(<span class="string">&quot;html&quot;</span>)?<span class="keyword">new</span> <span class="title class_">HtmlCourse</span>():<span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>学生类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.HtmlCourse;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.ICourse;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.newinstance.JavaCourse;</span><br><span class="line"><span class="keyword">import</span> top.shyee.factory.CourseFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> stuNo;</span><br><span class="line">	<span class="keyword">private</span> String stuName;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuNo</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuNo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuNo</span><span class="params">(<span class="type">int</span> stuNo)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuNo = stuNo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getStuName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuName</span><span class="params">(String stuName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuName = stuName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuAge;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuAge</span><span class="params">(<span class="type">int</span> stuAge)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Student [stuNo=&quot;</span> + stuNo + <span class="string">&quot;, stuName=&quot;</span> + stuName + <span class="string">&quot;, stuAge=&quot;</span> + stuAge + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 学生学习课程</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		ICourse course1=CourseFactory.getCourse(name);</span><br><span class="line">		course1.learn();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<p>public class Test1 {<br>    public static void main(String[] args) {<br>        StudentlearnwithFactory();<br>    }</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		StudentlearnwithFactory();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">StudentlearnwithFactory</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.learn(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">	&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果：java课程</p>
<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p>超级工厂，可以放各种对象。控制反转，也成为DI（依赖注入）</p>
<p>使用IOC实现以上操作</p>
<p>配置XML–添加三个bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;genge&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;JavaCourse&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.newinstance.JavaCourse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HtmlCourse&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.newinstance.HtmlCourse&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>重写学生的learn方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">		<span class="type">ICourse</span> <span class="variable">course</span> <span class="operator">=</span>(ICourse)context.getBean(name);</span><br><span class="line">		course.learn();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>写个测试方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">StudentlearnwithIOC</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">		student.learn(<span class="string">&quot;JavaCourse&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：java课程</p>
<h2 id="依赖注入（DI）"><a href="#依赖注入（DI）" class="headerlink" title="依赖注入（DI）"></a>依赖注入（DI）</h2><h3 id="set注入"><a href="#set注入" class="headerlink" title="set注入"></a>set注入</h3><p>property</p>
<p>创建teacher和course类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Teacher [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String courseName;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> courseHour;</span><br><span class="line"><span class="keyword">private</span> Teacher teacher;<span class="comment">//依赖于teacher</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getCourseName</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> courseName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourseName</span><span class="params">(String courseName)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.courseName = courseName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCourseHour</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> courseHour;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourseHour</span><span class="params">(<span class="type">int</span> courseHour)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.courseHour = courseHour;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Teacher <span class="title function_">getTeacher</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> teacher;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTeacher</span><span class="params">(Teacher teacher)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.teacher = teacher;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Course [courseName=&quot;</span> + courseName + <span class="string">&quot;, courseHour=&quot;</span> + courseHour + <span class="string">&quot;, teacher=&quot;</span> + teacher + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>加入到IOC中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Teacher&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Shyee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Course&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;JAVA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseHour&quot;</span> <span class="attr">value</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>写一个测试类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">testDI</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">	<span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> (Teacher) context.getBean(<span class="string">&quot;teacher&quot;</span>);</span><br><span class="line">	<span class="type">Course</span> <span class="variable">course</span> <span class="operator">=</span> (Course) context.getBean(<span class="string">&quot;course&quot;</span>);</span><br><span class="line">	System.out.println(course);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：Course [courseName&#x3D;JAVA, courseHour&#x3D;13, teacher&#x3D;Teacher [name&#x3D;Shyee, age&#x3D;12]]</p>
<p>赋值默认是set方法</p>
<h3 id="构造方法注入"><a href="#构造方法注入" class="headerlink" title="构造方法注入"></a>构造方法注入</h3><p>constructor</p>
<p>修改xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Teacher&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- index 指定参数位置</span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;Shyeee&quot; index=&quot;0&quot;&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;15&quot; index=&quot;1&quot;&gt;&lt;/constructor-arg&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- name指定参数</span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;Shyeee&quot; name=&quot;name&quot;&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;15&quot; name=&quot;age&quot;&gt;&lt;/constructor-arg&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定类型 </span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;Shyeee&quot; type=&quot;String&quot;&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">&lt;constructor-arg value=&quot;15&quot; type=&quot;int&quot;&gt;&lt;/constructor-arg&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 默认 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;Shyeee&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;15&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Course&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;PYTHON&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;15&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>加入构造方法</p>
<p>Course</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Course</span><span class="params">(String courseName, <span class="type">int</span> courseHour, Teacher teacher)</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">	<span class="built_in">this</span>.courseName = courseName;</span><br><span class="line">	<span class="built_in">this</span>.courseHour = courseHour;</span><br><span class="line">	<span class="built_in">this</span>.teacher = teacher;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Course</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Teacher</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">	<span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行结果：Course [courseName&#x3D;PYTHON, courseHour&#x3D;15, teacher&#x3D;Teacher [name&#x3D;Shyeee, age&#x3D;15]]</p>
<h3 id="P命名空间"><a href="#P命名空间" class="headerlink" title="P命名空间"></a>P命名空间</h3><p><code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Teacher&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;Shyeeee&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Course&quot;</span> <span class="attr">p:courseName</span>=<span class="string">&quot;ORACLE&quot;</span> <span class="attr">p:courseHour</span>=<span class="string">&quot;1&quot;</span> <span class="attr">p:teacher-ref</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：Course [courseName&#x3D;ORACLE, courseHour&#x3D;1, teacher&#x3D;Teacher [name&#x3D;Shyeeee, age&#x3D;14]]</p>
<h2 id="各种类型的注入"><a href="#各种类型的注入" class="headerlink" title="各种类型的注入"></a>各种类型的注入</h2><h3 id="Arrays-amp-List-amp-Map-amp-Properties-amp-Set"><a href="#Arrays-amp-List-amp-Map-amp-Properties-amp-Set" class="headerlink" title="Arrays&amp;List&amp;Map&amp;Properties&amp;Set"></a>Arrays&amp;List&amp;Map&amp;Properties&amp;Set</h3><p>创建包含各种类型的类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AllcollectionType</span> &#123;</span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"><span class="keyword">private</span> String[] array;</span><br><span class="line"><span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line"><span class="keyword">private</span> Map&lt;String, String&gt; map;</span><br><span class="line"><span class="keyword">private</span> Properties properties;</span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.list = list;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String[] getArray() &#123;</span><br><span class="line">	<span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setArray</span><span class="params">(String[] array)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.array = array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getSet</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> set;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSet</span><span class="params">(Set&lt;String&gt; set)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.set = set;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getMap</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMap</span><span class="params">(Map&lt;String, String&gt; map)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.map = map;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Properties <span class="title function_">getProperties</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> properties;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.properties = properties;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">	String ss=<span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(String s:array) &#123;</span><br><span class="line">		ss=ss+s+<span class="string">&quot;,&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ss=<span class="string">&quot;[&quot;</span>+ss+<span class="string">&quot;]&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;AllcollectionType [list=&quot;</span> + list + <span class="string">&quot;\n array=&quot;</span> + ss + <span class="string">&quot;\n set=&quot;</span> + set + <span class="string">&quot;\n map=&quot;</span> + map</span><br><span class="line">			+ <span class="string">&quot;\n properties=&quot;</span> + properties + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;collectionType&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.AllcollectionType&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;array&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>I<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>A<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>M<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>S<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>H<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>Y<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>E<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>E<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>NI<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">value</span>&gt;</span>ni<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>C<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">value</span>&gt;</span>c<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">value</span>&gt;</span>E<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">value</span>&gt;</span>e<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;TO&quot;</span>&gt;</span>to<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;ME&quot;</span>&gt;</span>me<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;ET&quot;</span>&gt;</span>et<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>Y<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>O<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">value</span>&gt;</span>U<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>set和array都可以用list标签，相反也可，但是建议用相应标签</p>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">testcollectionType</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">		<span class="type">AllcollectionType</span> <span class="variable">a</span> <span class="operator">=</span> (AllcollectionType) context.getBean(<span class="string">&quot;collectionType&quot;</span>);</span><br><span class="line">		System.out.println(a);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p>AllcollectionType [list&#x3D;[S, H, Y, E, E]<br> array&#x3D;[I,A,M,]<br> set&#x3D;[Y, O, U]<br> map&#x3D;{NI&#x3D;ni, C&#x3D;c, E&#x3D;e}<br> properties&#x3D;{ME&#x3D;me, TO&#x3D;to, ET&#x3D;et}]</p>
<h3 id="null和空字符串"><a href="#null和空字符串" class="headerlink" title="null和空字符串"></a>null和空字符串</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 赋空值 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuNo&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- null --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">null</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 空字符串&quot;&quot; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuName&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h2><p><code>autowire=&quot;byName&quot;</code>会自动找一个id为teacher 的bean，只有对象之间的依赖关系可以自动装配</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Teacher&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Shyee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Course&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;JAVA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courseHour&quot;</span> <span class="attr">value</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：Course [courseName&#x3D;JAVA, courseHour&#x3D;13, teacher&#x3D;Teacher [name&#x3D;Shyee, age&#x3D;12]]</p>
<p><code>autowire=&quot;byType&quot;</code>按类型自动装配，寻找一个teacher类型的bean，但是有两个teacher会报错。</p>
<p><code>expected single matching bean but found 2: teacher1,teacher2</code></p>
<p><code>autowire=&quot;constructor&quot;</code>适用于构造方法中有多个依赖</p>
<p>添加全局的autowire–<code>default-autowire=&quot;byName&quot;</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">default-autowire</span>=<span class="string">&quot;byName&quot;</span></span></span><br><span class="line"><span class="tag">	&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p>配置扫描器</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">default-autowire</span>=<span class="string">&quot;byName&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置扫描器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;top.eshyee.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>用注解声明一个bean</p>
<p>相当于在xml中的<code>&lt;bean id=&quot;stuentDao&quot; class=&quot;top.eshyee.dao.StuentDaoImpl&quot;&gt;&lt;/bean&gt;</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.dao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"><span class="meta">@Component(&quot;StuentDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StuentDaoImpl</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;增加学生&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>dao层注解:@Repository</p>
<p>service层注解:@Service</p>
<p>控制器层注解:@Controller</p>
<h3 id="使用注解实现事务"><a href="#使用注解实现事务" class="headerlink" title="使用注解实现事务"></a>使用注解实现事务</h3><p>需要使用到<code>spring-tx-4.3.9.RELEASE.jar</code>、<code>ojdbc.jar</code>、<code>commons-dbcp.jar</code>、<code>commons-pool.jar</code>、<code>spring-jdbc-4.3.9.RELEASE.jar</code>、<code>aopalliance.jar</code></p>
<p>配置xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置数据库相关-事务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle.jdbc.driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;127.0.0.1:1521:ORCL&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SCOTT&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tiger&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置事务管理器-txmanager --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;txManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 增加对事务的支持 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;txManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>创建DAO层及实现类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.dao.impl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"><span class="comment">//相当于&lt;bean id=&quot;stuentDao&quot; class=&quot;top.eshyee.dao.StuentDaoImpl&quot;&gt;&lt;/bean&gt;</span></span><br><span class="line"><span class="meta">@Repository(&quot;StuentDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">IStudentDao</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;增加学生&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建service层及实现类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentService</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.service.impl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Propagation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.dao.IStudentDao;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"><span class="keyword">import</span> top.eshyee.service.IStudentService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IStudentService</span> &#123;</span><br><span class="line">	IStudentDao studentDao ;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Transactional(readOnly = false ,propagation = Propagation.REQUIRED)</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">		studentDao.addStudent(student);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> IStudentDao <span class="title function_">getStudentDao</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> studentDao;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStudentDao</span><span class="params">(IStudentDao studentDao)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.studentDao = studentDao;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入到IOC</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.dao.impl.StudentDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentService&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">class</span>=<span class="string">&quot;top.eshyee.service.impl.StudentServiceImpl&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;studentDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;studentDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>面向方面编程</p>
<h3 id="前置通知"><a href="#前置通知" class="headerlink" title="前置通知"></a>前置通知</h3><p>每当执行add之前自动执行的方法</p>
<p>准备jar</p>
<p><code>aopalliance.jar</code>、<code>aspectjweaver-1.5.3.jar</code></p>
<p>编写前置通知</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogBefore</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;前置通知&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置前置通知</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置前置通知 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logBefore&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.aop.LogBefore&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 将addstudent方法与通知进行关联 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logBefore&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">testAOP</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">		IStudentService studentService= (IStudentService) context.getBean(<span class="string">&quot;studentService&quot;</span>);</span><br><span class="line">		Student student=getStudent1();</span><br><span class="line">		studentService.addStudent(student);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>前置通知<br>增加学生</p>
<p>expression&#x3D;<em>“execution(…)”</em> 的常见写法</p>
<table>
<thead>
<tr>
<th>举例</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>public  boolean addStudent(org.lanqiao.entity.Student))</td>
<td>所有返回类型为boolean、参数类型为org.lanqiao.entity.Student的addStudent()方法。</td>
</tr>
<tr>
<td>public  boolean org.lanqiao.service.IStudentService.  addStudent(org.lanqiao.entity.Student)</td>
<td>org.lanqiao.service.IStudentService类（或接口）中的addStudent()方法，并且返回类型是boolean、参数类型是org.lanqiao.entity.Student</td>
</tr>
<tr>
<td>public  * addStudent(org.lanqiao.entity.Student)</td>
<td>“*”代表任意返回类型</td>
</tr>
<tr>
<td>public  void *( org.lanqiao.entity.Student)</td>
<td>“*”代表任意方法名</td>
</tr>
<tr>
<td>public  void addStudent(..)</td>
<td>“..”代表任意参数列表</td>
</tr>
<tr>
<td>*  org.lanqiao.service.<em>.</em>(..)</td>
<td>org.lanqiao.service.IStudentService包中，包含的所有方法（不包含子包中的方法）</td>
</tr>
<tr>
<td>* org.lanqiao.service..<em>.</em>(..)</td>
<td>org.lanqiao.service.IStudentService包中，包含的所有方法（包含子包中的方法）</td>
</tr>
</tbody></table>
<h3 id="后置通知"><a href="#后置通知" class="headerlink" title="后置通知"></a>后置通知</h3><p>service层添加一个新业务 <code>void deleteStudentByno(int stuNo);</code></p>
<p>添加实现方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteStudentByno</span><span class="params">(<span class="type">int</span> stuNo)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;删除学生&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>编写AOP</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAfter</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;后置通知,目标对象：&quot;</span>+target+<span class="string">&quot;,调用的方法名：&quot;</span>+method.getName()+<span class="string">&quot;,调用的参数个数：&quot;</span>+args.length+<span class="string">&quot;,方法的返回值：&quot;</span>+returnValue);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入IOC</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置后置通知 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logAfter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.aop.LogAfter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 将addstudent方法与通知进行关联 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student)) or execution(public void top.eshyee.service.impl.StudentServiceImpl.deleteStudentByno(int))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logBefore&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logAfter&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>前置通知<br>增加学生<br>后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@5b1ebf56,调用的方法名：addStudent,调用的参数个数：1,方法的返回值：null<br>前置通知<br>删除学生<br>后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@5b1ebf56,调用的方法名：deleteStudentByno,调用的参数个数：1,方法的返回值：null</p>
<h3 id="异常通知"><a href="#异常通知" class="headerlink" title="异常通知"></a>异常通知</h3><p>源码注释中：<code>Implementing classes must implement methods of the form: void afterThrowing([Method, args, target], ThrowableSubclass);</code></p>
<p>及必须实现以上方法</p>
<p>编写AOP</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.ThrowsAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogException</span> <span class="keyword">implements</span> <span class="title class_">ThrowsAdvice</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Method method, Object[] args,Object target, Throwable ex)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;异常通知，目标对象：&quot;</span>+target+<span class="string">&quot;,调用方法：&quot;</span>+method.getName()+<span class="string">&quot;，参数个数：&quot;</span>+args.length+<span class="string">&quot;,异常原因：&quot;</span>+ex.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入IOC</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置异常通知 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logException&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.aop.LogException&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 将addstudent方法与通知进行关联 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student)) or execution(public void top.eshyee.service.impl.StudentServiceImpl.deleteStudentByno(int))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logBefore&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logAfter&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logException&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>搞点异常</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteStudentByno</span><span class="params">(<span class="type">int</span> stuNo)</span> &#123;</span><br><span class="line">		<span class="type">int</span> a=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">		System.out.println(<span class="string">&quot;删除学生&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>前置通知<br>增加学生<br>后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@16414e40,调用的方法名：addStudent,调用的参数个数：1,方法的返回值：null<br>前置通知<br>异常通知，目标对象：top.eshyee.service.impl.StudentServiceImpl@16414e40,调用方法：deleteStudentByno，参数个数：1,异常原因：&#x2F; by zero<br><code>Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</code></p>
<h3 id="环绕通知"><a href="#环绕通知" class="headerlink" title="环绕通知"></a>环绕通知</h3><p>前后+异常</p>
<p>编写AOP</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAround</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;环绕通知实现的前置通知&quot;</span>);</span><br><span class="line">			result = invocation.proceed();</span><br><span class="line">			<span class="comment">// result就是目标方法如add student的返回值</span></span><br><span class="line">			System.out.println(<span class="string">&quot;环绕通知实现的后置通知,目标对象：&quot;</span> + invocation.getThis() + <span class="string">&quot;,调用的方法名：&quot;</span></span><br><span class="line">					+ invocation.getMethod().getName() + <span class="string">&quot;,调用的参数个数：&quot;</span> + invocation.getArguments() + <span class="string">&quot;,方法的返回值：&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;环绕通知实现的异常通知&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入IOC</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置环绕通知 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logAround&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.aop.LogAround&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 将addstudent方法与通知进行关联 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student)) or execution(public void top.eshyee.service.impl.StudentServiceImpl.deleteStudentByno(int))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logBefore&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logAfter&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logException&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;logAround&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>前置通知<br>环绕通知实现的前置通知<br>增加学生<br>环绕通知实现的后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@46dffdc3,调用的方法名：addStudent,调用的参数个数：[Ljava.lang.Object;@5a709816,方法的返回值：null<br>后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@46dffdc3,调用的方法名：addStudent,调用的参数个数：1,方法的返回值：null<br>前置通知<br>环绕通知实现的前置通知<br>删除学生<br>环绕通知实现的后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@46dffdc3,调用的方法名：deleteStudentByno,调用的参数个数：[Ljava.lang.Object;@78383390,方法的返回值：null<br>后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@46dffdc3,调用的方法名：deleteStudentByno,调用的参数个数：1,方法的返回值：null</p>
<h2 id="使用注解实现AOP"><a href="#使用注解实现AOP" class="headerlink" title="使用注解实现AOP"></a>使用注解实现AOP</h2><p>在XML配置扫描器以及对AOP的支持</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启注解对AOP的支持 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 开启扫描器对该包的扫描 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;top.eshyee.aop&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写AOP</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="meta">@Component(&quot;logAnnotation&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogWithAnnotation</span> &#123;</span><br><span class="line">	<span class="meta">@Before(&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myBefore</span><span class="params">(JoinPoint jp)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;注解形式--前置通知&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@AfterReturning(pointcut = &quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;, returning = &quot;returningValue&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myAfterReturning</span><span class="params">(JoinPoint jp, Object returningValue)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;注解形式--后置通知,目标对象：&quot;</span> + jp.getTarget() + <span class="string">&quot;,方法名：&quot;</span> + jp.getSignature() + <span class="string">&quot;,参数列表：&quot;</span></span><br><span class="line">				+ Arrays.toString(jp.getArgs()) + <span class="string">&quot;返回值:&quot;</span> + returningValue);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@AfterThrowing(pointcut=&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;,throwing =&quot;e&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myException</span><span class="params">(JoinPoint jp,NullPointerException e)</span> &#123;<span class="comment">//通过第二个参数来捕获特定异常如NullPointerException</span></span><br><span class="line">		System.out.println(<span class="string">&quot;注解形式--异常通知&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Around(&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myAround</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;注解形式--环绕通知--前置通知&quot;</span>);</span><br><span class="line">			pjp.proceed();</span><br><span class="line">			System.out.println(<span class="string">&quot;注解形式--环绕通知--后置通知&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;注解形式--环绕通知--异常通知&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;注解形式--环绕通知--最终通知&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@After(&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student))&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myAfter</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;注解形式--最终通知&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>注解形式–环绕通知–前置通知<br>注解形式–前置通知<br>增加学生<br>注解形式–环绕通知–后置通知<br>注解形式–环绕通知–最终通知<br>注解形式–最终通知<br>注解形式–后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@77b14724,方法名：void top.eshyee.service.IStudentService.addStudent(Student),参数列表：[Student [stuNo&#x3D;0, stuName&#x3D;genge, stuAge&#x3D;0]]返回值:null<br>删除学生</p>
<h2 id="基于SCHEMA配置"><a href="#基于SCHEMA配置" class="headerlink" title="基于SCHEMA配置"></a>基于SCHEMA配置</h2><p>类似于实现接口的方式</p>
<p>编写AOP</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.aop;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogSchema</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint jp,Object returningValue)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Schema形式--后置通知,目标对象：&quot;</span> + jp.getTarget() + <span class="string">&quot;,方法名：&quot;</span> + jp.getSignature() + <span class="string">&quot;,参数列表：&quot;</span></span><br><span class="line">				+ Arrays.toString(jp.getArgs()) + <span class="string">&quot;返回值:&quot;</span> + returningValue);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Schema后置通知&quot;</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myException</span><span class="params">(JoinPoint jp)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Schema异常通知&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">myAround</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">		Object result=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;Schema环绕前置通知&quot;</span>);</span><br><span class="line">			result=pjp.proceed();</span><br><span class="line">			System.out.println(<span class="string">&quot;Schema环绕后置通知&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;Schema环绕异常通知&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;<span class="comment">//返回目标方法的返回值</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注入IOC</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 将准备转入通知 的类纳入IOC --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logSchema&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.aop.LogSchema&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 将addstudent方法与通知进行关联 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void top.eshyee.service.impl.StudentServiceImpl.addStudent(top.eshyee.entity.Student)) or execution(public void top.eshyee.service.impl.StudentServiceImpl.deleteStudentByno(int))&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;logSchema&quot;</span> &gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturning&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;returningValue&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;myException&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;myAround&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut2&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>Schema后置通知<br>Schema环绕前置通知<br>注解形式–环绕通知–前置通知<br>注解形式–前置通知<br>增加学生<br>注解形式–后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@31000e60,方法名：void top.eshyee.service.IStudentService.addStudent(Student),参数列表：[Student [stuNo&#x3D;0, stuName&#x3D;genge, stuAge&#x3D;0]]返回值:null<br>注解形式–最终通知<br>注解形式–环绕通知–后置通知<br>注解形式–环绕通知–最终通知<br>Schema环绕后置通知<br>Schema形式–后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@31000e60,方法名：void top.eshyee.service.IStudentService.addStudent(Student),参数列表：[Student [stuNo&#x3D;0, stuName&#x3D;genge, stuAge&#x3D;0]]返回值:null<br>Schema后置通知<br>Schema环绕前置通知<br>删除学生<br>Schema环绕后置通知<br>Schema形式–后置通知,目标对象：top.eshyee.service.impl.StudentServiceImpl@31000e60,方法名：void top.eshyee.service.IStudentService.deleteStudentByno(int),参数列表：[1]返回值:null</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>IOC</tag>
        <tag>AOP</tag>
        <tag>注入</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC</title>
    <url>/2021/02/24/SpringMVC/</url>
    <content><![CDATA[<h2 id="入门-第一个SpringMVC程序"><a href="#入门-第一个SpringMVC程序" class="headerlink" title="入门-第一个SpringMVC程序"></a>入门-第一个SpringMVC程序</h2><h3 id="jars"><a href="#jars" class="headerlink" title="jars"></a>jars</h3><p>spring-aop.jar</p>
<p>spring-bean. jar</p>
<p>spring-context. jar</p>
<p>spring-core. jar</p>
<p>spring-web. jar</p>
<p>spring-webmvc. jar</p>
<p>spring-webmvc.jar</p>
<p>commons-logging</p>
<p><img src="D:\bloglocal\image-20210123222410984.png" alt="image-20210123222410984"></p>
<h3 id="配置web-xml"><a href="#配置web-xml" class="headerlink" title="配置web.xml"></a>配置web.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;3.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>SpringMVCProject<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置映射 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 使启动时自动生效 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建springmvc-xml"><a href="#创建springmvc-xml" class="headerlink" title="创建springmvc.xml"></a>创建springmvc.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 扫描有注解的包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;top.eshyee.Controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置视图解析器InternalResourceViewResolver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/views/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="index-jsp-x2F-success-jsp"><a href="#index-jsp-x2F-success-jsp" class="headerlink" title="index.jsp&#x2F;success.jsp"></a>index.jsp&#x2F;success.jsp</h3><p>在WebContent中创建index.jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=ISO-8859-1&quot;</span></span><br><span class="line">	pageEncoding=<span class="string">&quot;ISO-8859-1&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;ISO-8859-1&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;welcome&quot;</span>&gt;firstSpringMVC&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>再创建一个FOLDER起名“views”，其中创建success.jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;ISO-8859-1&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">第一个实例成功</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="编写SpringMVCController"><a href="#编写SpringMVCController" class="headerlink" title="编写SpringMVCController"></a>编写SpringMVCController</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;SpringMVCController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCController</span> &#123;</span><br><span class="line"><span class="comment">//	通过method更改请求方式,params指定请求参数中必须有的参数 如：“name”且必须为zs,&quot;age&quot;!=23</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>如果没配置错，运行成功。</p>
<h3 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h3><p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	通过method更改请求方式,params指定请求参数中必须有的参数 如：“name”且必须为zs,&quot;age&quot;!=23</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome&quot;, method = RequestMethod.POST, params = &#123; &quot;name=zs&quot;, &quot;age!=23&quot; &#125;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//限制请求头</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome2&quot;, headers = &#123;</span></span><br><span class="line"><span class="meta">			&quot;accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;,</span></span><br><span class="line"><span class="meta">			&quot;accept-encoding=gzip, deflate, br&quot; &#125;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome2</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>JSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/welcome2&quot;</span>&gt;firstSpringMVC&lt;/a&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/welcome&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;input name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">	&lt;input name=<span class="string">&quot;age&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ANT风格"><a href="#ANT风格" class="headerlink" title="ANT风格"></a>ANT风格</h3><p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	ant风格</span></span><br><span class="line"><span class="comment">//中间 任意字符*,任意目录**</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome3/**/test&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome3</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//	中间单个字符</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome4/a?c/test&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome4</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;welcome5/&#123;name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">welcome5</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span> &#123;</span><br><span class="line">		System.out.println(name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;SpringMVCController/welcome3/adas/test&quot;</span>&gt;ant风格<span class="number">1</span>&lt;/a&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/welcome4/abc/test&quot;</span>&gt;ant风格<span class="number">2</span>&lt;/a&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/welcome5/张三&quot;</span>&gt;ant风格-<span class="meta">@PathVariable</span>&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="REST-实现delete和put"><a href="#REST-实现delete和put" class="headerlink" title="REST 实现delete和put"></a>REST 实现delete和put</h3><p>controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//REST 风格--通过隐藏域区分delete和put</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testPost/&#123;name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testPost</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;增&quot;</span>+name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testDelete/&#123;name&#125;&quot; )</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testDelete</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;删&quot;</span>+name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testPut/&#123;name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testPut</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> Integer name)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;改&quot;</span>+name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testGet/&#123;name&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testGet</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;查&quot;</span>+name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value=&quot;testRest/&#123;id&#125;&quot;,method=RequestMethod.DELETE)</span></span><br><span class="line">	<span class="keyword">public</span> String  <span class="title function_">testDelete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;delete：删 &quot;</span> +id);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span> ;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;SpringMVCController/testPost/1234&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;增&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;&lt;br/&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/testDelete/1234&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;DELETE&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;删&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;&lt;br/&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/testPut/1234&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;PUT&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;改&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;&lt;br/&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/testGet/1234&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;查&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;&lt;br/&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/testRest/1234&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">		&lt;input type=<span class="string">&quot;hidden&quot;</span>  name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;DELETE&quot;</span>/&gt;</span><br><span class="line">		&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;删&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>过滤器 xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 增加一个过滤器，目的是给普通浏览器增加delete|put的支持 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilte<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilte<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testParam&quot;)</span></span><br><span class="line"><span class="comment">//	required = false,defaultValue = &quot;2&quot; 可以不传uage ，默认值为2，客户端没有传入uage参数才能生效defaultValue配置</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(<span class="meta">@RequestParam(&quot;uname&quot;)</span> String uname,<span class="meta">@RequestParam(value=&quot;uage&quot;,required = false,defaultValue = &quot;2&quot;)</span> Integer uage)</span> &#123;</span><br><span class="line">		System.out.println(uname);</span><br><span class="line">		System.out.println(uage);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testRequestHeader&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testRequestHeader</span><span class="params">(<span class="meta">@RequestHeader(&quot;Accept-Language&quot;)</span> String al)</span> &#123;</span><br><span class="line">		System.out.println(al);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testCookieValue&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testCookieValue</span><span class="params">(<span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String jSessionId)</span> &#123;</span><br><span class="line">		System.out.println(jSessionId);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	使用原生态的ServletAPI--直接使用</span></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testSerlet&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testSerlet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">		System.out.println(request);</span><br><span class="line">		System.out.println(response);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>JSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;/form&gt;</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;SpringMVCController/testParam&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt;</span><br><span class="line">	&lt;!-- &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uage&quot;</span>&gt; --&gt;</span><br><span class="line">		&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/testRequestHeader&quot;</span>&gt;testRequestHeader&lt;/a&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/testCookieValue&quot;</span>&gt;testCookieValue&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;SpringMVCController/testSerlet&quot;</span>&gt;testSerlet&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="对象的接收-级联"><a href="#对象的接收-级联" class="headerlink" title="对象的接收(级联)"></a>对象的接收(级联)</h3><p>创建一个级联对象</p>
<p>Student</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> Address address;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> Address <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> address;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.address = address;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, address=&quot;</span> + address + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Address</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String homeAddress;</span><br><span class="line">	<span class="keyword">private</span> String schoolAddress;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getHomeAddress</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> homeAddress;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHomeAddress</span><span class="params">(String homeAddress)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.homeAddress = homeAddress;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getSchoolAddress</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> schoolAddress;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSchoolAddress</span><span class="params">(String schoolAddress)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.schoolAddress = schoolAddress;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Address [homeAddress=&quot;</span> + homeAddress + <span class="string">&quot;, schoolAddress=&quot;</span> + schoolAddress + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testObject&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testObject</span><span class="params">(Student student)</span> &#123;<span class="comment">//属性必须跟表单内的值一样</span></span><br><span class="line">		System.out.println(student);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;SpringMVCController/testObject&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	name:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">	age:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">	schooladdress:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;address.schoolAddress&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">	homeaddress:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;address.homeAddress&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h3><p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testModelAndView&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span> &#123;</span><br><span class="line">		ModelAndView mv=<span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">		Student student=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.setName(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">		student.setAge(<span class="number">1</span>);</span><br><span class="line">		mv.addObject(<span class="string">&quot;student&quot;</span>,student);<span class="comment">//相当于request.setAttribute</span></span><br><span class="line">		<span class="keyword">return</span> mv;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>Success JSP</p>
<p>用于展示拿到的值</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">$&#123;requestScope.student.age&#125;--$&#123;requestScope.student.name&#125;--</span><br></pre></td></tr></table></figure>

<p>测试页面的JSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;SpringMVCController/testModelAndView&quot;</span>&gt;testModelAndView&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br></pre></td></tr></table></figure>

<p>其他方法</p>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testModelMap&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap mm)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.setName(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">		student.setAge(<span class="number">1</span>);</span><br><span class="line">		mm.put(<span class="string">&quot;student&quot;</span>, student);<span class="comment">// request域</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testMap&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.setName(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">		student.setAge(<span class="number">1</span>);</span><br><span class="line">		map.put(<span class="string">&quot;student&quot;</span>, student);<span class="comment">// request域</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping(value = &quot;testModel&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.setName(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">		student.setAge(<span class="number">1</span>);</span><br><span class="line">		model.addAttribute(<span class="string">&quot;student&quot;</span>, student);<span class="comment">// request域</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>JSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;SpringMVCController/testModelMap&quot;</span>&gt;testModelMap&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/testMap&quot;</span>&gt;testMap&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br><span class="line">	&lt;a href=<span class="string">&quot;SpringMVCController/testModel&quot;</span>&gt;testModel&lt;/a&gt;</span><br><span class="line">	&lt;br /&gt;</span><br></pre></td></tr></table></figure>

<p>如果要把request的中的对象放入session中，在类前加注解<code>@SessionAttributes</code></p>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SessionAttributes(&quot;student&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;SpringMVCController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCController</span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Success JSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">实例成功</span><br><span class="line">request:&lt;br/&gt;</span><br><span class="line">$&#123;requestScope.student.age&#125;--$&#123;requestScope.student.name&#125;--</span><br><span class="line">&lt;br/&gt;session:&lt;br/&gt;</span><br><span class="line">$&#123;sessionScope.student.age&#125;--$&#123;sessionScope.student.name&#125;--</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="视图、视图解析器"><a href="#视图、视图解析器" class="headerlink" title="视图、视图解析器"></a>视图、视图解析器</h3><p>视图的顶级接口:View<br>视图解析器:ViewResolver常见的视图和解析器:<br>InternalResourceView、InternalResourceViewResolverpublic class JstlView extends InternalResourceView:<br>springMVC解析jsp时会默认使用InternalResourceView，如果发现Jsp中包含了jstl语言，则自动转为JstlView</p>
<p>JstlView 可以解析jst1\实现国际化操作</p>
<h3 id="mvc-view-controller"><a href="#mvc-view-controller" class="headerlink" title="mvc:view-controller"></a>mvc:view-controller</h3><p>在xml使用该标签可不用写Controller</p>
<p>xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;Controller/testMvcViewController&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>index jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;Controller/testMvcViewController&quot;</span> &gt;testMvcViewController&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>但是只写mvc:view-controller 会自动屏蔽Controller</p>
<p>若需共存，需加标签</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="指定跳转方式"><a href="#指定跳转方式" class="headerlink" title="指定跳转方式"></a>指定跳转方式</h3><p>forward: 请求转发  redirect: 重定向</p>
<p>此种方式不会被视图解析器加上前缀和后缀</p>
<p>Controller中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">&quot;forward:/views/success.jsp&quot;</span>;<span class="comment">//或者redirect</span></span><br></pre></td></tr></table></figure>

<h3 id="处理静态资源"><a href="#处理静态资源" class="headerlink" title="处理静态资源"></a>处理静态资源</h3><p>在SpringMVC中，直接访问静态资源，会 报404</p>
<p>原因：所有请求在web.xml中被拦截，交给SpringMVC的DispatchServlet处理，然而该处理方式是直接找requestmapping了，但静态资源没有配requestmapping，所以404.</p>
<p>解决方式：不需要mvc的，交给tomcat的servlet处理</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 该注解会使SpringMVC在收到没有对应requestmapping的请求时，将请求交给服务器的servlet处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>Spring自带一些常见的类型转换</p>
<p>可以自定义</p>
<p>i 编写自定义转换器的类(实现convert接口)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConverter</span> <span class="keyword">implements</span> <span class="title class_">Converter</span>&lt;String,Student&gt;&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">convert</span><span class="params">(String source)</span> &#123;<span class="comment">//字符串--返回学生--传入格式1-zs-23</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(Integer.parseInt(source.split(<span class="string">&quot;-&quot;</span>)[<span class="number">0</span>]),source.split(<span class="string">&quot;-&quot;</span>)[<span class="number">1</span>],Integer.parseInt(source.split(<span class="string">&quot;-&quot;</span>)[<span class="number">2</span>]));</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ii 将编写的转换器加入到MVC中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 将转换器纳入SpringIOC容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;MyConverter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.converter.MyConverter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2 将MyConverter纳入到SpringMVC提供的bean中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;MyConverter&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将conversionServiceFactoryBean注册到annotationdriven中 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 此配置是mvc的基础配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>iii 测试</p>
<p>jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;SpringMVCController/testConverter&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">	studentInfo:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;studentInfo&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">	&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testConverter&quot;)</span> </span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testConverter</span><span class="params">(<span class="meta">@RequestParam(&quot;studentInfo&quot;)</span> Student student)</span> &#123;</span><br><span class="line">		System.out.println(student);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据格式化"><a href="#数据格式化" class="headerlink" title="数据格式化"></a>数据格式化</h3><p>SpringMVC提供注解实现格式化</p>
<p>配置标签</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置数据格式化 注解所依赖的bean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;formattingConversionServiceFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;formattingConversionServiceFactoryBean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加注解</p>
<p>Student类中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Date birthday;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring</title>
    <url>/2021/02/24/Spring/</url>
    <content><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p>因为之前重装系统忘记备份，放在c盘的代码和笔记(因为一般喜欢写到注释里)，全没了。再加上一年没有敲代码，只能是从0开始敲一套完整的体系了。</p>
<span id="more"></span>

<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><p>jar去<a href="https://repo.spring.io/webapp/#/artifacts/browse/tree/General/libs-release-local/org/springframework/spring/5.3.3/spring-5.3.3-dist.zip">这个网址</a>下载，找最新版</p>
<p>下载后解压</p>
<p><img src="D:\bloglocal\Spring.assets\QQ图片20210116214711.png" alt="QQ图片20210116214711"></p>
<p>解压后差不多是这个样子：</p>
<p><img src="D:\bloglocal\Spring.assets\image-20210116214923201.png" alt="image-20210116214923201"></p>
<p>一堆jar</p>
<p><img src="D:\bloglocal\Spring.assets\image-20210116214946140.png" alt="image-20210116214946140"></p>
<p>开发简单的Spring 必须用的5个jar</p>
<p>spring-aop、spring-beans、spring-context、spring-core、spring-expression</p>
<p>以及一个日志的jar</p>
<p>commons-logging</p>
<p>创建一个Java项目作为重新开始的第一个测试项目</p>
<p>这里IDE选用eclipse（简单好上手），提前装好sts插件。</p>
<p><img src="D:\bloglocal\Spring.assets\image-20210116215406732.png" alt="image-20210116215406732"></p>
<h2 id="编写“第一个”SpringIOC程序"><a href="#编写“第一个”SpringIOC程序" class="headerlink" title="编写“第一个”SpringIOC程序"></a>编写“第一个”SpringIOC程序</h2><p>创建一个<code>applicationContext.xml</code> </p>
<p>创建一个实体Student</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> stuNo;</span><br><span class="line">	<span class="keyword">private</span> String stuName;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuNo</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuNo;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuNo</span><span class="params">(<span class="type">int</span> stuNo)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuNo = stuNo;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getStuName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuName</span><span class="params">(String stuName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuName = stuName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> stuAge;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuAge</span><span class="params">(<span class="type">int</span> stuAge)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Student [stuNo=&quot;</span> + stuNo + <span class="string">&quot;, stuName=&quot;</span> + stuName + <span class="string">&quot;, stuAge=&quot;</span> + stuAge + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在Spring的applicationcontext的xml中，创建一个bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;genge&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>新建一个test</p>
<p>尝试拿取bean：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.eshyee.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.eshyee.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//Spring 上下文对象</span></span><br><span class="line">		ApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		Student student=(Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">		System.out.println(student);</span><br><span class="line">	&#125;</span><br><span class="line">	Student <span class="title function_">getStudent1</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">		student.setStuName(<span class="string">&quot;genge&quot;</span>);</span><br><span class="line">		student.setStuNo(<span class="number">0</span>);</span><br><span class="line">		student.setStuAge(<span class="number">0</span>);</span><br><span class="line">		System.out.println(student);</span><br><span class="line">		<span class="keyword">return</span> student;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>Student [stuNo&#x3D;1, stuName&#x3D;genge, stuAge&#x3D;2]</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springboot</title>
    <url>/2021/02/24/Springboot/</url>
    <content><![CDATA[<p>1.微服务: -一个项目 可以由多个小型服务构成(微服务)</p>
<ol start="2">
<li>spring boot可以快速开发微服务|</li>
</ol>
<p>a.简化j2ee开发<br>b.整个spring技术栈的整合<br>c.整个j2ee技术的整个</p>
<p>准备:<br>jdk:<br>JAVA_ HOME: jdk根 目录<br>path: jdk根目录\bin<br>classpath: . ; jdk根目录\lib<br>maven</p>
<p>MAVEN_ HOME: maven根 目录<br>path: maven根目录\bin</p>
<p>配置Maven本地仓库: mvn根 目录&#x2F; conf&#x2F; setting. xml</p>
<p>目录结构<br>resources: .<br>static:静态资源(js css图片音频视频)<br>templates:模板文件(freemarker ， thymeleaf;默认不支持jsp)</p>
<p>appl ication. properties:<br>配置文件</p>
<p>spring boot内置了tomcat， 并且不需要打成war再执行。</p>
<p>可以在appication. properties对端口号等服务端信息进行配置</p>
<p>spring boot将各个应用&#x2F;三方框架设置成了一个个“场景”stater,<br>以后要用哪个，只需要引入那个场景即可。<br>选完之后，s<br>spring<br>boot就会将该场景所需要的所有依赖自动注入。<br>例如选择<br>‘web’<br>’, spring boot就会将web相关的依赖(tomcat json) 全部引入本项目<br>@SpringBootAppl icat ion: spring boot 的主配置类</p>
<p>该注解包含:<br>@Spr i ngBootConf i guration</p>
<p>@Enabl eAutoConf i gurat ion 使spring boot可以自动配置</p>
<p>@configuration</p>
<p>表示“配置类”: 1.该类是一个配置类<br>2.加了@Configuration注解的类，会自动纳入Spring容器</p>
<p>spring boot 在启动时，会根据META- INF&#x2F;spring. factories找到相应的三方依赖</p>
<p>并将这些依赖引入该项目</p>
<p>自己写的<br>引入三方依赖(jar、配置)</p>
<p>总结:<br>编写项目时，- -般会对自己写的代码以及三方依赖进行配置。但是spring boot可以自动进行配置:<br>a:自己写的代码，spring boot通过@Spr ingBootConf igurat ion自动帮我们配置;<br>b.三方依赖通过spring- boot-autoconfigure- -2. 0.3. RELEASE. jar中的META- INF&#x2F; spring. factories进行声明，然后开启使用</p>
<p>spring-boot-autoconfigure-2.0. 3. RELEASE. jar包中包含了J2EE整合体系中需要的依赖。</p>
<p>c.如何自动装配:</p>
<p>通过观察该源码发现:<br>@Configuration:标识此类是一个配置类 、 将此类纳入springioc容器</p>
<p>如：通过HttpEncodingProperties将编码设置为了UTF_ 8</p>
<p>如何修改改编码:通过改Ht tpEncodingProperties的predfix+属性名进行修改</p>
<p>1每一个XxAutoConfiguration都有很多条件@Conditional0nXxx，当这些条件都满足时，配置生效</p>
<p>2全局配置文件中的key， 来源于某个Properties文件中的prefix+属性名</p>
<p><img src="D:\bloglocal\image-20200526090050002.png" alt="image-20200526090050002"></p>
<p>如何知道spring boot开启了哪些自动装配、禁止了哪些自动装配：application. properties中debug&#x3D;true</p>
<p>Positive matches</p>
<p>积极装配 表示spring boot自动开启的装配</p>
<p>negative matches</p>
<p>消极装配 没开启的</p>
<p>配置文件<br>作用: spring boot自动配置(约定，8080 ). 可以使用配置文件对默认得配置进行修改</p>
<p>默认全局配置文件:<br>application. properties k&#x3D;v<br>application. yml 不是一个标记文档 k:空格v ;通过垂直对齐指定层次关系 ; 默认可以不写引号; “”会将其中的转义符进行转义，其他得不会</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server :</span></span><br><span class="line">	<span class="attr">port:</span> <span class="number">8882</span></span><br><span class="line">	<span class="attr">path:</span> <span class="string">/a/b/c</span></span><br></pre></td></tr></table></figure>


<p>xml:是一个标记文档</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span>&gt;</span>8882&lt;/ port&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">path</span>&gt;</span>/a/b/c&lt;/ path&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>9.通过yam1给对象注入值:<br>注入值<br>s tudent:<br>#name: zs<br>#age: 23<br>sex: true<br>birthday: 2019&#x2F;02&#x2F;12<br>绑定:</p>
<p>@Component &#x2F;&#x2F;将此Javabean<br>@ConfigurationProperties (prefix&#x3D;” student”)<br>public class Student</p>
<p><img src="D:\bloglocal\image-20200528092519700.png" alt="image-20200528092519700"></p>
<ol start="10">
<li>@PropertySource:默认会加载applicat ion. properties&#x2F; application. yml文件中的数据;<br>例如@PropertySource (value&#x3D; {”classpath: conf. properties” } )加载conf. properties</li>
</ol>
<p>但是，@PropertySource 只能加载properties，不能加载yml</p>
<ol start="11">
<li>@ImportResource<br>spring. boot 自动装配&#x2F;自动配置.<br>spring等配置文件默认 会被spring boot 自动给配置好。<br>如果要自己编写spring等配置文件，spring boot 能否识别?默认不识别。</li>
</ol>
<p>随机占位表达式</p>
<p>$ {random. uuid} : uuid<br>$ {random. value}随机字符串.<br>$ {random. int}: 随机整型数<br>$ {random. long}: 随机长整型数<br>$ {random. int(10)}: 10以内的整型数<br>$ {random. int[1024, 65536]}: 指定随机数范围</p>
<p>13.多环境的切换(profile)</p>
<p>a properties</p>
<p>b yml</p>
<p>c.动态切换环境<br>i:通过运行参数指定环境<br>(1) STS(Eclipse) : Run Configuration - Argument - program Argument<br>–spring. profiles. active&#x3D;环境名<br>(2)命令行方式:<br>java -jar_ 项目名. jar –spring. profiles. active&#x3D;环境名<br>ii:通过vm参数指定环境<br>STS(Eclipse) : Run Configuration - Argument - program Argument<br>-Dspring. profiles. active&#x3D;环境名|</p>
<ol start="13">
<li><p>配置文件的位置</p>
<p>内部</p>
<p>properties和yml中的配置，相互补充;如果冲突，则properties优 先级高。<br>spring. boot默认能够读取的app1 ication. properties&#x2F; application. yml,这2个文件可以存在于以下<br>file:项目根目录&#x2F;config<br>file:项目根目录<br>classpath:项目根目录&#x2F;config<br>classpath:项目 根目录</p>
</li>
</ol>
<p>注意:<br>a.如果某项配置冲突，则优先级从上往下<br>b.如果不冲突，则互补结合使用</p>
<p>外部：</p>
<p>在项目Run confi guration , argumenets:<br>– spr ing. config. location&#x3D;文件路径<br>如果同一个配置同时存在于内部配置文件和外部配置文件，则外部&gt;内部</p>
<p>通过命令行调用外部配置文件<br>java -jar项目. jar – spring. config. location&#x3D;D:&#x2F; appl ication. properties</p>
<p>14.日志<br>日志框架UCL JUL jboss- logging, logback, log4j, 1og4j2, s1f4j…<br>spring boot默认选用slf4j， logback</p>
<p>spring boot默认帮我们配置好了日志，我们直接使用即可。</p>
<p>日志级别</p>
<p>TRACE&lt; DEBUG&lt; INFO&lt;WARN&lt; ERROR&lt; FATAL&lt;0FF</p>
<p>springboot默认的日志级别是info (即只打印info及之 后级别的信息</p>
<p>可以通过配置将日志信息存储到文件中logging. file&#x3D;springboot. log存储到了项目的根目录中的springboot.log中</p>
<p>也可以指定具体的日志路径: logging. file&#x3D;D:&#x2F;springboot. log<br>也可以存储到一一个文件夹中，logging. path&#x3D;D:&#x2F;log&#x2F;, 并且默认的文件名是spring. log<br>指定日志显示格式:<br>a.日志显示在console中I<br>b.日志显示在文件中</p>
<ol start="15">
<li>springboot开发Web项目 (静态资源html css js )<br>new - spring starer -设置I (选择需要的场景，web)<br>springboot是-一个jar，因此静态资源就不是再存放到webapps中，</li>
</ol>
<p>静态资源的存放路径通过WebMvcAutoConfiguration类的addResourceHandlers (）指定&#x2F;webjars</p>
<p>spring boot将静态资源存入到jar包中，引入:<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js">http://localhost:8080/webjars/jquery/3.5.1/jquery.js</a></p>
<p>如何自己写静态资源，如何放到如spring boot中?将自己写的静态资源-&gt; jar</p>
<p>推荐: springIboot约定:springboot将–些目录结构设置成静态资源存放目录</p>
<p>默认目录</p>
<p>“classpath:&#x2F;META- INF&#x2F;resources&#x2F;”，” classpath:&#x2F;resources&#x2F;”,<br>”classpath:&#x2F;static&#x2F;“， ”classpath:&#x2F;public&#x2F;”</p>
<p>注意:在以上目录存放资源文件后，访问时不 需要加前缀，直接访问即可: <a href="http://localhost/">http://localhost</a> : 8080+名字</p>
<p>设置欢迎页:<br>welcomePageHandlerMapping</p>
<p>网站中网页标签的Logo是固定名字favicon.ico</p>
<p>自定义favicon. ico :阅读源码得知:只需要将 favicon. ico文件放入任意静态资源目录中即可</p>
<p>总结: 1. 通过源码发现静态资源的目录<br>2.用静态资源:只需要将静态资源放入以上目录即可<br>3.其他特定的文件(欢迎页、ico) ，只需要根据约定放入改 目录即可</p>
<p>动态资源: JSP (spring. boot默认不支持)<br>推荐:模板引擎thymeleaf<br>网页&#x3D;模板+数据|</p>
<p>使用thymeleaf:代码在哪里写?<br>Thyme leafAutoCongifutation、<br>XxProperties<br>通过Thyme leafProperties源码得知:<br>使用thymeleaf只需要将文件放入目录: “classpath:&#x2F;templates&#x2F;“;文件的后缀:”. html”;</p>
<p>th就是替换原有html的值: th;html属性名&#x3D;值 ;</p>
<p>&#x2F;&lt;p id&#x3D;” pid” class&#x3D;” pclass’&gt;   &#x2F;</p></p>
<p>th:id&#x3D;” $ {welcome}”th:class&#x3D;” $ {welcome}”th:text&#x3D;” $<br>th:xx_ (参 见第10章Attrubite Pre…. )<br>th:text 获取文本值(不转义)<br>th:utext获取文 本值</p>
<p>除了$以外其他符号?查看 第四章Standard Express….|</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring注解开发</title>
    <url>/2020/04/22/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<h2 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h2><blockquote>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>singleton</p>
<p>单例(默认值)， 在每个SpringIOC容器中，一个bean定义对应一个对象实例</p>
<p>prototype</p>
<p>一个bean定义对应多个对象实例</p>
<p>request</p>
<p>在一次HTTP请求中,一个bean定义对应一个实例，即每次HTTP请求将会有各自的bean实例，它们依据某个bean定义创建而成。该作用域仅在基于Web的Spring ApplicationContext的情况下有效。</p>
<p>session</p>
<p>在一个HTTP Session 中，一个bean定义对应一个实例。该作用域仅在基于Web 的SpringApplicationContext的情况下有效</p>
<p>global session</p>
<p>在一个全局的HTTP Session中,一个bean定义对应一个实例。典型情况下，仅在使用portlet context的时候有效。该作用域仅在基于Web的Spring ApplicationContext的情况下有效</p>
</blockquote>
<p>注解形式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> (<span class="string">&quot;stu&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>配置文件形式</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot; com.ehshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">    value :简单类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuNo&quot;</span><span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张三&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span>&lt;/ property&gt;</span><br><span class="line">    ref:其他类型</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myaddress&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>分别对其获取两个学生 查看是否为同一个</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">stul</span> <span class="operator">=</span> (Student) context.getBean(S:<span class="string">&quot;student&quot;</span>) ;</span><br><span class="line"><span class="type">Student</span> <span class="variable">stu2</span> <span class="operator">=</span> (Student) context.getBean(S:<span class="string">&quot;student&quot;</span>) ;</span><br><span class="line">System.out.println(stul =stu2) ;</span><br></pre></td></tr></table></figure>

<p>均返回<code>true</code></p>
<p>在xml中scope默认是<code>singleton</code> 可改为<code>prototype</code>。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot; top.ehshyee.entity.Student&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>改后返回<code>false</code></p>
<p>注解中添加</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@scope(&quot;prototype&quot;)</span><span class="comment">//默认singleton</span></span><br></pre></td></tr></table></figure>

<p>对于实例产生的时机 </p>
<p>一些测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;student无参构造&quot;</span>) ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> stuNo, String stuName, <span class="type">int</span> stuAge)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.stuNo = stuNo;</span><br><span class="line">    <span class="built_in">this</span>.stuName = stuName;</span><br><span class="line">    <span class="built_in">this</span>.stuAge = stuAge;</span><br><span class="line">    <span class="comment">//有参构造</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>singleton | prototype</p>
<p>执行时机(产生bean的时机) :</p>
<p>（<strong>default</strong>）singleton:容器在初始化时，就会创建对象（唯一的一个）;以后再getBean时，不再产生新的bean.singleton也支持延迟加载(懒加载) :在第一次使用时产生。</p>
<p>prototype:容器在初始化时，不创建对象;只是在每次使用时(每次从容器获取对象时,context.getBean(Xxxx))，再创建对象，并且，每次getBean()都会创建一个新的对象。</p>
<p>延迟加载（注解形式）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@lazy</span></span><br></pre></td></tr></table></figure>

<h2 id="条件注解-–-gt-SpringBoot"><a href="#条件注解-–-gt-SpringBoot" class="headerlink" title="条件注解 –&gt;SpringBoot"></a>条件注解 –&gt;SpringBoot</h2><p>可以让某一个Bean在某些条件下加入Ioc容器，其他情况下不加IoC容器。</p>
<p>a.准备bean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnegerCar</span> <span class="keyword">implements</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OilCar</span> <span class="keyword">implements</span> <span class="title class_">Car</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.增加条件Bean：给每个Bean设置条件，必须实现Condition接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OilCarCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)</span> &#123;</span><br><span class="line">        <span class="comment">//如果当前环境的车类型是Oil，则加入OilCar</span></span><br><span class="line">        <span class="comment">//获取环境</span></span><br><span class="line">        Environment environment=conditionContext.getEnvironment();</span><br><span class="line">        String carType=environment.getProperty(<span class="string">&quot;car.type&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> carType.contains(<span class="string">&quot;oil&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnergyCarCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)</span> &#123;</span><br><span class="line">        <span class="comment">//如果当前环境的车类型是energy，则加入energyCar</span></span><br><span class="line">        <span class="comment">//获取环境</span></span><br><span class="line">        <span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> conditionContext.getEnvironment();</span><br><span class="line">        <span class="type">String</span> <span class="variable">carType</span> <span class="operator">=</span> environment.getProperty(<span class="string">&quot;car.type&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> carType.contains(<span class="string">&quot;energy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c.根据条件加入IOC容器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Conditional</span> (OilCarCondition.class)</span><br><span class="line"><span class="keyword">public</span> Car <span class="title function_">oilCar</span> <span class="params">()</span></span><br><span class="line">&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">oilCar</span>()&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Conditional</span> (EnergyCarCondition.class)</span><br><span class="line"><span class="keyword">public</span> Car <span class="title function_">energyCar</span> <span class="params">()</span></span><br><span class="line">&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">EnergyCar</span> ()&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<p>在VM option中添加参数为oil<code>-Dcar.type=oil</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> testAnnotation &#123;</span><br><span class="line">    <span class="comment">//注解方式</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span> (MyConfig.class);</span><br><span class="line">    String[] beanDefinitionNames = context.getBeanDefinitionNames();</span><br><span class="line">    <span class="keyword">for</span> (String name : beanDefinitionNames) &#123;</span><br><span class="line">        System.out.println(name) ;</span><br><span class="line">    &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="给IoC加入Bean的方法"><a href="#给IoC加入Bean的方法" class="headerlink" title="给IoC加入Bean的方法"></a>给IoC加入Bean的方法</h2><p>注解:</p>
<p>​	三层组件: 扫描器+三层注解</p>
<p>​	非三层组件@Confiquration: </p>
<ol>
<li>@Bean+返回值</li>
<li>@import</li>
<li>FactoryBean(工厂 Bean)</li>
</ol>
<h3 id="import使用"><a href="#import使用" class="headerlink" title="@import使用:"></a>@import使用:</h3><p>①直接编写到@Import中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Confiquration</span></span><br><span class="line"><span class="meta">@Import</span> ( &#123;Apple.class, Banana.class&#125; )</span><br><span class="line"><span class="comment">//bean是id 是全类名</span></span><br></pre></td></tr></table></figure>

<p>②自定义ImportSelector接口的实现类，通过selectimports方法实现,方法的返回值就是要纳入IoC容器的Bean),并告知系统自己编写的实现类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports (AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="comment">//return new string[0] ;//返回值就是要加入IOC容器的bean的全类名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="string">&quot;top.eshyee.entity.Apple&quot;</span>, <span class="string">&quot;top.eshyee.entity.Banana&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(Orage.class,MyImportSelector.class)</span></span><br></pre></td></tr></table></figure>

<p>③编写ImportBeanDefinitionRegistrar接口的实现类,重写方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title class_">ImportBeanDefinitionRegistrar</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> &#123;</span><br><span class="line">        BeanDefinition beanDefinition <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>(Orange.class) ;</span><br><span class="line">        <span class="comment">// or BeanDefinition beanDefinition new RootBeanDefinition(&quot;top.eshyee.entity.Orange&quot;) ;</span></span><br><span class="line">        registry.registerBeanDefinition(<span class="string">&quot;myorange&quot;</span>,beanDefinition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(MyImportBeanDefinitionRegistrar)</span></span><br></pre></td></tr></table></figure>

<h3 id="FactoryBean-工厂-Bean"><a href="#FactoryBean-工厂-Bean" class="headerlink" title="FactoryBean(工厂 Bean)"></a>FactoryBean(工厂 Bean)</h3><p>写注册类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getobject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Apple</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Class&lt;?&gt; getobjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> Apple.class ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>bean中实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> FactoryBean&lt;Apple&gt; <span class="title function_">myFactoryBean</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyFactoryBean</span>() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>拿myFactoryBean中的值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">object <span class="title function_">obj</span> <span class="params">(context. getBean( <span class="string">&quot;myFactoryBean&quot;</span>)</span> );</span><br><span class="line">System.out.println(obj) ;</span><br><span class="line">object <span class="title function_">obj</span> <span class="params">(context. getBean( <span class="string">&quot;&amp;myFactoryBean&quot;</span>)</span> );</span><br><span class="line">System.out.println(obj) ;</span><br></pre></td></tr></table></figure>

<p><code>&amp;</code>:不加&amp;获取的是最内部真实的Apple;</p>
<h2 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h2><p>创建(new …)、 初始化(赋初值)、….销毁(servlet)</p>
<p>方法一：</p>
<p>init destroy</p>
<p>xml :</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;StudentDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top.eshyee.dao.impl.StudentDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注解:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean(value=&quot;stu&quot;, initMethod =&quot;myInit&quot;, destroyMethod=&quot;myDestroy&quot;)</span></span><br></pre></td></tr></table></figure>

<p>IoC容器在初始化时,会自动创建对象(构造方法) -&gt;init -&gt;…..-&gt; 当容器关闭时调用destroy..</p>
<p>方法二：</p>
<p>三层组件: 扫描器+三层注解（功能性注解+MyIntToStringConverter. java转换器）@Controller、@Service、@Repository、@Component</p>
<p>JAVA规范:JSR250</p>
<p>@PostConstruct：相当于方法一的init </p>
<p>@PreDestroy：相当于方法- - 的destroy</p>
<p>1.将响应组件加入@Component注解、给初始化方法加@PostConstruct、给销毁方法加@PreDestroy</p>
<p>如果要获取@Component注解中的bean，那么该Bean的名字就是@Component (value&#x3D; “xxx”)的value值</p>
<p>调用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">MyIntToStringConverter converter= (MyIntToStringConverter) context.getBean</span><br></pre></td></tr></table></figure>

<p>方法三:</p>
<p>双接口</p>
<p>三层组件</p>
<p>InitializingBean初始化<br>DisposableBean销毁</p>
<p>初始化:只需要实现InitializingBean中 的afterPropertiesSet()方法</p>
<p>销毁:实现DisposableBean 中的destroy()方法</p>
<p>∴</p>
<p>如果是注解形式，随便写一个方法，然后加上相应注解即可</p>
<p>如果是接口形式，必须实现接口中规定的方法</p>
<p>方法四：</p>
<p>三层组件</p>
<p>单接口：</p>
<p>接口BeanPostProcessor：拦截了所有容器中的Bean</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>diffusion model</title>
    <url>/2023/09/21/diffusion-model/</url>
    <content><![CDATA[<h1 id="采样-ddpm"><a href="#采样-ddpm" class="headerlink" title="采样-ddpm"></a>采样-ddpm</h1><p>神经网络尝试在每一步都完整预测噪点</p>
<p><img src="/./pic/diffusion-model/194965571122700.png"></p>
<p>对于预测到的噪点，我们使用原有的噪点图减去预测的噪点图，就会获得一个稍微清晰一点的图片。但是它并没有完全去除所有的噪点，所以需要很多步迭代才能获得较高质量的采样。</p>
<p>但是这种的神经网络需要类似这种正态分布的噪点样本作为输入，所以在每一次迭代需要加入额外的噪点。这样有利于稳定神经网络算法来区分接近数据集的平均值的样本。意思是，如果不加相应的噪点，nn只会生成相似的样本。</p>
<p>diffusion model的nn被称为UNet</p>
<p><img src="/./pic/diffusion-model/195963722171100.png"></p>
<p>UNet可以嵌入更多的信息，包括时间信息，上下文信息。</p>
<p><img src="/./pic/diffusion-model/196162092505500.png"></p>
<h1 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h1><p>对样本加个噪点，然后让nn去算，然后相减，计算出loss，然后反向传播</p>
<p><img src="/./pic/diffusion-model/196414675189300.png"></p>
<p>为了让训练更加稳定，对每个样本选择随机的时间信息（迭代次数）。</p>
<h1 id="控制样本"><a href="#控制样本" class="headerlink" title="控制样本"></a>控制样本</h1><p>通过嵌入上下文来控制训练模型。</p>
<p><img src="/./pic/diffusion-model/197094902151800.png"></p>
<p>比如你有一张牛油果的图片，然后有一句话”一颗成熟的牛油果“，然后你可以将加噪点的图片和这句话一同放入nn进行训练。</p>
<p>此时你有一个椅子的模型，就可以预测一个牛油果椅子。</p>
<p><img src="/./pic/diffusion-model/197345597644400.png"></p>
<p>上下文是一个可以控制生成的向量，可以是一句话，也可以是几个简短的关键字。</p>
<h1 id="加速采样–ddim"><a href="#加速采样–ddim" class="headerlink" title="加速采样–ddim"></a>加速采样–ddim</h1><p>传统的采样需要很多时间步长（timestep）</p>
<p>denoising diffusion implicit models</p>
<p><img src="/./pic/diffusion-model/243419288785800.png"></p>
<p>ddim可以跳过时间步长，因为它打破了马尔卡夫假设。</p>
<p>它的本质是预测一个最终输出的粗略草图，然后通过去噪过程对其进行优化。</p>
]]></content>
      <categories>
        <category>机器学习</category>
      </categories>
      <tags>
        <tag>机器学习</tag>
        <tag>python</tag>
        <tag>diffusion model</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipse如何配置Spring</title>
    <url>/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/</url>
    <content><![CDATA[<p>仅限4.12版本以上</p>
<h1 id="eclipse如何配置Spring"><a href="#eclipse如何配置Spring" class="headerlink" title="eclipse如何配置Spring"></a>eclipse如何配置Spring</h1><h2 id="查看自己的eclipse版本号"><a href="#查看自己的eclipse版本号" class="headerlink" title="查看自己的eclipse版本号"></a>查看自己的eclipse版本号</h2><img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403115744046.png" class="" width="20200224154635459">

<p>help里找到<code>About eclipse IDE</code></p>
<p>我这里版本号是4.14</p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403115951857.png" class="" width="20200224154635459">

<h2 id="去官网的仓库"><a href="#去官网的仓库" class="headerlink" title="去官网的仓库"></a>去官网的仓库</h2><p><a href="https://github.com/spring-projects/toolsuite-distribution/wiki/Spring-Tool-Suite-3">https://github.com/spring-projects/toolsuite-distribution/wiki/Spring-Tool-Suite-3</a></p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403120115875.png" class="" width="20200224154635459">

<p>官方提供的历史版本最早的到了4.12</p>
<p>如果版本过低建议更新eclipse。</p>
<h2 id="找自己的对应的版本号"><a href="#找自己的对应的版本号" class="headerlink" title="找自己的对应的版本号"></a>找自己的对应的版本号</h2><p>以 Latest STS3 Downloads 为例</p>
<p><strong>注意用仓库下载不是这些连接</strong></p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/QQ%E5%9B%BE%E7%89%8720200403115141.png" class="" width="20200224154635459">

<p>而是这一些</p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403120449135.png" class="" width="20200224154635459">

<p>复制4.14的对应地址</p>
<p><a href="https://download.springsource.com/release/TOOLS/update/3.9.12.RELEASE/e4.14/">https://download.springsource.com/release/TOOLS/update/3.9.12.RELEASE/e4.14/</a></p>
<h2 id="打开eclipse"><a href="#打开eclipse" class="headerlink" title="打开eclipse"></a>打开eclipse</h2><p>找到Install new software–add</p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/QQ%E5%9B%BE%E7%89%8720200403114936.png" class="" width="20200224154635459">

<p>名字随便取 比如<code>Springtool</code></p>
<p>location 填地址</p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403120750526.png" class="" width="20200224154635459">

<p>点Add</p>
<img src="/2020/04/03/eclipse%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AESpring/image-20200403120805859.png" class="" width="20200224154635459">

<p>然后全选–next–agree–等待就行</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>小白</tag>
      </tags>
  </entry>
  <entry>
    <title>helicon仿真（代码）合集</title>
    <url>/2023/06/13/helicon%E4%BB%BF%E7%9C%9F%EF%BC%88%E4%BB%A3%E7%A0%81%EF%BC%89%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MyBatis进阶小练习</title>
    <url>/2020/04/01/mybatis%E5%B0%8F%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<p>环境说明：eclipse JDK13 Oracle11g</p>
<h3 id="情景说明"><a href="#情景说明" class="headerlink" title="情景说明"></a>情景说明</h3><p>公司里各个部门的员工可以进行企业项目的申报，如果项目通过企业审核，可以投入企业的项目规划环节。</p>
<p>员工可以申请项目。一个员工申请多个项目，一个项目可以有多个员工。备注：</p>
<p>项目包含的数据项（<strong>项目编号，项目名称，项目内容，项目提交的时间</strong>）</p>
<p>继续建设company数据库以及进行程序设计，完成上面关于多对多的映射案例。</p>
<p>设计三个表 </p>
<p>员工表(empinfo)</p>
<p>项目表(cproject)</p>
<p>映射表(主要用于把两个主键映射起来，为了看着舒服一点，不创建也可以)</p>
<p>测试的公用部分</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 公用部分</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">connUntil</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;conf.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sessionfactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionfactory.openSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">stuMapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">    <span class="comment">//qUserAll(stuMapper);</span></span><br><span class="line">    <span class="comment">//System.out.println(updateUserALL(stuMapper));   </span></span><br><span class="line">    <span class="comment">//System.out.println(deleteUserALL(stuMapper)+&quot;has been totally deleted.✔&quot;);</span></span><br><span class="line">    <span class="comment">//selectDepartAll(stuMapper);</span></span><br><span class="line">    <span class="comment">//System.out.println(addProject(stuMapper)+&quot;的项目已经提交✔&quot;); </span></span><br><span class="line">    <span class="comment">//System.out.println(updateProject(stuMapper)+&quot;行已经受影响✔&quot;);</span></span><br><span class="line">    <span class="comment">//System.out.println(delteProject(stuMapper)+&quot;已经被删除✔&quot;); </span></span><br><span class="line">    <span class="comment">//queryprojectWithEid(stuMapper);</span></span><br><span class="line">    <span class="comment">//queryprojectWithDid(stuMapper);</span></span><br><span class="line">    <span class="comment">//queryprojectWithPName(stuMapper);</span></span><br><span class="line">    session.commit();</span><br><span class="line">    session.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		connUntil();</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//放一个map</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title function_">giveMeAMap</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> giveMeAUser();</span><br><span class="line">		Map&lt;String, Object&gt; userMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">		userMap.put(<span class="string">&quot;UNAMEin&quot;</span>, user.getUserinfo().getuName());</span><br><span class="line">		<span class="keyword">return</span> userMap;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 放一个user</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> User <span class="title function_">giveMeAUser</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">Detail</span> <span class="variable">detail</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Detail</span>(<span class="number">3</span>, <span class="string">&quot;北京&quot;</span>, <span class="string">&quot;2085321569&quot;</span>, <span class="string">&quot;2085321569@qq.com&quot;</span>);</span><br><span class="line">		<span class="type">UserInfo</span> <span class="variable">userinfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserInfo</span>(<span class="number">3</span>, <span class="string">&quot;老张&quot;</span>, <span class="string">&quot;321321&quot;</span>);</span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(userinfo, detail);</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//放一个EMP</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> EmpInfo <span class="title function_">giveMeAEMP</span><span class="params">()</span> &#123;</span><br><span class="line">		 <span class="type">EmpInfo</span> <span class="variable">ep</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">EmpInfo</span>(<span class="number">1</span>, <span class="string">&quot;根哥&quot;</span>,<span class="number">10</span>,<span class="string">&quot;女&quot;</span>,<span class="string">&quot;12321212545&quot;</span>);</span><br><span class="line">		 <span class="keyword">return</span> ep;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>（1）申请项目，插入操作。插入一个员工申请的项目。</p>
<p>SQL端制作一个存储过程</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">PROCEDURE</span> InsertPROJECT(PNAMEin <span class="keyword">IN</span> VARCHAR2,PCONTENTin <span class="keyword">IN</span> VARCHAR2,ENAMEin <span class="keyword">IN</span> VARCHAR2,Informo <span class="keyword">OUT</span> VARCHAR2)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">n1 NUMBER;<span class="comment">--两个自增</span></span><br><span class="line">n2 NUMBER;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">select</span> PROJECTSEQ.nextval <span class="keyword">into</span> n1 <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">into</span> CPROJECT(PID,PNAME,PCONTENT,PTIME) <span class="keyword">values</span> (n1,PNAMEin,PCONTENTin,SYSDATE);</span><br><span class="line"><span class="keyword">select</span> EPMAPPERSEQ.nextval <span class="keyword">into</span> n2 <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EPMAPPER(EPID,EID,PID) <span class="keyword">VALUES</span>(n2,(<span class="keyword">SELECT</span> e.EID <span class="keyword">FROM</span> EMPINFO e <span class="keyword">WHERE</span> e.ENAME<span class="operator">=</span>ENAMEin),n1);</span><br><span class="line"><span class="keyword">SELECT</span> ENAME <span class="keyword">INTO</span> Informo <span class="keyword">FROM</span> EMPINFO e <span class="keyword">WHERE</span> e.ENAME<span class="operator">=</span>ENAMEin;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加项目 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addProject&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span>&gt;</span></span><br><span class="line">		&#123;CALL InsertPROJECT(</span><br><span class="line">                #&#123;PNAMEin,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">                #&#123;PCONTENTin,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">                #&#123;ENAMEin,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">                #&#123;Informo,jdbcType=VARCHAR,mode=OUT&#125;</span><br><span class="line">            )&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//insert一个项目</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">addProject</span><span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		Map&lt;String, Object&gt; empMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">		EProject ep=<span class="keyword">new</span> <span class="title class_">EProject</span>(<span class="string">&quot;小项目&quot;</span>,<span class="string">&quot;很小的一个项目&quot;</span>);</span><br><span class="line">		EmpInfo emp=giveMeAEMP();</span><br><span class="line">		empMap.put(<span class="string">&quot;PNAMEin&quot;</span>, ep.getpName());</span><br><span class="line">		empMap.put(<span class="string">&quot;PCONTENTin&quot;</span>, ep.getpContent());</span><br><span class="line">		empMap.put(<span class="string">&quot;ENAMEin&quot;</span>, emp.geteName());</span><br><span class="line">		stuMapper.addProject(empMap);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> (String) empMap.get(<span class="string">&quot;Informo&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>（2）修改项目，更新操作。修改一个员工申请的项目。</p>
<p>对项目信息的更新相对简单一些</p>
<p>xml中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 更新项目 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateProject&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.EProject&quot;</span>&gt;</span></span><br><span class="line">	UPDATE CPROJECT p SET p.PNAME=#&#123;pName&#125;,p.PCONTENT=#&#123;pContent&#125;,p.PTIME=SYSDATE WHERE PID=#&#123;pId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试集</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//修改项目</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">updateProject</span><span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		EProject ep=<span class="keyword">new</span> <span class="title class_">EProject</span>(<span class="number">1</span>,<span class="string">&quot;成功的小项目&quot;</span>,<span class="string">&quot;哈&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> stuMapper.updateProject(ep);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>测试结果</p>
<p>（3）删除项目，删除操作。删除一个员工申请的项目。</p>
<p>删除除了删掉项目本身以外 还应考虑删掉映射表中的映射关系</p>
<p>创建存储过程</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">PROCEDURE</span> delproject(PIDin <span class="keyword">IN</span> NUMBER,PNameout <span class="keyword">OUT</span> VARCHAR2)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">SELECT</span> PNAME <span class="keyword">INTO</span> PNameout <span class="keyword">from</span> CPROJECT <span class="keyword">WHERE</span> PID<span class="operator">=</span>PIDin ;</span><br><span class="line">  <span class="keyword">DELETE</span> <span class="keyword">FROM</span> EPMAPPER <span class="keyword">WHERE</span> PID<span class="operator">=</span>PIDin;</span><br><span class="line">	<span class="keyword">DELETE</span> <span class="keyword">FROM</span> CPROJECT <span class="keyword">WHERE</span> PID<span class="operator">=</span>PIDin;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>配置xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delteProject&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span>&gt;</span></span><br><span class="line">	&#123;CALL delproject( </span><br><span class="line">	#&#123;PIDin,jdbcType=INTEGER,mode=IN&#125;,</span><br><span class="line">		#&#123;PNameout,jdbcType=VARCHAR,mode=OUT&#125;</span><br><span class="line">		 )&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试集</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//删除项目</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> String  <span class="title function_">delteProject</span> <span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		Map&lt;String, Object&gt; userMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">		userMap.put(<span class="string">&quot;PIDin&quot;</span>, <span class="number">5</span>);</span><br><span class="line">		stuMapper.delteProject(userMap);</span><br><span class="line">		<span class="keyword">return</span> (String) userMap.get(<span class="string">&quot;PNameout&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>（4）查询项目，查询操作。进行多条件查询。根据员工编号，员工所在部门，员工的项目名称（模糊查询）等条件进行查询。</p>
<p>这里虽然使用到多对多的概念 但是mybatis目前没有真正意义上的多对多 ，需要使用到两个多对一。然后采用resultmap，这里提供另一个思路。</p>
<p>SQL端将三个表连接起来去重</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.<span class="operator">*</span>,B.EPID,C.<span class="operator">*</span> <span class="keyword">FROM</span> EMPINFO A  ,EPMAPPER B ，CPROJECT C <span class="keyword">WHERE</span> A.EID<span class="operator">=</span>B.EID <span class="keyword">AND</span> B.PID<span class="operator">=</span>C.PID</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">4</span>	<span class="number">1</span>	根哥	<span class="number">10</span>	女	<span class="number">13254621021</span>	<span class="number">7</span>	<span class="number">1</span>	成功的小项目	哈	<span class="number">2020</span><span class="number">-03</span><span class="number">-24</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">14</span></span><br><span class="line"><span class="number">2</span>	<span class="number">1</span>	小王	<span class="number">9</span>	女	<span class="number">12545236547</span>	<span class="number">5</span>	<span class="number">1</span>	成功的小项目	哈	<span class="number">2020</span><span class="number">-03</span><span class="number">-24</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">14</span></span><br><span class="line"><span class="number">1</span>	<span class="number">1</span>	小刘	<span class="number">11</span>	男	<span class="number">21326545231</span>	<span class="number">1</span>	<span class="number">1</span>	成功的小项目	哈	<span class="number">2020</span><span class="number">-03</span><span class="number">-24</span> <span class="number">17</span>:<span class="number">39</span>:<span class="number">14</span></span><br><span class="line"><span class="number">4</span>	<span class="number">1</span>	根哥	<span class="number">10</span>	女	<span class="number">13254621021</span>	<span class="number">8</span>	<span class="number">2</span>	项目二	项目二	<span class="number">2020</span><span class="number">-03</span><span class="number">-12</span> <span class="number">09</span>:<span class="number">07</span>:<span class="number">37</span></span><br><span class="line"><span class="number">2</span>	<span class="number">1</span>	小王	<span class="number">9</span>	女	<span class="number">12545236547</span>	<span class="number">4</span>	<span class="number">2</span>	项目二	项目二	<span class="number">2020</span><span class="number">-03</span><span class="number">-12</span> <span class="number">09</span>:<span class="number">07</span>:<span class="number">37</span></span><br><span class="line"><span class="number">1</span>	<span class="number">1</span>	小刘	<span class="number">11</span>	男	<span class="number">21326545231</span>	<span class="number">2</span>	<span class="number">2</span>	项目二	项目二	<span class="number">2020</span><span class="number">-03</span><span class="number">-12</span> <span class="number">09</span>:<span class="number">07</span>:<span class="number">37</span></span><br><span class="line"><span class="number">4</span>	<span class="number">1</span>	根哥	<span class="number">10</span>	女	<span class="number">13254621021</span>	<span class="number">9</span>	<span class="number">3</span>	项目三	项目三	<span class="number">2020</span><span class="number">-03</span><span class="number">-15</span> <span class="number">09</span>:<span class="number">08</span>:<span class="number">03</span></span><br><span class="line"><span class="number">2</span>	<span class="number">1</span>	小王	<span class="number">9</span>	女	<span class="number">12545236547</span>	<span class="number">6</span>	<span class="number">3</span>	项目三	项目三	<span class="number">2020</span><span class="number">-03</span><span class="number">-15</span> <span class="number">09</span>:<span class="number">08</span>:<span class="number">03</span></span><br><span class="line"><span class="number">1</span>	<span class="number">1</span>	小刘	<span class="number">11</span>	男	<span class="number">21326545231</span>	<span class="number">3</span>	<span class="number">3</span>	项目三	项目三	<span class="number">2020</span><span class="number">-03</span><span class="number">-15</span> <span class="number">09</span>:<span class="number">08</span>:<span class="number">03</span></span><br><span class="line"><span class="number">4</span>	<span class="number">1</span>	根哥	<span class="number">10</span>	女	<span class="number">13254621021</span>	<span class="number">12</span>	<span class="number">8</span>	小项目	很小的一个项目	<span class="number">2020</span><span class="number">-03</span><span class="number">-24</span> <span class="number">17</span>:<span class="number">13</span>:<span class="number">17</span></span><br></pre></td></tr></table></figure>

<p>这样关系似乎更加明显了</p>
<p>然后再在mapper.xml文件中分别写三个查询就ok了</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- project查询 EID--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryprojectWithEid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;HashMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		SELECT DISTINCT * FROM (</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;projectJoinAll&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">) WHERE EID=#&#123;eId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- project查询 DID --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryprojectWithDid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;HashMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		SELECT DISTINCT * FROM (</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;projectJoinAll&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">) WHERE DID=#&#123;dId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- project查询 模糊项目名称 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryprojectWithPName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;HashMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		SELECT DISTINCT * FROM (</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;projectJoinAll&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">) WHERE PNAME like &#x27;%$&#123;pName&#125;%&#x27;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 连接三个表 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;projectJoinAll&quot;</span>&gt;</span></span><br><span class="line">	SELECT A.*,B.EPID,C.* FROM EMPINFO A  ,EPMAPPER B ，CPROJECT C WHERE A.EID=B.EID AND B.PID=C.PID</span><br><span class="line">	<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试文件中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查询全部project相关 BY eId</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">queryprojectWithEid</span><span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		List&lt;Map&lt;String, Object&gt;&gt; map=stuMapper.queryprojectWithEid(<span class="number">1</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;根据员工编号查询&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;map.size();i++) &#123;</span><br><span class="line">			System.out.println(map.get(i));</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//查询全部project相关 BY dId</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">queryprojectWithDid</span><span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		List&lt;Map&lt;String, Object&gt;&gt; map=stuMapper.queryprojectWithDid(<span class="number">1</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;根据员工所在部门查询&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;map.size();i++) &#123;</span><br><span class="line">			System.out.println(map.get(i));</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//查询全部project相关 BY pName</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">queryprojectWithPName</span><span class="params">(UserMapper stuMapper)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">			List&lt;Map&lt;String, Object&gt;&gt; map=stuMapper.queryprojectWithPName(<span class="string">&quot;项目三&quot;</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;根据项目名称模糊查询&quot;</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;map.size();i++) &#123;</span><br><span class="line">				System.out.println(map.get(i));</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">// 公用部分</span></span><br></pre></td></tr></table></figure>

<p>测试结果</p>
<p><img src="D:\Documents\框架0324\QQ图片20200324193915.png" alt="QQ图片20200324193915"></p>
]]></content>
      <categories>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>类型处理器</tag>
        <tag>存储过程</tag>
        <tag>动态sql</tag>
        <tag>关联查询</tag>
        <tag>一对多</tag>
        <tag>log4j</tag>
        <tag>延迟加载</tag>
        <tag>二级缓存</tag>
      </tags>
  </entry>
  <entry>
    <title>Stack</title>
    <url>/2020/03/16/Stack/</url>
    <content><![CDATA[<p>只允许在一端进行插入或删除操作的线性表</p>
<h3 id="后进先出LIFO"><a href="#后进先出LIFO" class="headerlink" title="后进先出LIFO"></a>后进先出LIFO</h3><p><img src="D:\blog\source_posts\Stack\image-20200316102101311.png" alt="image-20200316102101311"></p>
<p>进栈顺序:a1-&gt;a2-&gt;a3-&gt;a4-&gt;a5</p>
<p>出栈顺序:a5-&gt;a4-&gt;a3-&gt;a2-&gt;a1</p>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><p>InitStack(&amp;S):初始化栈。构造一个空栈S，分配内存空间。<strong>创建</strong></p>
<p>DestroyStack(&amp;L):销毁栈。销毁并释放栈S所占用的内存空间。<strong>销毁</strong></p>
<p>Push(&amp;S,x):进栈，若栈S未满，则将x加入使之成为新栈顶。<strong>增</strong></p>
<p>Pop(&amp;S,&amp;x):出栈，若栈S非空，则弹出栈项元素，并用x返回。<strong>删</strong></p>
<p>GetTop(S, &amp;x):读栈顶元素。若栈S非空，则用x返回栈顶元素。<strong>查</strong><br>查栈的使用场景中大<br>多只访问栈顶元素</p>
<h4 id="其他常用操作"><a href="#其他常用操作" class="headerlink" title="其他常用操作"></a>其他常用操作</h4><p>StackEmpty(S):判断-一个栈S是否为空。若S为空，则返回true，否则返回false。</p>
<h3 id="规律"><a href="#规律" class="headerlink" title="规律"></a>规律</h3><p>n个不同元素进栈，出栈元素不同排列的个数为</p>
<p>$$ \frac{1}{n+1}\sideset{}{^n_2n}C $$</p>
<p>1&#x2F;n+1乘Cn 2n</p>
<p>上述公式称为卡特兰(Catalan) 数，可采用数学归纳法证<br>明(不要求掌握)</p>
<p>5个进栈有42种方式</p>
<h2 id="顺序栈"><a href="#顺序栈" class="headerlink" title="顺序栈"></a>顺序栈</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10</span></span><br><span class="line"><span class="comment">//定义栈中元素的最大个数</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	ElemType data [MaxSize];</span><br><span class="line">	<span class="comment">//静态数组存放栈中元素</span></span><br><span class="line">	<span class="type">int</span> top;</span><br><span class="line">	<span class="comment">//栈顶指针</span></span><br><span class="line">&#125; SqStack;</span><br></pre></td></tr></table></figure>

<p><strong>顺序存储</strong>:给各个数据元素分配连续的存储空间，大小为<code>MaxSize*sizeof(ElemType)</code>。</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//初始化栈</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitStack</span><span class="params">(SqStack &amp;S)</span>&#123;</span><br><span class="line">S.top=<span class="number">-1</span>;</span><br><span class="line"><span class="comment">//初始化栈顶指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断是否为空"><a href="#判断是否为空" class="headerlink" title="判断是否为空"></a>判断是否为空</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//判断栈空</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">StackEmpty</span><span class="params">(SqStack S)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> S.top==<span class="number">-1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//S.top==-1为空栈</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="进栈"><a href="#进栈" class="headerlink" title="进栈"></a>进栈</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10<span class="comment">//定义栈中元素的最大个数</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">ElemType data [MaxSize];<span class="comment">//静态数组存放栈中元素</span></span><br><span class="line"><span class="type">int</span> top;<span class="comment">//栈顶指针</span></span><br><span class="line">&#125; SqStack;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新元素入栈</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">Push</span><span class="params">(SqStack &amp;S , ElemType x)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(S.top==MaxSize<span class="number">-1</span>) <span class="comment">//栈满，报错</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">S.top = S.top + <span class="number">1</span>;<span class="comment">//指针先加1</span></span><br><span class="line">S.data[S.top]=x;<span class="comment">//新元素入栈</span></span><br><span class="line"><span class="comment">//相当于S.data[++S.top]=x;</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="出栈"><a href="#出栈" class="headerlink" title="出栈"></a>出栈</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//出栈操作</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">Pop</span><span class="params">(SqStack &amp;S, ElemType &amp;x)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(S.top==<span class="number">-1</span>)<span class="comment">//栈空，报错</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">x=S.data [S.top];<span class="comment">//栈顶元素先出栈</span></span><br><span class="line">S.top = S.top<span class="number">-1</span>; <span class="comment">//指针再减1</span></span><br><span class="line"><span class="comment">//相当于x=S.data[S.top--];</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="读栈顶元素"><a href="#读栈顶元素" class="headerlink" title="读栈顶元素"></a>读栈顶元素</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//读栈项元素</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">GetTop</span><span class="params">(SqStack S, ElemType &amp;x)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(S.top==<span class="number">-1</span>)<span class="comment">//栈空，报错</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">x=S.data[S.top];<span class="comment">//x记录栈顶元素</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="销毁"><a href="#销毁" class="headerlink" title="销毁"></a>销毁</h3><p>清空：<code>top=-1</code></p>
<p>回收：系统自动回收</p>
<h3 id="栈顶指针的另一种设计方式"><a href="#栈顶指针的另一种设计方式" class="headerlink" title="栈顶指针的另一种设计方式"></a>栈顶指针的另一种设计方式</h3><p>在初始化栈的时候 <code>S.top=-1</code>改为<code>S.top=0</code></p>
<p>即设定top指向下一个元素</p>
<h4 id="出栈和入栈等操作相应的改变"><a href="#出栈和入栈等操作相应的改变" class="headerlink" title="出栈和入栈等操作相应的改变"></a>出栈和入栈等操作相应的改变</h4><p><code>S.data[++S.top]=x</code>-&gt;<code>S.data[S.top++]=x</code></p>
<p><code>x=S.data[S.top--]</code>-&gt;<code>x=S.data[--S.top]</code></p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>栈的大小不可变</p>
<h2 id="共享栈"><a href="#共享栈" class="headerlink" title="共享栈"></a>共享栈</h2><p>两个栈共享一片空间</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 <span class="comment">//定义栈中元素的最大个数</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">ElemType data [MaxSize]; <span class="comment">//静态数组存放栈中元素</span></span><br><span class="line"><span class="type">int</span> top0; <span class="comment">//0号栈钱顶指针</span></span><br><span class="line"><span class="type">int</span> top1; <span class="comment">//1号栈浅顶指针</span></span><br><span class="line">&#125; ShStack;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化栈</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitStack</span><span class="params">(ShStack &amp;S)</span>&#123;</span><br><span class="line">S.top0=<span class="number">-1</span>; <span class="comment">//初始化栈顶指针</span></span><br><span class="line">S.top1=MaxSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判满</span></span><br><span class="line">top0+<span class="number">1</span>==top1</span><br></pre></td></tr></table></figure>

<h2 id="链栈"><a href="#链栈" class="headerlink" title="链栈"></a>链栈</h2><p>相当于一个规定只能从头节点一侧进行操作的单链表</p>
<h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Linknode</span>&#123;</span></span><br><span class="line">ElemType data;<span class="comment">//数据域</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Linknode</span> *<span class="title">next</span>;</span><span class="comment">//指针域</span></span><br><span class="line">&#125;*LiStack;<span class="comment">//栈类型定义</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>栈</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
        <tag>顺序栈</tag>
        <tag>共享栈</tag>
        <tag>链栈</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis缓存</title>
    <url>/2020/03/04/mybatis%20%E7%BC%93%E5%AD%98/</url>
    <content><![CDATA[<h2 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h2><h3 id="一级缓存-同一个SqlSession对象"><a href="#一级缓存-同一个SqlSession对象" class="headerlink" title="一级缓存:同一个SqlSession对象"></a>一级缓存:同一个SqlSession对象</h3><p><img src="/%5Cpic%5Cmybatis%E7%BC%93%E5%AD%98%5Cimage-20200331082951809.png" alt="image-20200331082951809"></p>
<p>MyBatis默认开启一级缓存，如果用同样的SqlSession对象查询相同的数据，则只会在第一次查询时向数据库发送SQL语句，并将查询的结果放入到SQLSESSION中(作为缓存在) ；后续再次查询该同样的对象时则直接从缓存中查询该对象即可(即省略了数据库的访问)。</p>
<p>二级缓存</p>
<p>Mybatis自带二级缓存: [同一个namespace]生成的mapper对象</p>
<p>MyBati s默认情况没有开启二级缓存，需要手工打开。</p>
<p>conf.xml中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 开启二级缓存 --&gt;</span><br><span class="line">&lt;setting name=&quot;cacheEnable&quot; value=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>mapper中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明此namespace开启二级缓存 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>异常提示：NotSerializableException可知，MyBatis的二级缓存是将对象放入硬盘文件中</p>
<p>序列化:内存-&gt;硬盘</p>
<p>反序列化:硬盘-&gt;内存</p>
<p>准备缓存的对象，必须实现了序列化接口( 如果开启的缓存<code>Namespace=&quot;top.eshyee.mapper.StudentMapper&quot; </code>可知序列化对象为Student，因此需要将Student序列化(序 列化Student类，以及Student的级联属性、和父类)</p>
<p>触发将对象写入二级缓存的时机: SqlSession对象的close()方法</p>
<p>回顾: namespace的值 就是接口的全类名(包名.类名) ，通过接口可以产生代理对象(Mapper对象)</p>
<p>–&gt;namespace决定了Mapper对象的产生</p>
<p>结论:只要产生的xxxMapper对象来自于同一个namespace，则这些对象共享二级缓存。</p>
<p>如果是同一个SqISession对象进行多次相同的查询，则直接进入一级缓存查询;</p>
<p><img src="/%5Cpic%5Cmybatis%E7%BC%93%E5%AD%98%5Cimage-20200331084348373.png" alt="image-20200331084348373"></p>
<p>如果不是同一个SqISession对象进行多次相同的查询(但是均来自同一个namespace)则进入二级缓存查询</p>
<p>如果一个namespace， 如果有多个xxMapper. xml的namespace值相同， 则通过这些xxxMapper. xml产生的xxMapper，仍然共享二级缓存。</p>
<p>禁用：</p>
<p>在需要禁用的select标签中的<code>usecache</code>属性改为<code>false</code></p>
<p>清理：与清理一级缓存的方法相同，一般执行增删改时会清理掉缓存 ，设计的原因是为了防止脏数据</p>
<p>commit();</p>
<p>commit会清理一级和二级缓存;但是清理二级缓存时，不能是查询自身的commit()</p>
<p>改标签</p>
<p>在select标签中设置<code>flushCache= &quot;true&quot;</code></p>
<p>命中率:<br>1 :0% 0.0</p>
<p>2:50% 0.5</p>
<p>3:2&#x2F;3 0.666</p>
<p>4:3&#x2F;4 0.75</p>
<p>三方提供的二级缓存:</p>
<p>ehicache、memcache</p>
<p>要想整合三方提供的二级缓存(或者自定义二级缓存) ，必须实现<code>org.apache.ibatis.cache.Cache</code>接口，该接口的默认实现类是<code>PerpetualCache</code></p>
<p>整合ehcache二级缓存:</p>
<p>Ehcache-core.jar<br>mybatis- Ehcache.jar<br>slf4j-api.jar</p>
<p>编写ehcache配置文件Ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;ehcache.xsd&quot;</span> <span class="attr">updateCheck</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">monitoring</span>=<span class="string">&quot;autodetect&quot;</span> <span class="attr">dynamicConfig</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当二级缓存的对象超过内存限制时（缓存对象的个数&gt;maxElements InMemory</span></span><br><span class="line"><span class="comment"> ），存放入的硬盘路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;D:\Ehcache&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- maxElementsInMemory:设置在内存中缓存对象的个数 </span></span><br><span class="line"><span class="comment"> maxElementsOnDisk:设置在硬盘中缓存对象的个数</span></span><br><span class="line"><span class="comment"> eternal: 设置缓存是否永远不过期</span></span><br><span class="line"><span class="comment"> overflowToDisk:当内存中缓存的对象个数超过maxElementsInMemory的时候，是否转移到硬盘中</span></span><br><span class="line"><span class="comment"> timeToIdleSeconds:当2次访问超过该值的时候，将缓存对象失效</span></span><br><span class="line"><span class="comment"> timeToliveSeconds:一个缓存对象最多存放的时间(生命周期)</span></span><br><span class="line"><span class="comment"> diskExpiryThreadIntervalSeconds:设置每隔多长时间，通过一个线程来清理硬盘中的缓存</span></span><br><span class="line"><span class="comment"> memoryStioreEvictionPolicy: 当超过缓存对象的最大值时，处理的策略 LRU，FIFO,LFU </span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> </span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;1000000&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;100&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>= <span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>= <span class="string">&quot;maxELementsInMemory&quot;</span> <span class="attr">value</span>= <span class="string">&quot;2000&quot;</span> /&gt;</span></span><br><span class="line">    可以覆盖掉默认值</span><br><span class="line"><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>mybatis</tag>
        <tag>数据库</tag>
        <tag>缓存</tag>
      </tags>
  </entry>
  <entry>
    <title>python入门2</title>
    <url>/2020/03/05/python%E5%85%A5%E9%97%A82/</url>
    <content><![CDATA[<h1 id="python入门2"><a href="#python入门2" class="headerlink" title="python入门2"></a>python入门2</h1><blockquote>
<p>列表、字典、元组、集合</p>
</blockquote>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列表</span></span><br><span class="line"><span class="comment"># 使用方括号定义列表</span></span><br><span class="line">list1=[<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;ee&#x27;</span>,<span class="number">123</span>]</span><br><span class="line"><span class="comment"># 使用内置函数</span></span><br><span class="line">list2=<span class="built_in">list</span>([<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;ee&#x27;</span>,<span class="number">123</span>])</span><br><span class="line"><span class="built_in">print</span>(list1,list2)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[‘s’, ‘h’, ‘y’, ‘ee’, 123] [‘s’, ‘h’, ‘y’, ‘ee’, 123]</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(list1[<span class="number">0</span>],list1[-<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>s ee</p>
<h5 id="获取索引"><a href="#获取索引" class="headerlink" title="获取索引"></a>获取索引</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取索引</span></span><br><span class="line"><span class="built_in">print</span>(list1.index(<span class="string">&#x27;ss&#x27;</span>),list1.index(<span class="number">123</span>))</span><br></pre></td></tr></table></figure>

<p>报错：</p>
<p>ValueError: ‘ss’ is not in list</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list3=[<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;ss&#x27;</span>,<span class="number">123</span>,<span class="number">4</span>,<span class="number">123</span>,<span class="string">&#x27;ss&#x27;</span>,<span class="string">&#x27;4&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(list3.index(<span class="number">123</span>))<span class="comment">#只返回相同元素中的第一个元素的索引</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>2</p>
<h5 id="规定查找区间"><a href="#规定查找区间" class="headerlink" title="规定查找区间"></a>规定查找区间</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#规定查找区间</span></span><br><span class="line"><span class="built_in">print</span>(list3.index(<span class="number">123</span>,<span class="number">3</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：4</p>
<h5 id="查找索引区间超过列表长度"><a href="#查找索引区间超过列表长度" class="headerlink" title="查找索引区间超过列表长度"></a>查找索引区间超过列表长度</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查找索引区间超过列表长度</span></span><br><span class="line"><span class="built_in">print</span>(list3[<span class="number">10</span>])</span><br></pre></td></tr></table></figure>

<p>报错：IndexError: list index out of range</p>
<h5 id="设置步长"><a href="#设置步长" class="headerlink" title="设置步长"></a>设置步长</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#设置步长</span></span><br><span class="line">list4=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>,<span class="number">70</span>,<span class="number">80</span>,<span class="number">90</span>,<span class="number">100</span>]</span><br><span class="line"><span class="comment">#start:stop:step</span></span><br><span class="line"><span class="built_in">print</span>(list4[<span class="number">2</span>:<span class="number">6</span>:<span class="number">2</span>])</span><br><span class="line"><span class="comment">#省略步长,默认为1</span></span><br><span class="line"><span class="built_in">print</span>(list4[<span class="number">2</span>:<span class="number">6</span>])</span><br><span class="line"><span class="built_in">print</span>(list4[<span class="number">2</span>:<span class="number">6</span>:])</span><br><span class="line"><span class="comment">#start默认从0开始</span></span><br><span class="line"><span class="built_in">print</span>(list4[:<span class="number">6</span>:])</span><br><span class="line"><span class="comment"># stop默认为最后一个</span></span><br><span class="line"><span class="built_in">print</span>(list4[::])</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[30, 50]<br>[30, 40, 50, 60]<br>[30, 40, 50, 60]<br>[10, 20, 30, 40, 50, 60]<br>[10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</p>
<h5 id="添加新的元素"><a href="#添加新的元素" class="headerlink" title="添加新的元素"></a>添加新的元素</h5><h6 id="append"><a href="#append" class="headerlink" title="append"></a>append</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加新的元素</span></span><br><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;添加新元素前&#x27;</span>,list5,<span class="built_in">id</span>(list5))</span><br><span class="line">list5.append(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;添加新元素之后&#x27;</span>,list5,<span class="built_in">id</span>(list5))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>添加新元素前 [1, 2, 3, 4] 2862260696008<br>添加新元素之后 [1, 2, 3, 4, 6] 2862260696008</p>
<h6 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;添加新元素前&#x27;</span>,list5,<span class="built_in">id</span>(list5))</span><br><span class="line">list5.append(list4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;append添加新元素之后&#x27;</span>,list5,<span class="built_in">id</span>(list5))</span><br><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list5.extend(list4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;extend添加新元素之后&#x27;</span>,list5,<span class="built_in">id</span>(list5))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>添加新元素前 [1, 2, 3, 4] 2213139002312<br>append添加新元素之后 [1, 2, 3, 4, [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]] 2213139002312<br>extend添加新元素之后 [1, 2, 3, 4, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</p>
<h6 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list5.insert(<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;insert添加新元素之后&#x27;</span>,list5)</span><br></pre></td></tr></table></figure>

<p>运行结果：insert添加新元素之后 [1, 2, 10, 3, 4]</p>
<h6 id="在某位置添加很多元素"><a href="#在某位置添加很多元素" class="headerlink" title="在某位置添加很多元素"></a>在某位置添加很多元素</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="comment"># list在任意位置添加很多元素</span></span><br><span class="line">list5[<span class="number">1</span>:]=list2</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;list添加新元素之后&#x27;</span>,list5)</span><br><span class="line"><span class="comment">#将第二个元素替换为另一个列表中的所有元素</span></span><br><span class="line">list5=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list5[<span class="number">1</span>:<span class="number">2</span>]=list2</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;list添加新元素之后&#x27;</span>,list5)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>list添加新元素之后 [1, ‘s’, ‘h’, ‘y’, ‘ee’, 123]<br>list添加新元素之后 [1, ‘s’, ‘h’, ‘y’, ‘ee’, 123, 3, 4]</p>
<h5 id="移除元素"><a href="#移除元素" class="headerlink" title="移除元素"></a>移除元素</h5><h6 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;list添加新元素之后&#x27;</span>,list5)</span><br><span class="line"><span class="comment"># remove 移除出现的第一个元素</span></span><br><span class="line">list6=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>]</span><br><span class="line">list6.remove(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(list6)</span><br><span class="line">list6.remove(<span class="number">111</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：[1, 2, 3, 4, 4, 5, 6, 1]</p>
<p>运行报错：<code>ValueError: list.remove(x): x not in list </code></p>
<h6 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 移除索引为n的元素</span></span><br><span class="line">list6.pop(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(list6)</span><br></pre></td></tr></table></figure>

<p>运行结果：[1, 2, 3, 4, 5, 6, 1]</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果不知名参数，pop将删除列表中最后一个元素</span></span><br><span class="line"><span class="built_in">print</span>(list6.pop())</span><br></pre></td></tr></table></figure>

<p>运行结果：<code>1</code></p>
<h6 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用切片删除多个元素</span></span><br><span class="line"><span class="built_in">print</span>(list6)</span><br><span class="line">list6[<span class="number">1</span>:<span class="number">3</span>]=[]</span><br><span class="line"><span class="built_in">print</span>(list6)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[1, 2, 3, 4, 5, 6]<br>[1, 4, 5, 6]</p>
<h6 id="del-amp-clear"><a href="#del-amp-clear" class="headerlink" title="del&amp;clear"></a>del&amp;clear</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># clear：清空列表</span></span><br><span class="line">list6.clear()</span><br><span class="line"><span class="built_in">print</span>(list6)</span><br><span class="line"><span class="comment"># delete：删除列表</span></span><br><span class="line"><span class="keyword">del</span> list6</span><br><span class="line"><span class="built_in">print</span>(list6)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[]</p>
<p>NameError: name ‘list6’ is not defined</p>
<h5 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改</span></span><br><span class="line">list7=[<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">list7[<span class="number">1</span>]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(list7)</span><br><span class="line">list7[<span class="number">1</span>:<span class="number">3</span>]=<span class="number">11</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(list7)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[1, 1, 4, 3, 2]<br>[1, 11, 2, 3, 3, 2]</p>
<h5 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># sort默认升序</span></span><br><span class="line">list7.sort()</span><br><span class="line"><span class="built_in">print</span>(list7)</span><br><span class="line"><span class="comment"># 降序排序</span></span><br><span class="line">list7.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(list7)</span><br><span class="line"><span class="comment"># sorted</span></span><br><span class="line">list9=<span class="built_in">sorted</span>(list7,reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;list7:&#x27;</span>,list7,<span class="string">&#x27;list8:&#x27;</span>,list8,<span class="string">&#x27;list9:&#x27;</span>,list9)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[1, 2, 2, 3, 3, 11]<br>[11, 3, 3, 2, 2, 1]<br>list7: [11, 3, 3, 2, 2, 1] list8: [1, 2, 2, 3, 3, 11] list9: [11, 3, 3, 2, 2, 1]</p>
<h5 id="生成"><a href="#生成" class="headerlink" title="生成"></a>生成</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列表生成</span></span><br><span class="line">lst=[i*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line"><span class="comment"># 产生元素为2，4，6，8，10的列表</span></span><br><span class="line">lst=[i*<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>)]</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[1, 4, 9, 16, 25, 36, 49, 64, 81]<br>[2, 4, 6, 8, 10]</p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><h4 id="创建字典"><a href="#创建字典" class="headerlink" title="创建字典"></a>创建字典</h4><h5 id="使用-创建"><a href="#使用-创建" class="headerlink" title="使用{}创建"></a>使用{}创建</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字典的创建方式</span></span><br><span class="line"><span class="comment"># 使用&#123;&#125;创建</span></span><br><span class="line">dict1=&#123;<span class="string">&quot;张三&quot;</span>:<span class="number">13</span>,<span class="string">&quot;李四&quot;</span>:<span class="number">15</span>,<span class="string">&quot;王五&quot;</span>:<span class="number">20</span>,<span class="string">&quot;赵六&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dict1,<span class="built_in">type</span>(dict1))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘张三’: 13, ‘李四’: 15, ‘王五’: 20, ‘赵六’: ‘’} &lt;class ‘dict’&gt;</p>
<h5 id="使用内置函数"><a href="#使用内置函数" class="headerlink" title="使用内置函数"></a>使用内置函数</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用内置函数dict</span></span><br><span class="line">student=<span class="built_in">dict</span>(name=<span class="string">&#x27;Shyee&#x27;</span>,age=<span class="number">22</span>)</span><br><span class="line"><span class="built_in">print</span>(student)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘name’: ‘Shyee’, ‘age’: 22}</p>
<p>创建空字典</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">d=&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="获取字典中的元素"><a href="#获取字典中的元素" class="headerlink" title="获取字典中的元素"></a>获取字典中的元素</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取字典元素</span></span><br><span class="line"><span class="built_in">print</span>(dict1[<span class="string">&#x27;张三&#x27;</span>],dict1[<span class="string">&#x27;jojo&#x27;</span>])</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">print</span>(dict1.get(<span class="string">&#x27;李四&#x27;</span>),dict1.get(<span class="string">&#x27;jojo&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(dict1.get(<span class="string">&#x27;jojo&#x27;</span>,<span class="number">30</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>13<br><code>KeyError: &#39;jojo&#39;</code></p>
<p>15 None</p>
<p>30</p>
<h4 id="判断在不在字典里"><a href="#判断在不在字典里" class="headerlink" title="判断在不在字典里"></a>判断在不在字典里</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 判断在不在字典里</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;李四&#x27;</span> <span class="keyword">in</span> dict1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;李四&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> dict1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>True<br>False</p>
<h4 id="删除字典中的元素"><a href="#删除字典中的元素" class="headerlink" title="删除字典中的元素"></a>删除字典中的元素</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除字典中的元素</span></span><br><span class="line"><span class="keyword">del</span> dict1[<span class="string">&#x27;王五&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(dict1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘张三’: 13, ‘李四’: 15, ‘赵六’: ‘’}</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#清空字典</span></span><br><span class="line">dict1.clear()</span><br><span class="line"><span class="built_in">print</span>(dict1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{}</p>
<h4 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 新增</span></span><br><span class="line">dict1[<span class="string">&#x27;jojo&#x27;</span>]=<span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(dict1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘jojo’: 20}</p>
<h4 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改</span></span><br><span class="line">dict1[<span class="string">&#x27;jojo&#x27;</span>]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(dict1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘jojo’: 1}</p>
<h4 id="获取所有的key"><a href="#获取所有的key" class="headerlink" title="获取所有的key"></a>获取所有的key</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1=&#123;<span class="string">&quot;张三&quot;</span>:<span class="number">13</span>,<span class="string">&quot;李四&quot;</span>:<span class="number">15</span>,<span class="string">&quot;王五&quot;</span>:<span class="number">20</span>,<span class="string">&quot;赵六&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 获取所有的key</span></span><br><span class="line"><span class="built_in">print</span>(dict1.keys())</span><br><span class="line"><span class="comment"># 转成列表</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(dict1.keys()))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>dict_keys([‘张三’, ‘李四’, ‘王五’, ‘赵六’])<br>[‘张三’, ‘李四’, ‘王五’, ‘赵六’]</p>
<h4 id="获取所有的值"><a href="#获取所有的值" class="headerlink" title="获取所有的值"></a>获取所有的值</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取所有的值</span></span><br><span class="line"><span class="built_in">print</span>(dict1.values())</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(dict1.values()))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>dict_values([13, 15, 20, ‘’])<br>[13, 15, 20, ‘’]</p>
<h4 id="获取所有的键值对"><a href="#获取所有的键值对" class="headerlink" title="获取所有的键值对"></a>获取所有的键值对</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取所有的键值对</span></span><br><span class="line"><span class="built_in">print</span>(dict1.items())</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(dict1.items())[<span class="number">0</span>][<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>dict_items([(‘张三’, 13), (‘李四’, 15), (‘王五’, 20), (‘赵六’, ‘’)])<br>张三</p>
<h4 id="字典的遍历"><a href="#字典的遍历" class="headerlink" title="字典的遍历"></a>字典的遍历</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字典的遍历</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> dict1:</span><br><span class="line">    <span class="built_in">print</span>(item,dict1[item],dict1.get(item))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>张三 13 13<br>李四 15 15<br>王五 20 20<br>赵六  </p>
<h4 id="字典的特点"><a href="#字典的特点" class="headerlink" title="字典的特点"></a>字典的特点</h4><p>· 字典中的所有元素都是一个key-value对， key不允许重复, value可以重复</p>
<p>· 字典中的元素是无序的</p>
<p>· 字典中的key必须是不可变对象</p>
<p>· 字典也可以根据需要动态地伸缩</p>
<p>· 字典会浪费较大的内存，是一种使用空间换时间的数据结构</p>
<h4 id="内置函数zip"><a href="#内置函数zip" class="headerlink" title="内置函数zip()"></a>内置函数zip()</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 内置函数zip()</span></span><br><span class="line"><span class="comment"># 用于将可迭代的对象作为参数，将对象中对应的元素打包成一个元组，然后返回由这些元组组成的列表</span></span><br><span class="line">items=[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>]</span><br><span class="line">codes=[<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">32</span>]</span><br><span class="line">d=&#123;item.upper():code  <span class="keyword">for</span> item,code <span class="keyword">in</span> <span class="built_in">zip</span>(items,codes)&#125;</span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{‘A’: 27, ‘B’: 28, ‘C’: 29, ‘D’: 30}</p>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><h4 id="不可变序列与可变序列"><a href="#不可变序列与可变序列" class="headerlink" title="不可变序列与可变序列"></a>不可变序列与可变序列</h4><p>不变可变序:字符串、元组<br>不变可变序列:没有增、删，改的操作<br>可变序列:列表、字典<br>可变序列:可以对序列执行增、删、改操作，对象地址不发生更改</p>
<h4 id="元组的创建"><a href="#元组的创建" class="headerlink" title="元组的创建"></a>元组的创建</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 元组的创建</span></span><br><span class="line">t=(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>,(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>),[<span class="string">&#x27;l&#x27;</span>],&#123;<span class="string">&#x27;a&#x27;</span>&#125;)</span><br><span class="line">t1=<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>,(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>),[<span class="string">&#x27;l&#x27;</span>],&#123;<span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"><span class="built_in">print</span>(t1,<span class="built_in">type</span>(t1))</span><br><span class="line">t2=<span class="built_in">tuple</span>((<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>,(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>),[<span class="string">&#x27;l&#x27;</span>],&#123;<span class="string">&#x27;a&#x27;</span>&#125;))</span><br><span class="line"><span class="built_in">print</span>(t2,<span class="built_in">type</span>(t2))</span><br><span class="line"><span class="comment"># 如果元组当中只包含一个元素，用括号创建元组的时候应加逗号</span></span><br><span class="line">s1=(<span class="string">&#x27;ss&#x27;</span>)</span><br><span class="line">s2=<span class="string">&#x27;ss&#x27;</span></span><br><span class="line">t1=(<span class="string">&#x27;tt&#x27;</span>,)</span><br><span class="line">t2=<span class="string">&#x27;tt&#x27;</span>,</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s1:&quot;</span>,s1,<span class="built_in">type</span>(s1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s2:&quot;</span>,s2,<span class="built_in">type</span>(s2))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t1:&quot;</span>,t1,<span class="built_in">type</span>(t1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;t2:&quot;</span>,t2,<span class="built_in">type</span>(t2))</span><br><span class="line"><span class="comment"># 创建空元组</span></span><br><span class="line">et=()</span><br><span class="line">et1=<span class="built_in">tuple</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;et:&quot;</span>,et,<span class="built_in">type</span>(et))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;et1:&quot;</span>,et1,<span class="built_in">type</span>(et1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行结果：</span></span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>), [<span class="string">&#x27;l&#x27;</span>], &#123;<span class="string">&#x27;a&#x27;</span>&#125;)</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>), [<span class="string">&#x27;l&#x27;</span>], &#123;<span class="string">&#x27;a&#x27;</span>&#125;) &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, (<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>), [<span class="string">&#x27;l&#x27;</span>], &#123;<span class="string">&#x27;a&#x27;</span>&#125;) &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line">s1: ss &lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line">s2: ss &lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line">t1: (<span class="string">&#x27;tt&#x27;</span>,) &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line">t2: (<span class="string">&#x27;tt&#x27;</span>,) &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line">et: () &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br><span class="line">et1: () &lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="元组的修改"><a href="#元组的修改" class="headerlink" title="元组的修改"></a>元组的修改</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果对元组中的值进行修改</span></span><br><span class="line">t=(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>,(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1&#x27;</span>),[<span class="string">&#x27;l&#x27;</span>],&#123;<span class="string">&#x27;a&#x27;</span>&#125;)</span><br><span class="line">t[<span class="number">3</span>]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<p>报错：<code>TypeError: &#39;tuple&#39; object does not support item assignment</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 向t[4]添加元素</span></span><br><span class="line">t[<span class="number">4</span>].append(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">4</span>],<span class="built_in">id</span>(t[<span class="number">4</span>]))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[‘l’] 2052995427208<br>[‘l’, 3] 2052995427208</p>
<h4 id="元组的遍历"><a href="#元组的遍历" class="headerlink" title="元组的遍历"></a>元组的遍历</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 元组的遍历</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>

<p>a<br>1<br>1<br>(‘a’, 1, ‘1’)<br>[‘l’, 3]<br>{‘a’}</p>
<h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><h4 id="集合的创建"><a href="#集合的创建" class="headerlink" title="集合的创建"></a>集合的创建</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&#x27;a&#x27;</span>,&#123;<span class="string">&#x27;s&#x27;</span>&#125;,&#123;<span class="string">&#x27;s&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<p>报错：<code>TypeError: unhashable type: &#39;set&#39;</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<p>运行结果：{1, 2, 3, ‘a’}</p>
<p><code>不能重复</code></p>
<h4 id="内置函数set"><a href="#内置函数set" class="headerlink" title="内置函数set"></a>内置函数set</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 内置函数set</span></span><br><span class="line">s=<span class="built_in">set</span>(<span class="built_in">range</span>(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>([<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="string">&quot;&quot;</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>(([<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="string">&quot;&quot;</span>])))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>(<span class="string">&#x27;Python&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>())</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>{0, 1, 2, 3, 4, 5}<br>{‘’, 3, 4, 5}<br>{‘’, 3, 4, 5}<br>{‘n’, ‘y’, ‘t’, ‘h’, ‘P’, ‘o’}<br>set()</p>
<h4 id="集合的操作"><a href="#集合的操作" class="headerlink" title="集合的操作"></a>集合的操作</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 判断</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">9</span> <span class="keyword">in</span> s)</span><br><span class="line"><span class="comment"># 新增</span></span><br><span class="line">s.add(<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s.update(<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">s.remove(<span class="string">&#x27;a&#x27;</span>)<span class="comment">#报错：KeyError: &#x27;a&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s.discard(<span class="string">&#x27;a&#x27;</span>)<span class="comment">#不报错也不执行</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s.pop()</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">s=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">s.clear()</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>False<br>{0, 1, 2, 3, 4, 5, ‘s’}</p>
<p>{0, 1, 2, 3, 4, 5, ‘o’, ‘s’}</p>
<p>{‘a’, 1, 2, 3}<br>{1, 2, 3}<br>set()</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="字符串的驻留机制"><a href="#字符串的驻留机制" class="headerlink" title="字符串的驻留机制"></a>字符串的驻留机制</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&#x27;Python&#x27;</span></span><br><span class="line">b=<span class="string">&quot;Python&quot;</span></span><br><span class="line">c=<span class="string">&#x27;&#x27;&#x27;Python&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a,<span class="built_in">id</span>(a),b,<span class="built_in">id</span>(b),c,<span class="built_in">id</span>(c))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>Python 2116166832240 Python 2116166832240 Python 2116166832240</p>
<p>有驻留的情况：</p>
<p>字符串的长度为0或1时·符合标识符的字符串</p>
<p>字符串只在编译时进行驻留，而非运行时</p>
<p>[-5,256]之间的整数数字</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 <span class="keyword">is</span> s2</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1=<span class="string">&#x27;aa%&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2=<span class="string">&#x27;aa%&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1==s2</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 <span class="keyword">is</span> s2</span><br><span class="line"><span class="literal">False</span></span><br><span class="line">--------------------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="string">&#x27;a&#x27;</span>+<span class="string">&#x27;bc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=<span class="string">&#x27;&#x27;</span>.join([<span class="string">&#x27;ab&#x27;</span>,<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c</span><br><span class="line">(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> c</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>sys中的intern方法强制驻留</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="string">&#x27;asd%&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="string">&#x27;asd%&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a =sys.intern(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>然而pycharm对字符串进行了优化处理(会驻留)</p>
<p><strong>注：</strong>在需要进行字符串拼接时建议使用str类型的join方法，而非＋,因为join()方法是先计算出所有字符中的长度，然后再拷贝，只new一次对象，效率要比”+”效率高</p>
<h4 id="字符串的查询"><a href="#字符串的查询" class="headerlink" title="字符串的查询"></a>字符串的查询</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=<span class="string">&#x27;hello,hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s.index(<span class="string">&#x27;lo&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(s.find(<span class="string">&#x27;lo&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(s.rindex(<span class="string">&#x27;lo&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(s.rfind(<span class="string">&#x27;lo&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>3<br>3<br>9<br>9</p>
<h4 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=<span class="string">&#x27;Hello this is Shyee&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s:&quot;</span>+s,<span class="built_in">id</span>(s))</span><br><span class="line">a=s.upper()</span><br><span class="line">b=s.lower()</span><br><span class="line">c=s.swapcase()</span><br><span class="line">d=s.capitalize()</span><br><span class="line">e=s.title()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;upper:&quot;</span>,a,<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;lower:&quot;</span>,b,<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;swapcase:&quot;</span>,c,<span class="built_in">id</span>(c))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;capitalize:&quot;</span>,d,<span class="built_in">id</span>(d))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;title:&quot;</span>,e,<span class="built_in">id</span>(e))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>s:Hello this is Shyee 1336088248112<br>upper: HELLO THIS IS SHYEE 1336088256560<br>lower: hello this is shyee 1336088256720<br>swapcase: hELLO THIS IS sHYEE 1336088256800<br>capitalize: Hello this is shyee 1336088258240<br>title: Hello This Is Shyee 1336088258320</p>
<h4 id="对齐操作"><a href="#对齐操作" class="headerlink" title="对齐操作"></a>对齐操作</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=<span class="string">&#x27;Hello this is Shyee&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(s.center(<span class="number">22</span>,<span class="string">&#x27;*&#x27;</span>))<span class="comment">#居中</span></span><br><span class="line"><span class="built_in">print</span>(s.center(<span class="number">15</span>,<span class="string">&#x27;*&#x27;</span>))<span class="comment">#参数小于字符串长度，打印字符串</span></span><br><span class="line"><span class="built_in">print</span>(s.ljust(<span class="number">22</span>,<span class="string">&#x27;-&#x27;</span>))<span class="comment">#第二个参数默认空格</span></span><br><span class="line"><span class="built_in">print</span>(s.rjust(<span class="number">22</span>,<span class="string">&quot;#&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(s.zfill(<span class="number">22</span>))<span class="comment">#默认左填零对齐</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-123&#x27;</span>.zfill(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><em>Hello this is Shyee</em>*<br>Hello this is Shyee<br>Hello this is Shyee—<br>###Hello this is Shyee<br>000Hello this is Shyee<br>-000000123</p>
<h4 id="拆分"><a href="#拆分" class="headerlink" title="拆分"></a>拆分</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s=<span class="string">&#x27;Hello this is Shyee&#x27;</span></span><br><span class="line">a=s.split()<span class="comment">#默认从左以空格分割</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a=s.split(sep=<span class="string">&#x27;s&#x27;</span>)<span class="comment">#指定分割符</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a=s.split(sep=<span class="string">&#x27; &#x27;</span>,maxsplit=<span class="number">2</span>)<span class="comment">#指定最大分割次数</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a=s.rsplit()<span class="comment">#从右侧</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(s.rsplit(sep=<span class="string">&#x27;s&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(s.rsplit(sep=<span class="string">&#x27; &#x27;</span>,maxsplit=<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>[‘Hello’, ‘this’, ‘is’, ‘Shyee’]<br>[‘Hello thi’, ‘ i’, ‘ Shyee’]<br>[‘Hello’, ‘this’, ‘is Shyee’]<br>[‘Hello’, ‘this’, ‘is’, ‘Shyee’]<br>[‘Hello thi’, ‘ i’, ‘ Shyee’]<br>[‘Hello this’, ‘is’, ‘Shyee’]</p>
<h4 id="字符串的判断"><a href="#字符串的判断" class="headerlink" title="字符串的判断"></a>字符串的判断</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#判断是否是合法的标识符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello,Shyee&#x27;</span>,<span class="string">&#x27;hello,Shyee&#x27;</span>.isidentifier())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>.isidentifier())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中文_&#x27;</span>,<span class="string">&#x27;中文_&#x27;</span>.isidentifier())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中文_123&#x27;</span>,<span class="string">&#x27;中文_123&#x27;</span>.isidentifier())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello Shyee&#x27;</span>,<span class="string">&#x27;hello Shyee&#x27;</span>.isspace())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>,<span class="string">&quot; &quot;</span>.isspace(),<span class="string">&quot;\t&quot;</span>.isspace())</span><br><span class="line"><span class="comment"># 判断是否全由字母(汉字)组成</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello Shyee&#x27;</span>,<span class="string">&#x27;hello Shyee&#x27;</span>.isalpha())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;helloShyee&#x27;</span>,<span class="string">&#x27;helloShyee&#x27;</span>.isalpha())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;中文&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>.isalpha())</span><br><span class="line"><span class="comment"># 判断是否全部是10进制的数字</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;123&#x27;</span>,<span class="string">&#x27;123&#x27;</span>.isdecimal())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;123fh&#x27;</span>,<span class="string">&#x27;123fh&#x27;</span>.isdecimal())</span><br><span class="line"><span class="comment"># 判断是否全部有数字组成</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;123&#x27;</span>,<span class="string">&#x27;123&#x27;</span>.isnumeric())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;四&#x27;</span>,<span class="string">&#x27;四&#x27;</span>.isnumeric())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ⅤⅢⅣ&#x27;</span>,<span class="string">&#x27;ⅤⅢⅣ&#x27;</span>.isnumeric())</span><br><span class="line"><span class="comment"># 判断是否全部是字母(汉字)和数字组成</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;123中文&#x27;</span>,<span class="string">&#x27;123中文&#x27;</span>.isalnum())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ⅤⅢⅣasd&#x27;</span>,<span class="string">&#x27;ⅤⅢⅣasd&#x27;</span>.isalnum())</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>hello,Shyee False<br>hello True<br>中文_ True<br>中文_123 True<br>hello Shyee False<br>  True True<br>hello Shyee False<br>helloShyee True<br>中文 True<br>123 True<br>123fh False<br>123 True<br>四 True<br>ⅤⅢⅣ True<br>123中文 True<br>ⅤⅢⅣasd True</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>入门</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql的一点东西</title>
    <url>/2020/04/01/mysql%E7%9A%84%E4%B8%80%E7%82%B9%E4%B8%9C%E8%A5%BF/</url>
    <content><![CDATA[<h1 id="mysql的一点东西"><a href="#mysql的一点东西" class="headerlink" title="mysql的一点东西"></a>mysql的一点东西</h1><h2 id="增删改查–数据记录常见操作"><a href="#增删改查–数据记录常见操作" class="headerlink" title="增删改查–数据记录常见操作"></a>增删改查–数据记录常见操作</h2><h3 id="–如何在数据库服务器中创建数据库"><a href="#–如何在数据库服务器中创建数据库" class="headerlink" title="–如何在数据库服务器中创建数据库"></a>–如何在数据库服务器中创建数据库</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">Create</span> database test;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> use test</span><br><span class="line">Database changed</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–如何查看某个数据库中所有的数据表"><a href="#–如何查看某个数据库中所有的数据表" class="headerlink" title="–如何查看某个数据库中所有的数据表"></a>–如何查看某个数据库中所有的数据表</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–如何创建一个数据表"><a href="#–如何创建一个数据表" class="headerlink" title="–如何创建一个数据表"></a>–如何创建一个数据表</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> pet (</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">owner <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">specials <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">sex <span class="type">VARCHAR</span>(<span class="number">1</span>),</span><br><span class="line">birth <span class="type">DATE</span>,</span><br><span class="line">death <span class="type">DATE</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–查看数据表是否创建成功"><a href="#–查看数据表是否创建成功" class="headerlink" title="–查看数据表是否创建成功"></a>–查看数据表是否创建成功</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> pet      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–查看创建好的数据表的结构"><a href="#–查看创建好的数据表的结构" class="headerlink" title="–查看创建好的数据表的结构"></a>–查看创建好的数据表的结构</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> pet;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field  <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> owner  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> specials <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sex   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">1</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> birth  <span class="operator">|</span> <span class="type">date</span>    <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> death  <span class="operator">|</span> <span class="type">date</span>    <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–查看表中的记录"><a href="#–查看表中的记录" class="headerlink" title="–查看表中的记录"></a>–查看表中的记录</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> pet;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–如何往数据表中添加数据记录"><a href="#–如何往数据表中添加数据记录" class="headerlink" title="–如何往数据表中添加数据记录"></a>–如何往数据表中添加数据记录</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;Puffball&#x27;</span>,<span class="string">&#x27;Diane&#x27;</span>,<span class="string">&#x27;hamster&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1999-03-30&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–再一次查询"><a href="#–再一次查询" class="headerlink" title="–再一次查询"></a>–再一次查询</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> pet;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------+----------+------+------------+-------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> owner <span class="operator">|</span> specials <span class="operator">|</span> sex <span class="operator">|</span> birth   <span class="operator">|</span> death <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------+----------+------+------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Puffball <span class="operator">|</span> Diane <span class="operator">|</span> hamster <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1999</span><span class="number">-03</span><span class="number">-30</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------+----------+------+------------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;旺财&#x27;</span>,<span class="string">&#x27;周星驰&#x27;</span>,<span class="string">&#x27;狗&#x27;</span>,<span class="string">&#x27;公&#x27;</span>,<span class="string">&#x27;1990-01-01&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> pet;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+-------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> owner   <span class="operator">|</span> specials <span class="operator">|</span> sex <span class="operator">|</span> birth   <span class="operator">|</span> death <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Puffball <span class="operator">|</span> Diane   <span class="operator">|</span> hamster <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1999</span><span class="number">-03</span><span class="number">-30</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 旺财   <span class="operator">|</span> 周星驰   <span class="operator">|</span> 狗    <span class="operator">|</span> 公  <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–MySQL常用数据类型有哪些"><a href="#–MySQL常用数据类型有哪些" class="headerlink" title="–MySQL常用数据类型有哪些"></a>–MySQL常用数据类型有哪些</h3><p>–MySQL支持多种类型，大致可以分为三类：</p>
<p>–数值</p>
<table>
<thead>
<tr>
<th><code>TINYINT</code></th>
<th><code>1 字节</code></th>
<th><code>(-128，127)</code></th>
<th><code>(0，255)</code></th>
<th><code>小整数值</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>SMALLINT</code></td>
<td><code>2 字节</code></td>
<td><code>(-32 768，32 767)</code></td>
<td><code>(0，65 535)</code></td>
<td><code>大整数值</code></td>
</tr>
<tr>
<td><code>MEDIUMINT</code></td>
<td><code>3 字节</code></td>
<td><code>(-8 388 608，8 388 607)</code></td>
<td><code>(0，16 777 215)</code></td>
<td><code>大整数值</code></td>
</tr>
<tr>
<td><code>INT或INTEGER</code></td>
<td><code>4 字节</code></td>
<td><code>(-2 147 483 648，2 147 483 647)</code></td>
<td><code>(0，4 294 967 295)</code></td>
<td><code>大整数值</code></td>
</tr>
<tr>
<td><code>BIGINT</code></td>
<td><code>8 字节</code></td>
<td><code>(-9,223,372,036,854,775,808，9  223 372 036 854 775 807)</code></td>
<td><code>(0，18 446 744 073 709 551 615)</code></td>
<td><code>极大整数值</code></td>
</tr>
<tr>
<td><code>FLOAT</code></td>
<td><code>4 字节</code></td>
<td><code>(-3.402 823 466 E+38，-1.175  494 351 E-38)，0，(1.175 494 351 E-38，3.402  823 466 351 E+38)</code></td>
<td><code>0，(1.175 494 351 E-38，3.402  823 466 E+38)</code></td>
<td><code>单精度</code>  <code>浮点数值</code></td>
</tr>
<tr>
<td><code>DOUBLE</code></td>
<td><code>8 字节</code></td>
<td><code>(-1.797 693 134 862 315 7 E+308，-2.225  073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797  693 134 862 315 7 E+308)</code></td>
<td><code>0，(2.225 073 858 507 201 4 E-308，1.797  693 134 862 315 7 E+308)</code></td>
<td><code>双精度</code>  <code>浮点数值</code></td>
</tr>
<tr>
<td><code>DECIMAL</code></td>
<td><code>对DECIMAL(M,D)  ，如果M&gt;D，为M+2否则为D+2</code></td>
<td><code>依赖于M和D的值</code></td>
<td><code>依赖于M和D的值</code></td>
<td><code>小数值</code></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">Create</span> <span class="keyword">table</span> testType(</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> Number TINYINT</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_test <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> pet      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> testtype    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> testtype;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Number <span class="operator">|</span> tinyint(<span class="number">4</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> testType <span class="keyword">VALUES</span>(<span class="number">127</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> testtype;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> Number <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">127</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> testType <span class="keyword">VALUES</span>(<span class="number">128</span>);</span><br><span class="line">ERROR <span class="number">1264</span> (<span class="number">22003</span>): <span class="keyword">Out</span> <span class="keyword">of</span> <span class="keyword">range</span> <span class="keyword">value</span> <span class="keyword">for</span> <span class="keyword">column</span> <span class="string">&#x27;Number&#x27;</span> <span class="keyword">at</span> <span class="type">row</span> <span class="number">1</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>–日期&#x2F;时间</p>
<table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>大小</strong>  <strong>(字节)</strong></th>
<th><strong>范围</strong></th>
<th><strong>格式</strong></th>
<th><strong>用途</strong></th>
</tr>
</thead>
<tbody><tr>
<td>DATE</td>
<td>3</td>
<td>1000-01-01&#x2F;9999-12-31</td>
<td>YYYY-MM-DD</td>
<td>日期值</td>
</tr>
<tr>
<td>TIME</td>
<td>3</td>
<td>‘-838:59:59’&#x2F;‘838:59:59’</td>
<td>HH:MM:SS</td>
<td>时间值或持续时间</td>
</tr>
<tr>
<td>YEAR</td>
<td>1</td>
<td>1901&#x2F;2155</td>
<td>YYYY</td>
<td>年份值</td>
</tr>
<tr>
<td>DATETIME</td>
<td>8</td>
<td>1000-01-01  00:00:00&#x2F;9999-12-31 23:59:59</td>
<td>YYYY-MM-DD  HH:MM:SS</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>4</td>
<td>1970-01-01  00:00:00&#x2F;2038  结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td>
<td>YYYYMMDD  HHMMSS</td>
<td>混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<p>–字符串(字符)类型</p>
<table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>大小</strong></th>
<th><strong>用途</strong></th>
</tr>
</thead>
<tbody><tr>
<td>CHAR</td>
<td>0-255字节</td>
<td>定长字符串</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>0-65535  字节</td>
<td>变长字符串</td>
</tr>
<tr>
<td>TINYBLOB</td>
<td>0-255字节</td>
<td>不超过 255  个字符的二进制字符串</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>0-255字节</td>
<td>短文本字符串</td>
</tr>
<tr>
<td>BLOB</td>
<td>0-65  535字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td>TEXT</td>
<td>0-65  535字节</td>
<td>长文本数据</td>
</tr>
<tr>
<td>MEDIUMBLOB</td>
<td>0-16 777  215字节</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>0-16 777  215字节</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td>LONGBLOB</td>
<td>0-4 294  967 295字节</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>0-4 294  967 295字节</td>
<td>极大文本数据</td>
</tr>
</tbody></table>
<h3 id="–如何往数据库里插入数据"><a href="#–如何往数据库里插入数据" class="headerlink" title="–如何往数据库里插入数据"></a>–如何往数据库里插入数据</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Fluffy&#x27;</span>,<span class="string">&#x27;Harold&#x27;</span>,<span class="string">&#x27;cat&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1993-02-04&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Claws&#x27;</span>,<span class="string">&#x27;Gwen&#x27;</span>,<span class="string">&#x27;cat&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1994-03-17&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Buffy&#x27;</span>,<span class="string">&#x27;Harold&#x27;</span>,<span class="string">&#x27;dog&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1989-05-13&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Fang&#x27;</span>,<span class="string">&#x27;Benny&#x27;</span>,<span class="string">&#x27;dog&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1990-08-27&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Bowser&#x27;</span>,<span class="string">&#x27;Diane&#x27;</span>,<span class="string">&#x27;dog&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1979-08-31&#x27;</span>,<span class="string">&#x27;1995-07-29&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Chirpy&#x27;</span>,<span class="string">&#x27;Gwen&#x27;</span>,<span class="string">&#x27;bird&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1998-09-11&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Whistler&#x27;</span>,<span class="string">&#x27;Gwen&#x27;</span>,<span class="string">&#x27;bird&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1997-12-09&#x27;</span>,<span class="keyword">NULL</span>) ;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Slim&#x27;</span>,<span class="string">&#x27;Benny&#x27;</span>,<span class="string">&#x27;snake&#x27;</span>,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;1996-04-29&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span>(<span class="string">&#x27;Puffball&#x27;</span>,<span class="string">&#x27;Diane&#x27;</span>,<span class="string">&#x27;hamster&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1999-03-30&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> pet;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> owner   <span class="operator">|</span> specials <span class="operator">|</span> sex <span class="operator">|</span> birth   <span class="operator">|</span> death   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> Puffball <span class="operator">|</span> Diane   <span class="operator">|</span> hamster <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1999</span><span class="number">-03</span><span class="number">-30</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 旺财   <span class="operator">|</span> 周星驰   <span class="operator">|</span> 狗    <span class="operator">|</span> 公  <span class="operator">|</span> <span class="number">1990</span><span class="number">-01</span><span class="number">-01</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fluffy  <span class="operator">|</span> Harold  <span class="operator">|</span> cat   <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1993</span><span class="number">-02</span><span class="number">-04</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Claws  <span class="operator">|</span> Gwen   <span class="operator">|</span> cat   <span class="operator">|</span> m  <span class="operator">|</span> <span class="number">1994</span><span class="number">-03</span><span class="number">-17</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Buffy  <span class="operator">|</span> Harold  <span class="operator">|</span> dog   <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1989</span><span class="number">-05</span><span class="number">-13</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Fang   <span class="operator">|</span> Benny   <span class="operator">|</span> dog   <span class="operator">|</span> m  <span class="operator">|</span> <span class="number">1990</span><span class="number">-08</span><span class="number">-27</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Bowser  <span class="operator">|</span> Diane   <span class="operator">|</span> dog   <span class="operator">|</span> m  <span class="operator">|</span> <span class="number">1979</span><span class="number">-08</span><span class="number">-31</span> <span class="operator">|</span> <span class="number">1995</span><span class="number">-07</span><span class="number">-29</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Chirpy  <span class="operator">|</span> Gwen   <span class="operator">|</span> bird   <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1998</span><span class="number">-09</span><span class="number">-11</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Whistler <span class="operator">|</span> Gwen   <span class="operator">|</span> bird   <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-12</span><span class="number">-09</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Slim   <span class="operator">|</span> Benny   <span class="operator">|</span> snake  <span class="operator">|</span> m  <span class="operator">|</span> <span class="number">1996</span><span class="number">-04</span><span class="number">-29</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Puffball <span class="operator">|</span> Diane   <span class="operator">|</span> hamster <span class="operator">|</span> f  <span class="operator">|</span> <span class="number">1999</span><span class="number">-03</span><span class="number">-30</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+----------+------+------------+------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–如何删除数据"><a href="#–如何删除数据" class="headerlink" title="–如何删除数据"></a>–如何删除数据</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> pet <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;Fluffy&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–如何修改数据"><a href="#–如何修改数据" class="headerlink" title="–如何修改数据"></a>–如何修改数据</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> pet <span class="keyword">set</span> name<span class="operator">=</span><span class="string">&#x27;旺旺财&#x27;</span> <span class="keyword">where</span> owner <span class="operator">=</span><span class="string">&#x27;周星驰&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span> Changed: <span class="number">1</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–数据记录常见操作"><a href="#–数据记录常见操作" class="headerlink" title="–数据记录常见操作"></a>–数据记录常见操作</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--增加</span></span><br><span class="line"><span class="keyword">INSERT</span></span><br><span class="line"><span class="comment">--删除</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="comment">--修改</span></span><br><span class="line"><span class="keyword">UPDATE</span></span><br><span class="line"><span class="comment">--查询</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br></pre></td></tr></table></figure>

<h2 id="建表约束"><a href="#建表约束" class="headerlink" title="建表约束"></a>建表约束</h2><h3 id="–主键约束"><a href="#–主键约束" class="headerlink" title="–主键约束"></a>–主键约束</h3><p>它能够唯一确定一张表中的一条记录，也就我们通过某个字段添加约束，可以使得字段不重复且不为空。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;PRIMARY&#x27;</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> 张三  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1048</span> (<span class="number">23000</span>): <span class="keyword">Column</span> <span class="string">&#x27;id&#x27;</span> cannot be <span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h5 id="–联合主键"><a href="#–联合主键" class="headerlink" title="–联合主键"></a>–联合主键</h5><h5 id="–只要联合的主键值（均不为空）加起来不重复就OK"><a href="#–只要联合的主键值（均不为空）加起来不重复就OK" class="headerlink" title="–只要联合的主键值（均不为空）加起来不重复就OK"></a>–只要联合的主键值（均不为空）加起来不重复就OK</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> user2(</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">int</span>,</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> password <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">primary</span> key(id,name)</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> ) ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1-张三&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;PRIMARY&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user2 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user2</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> password <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span> <span class="number">123</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 李四  <span class="operator">|</span> <span class="number">123</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> 张三  <span class="operator">|</span> <span class="number">123</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–自增约束"><a href="#–自增约束" class="headerlink" title="–自增约束"></a>–自增约束</h3><h5 id="–auto-increment"><a href="#–auto-increment" class="headerlink" title="–auto_increment"></a>–auto_increment</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user3(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user3 (name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user3 (name) <span class="keyword">values</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> zhangsan <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="–如果创建表的时候忘记创建主键约束"><a href="#–如果创建表的时候忘记创建主键约束" class="headerlink" title="–如果创建表的时候忘记创建主键约束"></a>–如果创建表的时候忘记创建主键约束</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> user4(</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> id <span class="type">int</span>,</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–修改表结构，添加主键"><a href="#–修改表结构，添加主键" class="headerlink" title="–修改表结构，添加主键"></a>–修改表结构，添加主键</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> user4 <span class="keyword">add</span> <span class="keyword">primary</span> key(id);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> <span class="keyword">NO</span>  <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–如何删除"><a href="#–如何删除" class="headerlink" title="–如何删除"></a>–如何删除</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> user4 <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> <span class="keyword">NO</span>  <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–使用modify-修改字段添加约束"><a href="#–使用modify-修改字段添加约束" class="headerlink" title="–使用modify 修改字段添加约束"></a>–使用modify 修改字段添加约束</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> user4 modify id <span class="type">int</span> <span class="keyword">primary</span> key;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.12</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> <span class="keyword">NO</span>  <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–唯一约束"><a href="#–唯一约束" class="headerlink" title="–唯一约束"></a>–唯一约束</h3><p>–约束修饰字段的值不可以重复</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> user5(</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span>   id <span class="type">int</span>,</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span>   name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">  <span class="operator">-</span><span class="operator">&gt;</span>   );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> user5 <span class="keyword">add</span> <span class="keyword">unique</span>(name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user5;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user5 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user5 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;zhangsan&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;name&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user5 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;lisi&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user6(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">unique</span>(name)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user7(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user8(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">unique</span>(id,name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="–两个键在一起不重复就OK"><a href="#–两个键在一起不重复就OK" class="headerlink" title="–两个键在一起不重复就OK"></a>–两个键在一起不重复就OK</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.08</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user8;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span> MUL <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user8 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> user8 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–如何删除唯一约束"><a href="#–如何删除唯一约束" class="headerlink" title="–如何删除唯一约束"></a>–如何删除唯一约束</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> user7 <span class="keyword">drop</span> index name;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user7;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–modify添加"><a href="#–modify添加" class="headerlink" title="–modify添加"></a>–modify添加</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> user7 modify name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line">Records: <span class="number">0</span> Duplicates: <span class="number">0</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user7;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="–总结"><a href="#–总结" class="headerlink" title="–总结"></a>–总结</h3><h5 id="–1-建表的时候添加约束"><a href="#–1-建表的时候添加约束" class="headerlink" title="–1 建表的时候添加约束"></a>–1 建表的时候添加约束</h5><h5 id="–2-alter-add"><a href="#–2-alter-add" class="headerlink" title="–2 alter  add"></a>–2 alter  add</h5><h5 id="–3-alter-modify"><a href="#–3-alter-modify" class="headerlink" title="–3 alter  modify"></a>–3 alter  modify</h5><h5 id="–4-删除-alter-drop"><a href="#–4-删除-alter-drop" class="headerlink" title="–4 删除 alter  drop"></a>–4 删除 alter  drop</h5><h3 id="–非空约束"><a href="#–非空约束" class="headerlink" title="–非空约束"></a>–非空约束</h3><h4 id="–修饰的字段不能为空-NULL"><a href="#–修饰的字段不能为空-NULL" class="headerlink" title="–修饰的字段不能为空 NULL"></a>–修饰的字段不能为空 NULL</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user9(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user9;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>  <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> user9 (id) <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line">ERROR <span class="number">1364</span> (HY000): Field <span class="string">&#x27;name&#x27;</span> doesn<span class="string">&#x27;t have a default value</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">insert into user9 values(1,&#x27;</span>张三<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">Query OK, 1 row affected (0.01 sec)</span></span><br><span class="line"><span class="string">mysql&gt; select * from user9;</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">| id  | name  |</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">|  1 | 张三  |</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">1 row in set (0.00 sec)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">insert into user9 (name) values(&#x27;</span>lisi<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">mysql&gt; insert into user9 (name) values(&#x27;</span>lisi<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">Query OK, 1 row affected (0.01 sec)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">mysql&gt; select * from user9;</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">| id  | name  |</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">|  1 | 张三  |</span></span><br><span class="line"><span class="string">| NULL | lisi  |</span></span><br><span class="line"><span class="string">+------+--------+</span></span><br><span class="line"><span class="string">2 rows in set (0.00 sec)</span></span><br></pre></td></tr></table></figure>

<h3 id="–默认约束"><a href="#–默认约束" class="headerlink" title="–默认约束"></a>–默认约束</h3><p>–当插入字段值的时候，如果没有传值，就会使用默认值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user10(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span> <span class="keyword">default</span> <span class="number">10</span></span><br><span class="line">);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user10;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> age  <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)   <span class="operator">|</span> YES <span class="operator">|</span>   <span class="operator">|</span> <span class="number">10</span>   <span class="operator">|</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> user10 (id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user10;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span> age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>  <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="–传了值就不会使用默认值"><a href="#–传了值就不会使用默认值" class="headerlink" title="–传了值就不会使用默认值"></a>–传了值就不会使用默认值</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> user10 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">19</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user10;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span> age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>  <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> zhangsan <span class="operator">|</span>  <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="–外键约束"><a href="#–外键约束" class="headerlink" title="–外键约束"></a>–外键约束</h3><h5 id="–牵扯到两个表：父表、子表"><a href="#–牵扯到两个表：父表、子表" class="headerlink" title="–牵扯到两个表：父表、子表"></a>–牵扯到两个表：父表、子表</h5><h5 id="–主表、副表"><a href="#–主表、副表" class="headerlink" title="–主表、副表"></a>–主表、副表</h5><p>–班级</p>
<p>create table classes(</p>
<p>id int primary key,</p>
<p>name varchar(20)</p>
<p>);</p>
<p>–学生</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">class_id <span class="type">int</span>,</span><br><span class="line"><span class="keyword">foreign</span> key(class_id) <span class="keyword">references</span> classes(id)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;一班&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;二班&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;三班&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;四班&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> classes;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 一班  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> 二班  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 三班  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 四班  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">4</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students <span class="keyword">values</span>(<span class="number">1005</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">5</span>);</span><br><span class="line">ERROR <span class="number">1452</span> (<span class="number">23000</span>): Cannot <span class="keyword">add</span> <span class="keyword">or</span> <span class="keyword">update</span> a child <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails (`test`.`students`, <span class="keyword">CONSTRAINT</span> `students_ibfk_1` <span class="keyword">FOREIGN</span> KEY (`class_id`) <span class="keyword">REFERENCES</span> `classes` (`id`))</span><br><span class="line"> </span><br><span class="line"><span class="comment">--1 主表classes中没有的数据值，在副表中是不可以使用的</span></span><br><span class="line"><span class="comment">--2 主表中的记录被副标使用，是不可以删除的</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> classes <span class="keyword">where</span> id<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line">ERROR <span class="number">1451</span> (<span class="number">23000</span>): Cannot <span class="keyword">delete</span> <span class="keyword">or</span> <span class="keyword">update</span> a parent <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails (`test`.`students`, <span class="keyword">CONSTRAINT</span> `students_ibfk_1` <span class="keyword">FOREIGN</span> KEY (`class_id`) <span class="keyword">REFERENCES</span> `classes` (`id`))</span><br></pre></td></tr></table></figure>

<h3 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h3><h4 id="–1-第一范式"><a href="#–1-第一范式" class="headerlink" title="–1.第一范式"></a>–1.第一范式</h4><h3 id="–1NF"><a href="#–1NF" class="headerlink" title="–1NF"></a>–1NF</h3><p>–数据表中的所有字段都是不可分割的原子值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student2(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">address <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;中国山东省东营市东营区济南路100号&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student2 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;中国山东省东营市东营区东二路200号&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student2 <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;中国山东省东营市广饶县天府路300号&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student2;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> address                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span> 中国山东省东营市东营区济南路<span class="number">100</span>号        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span> 中国山东省东营市东营区东二路<span class="number">200</span>号        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span> 中国山东省东营市广饶县天府路<span class="number">300</span>号        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+--------------------------------------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="–字段值还可以继续拆分的，不满足第一范式"><a href="#–字段值还可以继续拆分的，不满足第一范式" class="headerlink" title="–字段值还可以继续拆分的，不满足第一范式"></a>–字段值还可以继续拆分的，不满足第一范式</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student3(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">country <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">privence <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">city <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">details <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student3 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;中国&#x27;</span>,<span class="string">&#x27;山东省&#x27;</span>,<span class="string">&#x27;东营市&#x27;</span>,<span class="string">&#x27;东营区济南路100号&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student3 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;中国&#x27;</span>,<span class="string">&#x27;山东省&#x27;</span>,<span class="string">&#x27;东营市&#x27;</span>,<span class="string">&#x27;东营区东二路200号&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student3 <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;中国&#x27;</span>,<span class="string">&#x27;山东省&#x27;</span>,<span class="string">&#x27;东营市&#x27;</span>,<span class="string">&#x27;广饶县天府路300号&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student3;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+-----------+-----------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> country <span class="operator">|</span> privence <span class="operator">|</span> city   <span class="operator">|</span> details         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+-----------+-----------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span> 中国  <span class="operator">|</span> 山东省  <span class="operator">|</span> 东营市  <span class="operator">|</span> 东营区济南路<span class="number">100</span>号    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span> 中国  <span class="operator">|</span> 山东省  <span class="operator">|</span> 东营市  <span class="operator">|</span> 东营区东二路<span class="number">200</span>号    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span> 中国  <span class="operator">|</span> 山东省  <span class="operator">|</span> 东营市  <span class="operator">|</span> 广饶县天府路<span class="number">300</span>号    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+-----------+-----------+--------------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="–范式设计的越详细，对于某些实际操作可能更好，但是不一定都是好处"><a href="#–范式设计的越详细，对于某些实际操作可能更好，但是不一定都是好处" class="headerlink" title="–范式设计的越详细，对于某些实际操作可能更好，但是不一定都是好处"></a>–范式设计的越详细，对于某些实际操作可能更好，但是不一定都是好处</h5><h3 id="–第二范式"><a href="#–第二范式" class="headerlink" title="–第二范式"></a>–第二范式</h3><p>–必须满足第一范式的前提下，第二范式要求，除主键外的每一列都必须完全依赖于主键</p>
<p>–如果出现不完全依赖，只可能发生在联合主键的情况下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> myorder(</span><br><span class="line">product_id <span class="type">int</span>,</span><br><span class="line">customer_id <span class="type">int</span>,</span><br><span class="line">product_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">customer_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">primary</span> key(product_id,customer_id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="–问题"><a href="#–问题" class="headerlink" title="–问题"></a>–问题</h5><h5 id="–除主键以外的其他列，只依赖于主键的其他部分字段"><a href="#–除主键以外的其他列，只依赖于主键的其他部分字段" class="headerlink" title="–除主键以外的其他列，只依赖于主键的其他部分字段"></a>–除主键以外的其他列，只依赖于主键的其他部分字段</h5><h5 id="–拆表"><a href="#–拆表" class="headerlink" title="–拆表"></a>–拆表</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> myorder(</span><br><span class="line">order_id <span class="keyword">primary</span> key,</span><br><span class="line">product_id <span class="type">int</span>,</span><br><span class="line">customer_id <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customer(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="–分成三个表之后完全依赖-满足第二范式"><a href="#–分成三个表之后完全依赖-满足第二范式" class="headerlink" title="–分成三个表之后完全依赖 满足第二范式"></a>–分成三个表之后完全依赖 满足第二范式</h5><h3 id="–第三范式"><a href="#–第三范式" class="headerlink" title="–第三范式"></a>–第三范式</h3><p>–3NF</p>
<p>–必须先满足第二范式，除开主键列的其他列之间不能有传递关系</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> myorder(</span><br><span class="line">order_id <span class="keyword">primary</span> key,</span><br><span class="line">product_id <span class="type">int</span>,</span><br><span class="line">customer_id <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customer(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">phone <span class="type">varchar</span>(<span class="number">15</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="查询练习"><a href="#查询练习" class="headerlink" title="查询练习"></a>查询练习</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>查询student表中所有记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>查询student表中所有记录的sname 、ssex、class、</span><br><span class="line"><span class="keyword">select</span> sname,ssex,class <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="number">3.</span>查询教师所有的单位即不重复的depart列</span><br><span class="line"><span class="keyword">distinct</span> 排除重复</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> depart <span class="keyword">from</span> teacher;</span><br><span class="line"> </span><br><span class="line"><span class="number">4.</span>查询score表中成绩在<span class="number">60</span>到<span class="number">80</span>之间的记录</span><br><span class="line">查询区间 <span class="keyword">between</span>…<span class="keyword">and</span>…</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> degree <span class="keyword">between</span> <span class="number">60</span> <span class="keyword">and</span> <span class="number">80</span>；</span><br><span class="line">或者</span><br><span class="line">selet <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> degree <span class="operator">&gt;</span> <span class="number">60</span> <span class="keyword">and</span> degree <span class="operator">&lt;</span><span class="number">80</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">5.</span>查询score表中成绩为<span class="number">85</span>，<span class="number">86</span>或<span class="number">88</span> 的记录</span><br><span class="line">表示或者关系的查询 <span class="keyword">in</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> degree <span class="keyword">in</span> (<span class="number">85</span>,<span class="number">86</span>,<span class="number">88</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">6.</span>查询student表中“<span class="number">95031</span>”班或性别为“女”的同学的记录</span><br><span class="line"><span class="keyword">or</span> 表示或者</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> class<span class="operator">=</span><span class="string">&#x27;95031&#x27;</span> <span class="keyword">or</span> ssex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">7.</span>以class降序查询student表的所有记录</span><br><span class="line">升序<span class="keyword">asc</span>，降序<span class="keyword">desc</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> studnt <span class="keyword">order</span> <span class="keyword">by</span> class <span class="keyword">desc</span>;</span><br><span class="line">默认升序</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> studnt <span class="keyword">order</span> <span class="keyword">by</span> class (<span class="keyword">asc</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">8.</span>以cno升序、degree降序查询score表中的所有记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student score oder <span class="keyword">by</span> cno <span class="keyword">asc</span>,degree <span class="keyword">desc</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">9.</span>查询“<span class="number">95031</span>”班 的学生人数</span><br><span class="line">统计 count</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> student <span class="keyword">where</span> class<span class="operator">=</span><span class="string">&#x27;95031&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">10.</span>查询score表中的最高分的学生学号和课程号（子查询或排序）</span><br><span class="line"><span class="keyword">select</span> sno,cno <span class="keyword">from</span> score <span class="keyword">where</span> degree<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score);</span><br><span class="line"><span class="number">1</span>、找到最高分</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score;</span><br><span class="line"><span class="number">2</span>、找最高分的sno 和cno</span><br><span class="line"><span class="keyword">select</span> sno,cno <span class="keyword">from</span> score <span class="keyword">where</span> degree<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score);</span><br><span class="line">排序的做法</span><br><span class="line"><span class="keyword">select</span> sno,cno <span class="keyword">from</span> score oder <span class="keyword">by</span> degree;</span><br><span class="line"><span class="keyword">select</span> sno,cno <span class="keyword">from</span> score oder <span class="keyword">by</span> degree <span class="keyword">desc</span> limit <span class="number">0</span>,<span class="number">1</span>;</span><br><span class="line">limit a,b</span><br><span class="line">a<span class="operator">=</span>从第几条开始查</span><br><span class="line">b<span class="operator">=</span>查多少条</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">11.</span>查询每门课的平均成绩</span><br><span class="line">分开去找</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">avg</span>()</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(degree) <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">-</span><span class="string">&#x27;3-105&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> cno <span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span>;</span><br><span class="line">在一个<span class="keyword">sql</span>中写</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组</span><br><span class="line"><span class="keyword">select</span> cno,<span class="built_in">avg</span>(degree) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line"> </span><br><span class="line"><span class="number">12.</span>查询score表中至少有两名学生选修的并以<span class="number">3</span>开头的课程的平均数</span><br><span class="line"><span class="keyword">select</span> cno,<span class="built_in">avg</span>(degree) <span class="keyword">from</span> score </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(cno)<span class="operator">&gt;=</span><span class="number">2</span> </span><br><span class="line"><span class="keyword">and</span> cno <span class="keyword">like</span> <span class="string">&#x27;3%&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">13.</span>查询分数大于<span class="number">70</span>，小于<span class="number">90</span>的sno列</span><br><span class="line"><span class="keyword">select</span> sno ,dgree <span class="keyword">from</span> score</span><br><span class="line"><span class="keyword">where</span> degree <span class="operator">&gt;</span><span class="number">70</span> <span class="keyword">and</span> degree <span class="operator">&lt;</span><span class="number">90</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">select</span> sno ,dgree <span class="keyword">from</span> score</span><br><span class="line"><span class="keyword">where</span> degree <span class="keyword">between</span> <span class="number">70</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">14.</span>查询所有学生的sname cno 和degree列</span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> cno,degree <span class="keyword">from</span> score;</span><br><span class="line"> </span><br><span class="line">多表查询</span><br><span class="line"><span class="keyword">select</span> sname,cno,degree <span class="keyword">from</span> student,score</span><br><span class="line"><span class="keyword">where</span> student.sno<span class="operator">=</span>score.sno;</span><br><span class="line"> </span><br><span class="line"><span class="number">15.</span>查询所有学生的sno cname 和degree 列</span><br><span class="line"><span class="keyword">select</span> sno,cname,degree <span class="keyword">from</span> course,score</span><br><span class="line"><span class="keyword">where</span> course.cno<span class="operator">=</span>score.cno;</span><br><span class="line"> </span><br><span class="line"><span class="number">16.</span>查询所有学生的sname cname和degree 列</span><br><span class="line">sname<span class="operator">-</span><span class="operator">&gt;</span>student</span><br><span class="line">cname<span class="operator">-</span><span class="operator">&gt;</span>course</span><br><span class="line">degree<span class="operator">-</span><span class="operator">&gt;</span>score</span><br><span class="line"><span class="keyword">select</span> sname,cname,degree <span class="keyword">from</span> student,course,score</span><br><span class="line"><span class="keyword">where</span> student.sno<span class="operator">=</span>score.sno <span class="keyword">and</span> course.cno<span class="operator">=</span>score.cno;</span><br><span class="line"> </span><br><span class="line"><span class="number">17.</span>查询“<span class="number">95031</span>”班学生每门课的平均成绩</span><br><span class="line">分步思路</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> class <span class="operator">=</span><span class="string">&#x27;95031&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> class<span class="operator">=</span><span class="string">&#x27;95031&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> sno <span class="keyword">in</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> class <span class="operator">=</span><span class="string">&#x27;95031&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">合并</span><br><span class="line"><span class="keyword">select</span> cno,<span class="built_in">avg</span>(degree)</span><br><span class="line"><span class="keyword">from</span> score </span><br><span class="line"><span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> class<span class="operator">=</span><span class="string">&#x27;95031&#x27;</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line"> </span><br><span class="line"><span class="number">18.</span>查询选修“<span class="number">3</span><span class="number">-105</span>”课程的成绩高于“<span class="number">109</span>”号同学“<span class="number">3</span><span class="number">-105</span>”成绩的所有同学的记录</span><br><span class="line"><span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;109&#x27;</span> <span class="keyword">and</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span> <span class="keyword">and</span> degree<span class="operator">&gt;</span>(<span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;109&#x27;</span> <span class="keyword">and</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">19.</span>查询成绩高于学号为“<span class="number">109</span>”、课程号为“<span class="number">3</span><span class="number">-105</span>”的成绩的所有记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> score <span class="keyword">where</span> <span class="keyword">and</span> degree<span class="operator">&gt;</span>(<span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;109&#x27;</span> <span class="keyword">and</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">20.</span>查询和学号为<span class="number">108</span>、<span class="number">101</span>的同学同年出生的所有学生的sno、sname和sbirthday列</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="number">108</span>,<span class="number">101</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="keyword">in</span> (<span class="number">108</span>,<span class="number">101</span>));</span><br><span class="line"> </span><br><span class="line"><span class="number">21.</span>查询“张旭”教师任课的学生成绩</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> tname<span class="operator">=</span><span class="string">&#x27;张旭&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname<span class="operator">=</span><span class="string">&#x27;张旭&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> tno<span class="operator">=</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname<span class="operator">=</span><span class="string">&#x27;张旭&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno<span class="operator">=</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname<span class="operator">=</span><span class="string">&#x27;张旭&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno<span class="operator">=</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tname<span class="operator">=</span><span class="string">&#x27;张旭&#x27;</span>));</span><br><span class="line"> </span><br><span class="line"><span class="number">22.</span>查询选修某课程的同学人数多于<span class="number">5</span>人的教师姓名</span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher;</span><br><span class="line"><span class="keyword">select</span> tno <span class="keyword">from</span> course <span class="keyword">where</span> cno<span class="operator">=</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span>);</span><br><span class="line"><span class="keyword">select</span> tname <span class="keyword">from</span> teacher <span class="keyword">where</span> tno<span class="operator">=</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> course <span class="keyword">where</span> cno<span class="operator">=</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span>)); </span><br><span class="line"> </span><br><span class="line"><span class="number">23.</span>查询<span class="number">95033</span>班和<span class="number">95031</span>班全体学生的记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> calss <span class="keyword">in</span> (<span class="string">&#x27;95031&#x27;</span>,<span class="string">&#x27;95033&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">24.</span>查询存在有<span class="number">85</span>分以上成绩的课程Cno</span><br><span class="line"><span class="keyword">select</span> cno <span class="keyword">from</span> score <span class="keyword">where</span> degree <span class="operator">&gt;</span><span class="number">85</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">25.</span>查询出“计算机系”教师所教课程的成绩表</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> depart<span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> depart<span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> cno <span class="keyword">in</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> depart<span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>));</span><br><span class="line"> </span><br><span class="line"><span class="number">26.</span>查询“计算机系”与“电子工程系”不同职称的教师的tname和prof</span><br><span class="line"><span class="keyword">union</span> 求并集</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher ;</span><br><span class="line"><span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;电子工程系&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;电子工程系&#x27;</span>) ;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;电子工程系&#x27;</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>) ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;电子工程系&#x27;</span>) <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;电子工程系&#x27;</span> <span class="keyword">and</span> prof <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> prof <span class="keyword">from</span> teacher <span class="keyword">where</span> depart <span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>) ;</span><br><span class="line"> </span><br><span class="line"><span class="number">27.</span>查询选修编号为“<span class="number">3</span><span class="number">-105</span>”课程且成绩至少高于选修编号为“<span class="number">3</span><span class="number">-245</span>”的同学的cno 、sno和degree，并按照degree从高到低的次序排序</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-245&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>至少：大于其中至少一个，**any</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score </span><br><span class="line"><span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span> </span><br><span class="line"><span class="keyword">and</span> degree<span class="operator">&gt;</span><span class="keyword">any</span>(<span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-245&#x27;</span>)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> degree <span class="keyword">desc</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">28.</span>查询选修编号为“<span class="number">3</span><span class="number">-105</span>”且成绩高于选修编号为“<span class="number">3</span><span class="number">-245</span>”课程的同学的cno、sno和degree</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score </span><br><span class="line"><span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-105&#x27;</span> </span><br><span class="line"><span class="keyword">and</span> degree<span class="operator">&gt;</span><span class="keyword">all</span>(<span class="keyword">select</span> degree <span class="keyword">from</span> score <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;3-245&#x27;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>all**表示所有的关系</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="number">29.</span>查询所有教师和同学的name、sex和birthday</span><br><span class="line">别名 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> tname <span class="keyword">as</span> name,tsex <span class="keyword">as</span> sex,tbirthday <span class="keyword">as</span> birthday <span class="keyword">from</span> teacher </span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> sname,ssex,sbirthday <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="number">30.</span>查询所有“女”教师和“女”同学的name、sex、birthday</span><br><span class="line"><span class="keyword">select</span> tname <span class="keyword">as</span> name,tsex <span class="keyword">as</span> sex,tbirthday <span class="keyword">as</span> birthday <span class="keyword">from</span> teacher </span><br><span class="line"><span class="keyword">where</span> tsex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> </span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> sname,ssex,sbirthday <span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> ssex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">31.</span>查询成绩比该课程平均成绩低的同学的成绩表</span><br><span class="line"><span class="keyword">select</span> cno,<span class="built_in">avg</span>(degree) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score a <span class="keyword">where</span> degree <span class="operator">&lt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(degree) <span class="keyword">from</span> score b <span class="keyword">where</span> a.cno<span class="operator">=</span>b.cno);</span><br><span class="line"> </span><br><span class="line"><span class="number">32.</span>查询所有任课教师的tname和depart</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>任课：在课程表中安排了课程</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> tno <span class="keyword">in</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> course);</span><br><span class="line"><span class="keyword">select</span> tname,depart <span class="keyword">from</span> teacher <span class="keyword">where</span> tno <span class="keyword">in</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> course);</span><br><span class="line"> </span><br><span class="line"><span class="number">33.</span>查询至少有两名男生的班号</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> class <span class="keyword">from</span> student <span class="keyword">where</span> ssex <span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> class <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">34.</span>查询student表中不姓“王”的同学的记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">&#x27;王%&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="number">35.</span>查询student表中每个学生的姓名和年龄</span><br><span class="line">年龄：当前年份<span class="operator">-</span>出生年龄</span><br><span class="line">当前年龄：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span> (now());</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(sbirthday) <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> sname,<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(sbirthday) <span class="keyword">as</span> <span class="string">&#x27;年龄&#x27;</span> <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="number">36.</span>查询student表中最大和最小的sbirthday日期值</span><br><span class="line"><span class="keyword">select</span> sbirthday <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> sbirthday <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> sbirthday;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>max,min</em> <em>数值大小</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sbirthday) <span class="keyword">as</span> <span class="string">&#x27;最大&#x27;</span>,<span class="built_in">min</span>(sbirthday) <span class="keyword">as</span> <span class="string">&#x27;最小&#x27;</span> <span class="keyword">from</span> student;</span><br><span class="line"> </span><br><span class="line"><span class="number">37.</span>以班号和年龄从大到小的顺序查询student表中的全部记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> class sedc,sbirthday;</span><br><span class="line"> </span><br><span class="line"><span class="number">38.</span>查询“男”教师及其所上的课程</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> teacher <span class="keyword">where</span> tsex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> tno <span class="keyword">in</span>(<span class="keyword">select</span> tno <span class="keyword">from</span> teacher <span class="keyword">where</span> tsex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">39.</span>查询最高分同学的sno、cno和degree列</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> degree<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score);</span><br><span class="line"> </span><br><span class="line"><span class="number">40.</span>查询和“李军”同性别的所有同学的sname；</span><br><span class="line"><span class="keyword">select</span> ssex <span class="keyword">from</span> student <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;李军&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> student <span class="keyword">where</span> ssex<span class="operator">=</span>(<span class="keyword">select</span> ssex <span class="keyword">from</span> student <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;李军&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">41.</span>查询和李军同性别并且同班的同学sname</span><br><span class="line"><span class="keyword">select</span> sname <span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">where</span> ssex<span class="operator">=</span>(<span class="keyword">select</span> ssex <span class="keyword">from</span> score <span class="keyword">where</span> degree<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(degree) <span class="keyword">from</span> score))</span><br><span class="line"><span class="keyword">and</span> class<span class="operator">=</span>(<span class="keyword">select</span> class <span class="keyword">from</span> student <span class="keyword">where</span> sname<span class="operator">=</span><span class="string">&#x27;李军&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">42.</span>查询所有选修“计算机导论”课程的“男”同学的成绩表</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> ssex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;计算机导论&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score</span><br><span class="line"><span class="keyword">where</span> cno<span class="operator">=</span>(<span class="keyword">select</span> cno <span class="keyword">from</span> course <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;计算机导论&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> <span class="keyword">where</span> sno <span class="keyword">in</span>(<span class="keyword">select</span> sno <span class="keyword">from</span> student <span class="keyword">where</span> ssex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="number">43.</span>略</span><br></pre></td></tr></table></figure>

<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><p>SQL的四种连接查询</p>
<p>内连接</p>
<p>inner join或 join</p>
<p>外连接</p>
<p>左连接 left join 或者left outer join</p>
<p>右连接right join或者 right outer join</p>
<p>完全外连接 full join 或者full outer join</p>
<p>创建数据库：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database testJoin;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> use testJoin;</span><br><span class="line">Database changed</span><br><span class="line">mysql<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>创建两个表：</p>
<p>person 表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">id,</span><br><span class="line">name,</span><br><span class="line">cardId</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">cardId <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>card 表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">id,</span><br><span class="line">name</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> card(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_testjoin <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> card        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> person       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;饭卡&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;建行卡&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;农行卡&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;工商卡&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> card <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;邮政卡&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> card;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 建行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 工商卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> 邮政卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">6</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span>   <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="1-inner-join查询（内连接）"><a href="#1-inner-join查询（内连接）" class="headerlink" title="1.inner join查询（内连接）"></a>1.inner join查询（内连接）</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">inner</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId <span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">内联查询，就是两张表中的数据，通过某个字段相对，查询出相关记录数据</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId <span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="2-left-join-左外连接"><a href="#2-left-join-左外连接" class="headerlink" title="2.left join(左外连接)"></a>2.left join(左外连接)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">left</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span>   <span class="number">6</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">左外连接，会把左表里面的所有数据取出来，而右表中的数据，如果有相等的，就显示出来，如果没有，就补<span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span>   <span class="number">6</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="3-right-join-右外连接"><a href="#3-right-join-右外连接" class="headerlink" title="3.right join(右外连接)"></a>3.right join(右外连接)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">right</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 建行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 工商卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> 邮政卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">右外连接，会把右表里面的所有数据取出来，而左表中的数据，如果有相等的，就显示出来，如果没有，就补<span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 建行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 工商卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> 邮政卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="number">4.</span><span class="keyword">full</span> <span class="keyword">join</span>(全外连接)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">full</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"> </span><br><span class="line">mysql 不支持<span class="keyword">full</span> <span class="keyword">join</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">left</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> person <span class="keyword">right</span> <span class="keyword">join</span> card <span class="keyword">on</span> person.cardId<span class="operator">=</span>card.id;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name  <span class="operator">|</span> cardId <span class="operator">|</span> id  <span class="operator">|</span> name   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 张三  <span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 饭卡   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 李四  <span class="operator">|</span>   <span class="number">3</span> <span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 农行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 王五  <span class="operator">|</span>   <span class="number">6</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 建行卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 工商卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>  <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> 邮政卡  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+--------+--------+------+-----------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>MySQL中，事务是一个最小的不可分割的工作单元。事务能够保证一个业务的完整性。</p>
<p>比如银行转账：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">a<span class="operator">-</span><span class="operator">&gt;</span><span class="number">-100</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">b<span class="operator">-</span><span class="operator">&gt;</span><span class="operator">+</span><span class="number">100</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">多条<span class="keyword">sql</span>语句，可能会有同时成功的要求，要么就同时失败</span><br><span class="line"> </span><br><span class="line">MySQL中如何控制事务？</span><br><span class="line"> </span><br><span class="line"><span class="number">1.</span>MySQL默认开启事务（自动提交）</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@autocommit</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">默认开启事务的作用：</span><br><span class="line">当我们去执行一个<span class="keyword">sql</span>语句的时候，效果会立即体现出来，且不能回滚</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> database bank;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">money <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"> </span><br><span class="line">事务回滚：撤销<span class="keyword">sql</span>语句执行效果</span><br><span class="line">roolback；</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">设置MySQL自动提交为<span class="literal">false</span></span><br><span class="line"><span class="keyword">set</span> autocommit<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@autocommit</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">上面的操作，关闭了MySQL的自动提交（autocommit）</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;b&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">再一次插入数据</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;b&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">手动提交数据</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">commit</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">再撤销，是不可以撤销的（持久性）</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="字段提交-autocommit-x3D-1"><a href="#字段提交-autocommit-x3D-1" class="headerlink" title="字段提交 @@autocommit&#x3D;1"></a>字段提交 @@autocommit&#x3D;1</h3><h3 id="手动提交-commit"><a href="#手动提交-commit" class="headerlink" title="手动提交 commit"></a>手动提交 commit</h3><h4 id="事务回滚-rollback"><a href="#事务回滚-rollback" class="headerlink" title="事务回滚 rollback"></a>事务回滚 rollback</h4><p>如果说这个时候转账：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">rollback</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">事务提供了一个反悔的机会</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">set</span> autocommit<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@autocommit</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">begin</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line">都可以帮助手动开启一个事务</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>事务回滚</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>没有被撤销</em></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="手动开启事务（1）"><a href="#手动开启事务（1）" class="headerlink" title="手动开启事务（1）"></a>手动开启事务（1）</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">begin</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="手动开启事务（2）"><a href="#手动开启事务（2）" class="headerlink" title="手动开启事务（2）"></a>手动开启事务（2）</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">900</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="事务开启之后，一旦提交，回滚（rollback）无效"><a href="#事务开启之后，一旦提交，回滚（rollback）无效" class="headerlink" title="事务开启之后，一旦提交，回滚（rollback）无效"></a>事务开启之后，一旦提交，回滚（rollback）无效</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">start</span> transaction;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span> Changed: <span class="number">1</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span> Changed: <span class="number">1</span> Warnings: <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">commit</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">rollback</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a  <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b  <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">事务的四大特征：</span><br><span class="line">A：原子性：事务是最小的单位，不可以再分割</span><br><span class="line">C：一致性：事务要求，同一事务中的<span class="keyword">sql</span>语句，必须保证同时成功或者同时失败</span><br><span class="line">I：隔离性：事务<span class="number">1</span>和事务<span class="number">2</span>之间是具有隔离性的</span><br><span class="line">D：持久性：事务一旦结束，就不可以返回</span><br><span class="line"> </span><br><span class="line">事务开启：</span><br><span class="line"><span class="number">1.</span>修改默认提交 <span class="keyword">set</span> autocommit<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="number">2.</span><span class="keyword">begin</span>;</span><br><span class="line"><span class="number">3.</span><span class="keyword">start</span> transaction;</span><br><span class="line"> </span><br><span class="line">事务手动提交</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"> </span><br><span class="line">事务手动回滚</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">事务的隔离性：</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>1.read uncommitted;</th>
<th>读未提交的</th>
</tr>
</thead>
<tbody><tr>
<td>2.read committed;</td>
<td>都已经提交的</td>
</tr>
<tr>
<td>3.repeatable read;</td>
<td>可重复读</td>
</tr>
<tr>
<td>4.serializable;</td>
<td>串行化</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="1-read-uncommitted"><a href="#1-read-uncommitted" class="headerlink" title="1-read uncommitted"></a>1-read uncommitted</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">如果有事务a,事务b,</span><br><span class="line">a事务对数据进行操作，在操作的过程中，事务没有被提交，但是b可以看见a操作的结果</span><br><span class="line"> </span><br><span class="line">bank表 <span class="keyword">user</span>表</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;小明&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;淘宝店&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">如何查看数据库的隔离级别</span><br><span class="line">MySQL <span class="number">8.0</span>:</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><code>select  @@global.transaction_isolation;</code></th>
<th><code>系统级别</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>select  @@transaction_isolation;</code></td>
<td><code>会话级别</code></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MySQL默认隔离级别 REPEATABLE<span class="operator">-</span>READ</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> REPEATABLE<span class="operator">-</span>READ        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">MySQL <span class="number">5.</span>x:</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><code>select  @@global.tx_isolation;</code></th>
<th><code>系统级别</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>select  @@tx_isolation;</code></td>
<td><code>会话级别</code></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line">如何修改隔离级别</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read uncommitted;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> READ<span class="operator">-</span>COMMITTED         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read uncommitted;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> READ<span class="operator">-</span>UNCOMMITTED        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">转账：小明在淘宝店买鞋子：<span class="number">800</span>块</span><br><span class="line">小明<span class="operator">-</span>》成都 ATM</span><br><span class="line">淘宝店<span class="operator">-</span>》广州 ATM</span><br><span class="line"> </span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="number">-800</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> money <span class="operator">=</span>money<span class="operator">+</span><span class="number">800</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;淘宝店&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">告知淘宝店</span><br><span class="line">淘宝店在广州查账</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">发货</span><br><span class="line">晚上请女朋友吃饭</span><br><span class="line">花<span class="number">1800</span></span><br><span class="line"> </span><br><span class="line">小明<span class="keyword">rollback</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">淘宝结账的时候发现钱不够</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">如果两个地方都在进行操作，如果事务a开启之后，他的数据可以被其他事务读取到</span><br><span class="line">这样就会出现“脏读”</span><br><span class="line">脏读：一个事务读到了另外一个事务没有提交的数据</span><br><span class="line">实际开发是不允许脏读出现的</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="2-read-committed"><a href="#2-read-committed" class="headerlink" title="2-read committed"></a>2-read committed</h5><p>修改隔离级别为 READ-COMMITTED</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> READ<span class="operator">-</span>COMMITTED         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">bank 数据库 <span class="keyword">user</span> 表</span><br><span class="line"> </span><br><span class="line">小张：银行的会计</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">小张出去上厕所去。。。</span><br><span class="line"> </span><br><span class="line">小王：</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;c&#x27;</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">小张回来了</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(money) <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(money) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">820.0000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">money 的平均值不是<span class="number">1000</span>，变少了。。</span><br><span class="line">虽然只能读到事务提交的数据，但是还是会出现问题，就是读取同一个表的数据，发现前后不一致。</span><br><span class="line">不可重复读现象：read committed</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="3-repeatable-read"><a href="#3-repeatable-read" class="headerlink" title="3-repeatable read"></a>3-repeatable read</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level repeatable read;</span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> REPEATABLE<span class="operator">-</span>READ        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">在repeatable read 隔离级别下出现什么问题：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"> </span><br><span class="line">王尼玛<span class="operator">-</span>北京</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;d&#x27;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>Query OK, 1 row affected (0.00 sec)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">commit</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span> <span class="operator">|</span> d     <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">王尼玛<span class="operator">-</span>北京</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;d&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;d&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;6&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;PRIMARY&#x27;</span></span><br><span class="line"> </span><br><span class="line">这就现象就叫做幻读！</span><br><span class="line">两个事务，事务a和事务b同时操作一张表 事务a提交的数据也不能被事务b读到，可能出现幻读</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="4-serializable"><a href="#4-serializable" class="headerlink" title="4-serializable"></a>4-serializable</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line">修改隔离级别为串行化</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level serializable;</span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@global</span>.transaction_isolation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> SERIALIZABLE          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span> <span class="operator">|</span> d     <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"> </span><br><span class="line">王尼玛<span class="operator">-</span>北京</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">&#x27;赵铁柱&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">commit</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span> <span class="operator">|</span> d     <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">7</span> <span class="operator">|</span> 赵铁柱  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">王尼玛<span class="operator">-</span>北京</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> money <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> a     <span class="operator">|</span>  <span class="number">800</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> b     <span class="operator">|</span> <span class="number">1200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> 小明   <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span> <span class="operator">|</span> 淘宝店  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span> <span class="operator">|</span> c     <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span> <span class="operator">|</span> d     <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">7</span> <span class="operator">|</span> 赵铁柱  <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-----------+-------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> <span class="keyword">values</span>(<span class="number">8</span>,<span class="string">&#x27;王小花&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"> </span><br><span class="line">被卡住了</span><br><span class="line"> </span><br><span class="line">当<span class="keyword">user</span>表被另外一个事务操作的时候，其他事务里面的写操作，是不可以进行的</span><br><span class="line">进入排队状态，直到王尼玛那边事务结束之后，张全蛋的写入才会执行</span><br><span class="line">前提是在没有等待超时的情况下</span><br><span class="line"> </span><br><span class="line">王尼玛<span class="operator">-</span>北京</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">commit</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">张全蛋<span class="operator">-</span>成都</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">串行化带来的问题：性能很差</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">性能：uncommitted<span class="operator">&gt;</span>committed<span class="operator">&gt;</span>repeatable<span class="operator">&gt;</span>serializable;</span><br><span class="line">隔离级别越高性能越差</span><br><span class="line"> </span><br><span class="line">MySQL默认隔离级别是 repeatable</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>MySQL</tag>
        <tag>事务</tag>
      </tags>
  </entry>
  <entry>
    <title>python入门</title>
    <url>/2020/03/05/python%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1 id="python入门"><a href="#python入门" class="headerlink" title="python入门"></a>python入门</h1><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>打印的几个语法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#输出数字 字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="number">1.1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hape&#x27;</span>)</span><br><span class="line"><span class="comment">#输出运算结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span>+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出到文件</span></span><br><span class="line">fp=<span class="built_in">open</span>(<span class="string">&#x27;D:/Shyee.txt&#x27;</span>,<span class="string">&#x27;a+&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;??!!??ioio&#x27;</span>,file=fp)</span><br><span class="line">fp.close()</span><br><span class="line"><span class="comment">#不换行输出</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hi&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;am&#x27;</span>,<span class="string">&#x27;Shyee&#x27;</span>)</span><br><span class="line"><span class="comment">#转移字符实现换行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;转移\n字符&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#\t 空一格子表位(默认为四个字符，及占四个字符的整数倍，详细参考存储)</span></span><br><span class="line"><span class="comment">#\r 回车(覆盖之前的输出)</span></span><br><span class="line"><span class="comment">#\b 退格</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#原字符，在输出之前加一个r或者R，使得转义字符不起作用</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">R&#x27;原字\n符&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#赋值</span></span><br><span class="line">name=<span class="string">&#x27;shyee&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;标识&#x27;</span>,<span class="built_in">id</span>(name))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;类型&#x27;</span>,<span class="built_in">type</span>(name))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;值&#x27;</span>,name)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>shyee<br>标识 1739219025136<br>类型 &lt;class ‘str’&gt;<br>值 shyee</p>
<p>0b 二进制<br>0o 八进制<br>0x 十六进制</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#小数加减法提高精度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1.1</span>+<span class="number">2.2</span>)</span><br><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal</span><br><span class="line"><span class="built_in">print</span>(Decimal(<span class="string">&#x27;1.1&#x27;</span>)+Decimal(<span class="string">&#x27;2.2&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p>3.3000000000000003<br>3.3</p>
<p><img src="D:\bloglocal\python入门.assets\20200323150522213.jpg" alt="open参数"></p>
<p>类型转换</p>
<p>-&gt;string:str()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I am &#x27;</span>+<span class="built_in">str</span>(<span class="number">16</span>)+<span class="string">&#x27; years old&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p>I am 16 years old</p>
<p>-&gt;int :int()</p>
<p>字符串为小数串不能转为int,必须是数字串（整数）</p>
<p>-&gt;float :float()</p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#输入</span></span><br><span class="line">key=<span class="built_in">input</span>(<span class="string">&quot;输入前的提示语&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(key)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#输入两个整数，求整数的和</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;第一个整数&quot;</span>))+<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;第二个整数&quot;</span>)))</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p>第一个整数1<br>第二个整数1<br>2</p>
<p>加+ 减- 乘* 除&#x2F; </p>
<p>整除&#x2F;&#x2F;（一正一负的整除结果都是向下取整） </p>
<p>取余% （余数&#x3D;被除数-除数*商）</p>
<p>求幂运算** （2**3,2的3次方）</p>
<p>赋值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=b=c=<span class="number">20</span>;</span><br><span class="line"><span class="built_in">print</span>(a,<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(b,<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(c,<span class="built_in">id</span>(c))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>20 140718458633888<br>20 140718458633888<br>20 140718458633888</p>
<p>解包赋值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">q,w,e=<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(q,w,e)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>1 2 3</p>
<p>实现swap函数</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#实现交换</span></span><br><span class="line">q,w,e=w,e,q</span><br><span class="line"><span class="built_in">print</span>(q,w,e)</span><br></pre></td></tr></table></figure>

<p>运行结果:</p>
<p>2 3 1</p>
<p>“&#x3D;&#x3D;”与”is”</p>
<p>&#x3D;&#x3D; 比较的是value值</p>
<p>is比较的是标识(id)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">10</span></span><br><span class="line">b=<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(a==b)</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br><span class="line"></span><br><span class="line">arr1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">arr2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(arr1==arr2)</span><br><span class="line"><span class="built_in">print</span>(arr1 <span class="keyword">is</span> arr2)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(arr1))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(arr2))</span><br><span class="line"><span class="built_in">print</span>(arr1 <span class="keyword">is</span> <span class="keyword">not</span> arr2)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>True<br>True<br>True<br>False<br>2293512569096<br>2293512569480<br>True</p>
<p>not 取反</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#not 取反</span></span><br><span class="line"><span class="built_in">print</span>(a==b)</span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">not</span> a==b)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>True<br>False</p>
<p>in和not in</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#in&amp;not in</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;s&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;shyee&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;l&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">&#x27;shyee&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">in</span> arr2)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>True<br>True<br>False</p>
<p>按位与&amp;按位或</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">4</span>&amp;<span class="number">8</span>)</span><br><span class="line"><span class="comment"># 4：0100 </span></span><br><span class="line"><span class="comment"># 8：1000</span></span><br><span class="line"><span class="comment">#按位与为0000</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">4</span>|<span class="number">8</span>)</span><br><span class="line"><span class="comment">#按位或为1100</span></span><br></pre></td></tr></table></figure>

<p>运行结果：0 12</p>
<p>左移&lt;&lt;和右移&gt;&gt;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=<span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(a&lt;&lt;<span class="number">1</span>)</span><br><span class="line"><span class="keyword">while</span> a&lt;<span class="number">100</span>:</span><br><span class="line">    a=a&lt;&lt;<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">a=<span class="number">4</span></span><br><span class="line"><span class="comment"># print(a&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">while</span> a&gt;<span class="number">0</span>:</span><br><span class="line">    a=a&gt;&gt;<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment">#正数右移到最后为0</span></span><br><span class="line"><span class="comment">#负数右移到最后为-1</span></span><br><span class="line">a=-<span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(a&gt;&gt;<span class="number">1</span>&gt;&gt;<span class="number">1</span>&gt;&gt;<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>8<br>8<br>16<br>32<br>64<br>128</p>
<p>2<br>1<br>0</p>
<p>-1</p>
<p>优先级：算数运算符&gt;移位运算符(包括&amp; 、|)&gt;比较运算符&gt;与或运算符&gt;赋值运算符</p>
<p>0的布尔值为false none的bool为false</p>
<p>‘ ‘的布尔值为false(空的数据结构都是false)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">90</span>&lt;=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;输入数值&#x27;</span>))&lt;=<span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;数字在90~100之间&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;数值在90~100之间&#x27;</span> <span class="keyword">if</span> <span class="number">90</span>&lt;=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;输入数值&#x27;</span>))&lt;=<span class="number">100</span> <span class="keyword">else</span> <span class="string">&#x27;数值不在90~100之间&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>输入数值99<br>数字在90<del>100之间<br>输入数值60<br>数值不在90</del>100之间</p>
<p>pass在while中与continue的区别，break还是那个break</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i=<span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> i&gt;<span class="number">0</span>:</span><br><span class="line">    i-=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;pass&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;----continue----&#x27;</span>)</span><br><span class="line">i=<span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> i&gt;<span class="number">0</span>:</span><br><span class="line">    i-=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;continue&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;----break----&#x27;</span>)</span><br><span class="line">i=<span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> i&gt;<span class="number">0</span>:</span><br><span class="line">    i-=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;break&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>9<br>pass<br>8<br>pass<br>7<br>pass<br>6<br>pass<br>5<br>pass<br>4<br>pass<br>3<br>pass<br>2<br>pass<br>1<br>pass<br>0<br>pass<br>—-continue—-<br>9<br>8<br>7<br>6<br>5<br>4<br>3<br>2<br>1<br>0<br>—-break—-<br>9</p>
<p>range</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#range</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>)))<span class="comment">#默认步长为1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>)))<span class="comment">#步长为2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> <span class="keyword">in</span> <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>)))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>range(0, 10)<br>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]<br>[1, 2, 3, 4, 5, 6, 7, 8, 9]<br>[1, 3, 5, 7, 9]<br>False</p>
<p>for in</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;shyee&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>s<br>h<br>y<br>e<br>e</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Shyee&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>Shyee<br>Shyee<br>Shyee<br>Shyee</p>
<p>求1~100之间的偶数和</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n=<span class="number">0</span></span><br><span class="line">c=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">101</span>,<span class="number">2</span>):</span><br><span class="line">    n+=<span class="number">2</span></span><br><span class="line">    c+=n</span><br><span class="line"><span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure>

<p>运行结果：2550</p>
<p>找到100~999之间的水仙花数</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i=<span class="number">100</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">1000</span>):</span><br><span class="line">    <span class="keyword">if</span> ((i%<span class="number">10</span>)**<span class="number">3</span>+(<span class="built_in">int</span>(i/<span class="number">10</span>)%<span class="number">10</span>)**<span class="number">3</span>+(<span class="built_in">int</span>(i/<span class="number">100</span>)%<span class="number">10</span>)**<span class="number">3</span>)==i:</span><br><span class="line">        <span class="built_in">print</span>(i,<span class="string">&#x27;是水仙花数&#x27;</span>)</span><br><span class="line">    i += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p>153 是水仙花数<br>370 是水仙花数<br>371 是水仙花数<br>407 是水仙花数</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>入门</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>python入门3</title>
    <url>/2020/03/05/python%E5%85%A5%E9%97%A83/</url>
    <content><![CDATA[<h1 id="python入门3"><a href="#python入门3" class="headerlink" title="python入门3"></a>python入门3</h1><p><img src="D:\bloglocal\image-20210129170554037.png" alt="image-20210129170554037"></p>
<p>利用matplotlib画图</p>
<p>import matplotlib.pyplot as plt</p>
<p>plt.figure(figsize&#x3D;(),dpi&#x3D;) figsize:指定图的长宽 dpi: 图像的清晰度 返回fig对象</p>
<p>绘制图像 plt.plot()</p>
<p>显示图像</p>
<p>plt.show()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示天气</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建画布</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">10</span>),dpi=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制折线</span></span><br><span class="line">plt.plot([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],[<span class="number">17</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">8</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图像</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<p><img src="D:\bloglocal\image-20210131195633439.png" alt="image-20210131195633439"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 自定义x y刻度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># x要显示的刻度</span></span><br><span class="line"><span class="comment"># plt.xticks(x,)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># y要显示的刻度</span></span><br><span class="line"><span class="comment"># plt.yticks(y,)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决中文乱码问题</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画出温度变化图</span></span><br><span class="line"><span class="comment"># 准备xy坐标数据</span></span><br><span class="line">x=<span class="built_in">range</span>(<span class="number">60</span>)</span><br><span class="line">y_DongYing=[random.uniform(<span class="number">15</span>,<span class="number">18</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入上海的数据</span></span><br><span class="line">y_ShangHai=[random.uniform(<span class="number">25</span>,<span class="number">28</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建画布</span></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">8</span>),dpi=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">plt.plot(x,y_DongYing,label=<span class="string">&#x27;东营&#x27;</span>)</span><br><span class="line">plt.plot(x,y_ShangHai,color=<span class="string">&#x27;g&#x27;</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,label=<span class="string">&#x27;上海&#x27;</span>)<span class="comment">#线的风格</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造x的刻度</span></span><br><span class="line">xTicksLabel=[<span class="string">&quot;11点&#123;&#125;分&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"><span class="comment"># 构造y的刻度</span></span><br><span class="line">yTicks=<span class="built_in">range</span>(<span class="number">40</span>)</span><br><span class="line"><span class="comment"># 修改x y轴坐标的刻度显示</span></span><br><span class="line">plt.xticks(x[::<span class="number">5</span>],xTicksLabel[::<span class="number">5</span>])</span><br><span class="line">plt.yticks(yTicks[::<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加网格显示</span></span><br><span class="line">plt.grid(<span class="literal">True</span>,linestyle=<span class="string">&quot;--&quot;</span>,alpha=<span class="number">1</span>)<span class="comment">#alpha：透明度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加描述信息</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;时间&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;温度&quot;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;当地气温变化&quot;</span>,fontsize=<span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像保存</span></span><br><span class="line">plt.savefig(<span class="string">&quot;D:/pictures/当地气温变化.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;best&#x27;</span>)<span class="comment">#等于plt.legend(loc=0)</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="D:\bloglocal\当地气温变化.png" alt="当地气温变化"></p>
<h2 id="多个坐标系实现绘图"><a href="#多个坐标系实现绘图" class="headerlink" title="多个坐标系实现绘图"></a>多个坐标系实现绘图</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 自定义x y刻度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># x要显示的刻度</span></span><br><span class="line"><span class="comment"># plt.xticks(x,)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># y要显示的刻度</span></span><br><span class="line"><span class="comment"># plt.yticks(y,)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决中文乱码问题</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画出温度变化图</span></span><br><span class="line"><span class="comment"># 准备xy坐标数据</span></span><br><span class="line">x=<span class="built_in">range</span>(<span class="number">60</span>)</span><br><span class="line">y_DongYing=[random.uniform(<span class="number">15</span>,<span class="number">18</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入上海的数据</span></span><br><span class="line">y_ShangHai=[random.uniform(<span class="number">25</span>,<span class="number">28</span>) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建画布</span></span><br><span class="line">fig,axes=plt.subplots(nrows=<span class="number">1</span>,ncols=<span class="number">2</span>,figsize=(<span class="number">20</span>,<span class="number">8</span>),dpi=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">axes[<span class="number">0</span>].plot(x,y_DongYing,label=<span class="string">&#x27;东营&#x27;</span>)</span><br><span class="line">axes[<span class="number">1</span>].plot(x,y_ShangHai,color=<span class="string">&#x27;g&#x27;</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,label=<span class="string">&#x27;上海&#x27;</span>)<span class="comment">#线的风格</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造x的刻度</span></span><br><span class="line">xTicksLabel=[<span class="string">&quot;11点&#123;&#125;分&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> x]</span><br><span class="line"><span class="comment"># 构造y的刻度</span></span><br><span class="line">yTicks=<span class="built_in">range</span>(<span class="number">40</span>)</span><br><span class="line"><span class="comment">#修改刻度显示</span></span><br><span class="line">axes[<span class="number">0</span>].set_xticks(x[::<span class="number">5</span>])</span><br><span class="line">axes[<span class="number">0</span>].set_yticks(yTicks[::<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">axes[<span class="number">0</span>].set_xticklabels(xTicksLabel[::<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">axes[<span class="number">1</span>].set_xticks(x[::<span class="number">5</span>])</span><br><span class="line">axes[<span class="number">1</span>].set_yticks(yTicks[::<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">axes[<span class="number">1</span>].set_xticklabels(xTicksLabel[::<span class="number">5</span>])</span><br><span class="line"><span class="comment"># 添加网格</span></span><br><span class="line">axes[<span class="number">0</span>].grid(<span class="literal">True</span>,linestyle=<span class="string">&quot;--&quot;</span>,alpha=<span class="number">1</span>)</span><br><span class="line">axes[<span class="number">1</span>].grid(<span class="literal">True</span>,linestyle=<span class="string">&quot;--&quot;</span>,alpha=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加描述信息</span></span><br><span class="line">axes[<span class="number">0</span>].set_xlabel(<span class="string">&quot;时间&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_ylabel(<span class="string">&quot;温度&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_title(<span class="string">&quot;当地气温变化&quot;</span>,fontsize=<span class="number">22</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_xlabel(<span class="string">&quot;时间&quot;</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_ylabel(<span class="string">&quot;温度&quot;</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_title(<span class="string">&quot;当地气温变化&quot;</span>,fontsize=<span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">axes[<span class="number">0</span>].legend(loc=<span class="string">&#x27;best&#x27;</span>)<span class="comment">#等于plt.legend(loc=0)</span></span><br><span class="line">axes[<span class="number">1</span>].legend(loc=<span class="string">&#x27;best&#x27;</span>)<span class="comment">#等于plt.legend(loc=0)</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="D:\bloglocal\download.png" alt="download"></p>
<h2 id="其他领域"><a href="#其他领域" class="headerlink" title="其他领域"></a>其他领域</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x=np.linspace(-<span class="number">10</span>,<span class="number">10</span>,<span class="number">1000</span>)</span><br><span class="line">y=np.sin(x)</span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">8</span>),dpi=<span class="number">100</span>)</span><br><span class="line">plt.plot(x,y)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="D:\bloglocal\python入门3.assets\download.png" alt="download"></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>入门</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>vue</title>
    <url>/2023/09/28/vue/</url>
    <content><![CDATA[<p>之前在idea上写过的vue代码找不到了，为了防止下次再找不到，写一个md记录一下。</p>
<h1 id="vue-的安装"><a href="#vue-的安装" class="headerlink" title="vue 的安装"></a>vue 的安装</h1><p>需要15版本以上的npm</p>
<p>执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm init vue@lastest</span><br></pre></td></tr></table></figure>

<p>根据需求选择合适的开发环境</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">√ Project name: ... vue01</span><br><span class="line">√ Add TypeScript? ... No / Yes</span><br><span class="line">√ Add JSX Support? ... No / Yes</span><br><span class="line">√ Add Vue Router for Single Page Application development? ... No / Yes</span><br><span class="line">√ Add Pinia for state management? ... No / Yes</span><br><span class="line">√ Add Vitest for Unit Testing? ... No / Yes</span><br><span class="line">√ Add an End-to-End Testing Solution? » No</span><br><span class="line">√ Add ESLint for code quality? ... No / Yes</span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd vue01(创建项目的文件夹)</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>项目基本文件如图（删掉了一些）</p>
<p><img src="/./pic/vue/483811147457300.png"></p>
<p>在app.vue中导入一下component</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import Helloworld from &#x27;./components/HelloWorld.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;Helloworld/&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在HelloWorld.vue中随便写点东西</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            msg: &#x27;一条消息&#x27;,</span><br><span class="line">            number: &#x27;2&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &#123;&#123; msg &#125;&#125;</span><br><span class="line">        &lt;h4&gt;&#123;&#123; number + 1 &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在前端基本跑起来了</p>
<p><img src="/./pic/vue/483966114324600.png"></p>
<h2 id="v-bind：绑定属性"><a href="#v-bind：绑定属性" class="headerlink" title="v-bind：绑定属性"></a>v-bind：绑定属性</h2><p>主要用于绑定class和id（标签里的属性）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;一条消息&#x27;</span>,</span><br><span class="line">            <span class="attr">number</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">            situation : <span class="string">&#x27;active&#x27;</span>,</span><br><span class="line">            dynamicId : <span class="string">&#x27;appld&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; msg &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;situation&quot;</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><img src="/./pic/vue/500038355822600.png"></p>
<p>如果一个data的值是null或者undefined，则绑定不上</p>
<p>v-bind简写方式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div :class=&quot;situation&quot; :id=&quot;dynamicId&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>v-bind可以绑定对象</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">msg</span>: <span class="string">&#x27;一条消息&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">number</span>: <span class="string">&#x27;2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">situation</span>: <span class="string">&#x27;active&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dynamicId</span>: <span class="string">&#x27;appld&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">objectAttrs</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: <span class="string">&#x27;apple&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">class</span>: <span class="string">&#x27;title&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;&#123; msg &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;situation&quot;</span> <span class="attr">:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span></span><br><span class="line">        v-bind绑定</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">:</span>=<span class="string">&quot;objectAttrs&quot;</span>&gt;</span>v-bind可以绑定对象<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/./pic/vue/500627423989900.png"></p>
<h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><p>v-if<br>v-else</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">flag</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>条件渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span>&gt;</span>flag == true<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>flag == false<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>v-else-if</p>
<p>使用的时候的一般形式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;condiction===&#x27;a&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;condiction===&#x27;b&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>不赘述</p>
<p>v-show,用法与v-if类似，但是只能判定自身true和false</p>
<p>v-show的标签始终都会渲染，只是如果为false，则不显示。而v-if，如果为false则不会渲染，只有当true的时候才会重新添加。</p>
<h2 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h2><p>v-for</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">list</span>: [<span class="string">&quot;第一条&quot;</span>, <span class="string">&quot;第二条&quot;</span>, <span class="string">&quot;第三条&quot;</span>, <span class="string">&quot;第四条&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>聊表渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;(k, kk) in list&quot;</span>&gt;</span>&#123;&#123; kk &#125;&#125;-&#123;&#123; k &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/./pic/vue/503391372867600.png"></p>
<p>对于json串的渲染</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">list</span>: [<span class="string">&quot;第一条&quot;</span>, <span class="string">&quot;第二条&quot;</span>, <span class="string">&quot;第三条&quot;</span>, <span class="string">&quot;第四条&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">people</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;age&quot;</span>: <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;age&quot;</span>: <span class="number">25</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;city&quot;</span>: <span class="string">&quot;London&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Michael&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;age&quot;</span>: <span class="number">35</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;city&quot;</span>: <span class="string">&quot;Paris&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>聊表渲染<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;(k, kk) in list&quot;</span>&gt;</span>&#123;&#123; kk &#125;&#125;-&#123;&#123; k &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in people&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>姓名：&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>年龄：&#123;&#123; item.age &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>城市：&#123;&#123; item.city &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/./pic/vue/502882198084500.png"></p>
<p><code>&lt;p v-for=&quot;(k, kk) in list&quot;&gt;&#123;&#123; kk &#125;&#125;-&#123;&#123; k &#125;&#125;&lt;/p&gt;</code>对于对象的遍历，可以用三个参数<code>&lt;p v-for=&quot;(value,item,index) in list&quot;&gt;&#123;&#123; index &#125;&#125;-&#123;&#123; item &#125;&#125;-&#123;&#123; value &#125;&#125;&lt;/p&gt;</code></p>
<p>使用v-bind对遍历的数据加key属性可以减少更新数据时的内存消耗（使用唯一索引id）</p>
<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><p>我们可以使用v-on指令(简写为 @)来监听DOM事件，并在事件触发时执行对应的JavaScript。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>事件处理--内联方式<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>Add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count--&quot;</span>&gt;</span>Sub<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/./pic/vue/504459063918100.png"></p>
<p>事件参数</p>
<p>vue中的event对象就是原生JS中的Event对象</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">names</span>: [<span class="string">&quot;Shyee&quot;</span>, <span class="string">&quot;Judy&quot;</span>, <span class="string">&quot;Lissa&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">getNameHandler</span>(<span class="params">msg, e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>事件处理--参数传递<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;getNameHandler(item, $event)&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in names&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vue3</tag>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>上海之行</title>
    <url>/2020/03/01/%E4%B8%8A%E6%B5%B7%E4%B9%8B%E8%A1%8C/</url>
    <content><![CDATA[<p>2020年的第一站✈，想想已经过去将近三个月了。</p>
<h3 id="1月5日"><a href="#1月5日" class="headerlink" title="1月5日"></a>1月5日</h3><h4 id="7-00-庆阳"><a href="#7-00-庆阳" class="headerlink" title="7:00 庆阳"></a>7:00 庆阳</h4><p>已经准备了半个月的好心情被这一场雪搞的无比焦急。本以为五号，我可以睡个懒觉(✈是22点西安–&gt;上海的)，然后，去买点路上吃的零食🍪🍪，再然后坐上去西安的大巴…</p>
<p>结果，因为不稳定的高速封路的消息，使得我忙活了一早上，在退票与改票之间徘徊。</p>
<h4 id="14-20-庆阳"><a href="#14-20-庆阳" class="headerlink" title="14:20 庆阳"></a>14:20 庆阳</h4><p>终于，我还是在14点的时候赶上了一趟正规的赶往咸阳机场的大巴。🤦‍♂️</p>
<h4 id="18-08-咸阳机场"><a href="#18-08-咸阳机场" class="headerlink" title="18:08 咸阳机场"></a>18:08 咸阳机场</h4><p>经历了漫长的奔波，我还是顺利的赶到了咸阳机场,顺利的取出机票，顺利值机。</p>
<img src="/2020/03/01/%E4%B8%8A%E6%B5%B7%E4%B9%8B%E8%A1%8C/IMG_20200105_180845.jpg" class="" title="咸阳机场">

<h4 id="21-20-候机区"><a href="#21-20-候机区" class="headerlink" title="21:20 候机区"></a>21:20 候机区</h4><p>飞机没有晚点，顺利登机。</p>
<h4 id="22-00-321客机"><a href="#22-00-321客机" class="headerlink" title="22:00 321客机"></a>22:00 321客机</h4><p>起飞🚀🚀🚀</p>
<h3 id="1月6日"><a href="#1月6日" class="headerlink" title="1月6日"></a>1月6日</h3><h4 id="00-25-浦东机场"><a href="#00-25-浦东机场" class="headerlink" title="00:25 浦东机场"></a>00:25 浦东机场</h4><p>成功抵达✌并开始对上海进行为期四天的市事访问。</p>
<img src="/2020/03/01/%E4%B8%8A%E6%B5%B7%E4%B9%8B%E8%A1%8C/IMG_20200105_234729.jpg" class="" title="虹桥机场">

<h4 id="1-55-静安区海友酒店"><a href="#1-55-静安区海友酒店" class="headerlink" title="1:55 静安区海友酒店"></a>1:55 静安区海友酒店</h4><p>下了飞机，就接到了在上海工作的学长的电话。真的是超级热情，从飞机出口处一直聊到机场出口处，正巧碰到了即将发车的通宵巴士，花了<strong>￥24</strong>把我送到了静安寺那片，然后又坐出租(<strong>￥18</strong>，1.2公里)，到了海友酒店楼下，一个比想象中的破了一些的楼。但是上楼上去发现酒店还算是比较新，因为当时看到近期才装修就订了。订的大床，虽然房间很小，但是设施很全，一个人住是真的够了。</p>
<p>然后<del>就睡觉了💤</del>兴奋得根本睡不着，我也根本不知道我几点睡的。</p>
<h4 id="6-40-静安区"><a href="#6-40-静安区" class="headerlink" title="6:40 静安区"></a>6:40 静安区</h4><p>我莫名奇妙的醒得这么早。而且，超级累😫。</p>
<p>但还是起来了，最近的地铁口里我大概1km，之前看到知乎上关于上海旅游有一个共同的point，办一张地铁三日卡💳，<strong>￥45</strong> 三日随便坐，真的是旅游党的福音，因为我还没有驾照，没法搞租车，所以基本的出行方式就是 腿 hello单车 交通车 和地铁。</p>
<h4 id="10-00-地铁站"><a href="#10-00-地铁站" class="headerlink" title="10:00 地铁站"></a>10:00 地铁站</h4><p>当售票员说 只收现金的时候 我人都啥了。</p>
<p>然后转身看到有售公交卡的机子，就顺便办了一张公交卡(旅游版)<strong>￥50</strong>，貌似不可退，满足了我的收藏欲，接着又下了当地的一个叫Metro大都会的App。</p>
<hr>
<p>要睡觉了，迟点更新~</p>
]]></content>
      <categories>
        <category>生活</category>
        <category>旅行</category>
      </categories>
      <tags>
        <tag>上海</tag>
      </tags>
  </entry>
  <entry>
    <title>从零开始学习螺旋波等离子体</title>
    <url>/2023/05/23/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6%E4%B9%A0%E8%9E%BA%E6%97%8B%E6%B3%A2%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93/</url>
    <content><![CDATA[<h2 id="维基百科的定义如下"><a href="#维基百科的定义如下" class="headerlink" title="维基百科的定义如下"></a>维基百科的定义如下</h2><p>在电磁学中，螺旋波是一种低频电磁波，在磁场存在的约束等离子体中可以存在。最初被观察到的螺旋波是大气哨声波，但它们也存在于固体导体或任何其他电磁等离子体中。波中的电场被霍尔效应所主导，几乎垂直于电流（而不是平行的，如果没有磁场），因此波的传播分量是螺旋形的，因此称为“螺旋波”。这个术语是由Aigrain创造的。</p>
<p>螺旋波有一种特殊的能力，可以在低温和高磁场条件下穿过纯金属。在普通导体中，大多数电磁波都不能做到这一点，因为由于自由电子的存在，金属的高导电性会起到屏蔽电磁场的作用。实际上，通常情况下电磁波会在金属上经历非常薄的皮深度：当试图进入金属时，电场或磁场会很快反射。 （因此是金属的光泽。）然而，皮深度取决于角频率的平方根的倒数。因此，低频电磁波可能能够克服皮深度问题，并遍布整个材料。</p>
<p>螺旋波的一个特性（仅使用霍尔效应项和电阻率项进行简单计算即可证明）是，在样品表面与磁场平行的位置，一个模式中包含的电流在完美导电的极限下“趋向于无穷大”；因此在这种表面区域的焦耳热损失趋向于一个非零极限。表面模式在与磁场平行的圆柱形样品中特别普遍，对于这种配置，方程的确切解法已经找到，并在随后的实验中发挥重要作用。</p>
<p>光滑模式和其超高电流密度的实用意义最初并未被认识到，但在几年之后，Boswell发现了螺旋波的优越等离子体产生能力，实现的电荷密度比以前的方法高出10倍，而不需要磁场。</p>
<p>从那时起，螺旋波在许多科学和工业应用中得到使用，无论何时需要高效的等离子体生成，例如在核聚变反应器和空间推进中（螺旋双层推进器和可变比冲磁约束等离子体火箭在其等离子体加热阶段中都利用了螺旋波）。螺旋波也用于等离子体刻蚀的程序中，用于制造计算机微电路。</p>
<p>螺旋放电是通过无线电频率加热诱导的螺旋波来激发等离子体。螺旋等离子源和感应耦合等离子体(ICP)之间的区别在于天线轴向存在一个磁场。这个磁场的存在创建了一个具有更高电离效率和更大电子密度的螺旋工作模式，而不是典型的ICP。目前，澳大利亚国立大学正在研究这项技术的应用。由商业开发的磁等离子发动机VASIMR也利用螺旋放电来产生其发动机中的等离子体。潜在地，基于螺旋双层推进器等离子体的火箭非常适合星际旅行。</p>
]]></content>
      <categories>
        <category>helicon</category>
      </categories>
      <tags>
        <tag>helicon</tag>
        <tag>plasma</tag>
      </tags>
  </entry>
  <entry>
    <title>做根网线</title>
    <url>/2020/03/05/%E5%81%9A%E6%A0%B9%E7%BD%91%E7%BA%BF/</url>
    <content><![CDATA[<p>如题🛠</p>
<p>双绞线+RJ-45连接器(水晶头)&#x3D;直通线&#x2F;交叉线</p>
<h4 id="直通线"><a href="#直通线" class="headerlink" title="直通线"></a>直通线</h4><p>双绞线缆两端按照EIA&#x2F;TIA568B规格连接水晶头,称该双绞线缆为直通线。</p>
<p><img src="D:\blog\source_posts\做根网线\image-20200313084755969.png" alt="image-20200313084755969"></p>
<h4 id="交叉线"><a href="#交叉线" class="headerlink" title="交叉线"></a>交叉线</h4><p>双绞线缆一端按照EIA&#x2F;TIA568A规格连接水晶头,另一端按EIA&#x2F;TIA568B规格连接<br>水晶头,称该双绞线缆为交叉线。</p>
<p><img src="D:\blog\source_posts\做根网线\image-20200313084850783.png" alt="image-20200313084850783"></p>
<h4 id="Cisco网络设备中"><a href="#Cisco网络设备中" class="headerlink" title="Cisco网络设备中"></a>Cisco网络设备中</h4><p>相同类型设备之间，用<strong>交叉线</strong>连接<br>不同类型设备之间，用<strong>直通线</strong>连接<br>目前大部分网络设备都支持自适应</p>
<h4 id="发送和接收"><a href="#发送和接收" class="headerlink" title="发送和接收"></a>发送和接收</h4><h5 id="不同类型设备-直通线"><a href="#不同类型设备-直通线" class="headerlink" title="不同类型设备:直通线"></a>不同类型设备:直通线</h5><p>发送(1&#x2F;2)–&gt;接收(1&#x2F;2 )<br>接收(3&#x2F;6)&lt;–发送(3&#x2F;6 )<br><img src="D:\blog\source_posts\做根网线\image-20200313085312548.png" alt="image-20200313085312548"></p>
<h5 id="相同类型设备-交叉线"><a href="#相同类型设备-交叉线" class="headerlink" title="相同类型设备:交叉线"></a>相同类型设备:交叉线</h5><p>发送(1&#x2F;2)–&gt;接收(3&#x2F;6)<br>接收(1&#x2F;2 )&lt;–发送(3&#x2F;6 )</p>
<p><img src="D:\blog\source_posts\做根网线\image-20200313085614513.png" alt="image-20200313085614513"></p>
<p><strong>自适应就是通过检测确定对方的发送端和接收端</strong></p>
<h4 id="EIA-x2F-TIA568B规格线序"><a href="#EIA-x2F-TIA568B规格线序" class="headerlink" title="EIA&#x2F;TIA568B规格线序"></a>EIA&#x2F;TIA568B规格线序</h4><p><img src="D:\blog\source_posts\做根网线\image-20200313085720071.png" alt="image-20200313085720071"></p>
]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>双绞线</tag>
        <tag>直通线</tag>
        <tag>交叉线</tag>
      </tags>
  </entry>
  <entry>
    <title>关于土豆🥔</title>
    <url>/2020/03/02/%E5%85%B3%E4%BA%8E%E5%9C%9F%E8%B1%86%F0%9F%A5%94/</url>
    <content><![CDATA[<p>关于🥔啊~</p>
<span id="more"></span>

<h2 id="如何刮土豆才能刮的干净？"><a href="#如何刮土豆才能刮的干净？" class="headerlink" title="如何刮土豆才能刮的干净？"></a>如何刮土豆才能刮的干净？</h2><img src="/2020/03/02/%E5%85%B3%E4%BA%8E%E5%9C%9F%E8%B1%86%F0%9F%A5%94/gaitubao_IMG_20200302_181523.jpg" class="" width="20200224154635459">

<p>使劲刮</p>
<h2 id="如何切土豆才能把土豆切断？"><a href="#如何切土豆才能把土豆切断？" class="headerlink" title="如何切土豆才能把土豆切断？"></a>如何切土豆才能把土豆切断？</h2><img src="/2020/03/02/%E5%85%B3%E4%BA%8E%E5%9C%9F%E8%B1%86%F0%9F%A5%94/gaitubao_IMG_20200302_182828.jpg" class="" width="20200224154635459">

<p>使劲切</p>
<p>😎</p>
]]></content>
      <categories>
        <category>生活</category>
        <category>烧饭</category>
      </categories>
      <tags>
        <tag>土豆</tag>
      </tags>
  </entry>
  <entry>
    <title>使用comsol仿真ICP</title>
    <url>/2023/05/09/%E4%BD%BF%E7%94%A8comsol%E4%BB%BF%E7%9C%9FICP/</url>
    <content><![CDATA[<h1 id="直接版"><a href="#直接版" class="headerlink" title="直接版"></a>直接版</h1><ol>
<li>打开comsol</li>
<li>点击打开案例库</li>
<li>选择ICP，打开</li>
<li>计算，导出结果</li>
</ol>
<h1 id="手动版"><a href="#手动版" class="headerlink" title="手动版"></a>手动版</h1><h2 id="感应耦合等离子体"><a href="#感应耦合等离子体" class="headerlink" title="感应耦合等离子体"></a>感应耦合等离子体</h2><p>对于感应放电，求解频域中的磁失势<br><img src="/pic/image1.png" alt="Alt text"></p>
<p>感应耦合等离子体相当于等离子体和磁场的耦合建模</p>
<h2 id="磁场和等离子体耦合"><a href="#磁场和等离子体耦合" class="headerlink" title="磁场和等离子体耦合"></a>磁场和等离子体耦合</h2><p>等离子体计算得到的电导率耦合到磁场，用于计算电磁场分布</p>
<p>磁场计算得到的热源耦合到等离子体接口中</p>
<p><img src="/pic/image2.png" alt="等离子体电导耦合"></p>
<h2 id="查找资料（文献）"><a href="#查找资料（文献）" class="headerlink" title="查找资料（文献）"></a>查找资料（文献）</h2><p>从COMSOL官网查找ICP</p>
<p>选择ICP_torch</p>
<p>可以看到官网给定的参数，将这段参数保存为<code>xxx.txt</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">T0 <span class="number">300</span><span class="punctuation">[</span>K<span class="punctuation">]</span> <span class="string">&quot;环境温度&quot;</span></span><br><span class="line">Pext <span class="number">11</span><span class="punctuation">[</span>kW<span class="punctuation">]</span> <span class="string">&quot;线圈激励功率&quot;</span></span><br><span class="line">f0 <span class="number">3</span><span class="punctuation">[</span>MHz<span class="punctuation">]</span> <span class="string">&quot;线圈激励频率&quot;</span></span><br><span class="line">r_3 <span class="number">125</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;轴向长度：计算域&quot;</span></span><br><span class="line">L_3 <span class="number">200</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;高度：计算域和鞘管&quot;</span></span><br><span class="line">d_1 <span class="number">2</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;厚度：载流子管&quot;</span></span><br><span class="line">L_0 <span class="number">50</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;高度：载流子管和中心管&quot;</span></span><br><span class="line">r_1 <span class="number">3.7</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;内半径：载流子管&quot;</span></span><br><span class="line">d_2 <span class="number">2.2</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;厚度：中心管&quot;</span></span><br><span class="line">r_2 <span class="number">18.8</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;内半径：中心管&quot;</span></span><br><span class="line">d_3 <span class="number">3.5</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;厚度：鞘管&quot;</span></span><br><span class="line">r_0 <span class="number">25</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;内半径：鞘管&quot;</span></span><br><span class="line">d_c <span class="number">6</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;直径：线圈&quot;</span></span><br><span class="line">r_c <span class="number">33</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;轴向长度：线圈中心&quot;</span></span><br><span class="line">L_1 <span class="number">63</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;高度：下线圈的中心&quot;</span></span><br><span class="line">L_2 <span class="number">121</span><span class="punctuation">[</span>mm<span class="punctuation">]</span> <span class="string">&quot;高度：上线圈的中心&quot;</span></span><br><span class="line">Q_1 <span class="number">1</span><span class="punctuation">[</span>l/min<span class="punctuation">]</span> <span class="string">&quot;气流：载流子管&quot;</span></span><br><span class="line">Q_2 <span class="number">3</span><span class="punctuation">[</span>l/min<span class="punctuation">]</span> <span class="string">&quot;气流：中心管&quot;</span></span><br><span class="line">Q_3 <span class="number">31</span><span class="punctuation">[</span>l/min<span class="punctuation">]</span> <span class="string">&quot;气流：鞘管&quot;</span></span><br><span class="line">M <span class="number">0.04</span><span class="punctuation">[</span>kg/mole<span class="punctuation">]</span> <span class="string">&quot;摩尔质量：氩&quot;</span></span><br><span class="line">mv_stp <span class="number">22.4</span><span class="punctuation">[</span>l/mole<span class="punctuation">]</span> <span class="string">&quot;stp 下的摩尔体积&quot;</span></span><br><span class="line">mdot1 M*Q_1/mv_stp <span class="string">&quot;质量流率：载流子管&quot;</span></span><br><span class="line">mdot2 M*Q_2/mv_stp <span class="string">&quot;质量流率：中心管&quot;</span></span><br><span class="line">mdot3 M*Q_3/mv_stp <span class="string">&quot;质量流率：鞘管&quot;</span></span><br><span class="line">rho_stp <span class="number">1.91</span><span class="punctuation">[</span>kg/m^<span class="number">3</span><span class="punctuation">]</span> <span class="string">&quot;stp 下的氩密度&quot;</span></span><br><span class="line">A1 pi*(r_1)^<span class="number">2</span> <span class="string">&quot;横截面积：载气流&quot;</span></span><br><span class="line">A2 pi*(r_2^<span class="number">2</span>-(r_1+d_1)^<span class="number">2</span>) <span class="string">&quot;横截面积：中心气流&quot;</span></span><br><span class="line">A3 pi*(r_0^<span class="number">2</span>-(r_2+d_2)^<span class="number">2</span>) <span class="string">&quot;横截面积：鞘管气流&quot;</span></span><br><span class="line">v1 mdot1/rho_stp/A1 <span class="string">&quot;速度：载气流&quot;</span></span><br><span class="line">v2 mdot2/rho_stp/A2 <span class="string">&quot;速度：中心气流&quot;</span></span><br><span class="line">v3 mdot3/rho_stp/A3 <span class="string">&quot;速度：鞘管气流&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="理论"><a href="#理论" class="headerlink" title="理论"></a>理论</h2><p>假定热等离子体处于部分至完全的局部热力学平衡 (LTE) 条件下，因此这类等离子体可以被视为导电流体混合物，可以使用磁流体动力学 (MHD) 方程来建模。本模型介绍如何使用 “平衡放电，面外电流”接口（可用于二维和二维轴对称）来模拟电感耦合等离子体炬中产生的等离子体。</p>
<p>需要建模的ICP等离子体的几何结构</p>
<p><img src="/pic/image3.png" alt="Alt text"></p>
<p>电感耦合等离子体炬的几何结构，炬由三个同心石英管组成，气体从底部注入，从顶部喷出。在此模型中，通过在 3MHz 下运行的三匝线圈将 11 kW 的固定功率传递到等离子体。</p>
<h2 id="模型定义"><a href="#模型定义" class="headerlink" title="模型定义"></a>模型定义</h2><ul>
<li>等离子体炬通过完全轴对称的构型进行建模。</li>
<li>等离子体内部的电流由面外 （即方位角方向）的感应电流控制。</li>
<li>线圈由横截面为圆形、直径为6mm的平行载流环组成。这意味着忽略了线圈电流的轴向分量。</li>
<li>大气压下的纯氩等离子体稳态层流。</li>
<li>局部热力学平衡 (LTE) 条件下的光学薄等离子体。</li>
</ul>
<p><img src="/pic/image4.png" alt="Alt text"></p>
/pic/image4.png

<p>ICP炬示意图。气体从底部（v1、v2和v3）进入，从顶部流出。</p>
<p>在本模型中，以3MHz的频率向三匝线圈提供激励。然后，通过焦耳热使在鞘管（等离子体约束管）中流动的气体电离。</p>
<p>本模型通过使用频域-稳态研究结合单匝线圈特征来求解，其中为系统设置了固定功率(11kW)。通过固定功率，线圈中的电流和电势会随着等离子体电导率的增加发生变化。</p>
<p>本模型中包含三种不同气流速度（载流子管的速度 v1、中心管的速度 v2、鞘管的速度v3）的纯氩气。在“平衡放电”条件下从材料库中加载与温度相关的氩的物理属性。请注意，物理属性的温度范围从500K到25,000K。另请注意，由于数值稳定性的原因，我们使用最小电导率1S&#x2F;m。</p>
<p>如果初始温度过低，得到的解很可能对应于最小电导率的平坦分布（默认为1S&#x2F;m）。这显然是一个没有意义的解，事实上这是最容易获得的解。为了避免这种情况，从更接近实验值的较高温度开始。务必绘制电导率图，以查看是否设置为最小电导率。</p>
<h2 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h2><p>打开COMSOL，新建-模型向导</p>
<p>选择二维轴对称</p>
<p>物理场选择 等离子体-电感耦合等离子体-添加</p>
<p>选择研究-频域-瞬态</p>
<p>这个求解器是一个双向耦合求解器</p>
<h2 id="根节点"><a href="#根节点" class="headerlink" title="根节点"></a>根节点</h2><p>选择单位mm</p>
<h2 id="几何-1"><a href="#几何-1" class="headerlink" title="几何 1"></a>几何 1</h2><p>在<strong>模型开发器</strong>窗口的<strong>组件1（comp1）</strong>节点下，单击<strong>几何1</strong>。</p>
<p>在<strong>几何</strong>的<strong>设置</strong>窗口中，定位到<strong>单位</strong>栏</p>
<p>从<strong>长度单位列表</strong>中选择mm</p>
<h2 id="全局定义"><a href="#全局定义" class="headerlink" title="全局定义"></a>全局定义</h2><h3 id="参数1"><a href="#参数1" class="headerlink" title="参数1"></a>参数1</h3><p>在<strong>模型开发器</strong>窗口的<strong>全局定义</strong>节点下，单击<strong>参数1</strong></p>
<p>在<strong>参数</strong>的<strong>设置</strong>窗口中，定位到<strong>参数</strong>栏。</p>
<p>单击<strong>从文件加载</strong>。</p>
<p>选择之前的<code>xxx.txt</code>，定义计算域</p>
<h2 id="几何1"><a href="#几何1" class="headerlink" title="几何1"></a>几何1</h2><h3 id="矩形1（r1）"><a href="#矩形1（r1）" class="headerlink" title="矩形1（r1）"></a>矩形1（r1）</h3><p>在<strong>几何</strong>工具栏中点击<strong>矩形</strong>。</p>
<p>在<strong>矩形</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>宽度</strong>文本框中键入 “r_3”。</p>
<p>在<strong>高度</strong>文本框中键入 “L_3”。</p>
<p>定义载流子管</p>
<h3 id="矩形2（r2）"><a href="#矩形2（r2）" class="headerlink" title="矩形2（r2）"></a>矩形2（r2）</h3><p>在<strong>几何</strong>工具栏中单击<strong>矩形</strong>。</p>
<p>在<strong>矩形</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>宽度</strong>文本框中键入 “d_1”。</p>
<p>在<strong>高度</strong>文本框中键入 “L_0”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入 “r_1”。</p>
<p>定义中心管。</p>
<h3 id="矩形3（r3）"><a href="#矩形3（r3）" class="headerlink" title="矩形3（r3）"></a>矩形3（r3）</h3><p>在<strong>几何</strong>工具栏中单击<strong>矩形</strong>。</p>
<p>在<strong>矩形</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>宽度</strong>文本框中键入 “d_2”。</p>
<p>在<strong>高度</strong>文本框中键入 “L_0”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入 “r_2”。</p>
<p>定义管</p>
<h3 id="矩形4-r4"><a href="#矩形4-r4" class="headerlink" title="矩形4(r4)"></a>矩形4(r4)</h3><p>在<strong>几何</strong>工具栏中单击<strong>矩形</strong>。</p>
<p>在<strong>矩形</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>宽度</strong>文本框中键入 “d_3”。</p>
<p>在<strong>高度</strong>文本框中键入 “L_3”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入 “r_0”。</p>
<p>定义线圈。</p>
<h3 id="圆1-c1"><a href="#圆1-c1" class="headerlink" title="圆1(c1)"></a>圆1(c1)</h3><p>在<strong>几何</strong>工具栏中单击<strong>圆</strong>。</p>
<p>在<strong>圆</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>半径</strong>文本框中键入“d_c&#x2F;2”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入“r_c”。</p>
<p>在<strong>z</strong>文本框中键入“L_1”。</p>
<h3 id="圆2-c2"><a href="#圆2-c2" class="headerlink" title="圆2(c2)"></a>圆2(c2)</h3><p>在<strong>几何</strong>工具栏中单击<strong>圆</strong>。</p>
<p>在<strong>圆</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>半径</strong>文本框中键入“d_c&#x2F;2”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入 “r_c”。</p>
<p>在<strong>z</strong>文本框中键入“(L_1+L_2)&#x2F;2”。</p>
<h3 id="圆3-c3"><a href="#圆3-c3" class="headerlink" title="圆3(c3)"></a>圆3(c3)</h3><p>在<strong>几何</strong>工具栏中单击<strong>圆</strong>。</p>
<p>在<strong>圆</strong>的<strong>设置</strong>窗口中，定位到<strong>大小和形状</strong>栏。</p>
<p>在<strong>半径</strong>文本框中键入 “d_c&#x2F;2”。</p>
<p>定位到<strong>位置</strong>栏。在<strong>r</strong>文本框中键入 “r_c”。</p>
<p>在<strong>z</strong>文本框中键入 “L_2”。</p>
<p>单击<strong>构建所有对象</strong>。</p>
<p>定义其他域类型以便于选择。</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><h3 id="空气"><a href="#空气" class="headerlink" title="空气"></a>空气</h3><p>在定义工具栏中单击 显式。</p>
<p>在显式的设置窗口中，在标签文本框中键入 “空气”。</p>
<p>选择 “域” 5。</p>
<h3 id="等离子体"><a href="#等离子体" class="headerlink" title="等离子体"></a>等离子体</h3><p>在定义工具栏中单击 显式。</p>
<p>在显式的设置窗口中，在标签文本框中键入 “等离子体”。</p>
<p>选择 “域” 1。</p>
<h3 id="石英"><a href="#石英" class="headerlink" title="石英"></a>石英</h3><p>在定义工具栏中单击 显式。</p>
<p>在显式的设置窗口中，在标签文本框中键入 “石英”。</p>
<p>选择 “域” 2–4。</p>
<h3 id="线圈"><a href="#线圈" class="headerlink" title="线圈"></a>线圈</h3><p>在定义工具栏中单击 显式。</p>
<p>在显式的设置窗口中，在标签文本框中键入 “线圈”。</p>
<p>选择 “域” 6–8。</p>
<p>使用材料库添加模型中使用的不同材料。</p>
<h2 id="添加材料"><a href="#添加材料" class="headerlink" title="添加材料"></a>添加材料</h2><p>在主屏幕工具栏中，单击 添加材料以打开添加材料窗口。</p>
<p>转到添加材料窗口。</p>
<p>在模型树中选择内置材料 &gt;Air。</p>
<p>单击窗口工具栏中的添加到组件。</p>
<p>在模型树中选择 AC&#x2F;DC&gt;Copper。</p>
<p>单击窗口工具栏中的添加到组件。</p>
<p>在模型树中选择 AC&#x2F;DC&gt;Quartz。</p>
<p>单击窗口工具栏中的添加到组件。</p>
<p>在模型树中选择材料 &gt;Argon。</p>
<p>单击窗口工具栏中的添加到组件。</p>
<p>在主屏幕工具栏中，单击 添加材料以关闭添加材料窗口。</p>
<h2 id="材料"><a href="#材料" class="headerlink" title="材料"></a>材料</h2><h3 id="Air-mat1"><a href="#Air-mat1" class="headerlink" title="Air (mat1)"></a>Air (mat1)</h3><p>在模型开发器窗口的组件 1 (comp1)&gt; 材料节点下，单击 Air (mat1)。</p>
<p>在材料的设置窗口中，定位到几何实体选择栏。</p>
<p>从选择列表中选择空气。</p>
<h3 id="Copper-mat2"><a href="#Copper-mat2" class="headerlink" title="Copper (mat2)"></a>Copper (mat2)</h3><p>在模型开发器窗口中，单击 Copper (mat2)。</p>
<p>在材料的设置窗口中，定位到几何实体选择栏。</p>
<p>从选择列表中选择线圈。</p>
<h3 id="Quartz-mat3"><a href="#Quartz-mat3" class="headerlink" title="Quartz (mat3)"></a>Quartz (mat3)</h3><p>在模型开发器窗口中，单击 Quartz (mat3)。</p>
<p>在材料的设置窗口中，定位到几何实体选择栏。</p>
<p>从选择列表中选择石英。</p>
<h3 id="Argon-mat4"><a href="#Argon-mat4" class="headerlink" title="Argon (mat4)"></a>Argon (mat4)</h3><p>在模型开发器窗口中，单击 Argon (mat4)。</p>
<p>在材料的设置窗口中，定位到几何实体选择栏。</p>
<p>从选择列表中选择等离子体。</p>
<p>调整组成模型的每个物理场的选择和特征。</p>
<p>磁场接口用于整个计算域，本例使用 “单导体线圈”特征将激励功率传递到等离子体。</p>
<h2 id="磁场-MF"><a href="#磁场-MF" class="headerlink" title="磁场 (MF)"></a>磁场 (MF)</h2><p>在模型开发器窗口的组件 1 (comp1) 节点下，单击磁场 (mf)。</p>
<p>在磁场的设置窗口中，单击以展开离散化栏。</p>
<p>从磁矢势列表中选择线性单元。</p>
<h3 id="线圈-1"><a href="#线圈-1" class="headerlink" title="线圈 1"></a>线圈 1</h3><p>在物理场工具栏中单击 域，然后选择线圈。</p>
<p>在线圈的设置窗口中，定位到域选择栏。</p>
<p>从选择列表中选择线圈。</p>
<p>定位到线圈栏。选中线圈组复选框。</p>
<p>从线圈激励列表中选择功率。</p>
<p>在 Pcoil 文本框中键入 “Pext”。</p>
<p>模型中忽略了空气中的传热。</p>
<h2 id="流体传热-HT"><a href="#流体传热-HT" class="headerlink" title="流体传热 (HT)"></a>流体传热 (HT)</h2><p>在模型开发器窗口的组件 1 (comp1) 节点下，单击流体传热 (ht)。</p>
<p>选择 “域” 1 和 4。</p>
<h3 id="固体-1"><a href="#固体-1" class="headerlink" title="固体 1"></a>固体 1</h3><p>在物理场工具栏中单击 域，然后选择固体。</p>
<p>选择 “域” 4。</p>
<h3 id="初始值-1"><a href="#初始值-1" class="headerlink" title="初始值 1"></a>初始值 1</h3><p>务必从高温开始。</p>
<p>在模型开发器窗口中，单击初始值 1。</p>
<p>在初始值的设置窗口中，定位到初始值栏。</p>
<p>在 T 文本框中键入 “6000”。</p>
<p>为传热模型的实体部分 （管和线圈）添加 “固体传热”特征。</p>
<h3 id="温度-1"><a href="#温度-1" class="headerlink" title="温度 1"></a>温度 1</h3><p>在物理场工具栏中单击 边界，然后选择温度。</p>
<p>选择 “边界” 2、 8、 13、 15 和 17。</p>
<p>在温度的设置窗口中，定位到温度栏。</p>
<p>在 T0 文本框中键入 “T0”。</p>
<h3 id="流出-1"><a href="#流出-1" class="headerlink" title="流出 1"></a>流出 1</h3><p>在物理场工具栏中单击 边界，然后选择流出。</p>
<p>在图形工具栏中单击 缩放到窗口大小按钮。</p>
<p>选择 “边界” 3。</p>
<p>单相流仅应用于等离子体区域。</p>
<h2 id="层-流-SPF"><a href="#层-流-SPF" class="headerlink" title="层 流 (SPF)"></a>层 流 (SPF)</h2><p>由于密度变化并不小，我们不能将流动视为不可压缩流动。因此，将流动设置为弱可压缩流动。</p>
<p>在模型开发器窗口的组件 1 (comp1) 节点下，单击层流 (spf)。</p>
<p>在层流的设置窗口中，定位到物理模型栏。</p>
<p>从可压缩性列表中选择弱可压缩流动。</p>
<p>定位到域选择栏。从选择列表中选择等离子体。</p>
<p>单击以展开方程栏。从方程形式列表中选择稳态。</p>
<h3 id="入口-1"><a href="#入口-1" class="headerlink" title="入口 1"></a>入口 1</h3><p>在物理场工具栏中单击 边界，然后选择入口。</p>
<p>添加具有合适速度的入口。</p>
<p>选择 “边界” 2。</p>
<p>在入口的设置窗口中，定位到速度栏。</p>
<p>在 U0 文本框中键入 “v1”。</p>
<h3 id="入口-2"><a href="#入口-2" class="headerlink" title="入口 2"></a>入口 2</h3><p>在物理场工具栏中单击 边界，然后选择入口。</p>
<p>选择 “边界” 8。</p>
<p>在入口的设置窗口中，定位到速度栏。</p>
<p>在 U0 文本框中键入 “v2”。</p>
<h3 id="入口-3"><a href="#入口-3" class="headerlink" title="入口 3"></a>入口 3</h3><p>在物理场工具栏中单击 边界，然后选择入口。</p>
<p>选择 “边界” 13。</p>
<p>在入口的设置窗口中，定位到速度栏。</p>
<p>在 U0 文本框中键入 “v3”。</p>
<h3 id="出口-1"><a href="#出口-1" class="headerlink" title="出口 1"></a>出口 1</h3><p>在物理场工具栏中单击 边界，然后选择出口。</p>
<p>选择 “边界” 3。</p>
<p>在出口的设置窗口中，定位到压力条件栏。</p>
<p>清除抑制回流复选框。</p>
<h2 id="网格-1"><a href="#网格-1" class="headerlink" title="网格 1"></a>网格 1</h2><h3 id="大小"><a href="#大小" class="headerlink" title="大小"></a>大小</h3><p>在模型开发器窗口的组件 1 (comp1) 节点下，右键单击网格 1 并选择编辑物理场引导的序列。</p>
<h3 id="大小-1"><a href="#大小-1" class="headerlink" title="大小 1"></a>大小 1</h3><p>在大小的设置窗口中，定位到单元大小栏。</p>
<p>从预定义列表中选择超细化。</p>
<h3 id="边-1"><a href="#边-1" class="headerlink" title="边 1"></a>边 1</h3><p>在网格工具栏中单击<em>三角</em>边。</p>
<p>拖放到大小节点下方。</p>
<p>选择 “边界” 2、 8 和 13。</p>
<h3 id="大小-1-1"><a href="#大小-1-1" class="headerlink" title="大小 1"></a>大小 1</h3><p>右键单击边 1 并选择大小。</p>
<p>在大小的设置窗口中，定位到单元大小栏。</p>
<p>单击定制按钮。</p>
<p>单击以折叠单元大小参数栏。单击以展开单元大小参数栏。</p>
<p>选中最大单元大小复选框。在关联文本框中键入 “0.5”。</p>
<h3 id="大小-2"><a href="#大小-2" class="headerlink" title="大小 2"></a>大小 2</h3><p>在模型开发器窗口的组件 1 (comp1)&gt; 网格 1 节点下，单击大小 2。</p>
<p>在大小的设置窗口中，定位到单元大小栏。</p>
<p>从预定义列表中选择超细化。</p>
<h3 id="边界层-2"><a href="#边界层-2" class="headerlink" title="边界层 2"></a>边界层 2</h3><p>在网格工具栏中单击 边界层。</p>
<p>右键单击边界层 2 并选择上移。</p>
<p>在边界层的设置窗口中，定位到域选择栏。</p>
<p>从几何实体层列表中选择域。</p>
<p>选择 “域” 6–8。</p>
<h3 id="边界层属性"><a href="#边界层属性" class="headerlink" title="边界层属性"></a>边界层属性</h3><p>在模型开发器窗口中，单击边界层属性。</p>
<p>选择 “边界” 21–32。</p>
<p>在边界层属性的设置窗口中，定位到层栏。</p>
<p>在层数文本框中键入 “4”。</p>
<p>从厚度明细列表中选择第一层。</p>
<p>在厚度文本框中键入 “8[um]”。</p>
<p>单击 全部构建。</p>
<p>对于这种情况，最好是全耦合求解方程，需要更改求解器中的一些设置以提高稳定性。</p>
<h2 id="研究-1"><a href="#研究-1" class="headerlink" title="研究 1"></a>研究 1</h2><h3 id="步骤-1：频域-稳态"><a href="#步骤-1：频域-稳态" class="headerlink" title="步骤 1：频域 - 稳态"></a>步骤 1：频域 - 稳态</h3><p>在模型开发器窗口的研究 1 节点下，单击步骤 1： 频域 - 稳态。</p>
<p>在频域 - 稳态的设置窗口中，定位到研究设置栏。</p>
<p>在频率文本框中键入 “f0”。</p>
<h3 id="解-1-sol1"><a href="#解-1-sol1" class="headerlink" title="解 1 (sol1)"></a>解 1 (sol1)</h3><p>在研究工具栏中单击 显示默认求解器。</p>
<p>在模型开发器窗口中展开解 1 (sol1) 节点。</p>
<p>在模型开发器窗口中展开研究 1&gt; 求解器配置 &gt; 解 1 (sol1)&gt; 稳态求解器 1 节点。</p>
<p>右键单击研究 1&gt; 求解器配置 &gt; 解 1 (sol1)&gt; 稳态求解器 1 并选择全耦合。</p>
<p>在全耦合的设置窗口中，单击以展开方法和终止栏。</p>
<p>在初始阻尼系数文本框中键入 “1e-4”。</p>
<p>在最小阻尼系数文本框中键入 “1.0E-6”。</p>
<p>在更新步长的限制文本框中键入 “1.2”。</p>
<p>在恢复阻尼系数文本框中键入 “0.1”。</p>
<p>在最大迭代次数文本框中键入 “200”。</p>
<p>在研究工具栏中单击 计算。</p>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><h3 id="二维温度"><a href="#二维温度" class="headerlink" title="二维温度"></a>二维温度</h3><p>在主屏幕工具栏中单击 添加绘图组，然后选择二维绘图组。</p>
<p>在二维绘图组的设置窗口中，在标签文本框中键入 “二维温度”。</p>
<h3 id="表面-1"><a href="#表面-1" class="headerlink" title="表面 1"></a>表面 1</h3><p>右键单击二维温度并选择表面。</p>
<p>在表面的设置窗口中，定位到表达式栏。</p>
<p>在表达式文本框中键入 “T”。</p>
<p>在二维温度工具栏中单击 绘制。</p>
<h3 id="二维温度-1"><a href="#二维温度-1" class="headerlink" title="二维温度"></a>二维温度</h3><p>在模型开发器窗口中，右键单击二维温度并选择上移。</p>
<h3 id="电导率"><a href="#电导率" class="headerlink" title="电导率"></a>电导率</h3><p>在主屏幕工具栏中单击 添加绘图组，然后选择二维绘图组。</p>
<p>在二维绘图组的设置窗口中，在标签文本框中键入 “电导率”。</p>
<h3 id="表面-1-1"><a href="#表面-1-1" class="headerlink" title="表面 1"></a>表面 1</h3><p>右键单击电导率并选择表面。</p>
<p>在表面的设置窗口中，定位到表达式栏。</p>
<p>在表达式文本框中键入 “mf.sigmarr”。</p>
<h3 id="选择-1"><a href="#选择-1" class="headerlink" title="选择 1"></a>选择 1</h3><p>右键单击表面 1 并选择选择。</p>
<p>选择 “域” 1。</p>
<p>在电导率工具栏中单击 绘制。</p>
<h3 id="电导率-1"><a href="#电导率-1" class="headerlink" title="电导率"></a>电导率</h3><p>在模型开发器窗口的结果节点下，右键单击电导率并选择上移</p>
<h1 id="结果-1"><a href="#结果-1" class="headerlink" title="结果"></a>结果</h1><p>氩等离子体的等离子体温度分布</p>
<p><img src="/pic/image.png" alt="Alt text"></p>
<p>氩等离子体的等离子体速度大小</p>
<p><img src="/pic/image-1.png" alt="Alt text"></p>
<p>线圈附近的温度峰值达到10,000K。等离子体电导率随着温度的升高而增加，在最高温度区域具有最大值，</p>
<p>下图绘制了等离子体的电导率。</p>
<p><img src="/pic/image-2.png" alt="Alt text"></p>
<p>下图显示磁通量模。</p>
<p><img src="/pic/image-3.png" alt="Alt text"></p>
<p>请注意，由于集肤效应，等离子体的电导率屏蔽了磁通量。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ol>
<li>S. Xue, P. Proulx, and M.I. Boulos, “Extended-field electromagnetic model for inductively<br>coupled plasma,” J. Phys. D. 34, 1897, 2001.</li>
</ol>
]]></content>
      <categories>
        <category>仿真</category>
      </categories>
      <tags>
        <tag>comsol</tag>
        <tag>仿真</tag>
      </tags>
  </entry>
  <entry>
    <title>关于安装MyBatis</title>
    <url>/2020/03/16/%E5%85%B3%E4%BA%8E%E5%AE%89%E8%A3%85MyBatis/</url>
    <content><![CDATA[<p>环境：</p>
<ol>
<li>JDK 13.0.2</li>
<li>tomcat 9.0.3</li>
<li>mybatis 3.5.4</li>
<li>mysql 8</li>
</ol>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>早期为：ibatis：apache</p>
<p>2010年被Google收购改称：Mybatis</p>
<p>主要作用：简化JDBC操作，实现数据的持久化。</p>
<p>ORM：Object Relational Mapping，可以使开发人员像操作对象一样操作数据库</p>
<p>mybatis是ORM的一种实现</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>之前看过的一个教程是使用Idea的，也就是直接使用依赖库导入，这次看的是导入jar使用。</p>
<h3 id="去官网"><a href="#去官网" class="headerlink" title="去官网"></a>去官网</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyuWRooq5EVTvuMCicdbg8lPBDedibaEDJC3EtNKj7ovpjOZKiaKAglu3Kw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>选择Getting Started</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyJ5cFO9YrhS2gY2bdKhx8gUOgQqTDIVBdpLauQQT0BicLQ1tVnT8XtFQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>会有Maven方式，当然使用Idea就可以直接复制代码框内代码到idea中，但这次选择jar的超链接。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyXfvdNWVOLjfKmTe7I5Vm5twgeQ370OgOf3jZVTHib0Kv06Xnw6U9gkg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>就来到了熟悉的github，在最新版本下，有三个选项，这里选择第一个zip包下载。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lydaSjcW7UuAvPGKW4a4LpGOsr180fjKUXrTuvcAAQUfbpPQDmHFw3QA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>下好之后是个zip，</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyWtic4kiaLG9ZnAUQMsw9xSodCLx2UQM7WUlWNXf0IiccGxYAv1ibmLFd0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>打开以后目录文件如图，</p>
<p>lib文件夹存放mybatis的一些依赖包，</p>
<p>license就是字面意思 许可证，</p>
<p><code>mybatis-3.5.4.jar</code>即要用到的jar，</p>
<p>.pdf即使用说明书，</p>
<p>NOTICE也是字面意思 注意事项。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>简单使用一下：</p>
<h3 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h3><p>打开eclipse，新建一个JAVA项目，因为mybatis是操控数据库的，所以暂时可以先间隔Javaproject试一下。</p>
<p>这里起名“TestMyBatis”，将<code>mybatis-3.5.4.jar</code>拖到src里面，顺便add to buildpath，添加环境。</p>
<h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><p>打开cmd或者使用navicat，因为我的navicat建数据库总是会有数据编码混乱的问题，我一般建表都是用cmd。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyz0dxFLlANQtawhs1O71zKaK4eMRu1NB6WXoR6jT2lWZibCL3QQINlxQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<h3 id="创建实体类及映射关系"><a href="#创建实体类及映射关系" class="headerlink" title="创建实体类及映射关系"></a>创建实体类及映射关系</h3><p>创建实体类 Person</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/Do95fdPyXZsjhDX1ppWdERu8rusoic5lyrT6icSY55ZVb9z3RtWcXudC8ia8ic65aL4icciciaZzonEpq5qGoEAOT0S9w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p>
<p>构建这个类</p>
<h2 id=""><a href="#" class="headerlink" title="- "></a>- </h2><h2 id="-1"><a href="#-1" class="headerlink" title="- "></a>- </h2><h2 id="-2"><a href="#-2" class="headerlink" title="- "></a>- </h2><h2 id="-3"><a href="#-3" class="headerlink" title="- "></a>- </h2><h2 id="-4"><a href="#-4" class="headerlink" title="- "></a>- </h2><h2 id="-5"><a href="#-5" class="headerlink" title="- "></a>- </h2><h2 id="-6"><a href="#-6" class="headerlink" title="- "></a>- </h2><h2 id="-7"><a href="#-7" class="headerlink" title="- "></a>- </h2><h2 id="-8"><a href="#-8" class="headerlink" title="- "></a>- </h2><h2 id="-9"><a href="#-9" class="headerlink" title="- "></a>- </h2><h2 id="-10"><a href="#-10" class="headerlink" title="- "></a>- </h2><h2 id="-11"><a href="#-11" class="headerlink" title="- "></a>- </h2><h2 id="-12"><a href="#-12" class="headerlink" title="- "></a>- </h2><h2 id="-13"><a href="#-13" class="headerlink" title="- "></a>- </h2><h2 id="-14"><a href="#-14" class="headerlink" title="- "></a>- </h2><p>- </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">private String id;private String name;private int age;</span><br><span class="line">public Person() &#123;  &#125;public Person(String id, String name, int age) &#123;  super();  this.id = id;  this.name = name;  this.age = age;&#125;public String getId() &#123;  return id;&#125;public void setId(String id) &#123;  this.id = id;&#125;public String getName() &#123;  return name;&#125;public void setName(String name) &#123;  this.name = name;&#125;public int getAge() &#123;  return age;&#125;public void setAge(int age) &#123;  this.age = age;&#125;</span><br></pre></td></tr></table></figure>

<p>创建配置文件映射表和类的映射 <code>.xml</code>文件</p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p>
<p>点这里转换视图</p>
<p>在刚刚的.pdf文件中有大概的配置方法，打开后找到“<strong>Exploring Mapped SQL Statements</strong>”</p>
<p>下面有</p>
<h2 id="-15"><a href="#-15" class="headerlink" title="- "></a>- </h2><h2 id="-16"><a href="#-16" class="headerlink" title="- "></a>- </h2><h2 id="-17"><a href="#-17" class="headerlink" title="- "></a>- </h2><p>- </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt; &lt;mapper namespace=&quot;org.mybatis.example.BlogMapper&quot;&gt;      &lt;select id=&quot;selectBlog&quot; resultType=&quot;Blog&quot;&gt;            select * from Blog where id = #&#123;id&#125;    &lt;/select&gt; &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>直接复制，到刚刚的xml中，更改<code>namespace</code> 后面的内容为自己的xml<code>top.eshyee.entity.personMapper</code></p>
<p>改完之后</p>
<h2 id="-18"><a href="#-18" class="headerlink" title="- "></a>- </h2><h2 id="-19"><a href="#-19" class="headerlink" title="- "></a>- </h2><h2 id="-20"><a href="#-20" class="headerlink" title="- "></a>- </h2><p>- </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;top.eshyee.entity.personMapper&quot;&gt;  &lt;select id=&quot;queryPersonById&quot; resultType=&quot;Person&quot; parameterType=&quot;String&quot;&gt;    select * from person where id= #&#123;id&#125;  &lt;/select&gt;&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>在创建一个配置文件，在src下创建一个叫<code>config.xml</code>的文件。</p>
<p>在pdf中查找“<strong>Building SqlSessionFactory from XML</strong>”</p>
<p>这里需要提前准备好一个用来链接的jar <em>MySQL connector</em></p>
<p>网址：<a href="https://dev.mysql.com/downloads/connector/j/">https://dev.mysql.com/downloads/connector/j/</a></p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p>
<p>选zip，下好之后，里面乱七八糟的东西就不细致分析了，会点工地英语看看就好。主要使用<code>mysql-connector-java-8.0.19.jar</code>。拖到eclipse ，add一下环境。</p>
<p>配置xml如下：</p>
<h2 id="-21"><a href="#-21" class="headerlink" title="- "></a>- </h2><h2 id="-22"><a href="#-22" class="headerlink" title="- "></a>- </h2><h2 id="-23"><a href="#-23" class="headerlink" title="- "></a>- </h2><h2 id="-24"><a href="#-24" class="headerlink" title="- "></a>- </h2><h2 id="-25"><a href="#-25" class="headerlink" title="- "></a>- </h2><h2 id="-26"><a href="#-26" class="headerlink" title="- "></a>- </h2><h2 id="-27"><a href="#-27" class="headerlink" title="- "></a>- </h2><h2 id="-28"><a href="#-28" class="headerlink" title="- "></a>- </h2><h2 id="-29"><a href="#-29" class="headerlink" title="- "></a>- </h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE configuration  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt;  &lt;environments default=&quot;development&quot;&gt;    &lt;environment id=&quot;development&quot;&gt;      &lt;transactionManager type=&quot;JDBC&quot; /&gt;      &lt;dataSource type=&quot;POOLED&quot;&gt;        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/test?useSSL=false&amp;amp;serverTimezone=UTC&quot; /&gt;        &lt;property name=&quot;username&quot; value=&quot;我的用户名&quot; /&gt;        &lt;property name=&quot;password&quot; value=&quot;我的密码&quot; /&gt;      &lt;/dataSource&gt;    &lt;/environment&gt;  &lt;/environments&gt;  &lt;mappers&gt;    &lt;mapper resource=&quot;top/eshyee/entity/personMapper.xml&quot; /&gt;  &lt;/mappers&gt;&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>ok写个测试用例</p>
<h2 id="-30"><a href="#-30" class="headerlink" title="- "></a>- </h2><h2 id="-31"><a href="#-31" class="headerlink" title="- "></a>- </h2><h2 id="-32"><a href="#-32" class="headerlink" title="- "></a>- </h2><h2 id="-33"><a href="#-33" class="headerlink" title="- "></a>- </h2><h2 id="-34"><a href="#-34" class="headerlink" title="- "></a>- </h2><h2 id="-35"><a href="#-35" class="headerlink" title="- "></a>- </h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static void main(String[] args) throws IOException &#123;    // TODO Auto-generated method stub    //加载config    Reader reader =Resources.getResourceAsReader(&quot;config.xml&quot;);    SqlSessionFactory sessionFactory=new SqlSessionFactoryBuilder().build(reader);    SqlSession session= sessionFactory.openSession();    String statement =&quot;top.eshyee.entity.personMapper.queryPersonById&quot;;    Person person=session.selectOne(statement,&quot;1234567890&quot;);    //这里的1234567890是我接下来要插入的字符串    System.out.println(person.toString());    session.close();  &#125;</span><br></pre></td></tr></table></figure>

<p>同时在person下写一个toString()方法，这个可以自己来定，只要能看到person里的值就🉑。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>测试一下~~在数据库中插入一行数据</p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p>
<p>run一下test</p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p>
<p>🆗</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol>
<li>写完之后run的时候除了问题，报了一坨错其中有个<strong>timezone</strong>…想起来url写的<code>jdbc:mysql://localhost:3306/test</code>,然后后面加了<code>?useSSL=false&amp;serverTimezone=UTC</code>,结果还不对，就百度了一下<code>&amp;</code>在xml中是一种很神奇的存在得写成<code>&amp;</code>.</li>
<li>Resource导包的时候选择<code>org.apache.ibatis.io.*;</code></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>从不总结👌</p>
<p>喜欢此内容的人还喜欢</p>
<p><a href="javascript:void(0);">恭喜中国作协，你们的会员汪芳和港独一起被BBC授奖了！恭喜中国作协，你们的会员汪芳和港独一起被BBC授奖了！…明德时评不喜欢不看的原因确定内容质量低 不看此公众号</a><a href="javascript:void(0);">BC爆增1933例，17人丧生，27校沦陷，麦当劳大统华中招，持续恶化学校或将关闭BC爆增1933例，17人丧生，27校沦陷，麦当劳大统华中招，持续恶化学校或将关闭…每天温哥华不喜欢不看的原因确定内容质量低 不看此公众号</a></p>
<p><img src="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&size=102&__biz=MzU4Mzc3NjY3Mw==&mid=2247484179&idx=2&sn=0c6023446d42fade7d00ca3647395738&send_time=" alt="img"></p>
<p>微信扫一扫<br>关注该公众号</p>
]]></content>
      <categories>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>写出这个数</title>
    <url>/2020/03/16/%E5%86%99%E5%87%BA%E8%BF%99%E4%B8%AA%E6%95%B0/</url>
    <content><![CDATA[<h2 id="写出这个数"><a href="#写出这个数" class="headerlink" title="写出这个数"></a>写出这个数</h2><p>原创 EShyee <a href="javascript:void(0);">EShyee</a> <em>2019-09-26</em></p>
<p><strong>写出这个数</strong></p>
<p>读入一个正整数 n，计算其各位数字之和，用汉语拼音写出和的每一位数字。</p>
<h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>每个测试输入包含 1 个测试用例，即给出自然数 n 的值。这里保证 n 小于 10100。</p>
<h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>在一行内输出 n 的各位数字之和的每一位，拼音数字间有 1 空格，但一行中最后一个拼音数字后没有空格。</p>
<h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1234567890987654321123456789</span><br></pre></td></tr></table></figure>

<h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yi san wu</span><br></pre></td></tr></table></figure>



<p>My answer:</p>
<p>package com.Eshyee.SumIn;</p>
<p>import java.util.Scanner;</p>
<p>public class Sum {</p>
<p>​	public static void main(String[] args) {</p>
<p>​		Scanner in &#x3D; new Scanner(System.in);</p>
<p>​        &#x2F;&#x2F;输入这个字符串</p>
<p>​        String s &#x3D; in.nextLine();</p>
<p>​		int a &#x3D; 0;</p>
<p>​		String c &#x3D; “\0”;</p>
<p>​		for (int i &#x3D; 0; i &lt; s.length(); i++) {</p>
<p>​          &#x2F;&#x2F;把字符串转换成int类型</p>
<p>​    		a +&#x3D; s.charAt(i) - 48;</p>
<p>​		}</p>
<p>​		String n &#x3D; String.valueOf(a);</p>
<p>​		for (int j &#x3D; 0; j &lt; n.length(); j++) {</p>
<p>​			int b &#x3D; 0;</p>
<p>​			b &#x3D; n.charAt(j) - 48;</p>
<p>​            &#x2F;&#x2F;这里相当于把数字转换成汉字</p>
<p>​			switch (b) {</p>
<p>​			case 1:</p>
<p>​				c +&#x3D; “yi”;</p>
<p>​				break;</p>
<p>​			case 2:</p>
<p>​				c +&#x3D; “er”;</p>
<p>​				break;</p>
<p>​			case 3:</p>
<p>​				c +&#x3D; “san”;</p>
<p>​				break;</p>
<p>​			case 4:</p>
<p>​				c +&#x3D; “si”;</p>
<p>​				break;</p>
<p>​			case 5:</p>
<p>​				c +&#x3D; “wu”;</p>
<p>​				break;</p>
<p>​			case 6:</p>
<p>​				c +&#x3D; “liu”;</p>
<p>​				break;</p>
<p>​			case 7:</p>
<p>​				c +&#x3D; “qi”;</p>
<p>​				break;</p>
<p>​			case 8:</p>
<p>​				c +&#x3D; “ba”;</p>
<p>​				break;</p>
<p>​			case 9:</p>
<p>​				c +&#x3D; “jiu”;</p>
<p>​				break;</p>
<p>​			case 0:</p>
<p>​				c +&#x3D; “ling”;</p>
<p>​				break;</p>
<p>​			}</p>
<p>​			c +&#x3D; “ “;</p>
<p>​		}</p>
<p>​		System.out.print(c.trim());</p>
<p>​	}</p>
<p>}</p>
<p>本道题主要用到switch case charAt ascii码等方面的知识点</p>
<p>主要思想是：</p>
<p>先获取一串字符，然后遍历字符串，分别转换成int类型 </p>
<p>此时的int是ascii码值 然后减48 获得真正的值</p>
<p>然后做累加 然后放到一个int里面 做一个switch case（笨办法）</p>
<p>将得到的这个值转换成汉字</p>
<p>最后System从console里面输出出来</p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
      </tags>
  </entry>
  <entry>
    <title>单BSS实验</title>
    <url>/2020/03/13/%E5%8D%95BSS%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h2 id="单BSS实验"><a href="#单BSS实验" class="headerlink" title="单BSS实验"></a>单BSS实验</h2><h3 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h3><ol>
<li>构建基本服务集</li>
<li>安装终端无线网卡</li>
<li>实现基本服务集终端之间通信</li>
</ol>
<p>在这个基本服务集里面呢，我们是有一个AP和两个终端</p>
<h3 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h3><ol>
<li>验证基本服务集的通信区域</li>
<li>验证终端与AP之间建立关联的过程</li>
</ol>
<h3 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h3><p>AP与BSS中终端之间要成功建立关联,必须满足条件:</p>
<ol>
<li>终端位于AP的有效通信范围内</li>
<li>终端与AP配置相同的服务集标识符SSID</li>
<li>终端与AP配置相同的安全机制和密钥</li>
</ol>
<h3 id="实验配置"><a href="#实验配置" class="headerlink" title="实验配置"></a>实验配置</h3><p>两个装有无线网卡的笔记本aptop0、laptop1和AP</p>
<p>讲笔记本移入AP工作区</p>
<p>为AP0配置SSID</p>
<p>这里配置为123456</p>
<p>鉴别防密机制选择WPA2PSK</p>
<p>输入密钥1234567890</p>
<p>此时，laptop0和laptop1与AP0之间终止关联</p>
<p>分别给两个笔记本进行配置</p>
<p>配置与AP0租同的SSID、鉴别动密机制</p>
<p>启动笔记本电脑的IP配置实用程序</p>
<p>安装无线网卡的笔记本电脑，它的默认状态下是通过dhcp自动获取网络信息的，在没有配置dhcp服务器的情况下有操作系统自动的在保留的地址当中169.254.0.0&#x2F;16当中随机分配IP地址。启动两台笔记本电脑之间的ICMP报文的传输过程，看到两台终端是可以互相通信的</p>
<h2 id="无线局域网与以太网互联"><a href="#无线局域网与以太网互联" class="headerlink" title="无线局域网与以太网互联"></a>无线局域网与以太网互联</h2><h3 id="实验内容-1"><a href="#实验内容-1" class="headerlink" title="实验内容"></a>实验内容</h3><ol>
<li>构建以下无线局域网和以太网</li>
<li>AP实现无线局域网和以太网互连</li>
<li>查看无线MAC帧和以太网MAC帧转换过程</li>
<li>查看交换机转发表内容变化过程</li>
</ol>
<h3 id="实验目的-1"><a href="#实验目的-1" class="headerlink" title="实验目的"></a>实验目的</h3><ol>
<li>验证AP完成无线局域网MAC帧格式与以太网MAC帧格式相互转换的过程</li>
<li>验证无线局域网和以太网中终端之间的通信过程</li>
</ol>
<h3 id="实验原理-1"><a href="#实验原理-1" class="headerlink" title="实验原理"></a>实验原理</h3><ol>
<li><h6 id="分配终端IP地址信息时-每个终端需要配置相同网络地址-因为以太网和无线局域网互连后是同一个网络。"><a href="#分配终端IP地址信息时-每个终端需要配置相同网络地址-因为以太网和无线局域网互连后是同一个网络。" class="headerlink" title="分配终端IP地址信息时,每个终端需要配置相同网络地址,因为以太网和无线局域网互连后是同一个网络。"></a>分配终端IP地址信息时,每个终端需要配置相同网络地址,因为以太网和无线局域网互连后是同一个网络。</h6></li>
<li><h6 id="AP是链路层设备-能够完成两种格式之间转换原因"><a href="#AP是链路层设备-能够完成两种格式之间转换原因" class="headerlink" title="AP是链路层设备,能够完成两种格式之间转换原因"></a>AP是链路层设备,能够完成两种格式之间转换原因</h6></li>
</ol>
<ul>
<li><p>无线局域网和以太网的MAC地址相同</p>
</li>
<li><p>两种网络MAC帧格式相似</p>
<p>以太网MAC帧的一般格式</p>
</li>
</ul>
<p><img src="D:\bloglocal\单BSS实验\image-20200320090048168.png" alt="image-20200320090048168"></p>
<p>无线局域网的MAC帧的一般格式</p>
<p><img src="D:\bloglocal\单BSS实验\image-20200320090306579.png" alt="image-20200320090306579"></p>
<p>都是数据+地址+校验码，等等这样一些控制信息组成的</p>
]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>Cisco</tag>
      </tags>
  </entry>
  <entry>
    <title>单交换机小实验</title>
    <url>/2020/03/13/%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><p>1、用一台交换机连接四个终端<br>2、启动终端A与终端B之间的MAC帧交换过程<br>3、观察交换机转发表变化过程<br>4、检查ICMP报文至MAC帧的封装过程</p>
<h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>1、验证交换机的连通性<br>2、验证转发表建立过程<br>3、验证交换机MAC帧转发过程<br>4、验证ICMP报文逐层封装过程</p>
<p>1.清除MAC表<br>➢Switch#clear mac-address-table<br>clear mac-address-table是在特权模式下使用的命令,该命令的作<br>用是清除交换机转发表(也称MAC表)中的动态转发项。</p>
<p>➢为什么要清除MAC表呢 ?<br>在终端之间交换ARP报文时,交换机中会产生转发项,这样会干扰我<br>们的验证过程。因此,完成ARP地址解析过程后,清空转发表,开始<br>交换机实验。</p>
<p>2.停止运行CDP<br>➢Switch(config)#no cdp<br>run<br>no cdp run是全局模式下使用的命令,该命令的作用是停止运行CDP<br>➢CDP是什么 ?为什么要停止运行CDP呢?<br>CDP : Cisco Discovery Protocol ( Cisco发现协议) , CDP能检<br>测到与交换机直接连接的设备,因此即使终端不发送MAC帧，交换<br>机也能检测到各端口连接的终端,并在转发表中创建相应的转发项。</p>
<p>为了防止CDP干扰交换机实验,应该在交换机中停止运行CDP。</p>
<p>在设备类型选择框中选择交换机<br>设备型号选择框中选择型号为2950-24的交换机把它拖放到工作区</p>
<p>然后在设备类型选择框中选择终端，设备型号选择框中选择台式机，我们放置四台终端<br>用直通线把交换机的四个端回分别和四台终端连接起来。</p>
<p><img src="/pic/%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C/image-20200313092558995.png" alt="image-20200313092558995">完成了交换机和终端连接后，为每一个终端配置iP地址和子网掩码</p>
<p>pc0</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313092658988.png" alt="image-20200313092658988"></p>
<p>pc1</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313092729040.png" alt="image-20200313092729040"></p>
<p>pc2</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313092819248.png" alt="image-20200313092819248"></p>
<p>pc3</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313092849139.png" alt="image-20200313092849139"></p>
<p>启动PCO与PC1之间的ICMP报文传输过程</p>
<p>使得PCO租PC1完成对方IP地址的解析过程</p>
<p>进入模以操作模式，勾选<code>ICMP</code></p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313093238525.png" alt="image-20200313093238525"><br>然后查看MAC表,<br>可以看到MAC表中已经存在MAC转发项</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313093416948.png" alt="image-20200313093416948"></p>
<p>通过在特权模式下输入命令clear mac-addresstable,清余MAC表中已经存在的转发项</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Switch&gt;enable</span><br><span class="line">Switch#clear mac-address-table</span><br><span class="line">Switch#</span><br></pre></td></tr></table></figure>

<p>再次启动PCO与PC1之间的ICMP报文传输过程,采用步进模式查看ICMP报文传输过程</p>
<p>交换机接收到PC0发送的MAC帧后，在MAC表创建PCO对应的转发项，由于转发表中没有PC1的转发项，所以采用户播这个MAC帧的方式，当交换机接收到PC1发送的MAC帧后，在MAC表当中创建PC1对应的转发项，由于MAC表中已经存在PC0对应的转发项，所以交换机转发该MAC帧给PCO</p>
<p>查看PC1至PCOCMP报文封装过程</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313094123758.png" alt="image-20200313094123758"></p>
<p>ICMP报文封装成IP分组，IP分组的源IP地址是PC1的IP地址192.1.1.2，目的P地址是PC0的P地址192.1.1.1</p>
<p>IP分组又封装成MAC帧,MAC帧的源MAC地址应该是PC1的MAC地址,目的MAC地址应该是PC0的MAC地址</p>
<p><img src="/%5Cpic%5C%E5%8D%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B0%8F%E5%AE%9E%E9%AA%8C%5Cimage-20200313095215588.png" alt="image-20200313095215588"></p>
<p>命令模式完成</p>
<p>pc0cmd下pingpc1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ping 192.1.1.2</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>Cisco</tag>
      </tags>
  </entry>
  <entry>
    <title>如何关306的水气</title>
    <url>/2023/05/12/%E5%A6%82%E4%BD%95%E5%85%B3306%E7%9A%84%E6%B0%B4%E6%B0%94/</url>
    <content><![CDATA[<h1 id="水"><a href="#水" class="headerlink" title="水"></a>水</h1><ol>
<li>进入306的阳台</li>
<li>向左手边看去可以看到一个水箱<br><img src="/pic/%E5%A6%82%E4%BD%95%E5%85%B3306%E7%9A%84%E6%B0%B4%E6%B0%94/IMG_20230513_110026.jpg" alt="水箱"></li>
<li>注意水箱上的几个按键<br><img src="/pic/%E5%A6%82%E4%BD%95%E5%85%B3306%E7%9A%84%E6%B0%B4%E6%B0%94/image.png" alt="按键"></li>
<li>按下红色按键，液晶屏熄灭，代表OFF</li>
<li>注意左边墙上的闸箱<br><img src="/pic/%E5%A6%82%E4%BD%95%E5%85%B3306%E7%9A%84%E6%B0%B4%E6%B0%94/image-1.png" alt="闸箱"></li>
<li>拉下黑闸</li>
</ol>
<h1 id="气"><a href="#气" class="headerlink" title="气"></a>气</h1><p>主要关闭氩气和氧气的气瓶</p>
<ol>
<li>进入306的阳台</li>
<li>右转走到头</li>
<li>右手边有三个气瓶，最里面的两个是氩气和氧气的气瓶</li>
<li>顺时针旋转阀，直到拧不动为完全关闭（逆时针是开启，也会拧到头，此时为完全打开）<br><img src="/pic/%E5%A6%82%E4%BD%95%E5%85%B3306%E7%9A%84%E6%B0%B4%E6%B0%94/image-2.png" alt="气瓶"></li>
</ol>
]]></content>
      <categories>
        <category>实验</category>
      </categories>
      <tags>
        <tag>实验</tag>
        <tag>教程</tag>
        <tag>阿尔兹海默症拯救计划</tag>
      </tags>
  </entry>
  <entry>
    <title>工作分解结构</title>
    <url>/2020/03/13/%E5%B7%A5%E4%BD%9C%E5%88%86%E8%A7%A3%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<p>工作分解结构</p>
<p> 本知识点主要讲述如下内容:</p>
<p>(1)生活案例引导</p>
<p>(2)工作分解思想</p>
<p>生活案例</p>
<p>你和同学你们2个人一起做菜:炒鸡蛋。问怎么做?</p>
<p>阶段1:准备材料(包括配料及工具)</p>
<ul>
<li>准备配料:鸡蛋、葱、姜、蒜、油</li>
<li>准备工具:碗、搅拌器(或筷子)、锅、火、铲子等</li>
<li>1个人做(另个人看)还是2个人同时做</li>
</ul>
<p>阶段2:炒鸡蛋</p>
<p>炒鸡蛋</p>
<ul>
<li>(1个人)(包括搅鸡蛋、热油锅等)</li>
<li>另个人千吗? 闲着吗?还是准备盘子?(同时吗?)</li>
</ul>
<p>阶段3:盛盘上桌</p>
<p>工作分解结构的思想</p>
<p>工作分解结构的思想是:</p>
<p>项目范围-&gt;工作阶段-&gt;工作单元-&gt;任务</p>
<p>工作阶段(Phase) 是按时间顺序分布的工作里程碑</p>
<p>工作单元(Work Unit)是阶段的组成部分，彼此之间可以使串行也可以是并行的<br>任务是组成工作单元的单位活动</p>
<p>工作单元和任务可以逐步细分，但分的过细会导致过于零碎，分得过粗，<br>则会不容易控制</p>
<p>项目经理按分解结构委派和监控项目</p>
<p>工作分解结构的思想</p>
<p>为什么需要WBS:</p>
<p>项目经理按分解结构委深和监控项目，可以准确地预测下面的内容:</p>
<ol>
<li><p>WBS明确了完成项0所需要进行的工作</p>
</li>
<li><p>WBS能给项日组，管理层和团队成员产生紧迫感</p>
</li>
<li><p>WBS能防止项目范围的盲目扩大</p>
</li>
<li><p>WBS为管理层和项日经理提供了控制手段</p>
</li>
</ol>
<p>如:</p>
<p>学生小组做实验的例子:</p>
<ul>
<li>1)、分配各小组作实验的内容(1天)</li>
<li>2)、各小组组长分配组员工作、整合(5天)</li>
<li>3)、整理各小组实验报告，分析，整理(2天)</li>
</ul>
<p>工作分解结构</p>
<p>本知识点主要讲述如下内容：</p>
<p>（1）创建工作分解结构</p>
<p>（2）工作分解结构的表示</p>
<p>创建工作分解结构</p>
<p>创建WBS有两种方法：</p>
<p>自顶向下和自底向上</p>
<p>1、自顶向下是由一般到特殊的过程</p>
<p><strong>是先将项目分成阶段，再将阶段分解为工作单元，再将单元分解为任务，最后整合的过程。是最常用的一种方法。本方法容易遗漏单元或任务。</strong></p>
<p>2、自底向上是由特殊到一般的过程</p>
<p><strong>是想了解任务，找到相应的解决方案，再逆推到阶段，再到项目分解结构的过程。本方法容易陷入解决方案的泥潭。</strong></p>
<p>自顶向下创建WBS的过程：</p>
<p>1、召集相关的管理层人员，项目发起人，团队成员或财务人员</p>
<p>2、先将项目分解为若干阶段</p>
<p>3、再将每个阶段分解为若干个单元</p>
<p>4、将每个单元分解为若干个任务</p>
<p>5、对WBS中的每个阶段、单元和任务进行复核和修订</p>
<p>将项目分解为若干阶段：</p>
<p>从顶层目标入手来确定项目的各个阶段</p>
<ul>
<li>项目内部存在逻辑上的划分吗（如日期或活动）</li>
<li>存在代表各个阶段可识别的里程碑吗</li>
<li>在项目中是否考虑了企业的商业周期</li>
<li>在项目中是否存在财务责任或限制来标识各阶段</li>
<li>在公司项目生命周期中有什么因素能影响项目</li>
<li>你的公司正在采用什么样的项目开发过程</li>
</ul>
<p>划分阶段所使用的工具</p>
<ul>
<li>白板，即时贴等</li>
<li>MS Excel 或 MS Project</li>
<li>控制会议的内容</li>
</ul>
<p>将项目阶段分解为若干单元&#x2F;任务：</p>
<ul>
<li>从阶段1，阶段2，…,按阶段顺序进行划分</li>
<li>将单元和任务不可以分解的太细</li>
<li>只需要注明单元和任务干什么，而不是如何去做</li>
<li>检查任务依赖：一个任务必须等另一个任务完成后才开始</li>
<li>检查任务限制：一个任务必须在某个特定时间开始</li>
<li>检查任务的串行关系，并注明</li>
<li>检查任务的并行关系，并注明</li>
</ul>
<p>使用的工具</p>
<ul>
<li>白板，即时贴等</li>
<li>MS Excel 或 MS Project</li>
<li>控制会议的内容</li>
</ul>
<p>建立现实的项目时间表的任务：</p>
<ul>
<li>严格保证项目的范围，不允许随意改变</li>
<li>项目范围若一定要改变，则应重新校订可行性、预算、WBS</li>
<li>保证项目的各阶段、各单元、各任务的时间分配是合理的</li>
<li>组织团队成员或外聘专家对项目的各任务的详细讨论</li>
<li>检查每个任务完成的时间和可交付的成果（！！！）</li>
<li>检查每个单元完成的时间和可交付的成果（！！！）</li>
<li>检查每个阶段完成的时间和可交付的成果（！！！）</li>
<li>检查整个项目完成的时间和可交付的成果（！！！）</li>
</ul>
<p>严格按WBS委派和执行任务，确定项目经理的权威性可管理角色</p>
<p>项目经理应经常和团队成员（特别是核心成员）交流，保持项目团队的积极向上精神，建立信心，增强信任感和价值感</p>
<p>工作分解结构的表示（图结构示例）</p>
<p><img src="D:\bloglocal\工作分解结构\image-20200323104341369.png" alt="image-20200323104341369"></p>
<p>•<strong>目录结构示例</strong></p>
<p>•<strong>1 Alpha</strong> <strong>版</strong></p>
<p>•<strong>1.1</strong> <strong>问题定义</strong></p>
<p>•<strong>1.2</strong> <strong>可行性研究</strong></p>
<p>•<strong>1.3</strong> <strong>需求分析</strong></p>
<p>•<strong>1.4</strong> <strong>设计</strong></p>
<p>•<strong>1.4.1 UI</strong> <strong>设计</strong></p>
<p>•<strong>1.4.2</strong> <strong>网络设计</strong></p>
<p>•<strong>1.4.3</strong> <strong>数据库设计</strong></p>
<p>•<strong>1.4.4</strong> <strong>架构设计</strong></p>
<p>•<strong>1.4.5</strong> <strong>业务所涉及</strong></p>
<p>•<strong>1.5</strong> <strong>编码</strong></p>
<p>•<strong>2 Beta</strong> <strong>版</strong></p>
<p>•<strong>3 Finial</strong> <strong>版</strong></p>
]]></content>
      <categories>
        <category>项目管理</category>
      </categories>
      <tags>
        <tag>项目管理</tag>
      </tags>
  </entry>
  <entry>
    <title>普林斯顿等离子体课</title>
    <url>/2023/05/24/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/</url>
    <content><![CDATA[<h1 id="Kinetic-Plasma-Simulation"><a href="#Kinetic-Plasma-Simulation" class="headerlink" title="Kinetic Plasma Simulation"></a>Kinetic Plasma Simulation</h1><h2 id="intro"><a href="#intro" class="headerlink" title="intro"></a>intro</h2><p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-17.png" alt="characteristic time and length scales"></p>
<p>如果我们要绘制这些参数，我们有特征等离子体时间和长度的列表。</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-18.png" alt="Time scales &amp; Length scales"></p>
<p>绿色的部分是Fluid models，在这个范畴内考虑的是流体参数，前面的使用全动力学模型，中间部分使用混合模型</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-19.png" alt="time"></p>
<h2 id="When-are-collisions-important？"><a href="#When-are-collisions-important？" class="headerlink" title="When are collisions important？"></a>When are collisions important？</h2><p>我们会去关系在一个德拜Cube中粒子的数量</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-20.png" alt="德拜屏蔽"></p>
<p>以上情况下等离子体会很少碰撞</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-21.png" alt="一些等离子体的德拜屏蔽"></p>
<p>可以用Vlasov—Maxwell等式来描述低碰撞等离子体的分布函数f(x,v,t)</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-22.png" alt=" "></p>
<ul>
<li>直接解这些公式涉及六个维度</li>
<li>可以通过特征来求解（粒子）</li>
<li>Delta函数导致碰撞</li>
</ul>
<p>所以我们真正要解决的是一下几个公式</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-23.png" alt=" "></p>
<p>第一个式子是带有洛伦兹力的动量方程</p>
<p>第三个式子法拉第方程</p>
<p>下面是安培定律的source</p>
<p>最后一个式子是将上述几个等式进行总计和整合，如果我们计算的是单个粒子的电流，则其图像将会非常尖锐</p>
<h2 id="PIC方式来求解Vlasov等式（VE）"><a href="#PIC方式来求解Vlasov等式（VE）" class="headerlink" title="PIC方式来求解Vlasov等式（VE）"></a>PIC方式来求解Vlasov等式（VE）</h2><p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-26.png" alt="我们可以减少计算的开销通过使用gird"></p>
<ul>
<li>6D-VE不在网格上</li>
<li>重新引入Np计算离散的f(r,p,t)</li>
<li>宏观力再次变成颗粒状（随机噪声）</li>
</ul>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-24.png" alt=" "></p>
<ul>
<li>粒子动量等式（EQM）</li>
</ul>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-25.png" alt=" "></p>
<p>VE 特征：f &#x3D; const</p>
<p>粒子长度 也是const</p>
<ul>
<li>洛伦兹力：<img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-27.png" alt="洛伦兹力"></li>
</ul>
<p>这里主要讲了一下算法的原理，大概就是在网格中将电场和磁场用力向外推，将他们内插到粒子内</p>
<p><img src="/pic/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E8%AF%BE/image-28.png" alt=" "></p>
]]></content>
      <categories>
        <category>等离子体</category>
      </categories>
      <tags>
        <tag>等离子体</tag>
      </tags>
  </entry>
  <entry>
    <title>机器学习</title>
    <url>/2021/03/30/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h1><h3 id="机器学习的分类"><a href="#机器学习的分类" class="headerlink" title="机器学习的分类"></a>机器学习的分类</h3><p>目标值：类型-分类问题</p>
<p>目标值：连续的数据-回归问题</p>
<p>目标值：无目标值-无监督学习</p>
<h3 id="机器学习的流程"><a href="#机器学习的流程" class="headerlink" title="机器学习的流程"></a>机器学习的流程</h3><p>1 获取数据</p>
<p>2 数据处理</p>
<p>3 特征工程</p>
<p>4 机器学习算法训练-模型</p>
<p>5 模型评估</p>
<p>6 应用</p>
<h3 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h3><p>sklearn</p>
<p>kaggle</p>
<p>UCI</p>
<h2 id="sklearn"><a href="#sklearn" class="headerlink" title="sklearn"></a>sklearn</h2><p>sklearn的安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install sklearn</span><br></pre></td></tr></table></figure>

<p>sklearn.datasets</p>
<ul>
<li><p>加载获取数据集</p>
<p>datasets.load_*() 获取小规模数据集</p>
<p>datasets.fetch_*()获取大规模数据集</p>
</li>
</ul>
<p>数据集的返回值</p>
<p>datasets.base.Bunch（继承自字典）</p>
<p>查看iris的数据集</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment">#@Time  : 2022/1/12 18:45</span></span><br><span class="line"><span class="comment">#@Author: Shyee</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">sklearn的数据集使用</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">datasets_demo</span>():</span><br><span class="line"></span><br><span class="line">    iris=load_iris()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;鸢尾花数据集：\n&quot;</span>,iris)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;查看数据集的描述：\n&quot;</span>,iris[<span class="string">&quot;DESCR&quot;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;查看特征值的名字：\n&quot;</span>,iris.feature_names)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;查看特征值：\n&quot;</span>,iris.data,iris.data.shape)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    datasets_demo()</span><br></pre></td></tr></table></figure>

<p>数据集的划分</p>
<p>训练数据</p>
<p>测试数据 20%~30%</p>
<p>sklearn中的数据集划分</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sklean.model_selection.train_test.split(arrays,*option)</span><br></pre></td></tr></table></figure>

<p>训练集的特征值 x_train</p>
<p>测试集特征值 x_test</p>
<p>训练集的目标值 y_train</p>
<p>测试集目标值 y_test</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#数据集划分</span></span><br><span class="line">x_train,x_test,y_train,y_test=train_test_split(iris.data,iris.target,test_size=<span class="number">0.2</span>,random_state=<span class="number">22</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;训练集的特征值：\n&quot;</span>,x_train,<span class="string">&quot;\n测试集的目标值:\n&quot;</span>,y_test)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>训练集此时的shape为120行，因为取了0.2给测试集</p>
<h2 id="特征工程"><a href="#特征工程" class="headerlink" title="特征工程"></a>特征工程</h2><h3 id="特征抽取"><a href="#特征抽取" class="headerlink" title="特征抽取"></a>特征抽取</h3><p>将任意数据转换成可以给用于机器学习的数字特征</p>
<h4 id="sklearn的特征提取"><a href="#sklearn的特征提取" class="headerlink" title="sklearn的特征提取"></a>sklearn的特征提取</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sklearn.feature_extraction</span><br></pre></td></tr></table></figure>

<p>字典的特征提取</p>
<p>在sklearn中实现特征提取</p>
<p>特征预处理</p>
<p>特征降维</p>
]]></content>
      <categories>
        <category>机器学习</category>
      </categories>
      <tags>
        <tag>机器学习</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>深度学习小tips</title>
    <url>/2023/09/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/</url>
    <content><![CDATA[<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/47640083349900.png" alt="激活函数小tips"></p>
<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/49429640452500.png" alt="正则化小tips"></p>
<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/50813792505500.png" alt="神经网络参数优化器"></p>
<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/53424464517300.jpg" alt="几种优化器的比较"></p>
<p>用Tensorflow API:tf.keras搭建网络八</p>
<p>六步法</p>
<pre><code>import

train, test

model = tf.keras.models

Sequentialmodel.compile

# 描述各层的网络结构
Sequentialmodel

    拉直层：tf.keras.layers.Flatten()

    全连接层：tf.keras.layers.Dense(神经元个数,activation=&quot;激活函数“, kernel_regularizer=哪种正则化)
    (activation（字符串给出）可选: relu、softmax、sigmoid、tanh
    kernel_regularizer可选: tf.keras.regularizers.l1()、tf.keras.regularizers.l2())

    卷积层：tf.keras.layers.Conv2D(filters =卷积核个数,kernel_size=卷积核尺寸，strides=卷积步长，padding = &quot;valid&quot; or &quot;same&quot;)

    LSTM层：tf.keras.layers.LSTM()

# 告知训练时选择的优化器、损失函数、评测指标
model.compile(optimizer =优化器,loss=损失函数metrics =[“准确率&quot;)
    Optimizer可选:
        &#39;sgd&#39; or tf.keras.optimizers.SGD (Ir=学习率,momentum=动量参数)
        &#39;adagrad&#39; or tf.keras.optimizers.Adagrad (lr=学习率)
        ‘adadelta&#39; or tf.keras.optimizers.Adadelta (lr=学习率)
        ‘adam&#39; or tf.keras.optimizers.Adam (lr=学习率, beta_1=0.9, beta_2=0.999)
    loss可选:
        &#39;mse&#39;or tf.keras.losses.MeanSquaredError()
        &#39;sparse _categorical_crossentropy or tf.keras losses.SparseCategoricalCrossentropy(from_logits=False)
    Metrics可选:
        ‘accuracy:y_和y都是数值，如y_=[1] y=[1]
        &#39;categorical_accuracy:y_和y都是独热码(概率分布)，如y_=[0,1,0] y=[0.256,0.695,0.048]
        &#39;sparse_categorical_accuracy : y_是数值,y是独热码(概率分布),如y_=[1] y=[0.256,0.695,0.048]

model.fit
model.fit(训练集的输入特征，训练集的标签，batch_size= , epochs= ,
    validation_data=(测试集的输入特征，测试集的标签),
    validation_split=从训练集划分多少比例给测试集,
    validation_freq=多少次epoch测试一次)

model.summary
</code></pre>
<p>sequential的平替-&gt;class MyModel(Model) model &#x3D; Mymodel<br>可应用于跳连的神经网络</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyModel</span>(<span class="title class_ inherited__">Model</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MyModel,self)._init_()定义网络结构块</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment">#调用网络结构块，实现前向传播return y</span></span><br><span class="line">        model = MyModel()</span><br></pre></td></tr></table></figure>
<p>init()定义所需网络结构块<br>call()写出前向传播</p>
<p>ep:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IrisModel</span> (<span class="title class_ inherited__">Model</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">int</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(IrisModel, self).__init__()</span><br><span class="line">        self.d1 = Dense (<span class="number">3</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call</span> (self, x):</span><br><span class="line">    y = self.d1(x)</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">model = IrisModel()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>自制数据集</p>
<p>搞一堆图片，搞两个文件夹，分别标为train和test，图片大小尽量搞成一样的，搞成灰度图，0-255，<br>写两个txt分别给train和test打标签，命名方式为id_标签.jpg 标签,如0_5.jpg 5，代表第一个图片表示的5。<br>写一个generate函数参数分别为path和txt</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generateds</span>(<span class="params">path, txt</span>):</span><br><span class="line">    f = <span class="built_in">open</span>(txt, <span class="string">&#x27;r&#x27;</span>)  <span class="comment"># 以只读形式打开txt文件</span></span><br><span class="line">    contents = f.readlines()  <span class="comment"># 读取文件中所有行</span></span><br><span class="line">    f.close()  <span class="comment"># 关闭txt文件</span></span><br><span class="line">    x, y_ = [], []  <span class="comment"># 建立空列表</span></span><br><span class="line">    <span class="keyword">for</span> content <span class="keyword">in</span> contents:  <span class="comment"># 逐行取出</span></span><br><span class="line">        value = content.split()  <span class="comment"># 以空格分开，图片路径为value[0] , 标签为value[1] , 存入列表</span></span><br><span class="line">        img_path = path + value[<span class="number">0</span>]  <span class="comment"># 拼出图片路径和文件名</span></span><br><span class="line">        img = Image.<span class="built_in">open</span>(img_path)  <span class="comment"># 读入图片</span></span><br><span class="line">        img = np.array(img.convert(<span class="string">&#x27;L&#x27;</span>))  <span class="comment"># 图片变为8位宽灰度值的np.array格式</span></span><br><span class="line">        img = img / <span class="number">255.</span>  <span class="comment"># 数据归一化 （实现预处理）</span></span><br><span class="line">        x.append(img)  <span class="comment"># 归一化后的数据，贴到列表x</span></span><br><span class="line">        y_.append(value[<span class="number">1</span>])  <span class="comment"># 标签贴到列表y_</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;loading : &#x27;</span> + content)  <span class="comment"># 打印状态提示</span></span><br><span class="line"></span><br><span class="line">    x = np.array(x)  <span class="comment"># 变为np.array格式</span></span><br><span class="line">    y_ = np.array(y_)  <span class="comment"># 变为np.array格式</span></span><br><span class="line">    y_ = y_.astype(np.int64)  <span class="comment"># 变为64位整型</span></span><br><span class="line">    <span class="keyword">return</span> x, y_  <span class="comment"># 返回输入特征x，返回标签y_</span></span><br></pre></td></tr></table></figure>

<p>循环计算过程</p>
<p>h<sub>t</sub> &#x3D; tanh(x<sub>t</sub>w<sub>xh</sub>+h<sub>t-1</sub>w<sub>hh</sub>+bh)</p>
<p>y<sub>t</sub>&#x3D;softmax(h<sub>t</sub>w<sub>hy</sub>+by)</p>
<p>LSTM计算过程</p>
<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/24984023084700.png"></p>
<p>GRU计算过程</p>
<p><img src="/./pic/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%B0%8Ftips/25322351726100.png"></p>
]]></content>
      <categories>
        <category>机器学习</category>
      </categories>
      <tags>
        <tag>机器学习</tag>
        <tag>python</tag>
        <tag>深度学习</tag>
        <tag>tensorflow2</tag>
      </tags>
  </entry>
  <entry>
    <title>离散数学</title>
    <url>/2021/03/12/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6/</url>
    <content><![CDATA[<h1 id="离散数学"><a href="#离散数学" class="headerlink" title="离散数学"></a>离散数学</h1><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>将若干个可确定的、可分辨的对象构成的无序整体称为集合</p>
<p>必须明确判断一个对象</p>
<p>集合中没有相同的元素</p>
<h3 id="集合表示法"><a href="#集合表示法" class="headerlink" title="集合表示法"></a>集合表示法</h3><p>外延表示法（列举法）</p>
<p>内涵表示法（描述法）</p>
<p><img src="/%5Cpic%5C%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%5Cimage-20220113104324776.png" alt="image-20220113104324776"></p>
<h3 id="子集与超集"><a href="#子集与超集" class="headerlink" title="子集与超集"></a>子集与超集</h3><p>包含于是集合之间的关系</p>
<p>属于是元素和集合的关系</p>
<p>A包含于B&amp;&amp;B包含于A时 A&#x3D;B</p>
<h3 id="全集-U"><a href="#全集-U" class="headerlink" title="全集 U"></a>全集 U</h3><p>讨论的具体问题中的全体</p>
<h3 id="空集"><a href="#空集" class="headerlink" title="空集"></a>空集</h3><p>任意一个集合都是自己的子集 ，空集是任意一个集合的子集</p>
<p>空集是唯一的</p>
<h3 id="基数或势"><a href="#基数或势" class="headerlink" title="基数或势"></a>基数或势</h3><p>一个集合A所包含的元素数目称为该集合的基数或势，记作|A|或#A或card(A)。</p>
<p>if |A|&lt;∞ 则称A为有限集或有穷集（finite set）。否则称为无穷集。</p>
<p>card({a,b,a,2，🐷})&#x3D;4，因为a出现了两次。</p>
<h3 id="幂集"><a href="#幂集" class="headerlink" title="幂集"></a>幂集</h3><p>设A是集合，则A的所有子集组成的集合称为幂集。</p>
<h3 id="集合的运算"><a href="#集合的运算" class="headerlink" title="集合的运算"></a>集合的运算</h3><p>设 U 为全集，A、B 为 U 的两个子集，则：</p>
<p>(a) A 与 B 的交集（intersection） A∩B &#x3D; { x | x∈A 且 x∈B }；</p>
<p>(b) A 与 B 的并集（union） A∪B &#x3D; { x | x∈A 或 x∈B }； </p>
<p>(c) B 关于 A 的相对补（complement of B with respect to A） 或 A 与 B 的差集（difference）A-B 定义为 A-B &#x3D; { x |x∈A 且x不属于B}，也记作 A\B；</p>
<p>(d) A 关 于全 集 U 的相 对补称作 A的 绝对补 或补 集 （complement），记作A（或 ~A ），即A&#x3D;{x|x∈U且x不属于A}； </p>
<p>(e) A 与 B 的对称差（symmetric difference）AB 定义为 A⊕B &#x3D; { x | x∈A或x∈B且x不同时属于A和B }。</p>
<p>交换律 </p>
<p>A∪B&#x3D;B∪A A∩B&#x3D;B∩A </p>
<p>结合律  </p>
<p>( A∪B )∪C &#x3D; A∪( B∪C ) </p>
<p>( A∩B )∩C &#x3D; A∩( B∩C ）</p>
<p>分配律 </p>
<p>A∪( B∩C ) &#x3D; ( A∪B )∩( A∪C ) </p>
<p>A∩( B∪C ) &#x3D; ( A∩B )∪( A∩C ) </p>
<p>吸收律 </p>
<p>A∪(A∩B)&#x3D;A，A∩(A∪B)&#x3D;A </p>
<p>幂等律 </p>
<p>A∪A &#x3D; A，A∩A &#x3D; A</p>
<p>双重否定律 </p>
<p>非非A &#x3D; A </p>
<p>矛盾律 </p>
<p>A∩A &#x3D;  </p>
<p>排中律 </p>
<p> A∪A &#x3D; U </p>
<p>余补律   &#x3D; U，U &#x3D;  </p>
<p>零律 </p>
<p>A∪U&#x3D;U， A∩&#x3D; </p>
<p>同一律 </p>
<p> A∪&#x3D;A，A∩U&#x3D;A </p>
<p>德·摩根律 </p>
<p>A∪B &#x3D; A∩B  A∩B &#x3D; A∪B </p>
<p>A( B∪C ) &#x3D; ( AB )∩( AC ) </p>
<p>A( B∩C ) &#x3D; ( AB )∪( AC ) </p>
<p>U( B∪C ) &#x3D; ( UB )∩( UC )  </p>
<p>U( B∩C ) &#x3D; ( UB )∪( UC )</p>
<h3 id="维恩图"><a href="#维恩图" class="headerlink" title="维恩图"></a>维恩图</h3><h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h2><p>序列（sequence）是被排成一列的 对象，各对象之间的顺序非常重要。 </p>
<p>序列中的对象也称为项（item）， </p>
<p>项的个数（可能是无限的）称为序 列的长度（length）。 </p>
<p>取出序列中的某些特定的项并保持 它们在原来序列中的顺序，所得到 的 新 序 列 称 为 原 序 列 的 子 序 列 (subsequence)。</p>
]]></content>
      <categories>
        <category>数学</category>
      </categories>
      <tags>
        <tag>数学</tag>
        <tag>计算机前置知识</tag>
      </tags>
  </entry>
  <entry>
    <title>等离子体物理_pyk</title>
    <url>/2023/05/24/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/</url>
    <content><![CDATA[<h1 id="麦克斯韦方程组"><a href="#麦克斯韦方程组" class="headerlink" title="麦克斯韦方程组"></a>麦克斯韦方程组</h1><p>一般形式</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/1D6A5C77DD8DAFC4A5964A8CE8C8C498.jpg" alt=" "></p>
<p>对(2.2.2)两边求散度（左乘拉普拉斯算子），再联立(2.2.3)就可以推出电荷守恒方程(2.2.5)</p>
<h1 id="洛伦兹力定律"><a href="#洛伦兹力定律" class="headerlink" title="洛伦兹力定律"></a>洛伦兹力定律</h1><p>F &#x3D; q(E+v x B)</p>
<p>v是粒子速度</p>
<p>B&#x3D; u0 ·H 是磁感应强度矢量</p>
<h1 id="玻尔兹曼方程"><a href="#玻尔兹曼方程" class="headerlink" title="玻尔兹曼方程"></a>玻尔兹曼方程</h1><p>引入一个六位相空间(r,v)中的分布函数f(r,v,t),r代表位置，t代表速度。</p>
<p>可以得到无碰撞玻尔兹曼方程，或弗拉索夫（Vlasov）方程</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/C63440A1FCE157A0572C6B274E057392.jpg" alt="2.3.2"></p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-41.png" alt=" "></p>
<p>对其两边加上碰撞项，就得到玻尔兹曼方程</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-42.png" alt="2.3.3"></p>
<h1 id="宏观量"><a href="#宏观量" class="headerlink" title="宏观量"></a>宏观量</h1><p>粒子密度</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-43.png" alt="2.3.4"></p>
<p>粒子通量</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-44.png" alt="2.3.5"></p>
<p>单位体积内粒子的动能</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-45.png" alt="2.3.6"></p>
<h1 id="动量守恒方程-amp-能量守恒方程"><a href="#动量守恒方程-amp-能量守恒方程" class="headerlink" title="动量守恒方程&amp;能量守恒方程"></a>动量守恒方程&amp;能量守恒方程</h1><p>对玻尔兹曼方程两端成v，然后对速度积分，就是动量守恒方程</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-46.png" alt="2.3.9"></p>
<p>其常见表达式为</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-47.png" alt="2.3.15"></p>
<p>对玻尔兹曼方程两端同乘1&#x2F;2mv^2，并对速度积分，能得到能量守恒方程</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-48.png" alt="2.3.21"></p>
<h1 id="麦克斯韦分布"><a href="#麦克斯韦分布" class="headerlink" title="麦克斯韦分布"></a>麦克斯韦分布</h1><p>在没有空间梯度和加速度项的稳态情况下，玻尔兹曼方程简化为</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-49.png" alt="2.4.1"></p>
<p>c代表同种粒子之间的碰撞，其解为一个有高斯形式的速度分布函数f(v)</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-50.png" alt="2.4.2"></p>
<p>最终可以解出C和ξ可以得到</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-51.png" alt="2.4.7"></p>
<h1 id="等离子体在均匀场中的运动"><a href="#等离子体在均匀场中的运动" class="headerlink" title="等离子体在均匀场中的运动"></a>等离子体在均匀场中的运动</h1><h2 id="回旋频率"><a href="#回旋频率" class="headerlink" title="回旋频率"></a>回旋频率</h2><h2 id="回旋半径"><a href="#回旋半径" class="headerlink" title="回旋半径"></a>回旋半径</h2><h2 id="ExB漂移"><a href="#ExB漂移" class="headerlink" title="ExB漂移"></a>ExB漂移</h2><h1 id="电磁波"><a href="#电磁波" class="headerlink" title="电磁波"></a>电磁波</h1><h1 id="静电波"><a href="#静电波" class="headerlink" title="静电波"></a>静电波</h1><h1 id="介电张量"><a href="#介电张量" class="headerlink" title="介电张量"></a>介电张量</h1><h1 id="波的色散关系"><a href="#波的色散关系" class="headerlink" title="波的色散关系"></a>波的色散关系</h1><h1 id="磁化等离子体中的波"><a href="#磁化等离子体中的波" class="headerlink" title="磁化等离子体中的波"></a>磁化等离子体中的波</h1><p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/0960A420F60DE4125AA02629259C81BE.jpg" alt="包括离子运动的磁化等离子体基本波的色散关系曲线 "></p>
<h1 id="IV曲线"><a href="#IV曲线" class="headerlink" title="IV曲线"></a>IV曲线</h1><h2 id="chatGPT"><a href="#chatGPT" class="headerlink" title="chatGPT"></a>chatGPT</h2><p>我们可以利用IV曲线上的斜率来计算等离子体密度。在低压下，当电流随电压增加呈指数增长时，IV曲线上的斜率与等离子体密度成正比。因此，我们可以使用以下公式来计算等离子体密度：</p>
<p>n_e &#x3D; (I_s&#x2F;2πrLqA) * [(dV&#x2F;dI) &#x2F; V_p]</p>
<p>其中，n_e 表示等离子体密度；I_s 表示饱和电流；r 是探针半径；L 是探针长度；q 是电子电量；A 是探针截面积；dV&#x2F;dI 是IV曲线的斜率；V_p 是等离子体的诱导电压。</p>
<p>需要注意的是，这种方法只能用于计算等离子体密度的数量级，而无法得到精确值。同时，由于该方法对实验条件要求较高，可能存在误差。</p>
<p>对于弱等离子体（即电离度较低），可以使用Langmuir剖面计算等离子体密度：<br>n_e &#x3D; (I_sat &#x2F; A) * ((4ε_0me)&#x2F;(e^2π^2))^(1&#x2F;2)</p>
<p>其中，n_e表示等离子体密度；I_sat表示探针饱和电流；A表示探针表面积；ε_0表示真空介电常数；m_e表示电子质量；e表示元电荷。</p>
<p>对于强等离子体（即电离度较高），可以使用Saha-Boltzmann方程计算电子密度：<br>n_e &#x3D; (2πm_e k_B T_e&#x2F;h^2)^(3&#x2F;2) * (N_i&#x2F;N)^2 * exp((-E_i&#x2F;k_B T_e)* (1-β))</p>
<p>其中，N_i表示第i种粒子的数密度；N表示总数密度；T_e表示等离子体电子温度；k_B表示玻尔兹曼常数；h表示普朗克常数；E_i表示第i种粒子的电离势；β表示热化学平衡指数，通常在1左右。</p>
<h2 id="Wang"><a href="#Wang" class="headerlink" title="Wang"></a>Wang</h2><p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-37.png" alt=" "></p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-38.png" alt=" "></p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-39.png" alt=" "></p>
<p>Vp是IV曲线的拐点</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-40.png" alt="Vp"></p>
<h1 id="EEDF"><a href="#EEDF" class="headerlink" title="EEDF"></a>EEDF</h1><p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-35.png" alt="6.6.15"></p>
<details>
<summary>chatGPT方案--展开查看</summary>
<!-- <pre><code> -->

<p>等离子体的EEDF（能量电子分布函数）描述了等离子体中电子的能级分布情况，是等离子体物理学中一个重要的参数。以下是计算等离子体EEDF的基本步骤：</p>
<p>选取合适的实验方法来测量等离子体的电子能谱。常用的实验方法包括：光电子显微镜、辐射法、气体磁谱计等。</p>
<p>对于得到的电子能谱进行预处理，并将其转换为电子能量分布函数。通常，可以使用不同的数值技术和算法来进行预处理和转换。</p>
<p>根据转换后的电子能量分布函数，计算出等离子体的EEDF。这可以通过应用Boltzmann方程或其他相关方程进行计算。Boltzmann方程给出了EEDF的形式，可以写成下面的形式：</p>
<p>f(E) &#x3D; A * exp(-E&#x2F;kT_e)</p>
<p>其中，E是电子能量；T_e是电子温度；A是归一化常数。</p>
<p>对于复杂等离子体，例如非平衡等离子体，可能需要考虑更多的因素并采用更加复杂的模型来计算EEDF。在这种情况下，可以结合数值模拟和实验数据来进行计算和分析。<br>计算等离子体EEDF的公式通常基于Boltzmann方程，其形式如下：</p>
<p>f(E) &#x3D; A * exp(-E&#x2F;kT_e)</p>
<p>其中，f(E)是电子能量分布函数；E是电子能量；T_e是等离子体电子温度；A是归一化常数。</p>
<p>计算EEDF需要确定电子能量分布函数中的参数，包括归一化常数A和电子温度T_e。这可以通过将实验数据与理论模型进行比较来获得。</p>
<p>对于平衡态等离子体，可以使用以下公式计算电子密度n_e和电子温度T_e：</p>
<p>n_e &#x3D; n_0 * exp(-E_i&#x2F;kT_e)</p>
<p>T_e &#x3D; (2&#x2F;3)*(kT_n&#x2F;m_e)</p>
<p>其中，n_0是等离子体中的中性原子或分子浓度；E_i是电离势；T_n是等离子体中的中性粒子温度；m_e是电子质量；k是玻尔兹曼常数。</p>
<p>归一化常数A是EEDF中的一个重要参数，它通常用于确保电子能量分布函数f(E)的总积分为1。确定归一化常数A的方法可能因实验条件和等离子体类型而异，但以下是一些常见的方法：</p>
<p>使用计算机模拟来估计归一化常数A。可以通过对Boltzmann方程进行数值求解来获得电子能量分布函数，并根据总积分为1的条件来确定归一化常数A。</p>
<p>使用实验数据来确定归一化常数A。这可以通过将实验得到的电子能谱与理论模型进行比较来实现。首先，需要计算出理论上的电子能谱，并使用已知的归一化常数A来匹配实验结果。然后，通过比较实验数据和模型预测值的差异来调整归一化常数A的值。</p>
<p>采用标准归一化常数。有时候，也可以使用标准归一化常数（例如，SI制中的1&#x2F;m^3）来简化计算过程。这意味着电子能量分布函数f(E)将被除以总电子密度n_e，以确保总积分为1。</p>
<!-- </code></pre> -->
</details>

<h1 id="EEPF"><a href="#EEPF" class="headerlink" title="EEPF"></a>EEPF</h1><p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-36.png" alt="6.6.18"></p>
<hr>
<p>单粒子方程</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-29.png" alt=" 1 "></p>
<p>第一项是压力梯度项</p>
<p>第二项是qn洛伦兹力</p>
<p>第三项是碰撞项</p>
<p>离子束守恒（速率平衡方程）</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-30.png" alt=" "></p>
<p>右边分别是产生项-损失项</p>
<p>对于1式中u比较小，所以可以省略，最终化简为以下式子</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-32.png" alt=" "></p>
<p>电子电流</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-31.png" alt=" "></p>
<p>u是平均速度</p>
<p>综上就可以推出欧姆定律（？）</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-33.png" alt=" "></p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E7%89%A9%E7%90%86-pyk/image-34.png" alt=" "></p>
<p>又知道j &#x3D;电导率xE，所以根据上式就可以得出等离子体的电导率.</p>
]]></content>
      <categories>
        <category>等离子体</category>
      </categories>
      <tags>
        <tag>等离子体</tag>
      </tags>
  </entry>
  <entry>
    <title>网络安全</title>
    <url>/2023/07/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>等离子体前置知识</title>
    <url>/2023/05/24/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h1 id="色散关系"><a href="#色散关系" class="headerlink" title="色散关系"></a>色散关系</h1><p>在物理科学和电气工程学中，色散关系描述波在介质中传播的色散现象的性质。<strong>色散关系将波的波长或波数与其频率建立了联系</strong>。由这组关系，波的相速度和群速度有了方便的确定介质中折射率的表达式。克拉莫-克若尼关系式可以描述波的传播、衰减的频率依赖性，这关系比与几何相关和与材料相关的色散关系更具一般性。</p>
<h2 id="色散"><a href="#色散" class="headerlink" title="色散"></a>色散</h2><p>当不同波长的平面波表现出不同的传播速度时，色散会发生，如此造成混合各种波长的波包渐渐地在空间中扩展开来。平面波的速率v为波长λ的函数：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image.png" alt=" "></p>
<p>波速、波长、频率f之间具有恒等式：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-1.png" alt=" "></p>
<p>函数f(λ)指出了该介质中的色散关系。色散关系更常用角频率<img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-2.png" alt=" ">与波数<img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-3.png" alt=" ">来表示。上述式子可改写为</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-4.png" alt=" "></p>
<p>在此ω成为k的函数。使用ω(k)来描述色散关系已经成为一种标准写法，因为相速度 ω&#x2F;k 与群速度 ∂ω&#x2F;∂k 可以轻松地从这样写法的色散关系中求得。</p>
<p>因此所关注的平面波可写为如下数学式：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-5.png" alt=" "></p>
<p>其中</p>
<p>A是波的振幅，</p>
<p>A0 &#x3D; A(0,0)，</p>
<p>x是波传递方向上的任一特定位置，</p>
<p>t是描述波的任一特定时间。</p>
<h2 id="真空中的平面波"><a href="#真空中的平面波" class="headerlink" title="真空中的平面波"></a>真空中的平面波</h2><h3 id="电磁波"><a href="#电磁波" class="headerlink" title="电磁波"></a>电磁波</h3><p>对真空中的电磁波而言，角频率与波数呈正比：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-6.png" alt=" "></p>
<p>这是“线性”的色散关系。在此情形下，相速度与群速度乃是相同的：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-7.png" alt=" "></p>
<p>两者皆为c，真空中的光速，为与频率无关的常数。</p>
<h3 id="德布罗意色散关系"><a href="#德布罗意色散关系" class="headerlink" title="德布罗意色散关系"></a>德布罗意色散关系</h3><p>粒子的总能量、动量与质量透过如下相对论关系连结：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-8.png" alt=" "></p>
<p>其中m是静质量。</p>
<p>当静质量m为零时，比如光子的例子：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-9.png" alt=" "></p>
<p>又静质量不为零的粒子，当其接近光速时，pc项远大于mc^2项，因此关系式可趋近于E &#x3D; pc。其在非相对论极限，也就是速度远小于光速c的情形，可趋近于如下关系式：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-10.png" alt=" "></p>
<p>此情形下，<img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-11.png" alt=" ">是常数，而<img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-12.png" alt=" ">是常见的动能，可以动量<img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-13.png" alt=" ">来写出关系式。</p>
<p>从近光速的例子过渡到低速度极限，可看到E与p的关系是从p转成p^2，在垂直轴跟水平轴皆取对数log的色散关系图中可看出斜率的改变。</p>
<p>基本粒子、原子核、原子，甚至是分子，皆有物质波的波动表现。根据描述物质波的“德布罗意关系”，能量E与角频率ω之间以及动量p与波数k之间皆为正比关系，比值为约化普朗克常数ħ：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-14.png" alt=" "></p>
<p>相应地，角频率与波数之间也可透过色散关系连结。在非相对论极限（低速度极限的牛顿力学）条件下，利用能量（动能）与动量的关系式：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-15.png" alt=" "></p>
<p>此处省去常数mc^2的效应。等式左右分别代入德布罗意关系，可得色散关系：</p>
<p><img src="/pic/%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/image-16.png" alt=" "></p>
]]></content>
      <categories>
        <category>plasma</category>
      </categories>
      <tags>
        <tag>等离子体</tag>
        <tag>前置任务</tag>
      </tags>
  </entry>
  <entry>
    <title>备份与恢复</title>
    <url>/2020/03/13/%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%9A%E6%89%8B%E5%B7%A5%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/</url>
    <content><![CDATA[<p>第一部分：手工备份与恢复</p>
<p>第一章：备份恢复概述</p>
<p>一）数据库故障类型：</p>
<p>1）user process failure：  pmon 自动处理</p>
<p>2）instance failure:  smon 自动处理</p>
<p>3）user errors ：  需要dba通过备份恢复解决</p>
<p>4）media failure：必须通过备份和日志恢复</p>
<p>二）备份和恢复计划</p>
<p>1）根据生产环境的恢复周期，制定详细的备份计划，然后严格执行</p>
<p>2）对备份，要在一定的时间内利用测试环境，进行故障恢复的练习</p>
<p>三）备份恢复分类</p>
<p>1）逻辑备份与恢复– 面向object</p>
<p>①传统的导入导出：exp&#x2F;imp：</p>
<p>②数据泵导入导出：expdp&#x2F;impdp</p>
<p>逻辑备份就是热备数据库对象某一时刻状态，不能运用在media failure上，逻辑备份的恢复就是还原备份，没有recover的概念。</p>
<p>2）物理备份与恢复– 面向media failure</p>
<p>①手工备份与恢复，也叫用户管理的备份与恢复，通过OS 的命令，完成备份与还原，然后再运用日志进行恢复。</p>
<p>②自动备份与恢复，利用oracle 的备份恢复工具rman，使还原与恢复过程自动完成，可以备份恢复ASM FILE。</p>
<p>物理备份从方式上可以有一致性备份（冷备）和非一致性备份（热备）</p>
<p>完整的备份策略应该以物理备份为主，逻辑备份为辅（用于备份一些重要的表）</p>
<p>3）闪回技术– 面向人为的逻辑错误</p>
<p>一种利用undo数据或闪回日志的快速恢复技术。可以针对不同层面问题进行逻辑恢复，11g支持七种flashback方式。</p>
<p>四）完全恢复与不完全恢复</p>
<p>media failure后，需要运用日志进行recover。</p>
<p>1）完全恢复：</p>
<p>利用完整备份或部分备份，可以将datafile恢复到failure前得最后一次commit，不会出现数据丢失。</p>
<p>2）不完全恢复</p>
<p>需要运用完整备份和日志将database恢复到过去的某个时间点（或SCN），有数据丢失。</p>
<p><img src="file:///C:/Users/EShyee/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg" alt="img"></p>
<p>五）归档与非归档</p>
<p>1）归档模式：redo log 写入 archive log </p>
<p>2）非归档模式：没有archive log, redo log file循环覆盖</p>
<p><img src="file:///C:/Users/EShyee/AppData/Local/Temp/msohtmlclip1/01/clip_image004.jpg" alt="img"></p>
<p>当处于非归档模式下时，在丢失数据文件后唯一的选择是执行完整的数据库还原，而不能进行recover。</p>
<p>第二章：手工备份与恢复</p>
<p>一）相关命令</p>
<p>1）备份和还原都使用OS命令，如linux中的cp</p>
<p>2）恢复用sqlplus命令:recover</p>
<p>二）备份前进行检查:</p>
<p>1）检查需要备份的数据文件 </p>
<p>SQL&gt; select name from v$datafile;</p>
<p>SQL&gt; select file_id,file_name,tablespace_name from dba_data_files;</p>
<p>2）检查要备份的控制文件</p>
<p>SQL&gt; select name from v$controlfile;</p>
<p>3）在线redo日志不需要做备份</p>
<p>三）dbv检查坏块</p>
<p>在手工备份前，应该检查datafile 是否有坏块，备份完后对备份也要做检查。</p>
<p>对某个datafile做坏块检查</p>
<p>$ dbv file&#x3D;&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;users01.dbf feedback&#x3D;50</p>
<p>DBVERIFY - 开始验证: FILE &#x3D; &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;users01.dbf</p>
<p>…….</p>
<p>四）冷备的注意事项：</p>
<p>1）必须干净的关闭数据库，以保证数据一致性。</p>
<p>SQL&gt;shutdwon immediate;</p>
<p>2）在OS下必须备份所有数据文件</p>
<p>3）在OS下必须备份控制文件(至少备份一个）</p>
<p>4）非归档备份还原策略</p>
<p>恢复时还原所有备份，重建所有在线日志, 没有recover步骤。</p>
<p>SQL&gt;startup mount</p>
<p>SQL&gt;alter database clear logfile group n;（n为所有在线日志组）</p>
<p>SQL&gt;alter database open;</p>
<p>五）手工非一致性备份（热备份）</p>
<p>1）在备份前要进入热备模式，备份后要结束热备模式</p>
<p>执行begin backup 设置备份模式（在数据文件上生成检查点，写入scn ，将来恢复的时候以此scn为起点）</p>
<p>对只读的表空间不能做热备份，临时表空间不需要备份，特别强调：NOARCHIVE模式下不支持手工热备。</p>
<p>对整个数据库设置热备模式：SQL&gt; alter database begin backup</p>
<p>对整个数据库结束热备模式：SQL&gt; alter database end backup;</p>
<p>对单个表空间设置热备模式：SQL&gt; alter tablespace users begin backup;</p>
<p>对单个表空间结束热备模式：SQL&gt; alter tablespace users end backup;      </p>
<p>2）手工热备利用v$backup 监控    </p>
<p>例；</p>
<p>SQL&gt; alter tablespace test begin backup; </p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile_header;</p>
<p>   FILE# CHECKPOINT_CHANGE#</p>
<hr>
<p>​     1      2414314</p>
<p>​     2      2414314</p>
<p>​     3      2414314</p>
<p>​     4      2414314</p>
<p>​     5      2414314</p>
<p>​     6      2430480  在备份期间，scn被冻结，它是恢复阶段运用日志的起点。</p>
<p>​     7      2414314</p>
<p>SQL&gt; select * from v$backup;</p>
<p>   FILE# STATUS        CHANGE# TIME</p>
<hr>
<p>​     1 NOT ACTIVE         0</p>
<p>​     2 NOT ACTIVE         0</p>
<p>​     3 NOT ACTIVE         0</p>
<p>​     4 NOT ACTIVE         0</p>
<p>​     5 NOT ACTIVE         0</p>
<p>​     6 ACTIVE            2430480 2012-07-30 11:07:19   </p>
<p>​     7 NOT ACTIVE         0</p>
<p>STATUS 是ACTIVE，表示可以备份相应的数据文件。</p>
<p>$cp test01.dbf test01.bak</p>
<p>SQL&gt; alter tablespace test end backup;</p>
<p>SQL&gt; select * from v$backup;</p>
<p>备份完毕，尽快执行end backup</p>
<p>如果在end backup之前发生数据库abort,那么可以在下次启动到mount时end backup，从而完成实例恢复。</p>
<p>六）split block问题</p>
<p>一个Oracle block一般包含多个OS block,，当手工热备时，OS的cp单位不是Oracle block而是OS block，而Oracle的DBWR又可能不时的从内存中刷新Oracle block(，如此，OS级的脏块)到磁盘上拷贝便可能造成：一个Oracle Block是由不同的版本组成，比如未被DBWR刷新Header block 加上另一部分被刷新的foot block，这样cp出来的Oracle blcok就是split block。</p>
<p>数据库的一致性是不允许oracle block是split的, Oracle采取的办法是：在backup mode后，如果发现首次DBWR要写脏块，则将该块被刷新之前的镜像数据记录到redo buffer，这样，虽然cp后的文件里仍然含有split block，而当需要恢复时，日志会前滚该块的前镜像，以保证所有被恢复的oracle block最终是一个完整的版本。</p>
<p>这就是我们常常发现在热备时日志文件会急剧增大的原因。</p>
<p>第三章：手工完全恢复</p>
<p>一）基本概念</p>
<p>1）完全恢复的步骤</p>
<p>  1）restore: OS拷贝命令还原所有或部分datafile</p>
<p>  2）recover：SQL*PLUS利用归档日志和当前的redo日志做恢复</p>
<p>2）完全恢复可以基于三个级别 </p>
<p>  recover database：  所有数据文件损坏，或包括大部分datafile丢失，一般是在mount状态完成</p>
<p>  recover tablespace：  非关键表空间损坏，表空间下某些数据文件不能访问，一般是在open下完成</p>
<p>  recover datafile：  单一或少数数据文件损坏，可以在mount或open 状态完成</p>
<p>3）什么是关键文件</p>
<p>如果关键文件损坏，数据库将不能维持在open状态，或崩溃或死机！</p>
<p>哪些文件是关键文件：①system01 file，②undotbs file，③control file，④current log file</p>
<p>4）恢复过程可以查看的视图：</p>
<p>  1）v$recover_file  查看需要恢复的datafile</p>
<p>  2）v$recovery_log  查看recover 需要的redo 日志</p>
<p>  3）v$archvied_log  查看已经归档的日志</p>
<p>二）适用场景</p>
<p>1）recover database (所有或大部分数据文件损坏，mount或open下进行)</p>
<p>OS：使用cp 还原受损的dbf（不一定是全部，v$recover_file记录的都需要还原）</p>
<p>SQLPLUS：</p>
<p>①recover database;</p>
<p>②alter database open;</p>
<p>2）recover tablespace (针对表空间的非关键数据文件损坏，一般是open下进行)</p>
<p>OS:使用cp 还原该表空间XXX下的所有数据文件</p>
<p>SQLPLUS：</p>
<p>①alter tablespace XXX offline;</p>
<p>②recover tablespace XXX;</p>
<p>③alter tablespace XXX online;</p>
<p>3）recover datafile  (单个或几个数据文件损坏，关键文件在mount下进行，非关键文件在open下进行)</p>
<p>第一种情形</p>
<p>OS:使用cp 还原相关的关键数据文件(mount)</p>
<p>SQLPLUS：</p>
<p>①recover datafile 6,8;</p>
<p>②alter database open;</p>
<p>第二种情形</p>
<p>OS:使用cp 还原相关的非关键数据文件(open)</p>
<p>SQLPLUS：</p>
<p>①alter database datafile 6,8 offline;</p>
<p>②recover datafile 6,8;</p>
<p>③alter database datafile 6,8 online;</p>
<p>三）示例</p>
<p>前提: 有一套datafile全备, 使用当前控制文件, 自上次备份以来的归档日志和当前联机日志是完整的。</p>
<p>示例1：recover database （如果是system01.dbf损坏只能在mount下恢复。）</p>
<p>sys:</p>
<p>SQL&gt; select * from scott.test;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1</p>
<p>在这个状态下先在OS下做一个数据文件和控制文件的冷备。</p>
<p>SQL&gt; shutdown immediate</p>
<p>[oracle@prod ~] $cp &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;*.dbf &#x2F;u01&#x2F;back1 </p>
<p>[oracle@prod ~] $cp &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;*.ctl &#x2F;u01&#x2F;back1 </p>
<p>[oracle@prod ~] $startup</p>
<p>SQL&gt; insert into scott.test values(2);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; insert into scott.test values(3);</p>
<p>SQL&gt; select * from scott.test;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     2</p>
<p>​     3   这条记录未提交，恢复时会回滚掉</p>
<p>​     1</p>
<p>1）模拟介质失败</p>
<p>[oracle@prod ~]$ rm &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;system01.dbf  数据库在打开的情况下就删除关键文件</p>
<p>[oracle@prod ~]$ rm&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;users01.dbf</p>
<p>[oracle@prod ~]$ rm&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;example01.dbf</p>
<p>$sqlplus &#x2F; as sysdba  换个session登录,然后关闭数据库</p>
<p>SQL&gt; shutdown abort  数据库直接abort了</p>
<p>2）启动database，报错！</p>
<p>SQL&gt; startup </p>
<p>SQL&gt;select file#,error from v$recover_file;</p>
<p>3）还原损坏的三个数据文件</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;system01.dbf &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;users01.dbf &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;example01.dbf &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>4）比较控制文件和数据文件头的SCN</p>
<p>SQL&gt; select file#,heckpoint_change# from v$datafile;</p>
<p>SQL&gt; select file#,heckpoint_change# from v$datafile_header;</p>
<p>SQL&gt; recover database;</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile;</p>
<p>5)打开数据库</p>
<p>SQL&gt; alter database open;</p>
<p>6）验证</p>
<p>SQL&gt; select * from scott.test;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     2</p>
<p>​     1</p>
<p>示例2：recover tablespace（状态：database open)</p>
<p>针对的是非关键表空间的损坏，基于表空间的完全恢复实际上还是对其下的datafile的恢复</p>
<p>模拟这种情形非常实用，通常是某个非关键表空间下的数据文件受损，但并没有造成Oracle崩溃，我们只需针对个别有问题的tablespace去做单独的在线恢复操作，也就是说恢复时数据库整体是online的，而局部表空间是offline的，数据库不需要shutdown。</p>
<p>恢复表空间（删除了tablespace下的所有的datafile）</p>
<p>1）了解一下当前状态，在test表空间上建立scott.t1表，</p>
<p>SQL&gt; conn scott&#x2F;scott</p>
<p>SQL&gt; create table t1 (id int) tablespace test;</p>
<p>SQL&gt; insert into t1 values(1);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; select * from t1;</p>
<p>NAME</p>
<p>-————————————————-</p>
<p>1</p>
<p>2）模拟表空间损坏，数据库open下，直接删除表空间下的数据文件</p>
<p>[oracle@prod ~]$ rm &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;test01.dbf</p>
<p>3）查证该表空间上的表不可访问了</p>
<p>SQL&gt; alter system flush buffer_cache;  清除data buffer </p>
<p>SQL&gt; conn &#x2F; as sysdba  换个session登陆，访问t1表，因内存里已清除了buffer块，只好去做物理读，所以报错!</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>4）看看scn的情况</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile;</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile_header;</p>
<p>5）将test表空间offline</p>
<p>SQL&gt; alter tablespace test offline immediate;  immediate使表空间能立即脱机，不等Oracle对任何数据文件做检查</p>
<p>6）数据库open下，使用备份还原这个表空间下的所有数据文件</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;test01.dbf &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>7）恢复tablespace</p>
<p>SQL&gt; recover tablespace test;</p>
<p>8）使表空间online</p>
<p>SQL&gt; alter tablespace test online;  此时数据库状态一直是open的</p>
<p>9）验证</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>ID</p>
<p>-————————————————-</p>
<p>1</p>
<p>示例3：recover datafile（database mount或open状态）</p>
<p>恢复datafile, 同范例2不同的是模拟UNDO文件损坏: 因UNDO数据文件也是关键文件，所以只能在mount状态下恢复。</p>
<p>1）模拟环境：</p>
<p>SQL&gt; insert into scott.t1 values(2);   插入一行记录是为了使t1和备份有区别</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>ID</p>
<p>-————————————————-</p>
<p>1</p>
<p>2</p>
<p>SQL&gt; delete scott.t1;  注意：删掉了t1并没有提交，老值在UNDO里。</p>
<p>2）在open 状态下删除datafile</p>
<p>[oracle@prod ~]$ rm &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;undotbs01.dbf</p>
<p>3）关闭数据库</p>
<p>SQL&gt; shtudown abort</p>
<p>4）启动数据库mount</p>
<p>SQL&gt; startup</p>
<p>数据库装载完毕。</p>
<p>ORA-01157: 无法标识&#x2F;锁定数据文件 3 - 请参阅 DBWR 跟踪文件</p>
<p>ORA-01110: 数据文件 3: ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;undotbs01.dbf’</p>
<p>5）还原并恢复UNDO数据文件</p>
<p>[oracle@prod prod]$ cp &#x2F;u01&#x2F;back1&#x2F;undotbs01.dbf .&#x2F;</p>
<p>SQL&gt; recover datafile 3;</p>
<p>完成介质恢复。</p>
<p>6）打开数据库（会完成UNDO表空间数据的回滚）</p>
<p>SQL&gt; alter database open;</p>
<p>数据库已更改</p>
<p>7）验证</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>ID</p>
<p>-————————————————-</p>
<p>1</p>
<p>2</p>
<p>第四章：手工不完全恢复</p>
<p>一）基本概念</p>
<p>1）不完全恢复的特点：</p>
<p> ①必须停机，在mount下运行重做日志。</p>
<p> ②必须以sysdba身份连接进行不完全恢复。</p>
<p> ③让整个database 回到过去某个时间点，不能避免数据丢失。</p>
<p>2）不完全恢复（Incomplete recover） 适用环境：</p>
<p> ①在过去的某个时间点重要的数据被破坏。</p>
<p> ②最小化备份测试。</p>
<p> ③在做完全恢复时，丢失了部分归档日志或当前online redo log（考点）</p>
<p> ④当误删除了表空间时（使用备份的控制文件）</p>
<p>3）不完全恢复的基本类型：</p>
<p> ①基于时间点（until time）  使整个数据库恢复到过去的一个时间点前</p>
<p> ②基于scn（until change）  使整个数据库恢复到过去的某个SCN前</p>
<p> ③基于cancel (until cancel)  使整个数据库恢复到归档日志或当前日志的断点前</p>
<p> ④基于误删除表空间（使用备份的controlfile）  使整个数据库恢复到误删除表空间前</p>
<p>二）不完全恢复的步骤</p>
<p>1）利用logminer 工具，找出在某个时间点所作的DDL 或DML 误操作（包括：时间点、scn、sql语句）</p>
<p>2）做当前数据库的最新全备。</p>
<p>3）使用还原点前的备份还原数据文件，</p>
<p>4）运用日志恢复所有数据文件，前滚至需要的时间点前停止。</p>
<p>5）使用resetlogs方式打开数据库。</p>
<p>三）使用当前控制文件做不完全恢复</p>
<p>示例1: 恢复过去某个时间点误删除的table（基于时间点的不完全恢复）</p>
<p>1）环境：scott用户在test表空间下有个t1表</p>
<p>SQL&gt; conn scott&#x2F;scott</p>
<p>SQL&gt; select * from t1;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1</p>
<p>​     2</p>
<p>2）误删除了t1表，并purge了。</p>
<p>SQL&gt; drop table t1 purge;</p>
<p>SQL&gt; select * from v$log;</p>
<p>SQL&gt; alter system switch logfile;</p>
<p>SQL&gt; &#x2F;</p>
<p>SQL&gt; select name from v$archived_log;</p>
<p>NAME</p>
<p>-——————————————————————————-</p>
<p>&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_131.log</p>
<p>&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_132.log</p>
<p>&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_133.log  drop table t1 purge的日志条目切换到此归档日志里了。</p>
<p>&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_134.log</p>
<p>&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_135.log</p>
<p>3）通过logmr 找出误操作的ddl命令的timestamp 或 scn，然后做一个不完全恢复。</p>
<p>①建目录、设置参数</p>
<p>$&gt;mkdir -p &#x2F;home&#x2F;oracle&#x2F;logmnr</p>
<p>SQL&gt; alter system set utl_file_dir&#x3D;’&#x2F;home&#x2F;oracle&#x2F;logmnr’ scope&#x3D;spfile;</p>
<p>SQL&gt; startup force;</p>
<p>SQL&gt; show parameter utl_file_dir</p>
<p>NAME                  TYPE    VALUE</p>
<hr>
<p>utl_file_dir              string   &#x2F;home&#x2F;oracle&#x2F;logmnr</p>
<p>②指定logmnr目录</p>
<p>SQL&gt; execute dbms_logmnr_d.build(‘dict.ora’,’&#x2F;home&#x2F;oracle&#x2F;logmnr’,dbms_logmnr_d.store_in_flat_file);</p>
<p>③添加第一条日志条目</p>
<p>SQL&gt; execute dbms_logmnr.add_logfile(logfilename&#x3D;&gt;’&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_133.log’,options&#x3D;&gt;dbms_logmnr.new);</p>
<p>④添加后续日志条目</p>
<p>SQL&gt; execute dbms_logmnr.add_logfile(logfilename&#x3D;&gt;’&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_134.log’,options&#x3D;&gt;dbms_logmnr.addfile); </p>
<p>⑤解析日志条目</p>
<p>SQL&gt; execute dbms_logmnr.start_logmnr(dictfilename&#x3D;&gt;’&#x2F;home&#x2F;oracle&#x2F;logmnr&#x2F;dict.ora’,options&#x3D;&gt;dbms_logmnr.ddl_dict_tracking);</p>
<p>⑥查看v$logmnr_contents视图</p>
<p>SQL&gt; select username,scn,to_char(timestamp,’yyyy-mm-dd hh24:mi:ss’) time,sql_redo from v$logmnr_contents WHERE lower(sql_redo) like ‘drop table%’;</p>
<p>USERNAME   SCN     TIME         SQL_REDO</p>
<hr>
<p>SCOTT    1918000    2012-08-01 17:28:29   drop table t1 purge;</p>
<p>⑦关闭lognmr</p>
<p>SQL&gt; execute dbms_logmnr.end_logmnr;</p>
<p>4）关闭数据库，删除所有dbf，准备做不完全恢复</p>
<p>SQL&gt; shutdown abort</p>
<p>[oracle@prod ~]$ cd &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>[oracle@prod ~]$ rm *.dbf</p>
<p>5）还原所有备份的数据文件</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;*.dbf .&#x2F;</p>
<p>6）根据log miner提供的信息，做基于时间点的不完全恢复</p>
<p>SQL&gt; startup </p>
<p>SQL&gt; recover database until time ‘2012-08-01 17:28:29’;</p>
<p>ORA-00279: change 1917581 generated at 07&#x2F;18&#x2F;2012 16:46:34 needed for thread 1</p>
<p>ORA-00289: suggestion : &#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_782662700_133.log</p>
<p>ORA-00280: change 1917581 for thread 1 is in sequence #133</p>
<p>17:33:17 Specify log: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>auto</p>
<p>Log applied.</p>
<p>Media recovery complete.</p>
<p>7）resetlogs方式打开数据库</p>
<p>SQL&gt; alter database open resetlogs;</p>
<p>8）验证</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1</p>
<p>​     2</p>
<p>9）看看在resetlogs后，日志sequence重置了。</p>
<p>SQL&gt; select * from v$log;</p>
<p>示例2：当前日志组损坏，造成数据库崩溃。</p>
<p>session 1</p>
<p>SQL&gt; create table scott.t1(id int);</p>
<p>SQL&gt; insert into scott.t1 values(1);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; alter system archive log current;</p>
<p>SQL&gt; insert into scott.t1 values(2);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1  这条已经归档</p>
<p>​     2   这条在当前日志中，没有归档</p>
<p>SQL&gt; select group#,sequence#,status from v$log;</p>
<p>  GROUP# SEQUENCE# STATUS</p>
<hr>
<p>​     1     22 CURRENT  查v$logfile知道group1是redo01.log</p>
<p>​     2     20 INACTIVE</p>
<p>​     3     21 ACTIVE</p>
<p>session 2</p>
<p>[oracle@cuug prod]$ rm redo01.log </p>
<p>session 1</p>
<p>SQL&gt; shutdown abort</p>
<p>session 2</p>
<p>[oracle@cuug prod]$ rm *.dbf</p>
<p>[oracle@cuug prod]$ cp &#x2F;u01&#x2F;back1&#x2F;*.dbf .&#x2F;  还原所有数据文件备份</p>
<p>session 1</p>
<p>SQL&gt; startup</p>
<p>ORA-00313: 无法打开日志组 1 (用于线程 1) 的成员 ORA-00312:</p>
<p>联机日志 1 线程 1: ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;redo01.log’</p>
<p>SQL&gt; recover database until cancel;</p>
<p>ORA-00279: 更改 1016334 (在 04&#x2F;08&#x2F;2016 15:45:03 生成) 对于线程 1 是必需的 ORA-00289:</p>
<p>建议: &#x2F;u01&#x2F;arch&#x2F;prod&#x2F;arch_1_904564083_22.log  一定要确认一下这个日志是否是当前日志。</p>
<p>ORA-00280: 更改 1016334 (用于线程 1) 在序列 #22 中</p>
<p>Specify log: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>cancel</p>
<p>Media recovery cancelled.</p>
<p>SQL&gt; alter database open resetlogs;</p>
<p>SQL&gt; select * from scott.t1;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1</p>
<p>四）使用备份控制文件做不完全恢复</p>
<p>1）为什么会使用备份的控制文件?</p>
<p>①当前控制文件全部损坏，而数据文件和控制文件的备份及当前日志处于不同的SCN版本</p>
<p>②当前控制文件没有损坏，但想要恢复误删除的表空间。</p>
<p>2）使用备份的控制文件恢复数据库的语法：</p>
<p>recover database until [time|change] using backup controlfile;</p>
<p>[time|change]是可选的，就是说如果条件满足，仍然可以做到完全恢复。</p>
<p>接下来会有如下选项：</p>
<p>Specify log: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>此语法的出现是由于控制文件和当前日志不一致，当前日志的scn总是最新的，而控制文件可能是旧的或尚未更新的（类似shutdwon abort操作)。</p>
<p>AUTO：  根据v$archived_log记录的归档日志前滚恢复，不包括前滚current log;</p>
<p>filename：  不在v$archived_log中的日志，指控制文件中受损的归档记录或current log</p>
<p>CANCEL：  退出。</p>
<p>3）使用backup controlfile子句的恢复数据库之后，一律要使用alter database open resetlogs打开数据库。</p>
<p>示例1</p>
<p>环境：当前所有控制文件损坏，数据文件损坏，有数据文件全备，但之后增加了表空间，并备份了配套的控制文件。</p>
<p>模式：所有数据文件备份（老）——(新建表空间abcd)—–备份控制文件（次新）——日志文件（新）</p>
<p>分析：新建表空间数据文件损坏, 全备里没有该数据文件的备份及控制文件描述，当前控制文件又丢失，只能用备份的控制文件恢复。</p>
<p>1）环境：</p>
<p>SQL&gt; select * from v$tablespace;</p>
<p>SQL&gt; select GROUP#,SEQUENCE#,STATUS from v$log;</p>
<p>  GROUP# SEQUENCE#  STATUS  </p>
<hr>
<p>   1     7      CURRENT</p>
<p>   2     5      INACTIVE</p>
<p>   3     6      INACTIVE</p>
<p>SQL&gt; create tablespace abcd datafile ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’ size 5m;</p>
<p>SQL&gt; create table scott.a1 (name char(10)) tablespace abcd;</p>
<p>SQL&gt; insert into scott.a1 values(‘a’);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; select * from scott.a1;</p>
<p>NAME</p>
<p>-———</p>
<p>a</p>
<p>SQL&gt; alter system switch logfile;</p>
<p>2）备份控制文件</p>
<p>SQL&gt; alter database backup controlfile to ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;con.bak1’;</p>
<p>3）模拟abcd01.dbf损坏和所有ctl损坏</p>
<p>[oracle@prod ~]$rm &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf  数据库open状态，删除abcd01.dbf数据文件</p>
<p>SQL&gt; alter system flush buffer_cache;  db buffer 清空 </p>
<p>SQL&gt; conn &#x2F; as sysdba  换个session查看 a1表物理读失败</p>
<p>SQL&gt; select * from scott.a1;</p>
<p>[oracle@prod ~]$ rm *.ctl</p>
<p>4）关闭数据库</p>
<p>SQL&gt; shutdown abort;</p>
<p>5）恢复所有数据文件备份，准备做不完全恢复</p>
<p>[oracle@prod ~]$ cd &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>[oracle@prod ~]$ rm *.dbf</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;*.dbf .&#x2F;</p>
<p>[oracle@prod ~]$ cp con.bak1 control01.ctl</p>
<p>[oracle@prod ~]$ cp con.bak1 control02.ctl</p>
<p>[oracle@prod ~]$ cp con.bak1 control03.ctl</p>
<p>SQL&gt; startup</p>
<p>SQL&gt; col name for a50;</p>
<p>SQL&gt; select file#,checkpoint_change#,name from v$datafile;</p>
<p>   FILE# CHECKPOINT_CHANGE# NAME</p>
<hr>
<p>​     1      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;system01.dbf</p>
<p>​     2      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;sysaux01.dbf</p>
<p>​     3      6676601 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf</p>
<p>​     4      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;user01.dbf</p>
<p>​     5      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;example01.dbf</p>
<p>​     6      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;test01.dbf</p>
<p>​     7      6676574 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;undotbs01.dbf</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile_header;</p>
<p>   FILE# CHECKPOINT_CHANGE#</p>
<hr>
<p>​     1      6676343</p>
<p>​     2      6676343</p>
<p>​     3         0</p>
<p>​     4      6676343</p>
<p>​     5      6676343</p>
<p>​     6      6676343</p>
<p>​     7      6676343</p>
<p>可以看出：</p>
<p>①file3 在控制文件里记录是abcd01.dbf,而与之对应的数据文件3是不存在的，</p>
<p>②备份的数据备份的scn比控制文件scn还老。</p>
<p>6）使用备份控制文件恢复</p>
<p>SQL&gt; recover database using backup controlfile;</p>
<p>ORA-00283: 恢复会话因错误而取消</p>
<p>ORA-01110: 数据文件 3: ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’</p>
<p>ORA-01157: 无法标识&#x2F;锁定数据文件 3 - 请参阅 DBWR 跟踪文件</p>
<p>ORA-01110: 数据文件 3: ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’</p>
<p>此错是因为老备份里没有abcd表空间，但只要控制文件里记录了abcd就好办，方法是建一个datafile的空文件，而其中内容可由日志文件recover(前滚)时填补出来。</p>
<p>SQL&gt; alter database create datafile ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’;</p>
<p>SQL&gt; recover database using backup controlfile;  再次使用备份控制文件恢复</p>
<p>ORA-00308: 无法打开归档日志 ‘&#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_804846837_9.log’</p>
<p>ORA-27037: 无法获得文件状态</p>
<p>Linux Error: 2: No such file or directory</p>
<p>Additional information: 3</p>
<p>archive日志前滚结束了，但当前日志里还有信息需要恢复</p>
<p>注意: 对于这个例子来说，一定要看清提示：如果提示的不是归档的日志（是当前日志），则要直接要输入filename 而不能输入auto，否则open时会失败。</p>
<p>SQL&gt; recover database using backup controlfile;  再次使用备份控制文件恢复</p>
<p>指定日志: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;redo03.log  把当前日志它。</p>
<p>已应用的日志。</p>
<p>完成介质恢复。</p>
<p>7）resetlogs打开数据库</p>
<p>SQL&gt; alter database open resetlogs;</p>
<p>8）验证</p>
<p>SQL&gt; select * from scott.a1;</p>
<p>NAME</p>
<p>-—————————————</p>
<p>a</p>
<p>示例2：</p>
<p>环境：当前控制文件损坏，新建表空间在备份控制文件之后</p>
<p>模式：全备（老）—–备份控制文件（次新）—–新建表空间abcd——日志文件（新）</p>
<p>分析：整个恢复过程中datafile结构有了变化，变化发生在备份控制文件之后，新增了表空间abcd。控制文件备份里没有此表空间记录，但日志里有。</p>
<p>1）环境</p>
<p>SQL&gt; drop tablespace abcd including contents and datafiles;</p>
<p>SQL&gt; alter database backup controlfile to ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;con.bak’;</p>
<p>控制文件备份中没有abcd表空间</p>
<p>SQL&gt; create tablespace abcd datafile ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’ size 5m; </p>
<p>SQL&gt; create table scott.r1 (id int) tablespace abcd ;</p>
<p>SQL&gt; insert into scott.r1 values(1);</p>
<p>SQL&gt; commit;</p>
<p>SQL&gt; select * from v$tablespace;</p>
<p>SQL&gt; select * from scott.r1;</p>
<p>​    ID</p>
<p>-———</p>
<p>​     1</p>
<p>SQL&gt;select GROUP#,SEQUENCE#,STATUS from v$log;</p>
<p>  GROUP#  SEQUENCE#   STATUS</p>
<hr>
<p>  1        1     CURRENT</p>
<p>  2        0     UNUSED</p>
<p>  3        0     UNUSED</p>
<p>2）模拟新建数据文件损坏</p>
<p>[oracle@prod ~]rm abcd01.dbf</p>
<p>SQL&gt;alter system flush buffer_cache;</p>
<p>SQL&gt;conn &#x2F; as sysdba</p>
<p>SQL&gt;select * from scott.r1;</p>
<p>3）关闭数据库</p>
<p>SQL&gt;shutdown abort</p>
<p>4）还原所有数据文件，以老控制文件替换当前控制文件</p>
<p>[oracle@prod ~]$ cd &#x2F;u01&#x2F;oradata&#x2F;prod</p>
<p>[oracle@prod ~]$ rm *.ctl</p>
<p>[oracle@prod ~]$ rm *.dbf</p>
<p>[oracle@prod ~]$ cp &#x2F;u01&#x2F;back1&#x2F;*.dbf .&#x2F;</p>
<p>[oracle@prod ~]$ cp con.bak2 control01.ctl</p>
<p>[oracle@prod ~]$ cp con.bak2 control02.ctl</p>
<p>[oracle@prod ~]$ cp con.bak2 control03.ctl</p>
<p>5）启动数据库</p>
<p>SQL&gt; startup</p>
<p>ORACLE 例程已经启动。</p>
<p>……</p>
<p>数据库装载完毕。</p>
<p>ORA-01589: 要打开数据库则必须使用 RESETLOGS 或 NORESETLOGS 选项</p>
<p>SQL&gt; select file#,checkpoint_change#,name from v$datafile;</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile_header;</p>
<p>6）使用备份控制文件恢复数据库</p>
<p>SQL&gt; recover database using backup controlfile;</p>
<p>ORA-00279: 更改 6676343 (在 01&#x2F;16&#x2F;2013 14:11:39 生成) 对于线程 1 是必需的</p>
<p>ORA-00289: 建议: &#x2F;u01&#x2F;disk1&#x2F;prod&#x2F;arch_1_804846837_4.log</p>
<p>ORA-00280: 更改 6676343 (用于线程 1) 在序列 #4 中</p>
<p>指定日志: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>auto</p>
<p>指定日志: {<RET>&#x3D;suggested | filename | AUTO | CANCEL}</p>
<p>&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;redo01.log</p>
<p>ORA-00283: 恢复会话因错误而取消</p>
<p>ORA-01244: 未命名的数据文件由介质恢复添加至控制文件</p>
<p>ORA-01110: 数据文件 3: ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’</p>
<p>ORA-01112: 未启动介质恢复</p>
<p>SQL&gt; select file#,checkpoint_change#,name from v$datafile;</p>
<p>   FILE# CHECKPOINT_CHANGE# NAME</p>
<hr>
<p>​     1      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;system01.dbf</p>
<p>​     2      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;sysaux01.dbf</p>
<p>​     3      6677999 &#x2F;u01&#x2F;oracle&#x2F;dbs&#x2F;UNNAMED00003  这是从日志回写到控制文件中的名字，需要重命名</p>
<p>​     4      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;user01.dbf</p>
<p>​     5      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;example01.dbf</p>
<p>​     6      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;test01.dbf</p>
<p>​     7      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;undotbs01.dbf</p>
<p>SQL&gt; select file#,checkpoint_change# from v$datafile_header;</p>
<p>   FILE# CHECKPOINT_CHANGE#</p>
<hr>
<p>​     1      6678002</p>
<p>​     2      6678002</p>
<p>​     3         0  这里需要建立一个空的数据文件。</p>
<p>​     4      6678002</p>
<p>​     5      6678002</p>
<p>​     6      6678002</p>
<p>​     7      6678002</p>
<p>7）建立数据文件并对控制文件中未知的数据文件重命名</p>
<p>SQL&gt; alter database create datafile ‘&#x2F;u01&#x2F;oracle&#x2F;dbs&#x2F;UNNAMED00003’ as ‘&#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf’;</p>
<p>上面的命令一石二鸟，自动完成了两个动作</p>
<p>①加了一个数据文件abcd01.dbf，</p>
<p>②重命名控制文件UNNAMED00003为abcd01.dbf</p>
<p>SQL&gt; select file#,checkpoint_change#,name from v$datafile;</p>
<p>   FILE# CHECKPOINT_CHANGE# NAME</p>
<hr>
<p>​     1      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;system01.dbf</p>
<p>​     2      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;sysaux01.dbf</p>
<p>​     3      6677999 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;abcd01.dbf</p>
<p>​     4      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;user01.dbf</p>
<p>​     5      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;example01.dbf</p>
<p>​     6      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;test01.dbf</p>
<p>​     7      6678002 &#x2F;u01&#x2F;oradata&#x2F;prod&#x2F;undotbs01.dbf</p>
<p>SQL&gt; recover database using backup controlfile;</p>
<p>8）resetlogs打开数据库</p>
<p>SQL&gt; alter database open resetlogs;</p>
<p>9）验证</p>
<p>SQL&gt; select * from scott.r1;</p>
<p>​    ID</p>
<p>-———</p>
]]></content>
      <categories>
        <category>计算机安全</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>计算机安全</tag>
      </tags>
  </entry>
  <entry>
    <title>终于闲下来，说一说我建Blog之路</title>
    <url>/2020/02/23/%E7%BB%88%E4%BA%8E%E9%97%B2%E4%B8%8B%E6%9D%A5%EF%BC%8C%E8%AF%B4%E4%B8%80%E8%AF%B4%E6%88%91%E5%BB%BABlog%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<h2 id="买服务器"><a href="#买服务器" class="headerlink" title="买服务器"></a>买服务器</h2><p>2020年鼠年的初二，在家里宅着无聊开始着手准备，搭建一个人网站。</p>
<span id="more"></span>

<p> 一开始做了一部分设计图，准备使用Java建站。最初的设计不仅仅是写博客，而是想多方面发展，包括博客，生活，旅行，剪辑，考研等，所以做了一份思维导图。当天决定了好久才定下来使用阿里云的学生服务器，年费：124；加上9块钱买了<a href="http://eshyee.top/" title="eshyee.top">域名</a> ，一共是￥133。</p>
<hr>
<h2 id="wordpress"><a href="#wordpress" class="headerlink" title="wordpress"></a>wordpress</h2><p>当然，买完才发现，自己购买的时候，选错了，选成了Wordpress版了，然后在第一时间重置了自己的服务器，改成了CentOS(阿里云的学生服务器只提供7.3版本的)。</p>
<hr>
<h2 id="Ajax-MVC"><a href="#Ajax-MVC" class="headerlink" title="Ajax+MVC"></a>Ajax+MVC</h2><p>在学校学了一点关于MVC的知识，之前也有自己做过一个项目(具体会在别的文章里讲👌)。</p>
<p>接下来就是配置服务器了，在配置服务器的时候，遇到了很多的坑，基本都是版本版本问题，我有个癖好，就是软件习惯性选择最新的装。JDK搭建，apache tomcat搭建，nginx搭建都还好，但是到了数据库安装的时候，就出现了各种问题，版本号依赖关系不匹配之类的(具体会在别的文章里讲👌)。</p>
<p>2天后，环境基本安装完成，MVC的后台可以说也是基本有了雏形，<del>然后就部署了</del> 然后部署就遇到了其他的问题，后来一看是少穿了一个jar包。</p>
<p>这次 的设计是Ajax+mvc的设计，就是说先写个差不多的后端，放到服务器上，然后从本地直接发送请求，要个json串回来，用仅会的那么一两句js，解析一下，放到页面上。</p>
<p>3天后，（最先做的blog模块）页面上终于有差不多的个人博客的味道了，真香。</p>
<p>但是随着慢慢的发现这种动态网页的模式，(加上我技术有限)使我无法设置我在详情页上文字的样式，当时设计的是详情页上的文字直接放在数据库里的，然后固定一种详情页的模板，直接往里塞数据。所以，详情页只不过是一张图片，加一坨字罢了。</p>
<p>为此又愁了好几天，直到有一天，一位大佬问我，有没有听说过Hexo。</p>
<hr>
<h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>我当然没听说过Hexo是什么，然后就去网上查，去了官网看了一圈感觉确实不错，然后查看安装方式 : <code>npm...</code>  。“什么是nmp”，在我了解git之前，一直以为npm是其他系统特有的命令。然后看到后面有 <code>git</code> 什么又是git，虽然以前听说过git，但是从来都不了解，然后花了一个下午在B站，学了git以及github相关的东西 ，才知道npm原来是  node.js相关的包管理工具。然后才知道，如何安装Hexo。</p>
<p>于是，看着B站某博主的视频，搭建好了自己的一套Hexo平台，并部署到了github。<del>可我为什么要花钱买阿里的服务器呢？</del> </p>
<p>后来慢慢转变了思想：搭建个人网站，为啥要搞的那么麻烦！于是又在b站查找相关资料(众所周知，bilibili是一个技术交流平台)。发现了Hugo</p>
<hr>
<h2 id="Hugo"><a href="#Hugo" class="headerlink" title="Hugo"></a>Hugo</h2><p>Go语言。学过一两天，至少写个<code>Hello World</code> 不用去百度的那种👍。Hugo就是一个基于Go的平台，但是访问了一下午他们家的主题。我觉的还是换一个吧(主要还是接受了WordPress的宣传)。</p>
<hr>
<h2 id="回到wordpress"><a href="#回到wordpress" class="headerlink" title="回到wordpress"></a>回到wordpress</h2><p>我又决定回到WordPress了，本来打算自己配置一套WordPress的环境，但是卡在安装Docker上了，Docker又是什么东西！！！🤢，之前只知道它是条鲸鱼，装了一晚上，才发现还需要那个Docker Compose，去百度了一下教程，终于，👴吐了。最后一刻想起来，阿里云不是自带WordPress的选项么。</p>
<p>然后系统再一次被重置。换上了WordPress，PHP对于我来说一片空白，但是还好有后台管理模块。</p>
<p>结果，阿里云自带的WP版本也太旧了8！4.8.2，都0202年了！MySQL 5.xx 在shell里输入<code>mysql</code> 显示没有该命令又是几个意思？？？结果我又将就着，配置了半天 ，不得不说 ，这个WP真的卡，管理员体验极差，配置了一晚上，写了一篇md传上去了。晚上，还兴奋的不行，寻思总算可以稳定的写blog了。</p>
<p>第二天中午，起床，发现我的网站进不去了，域名进不去，IP进不去。真心崩溃，我写的文案啊，码字不易啊，当机立断，不要耗在这上面，还是回头去用Hexo吧，毕竟WP对国内用户太不友好了。🤦‍♂️</p>
<hr>
<h2 id="回到Hexo"><a href="#回到Hexo" class="headerlink" title="回到Hexo"></a>回到Hexo</h2><p>服务器再一次被重置。。</p>
<p>回到了CentOS7.3，转好了一堆乱七八糟 的环境，然后把以前学校里那个项目部署上去了。</p>
<p>写博客还是轻量一些好。。</p>
<hr>
]]></content>
      <categories>
        <category>技术</category>
        <category>建站之路</category>
      </categories>
      <tags>
        <tag>崩溃的</tag>
      </tags>
  </entry>
  <entry>
    <title>获得管理层许可及挑选团队队员</title>
    <url>/2020/03/30/%E8%8E%B7%E5%BE%97%E7%AE%A1%E7%90%86%E5%B1%82%E8%AE%B8%E5%8F%AF%E5%8F%8A%E6%8C%91%E9%80%89%E5%9B%A2%E9%98%9F%E9%98%9F%E5%91%98/</url>
    <content><![CDATA[<h2 id="获得管理层的许可"><a href="#获得管理层的许可" class="headerlink" title="获得管理层的许可"></a>获得管理层的许可</h2><p>（1）向管理层提交WBS</p>
<p>（2）建立交流平台</p>
<h3 id="步骤1：向项目发起人提交WBS"><a href="#步骤1：向项目发起人提交WBS" class="headerlink" title="步骤1：向项目发起人提交WBS"></a>步骤1：向项目发起人提交WBS</h3><ul>
<li>项目发起人可能是你的WBS获得许可的第一个障碍</li>
<li>你要详细了解（最好记住）WBS中的每个细节</li>
<li>必要的时候向项目发起人做必要的解释</li>
<li>考虑你公司的商业周期和其他项目</li>
<li>选择合适的时间提交你的WBS</li>
<li>给项目发起人预留足够的审批时间</li>
<li>应尽量争取一次通过项目WBS的审批通过</li>
<li>记录项目发起人提出的任何意见或建议</li>
<li>任何一次失败都会对你们的信任和信心造成打击</li>
</ul>
<h3 id="步骤2：向管理层提交WBS"><a href="#步骤2：向管理层提交WBS" class="headerlink" title="步骤2：向管理层提交WBS"></a>步骤2：向管理层提交WBS</h3><ul>
<li>同项目发起人一起向管理层提交WBS</li>
<li>用时间基线的方式提交你的WBS</li>
<li>演讲时强调每个阶段的完成日期，而不是时间</li>
<li>强调停工和其他对公司造成严重影响的日期和时间</li>
<li>不必要讲述每个阶段是如何完成的，但需要记牢，以防提问</li>
<li>给管理层预留足够的审批时间</li>
<li>应尽量争取一次通过项目WBS的审批通过</li>
<li>记录管理层提出的任何意见或建议</li>
<li>任何一次失败都会对你们的信任和信心造成打击</li>
</ul>
<h4 id="时间基线的实例"><a href="#时间基线的实例" class="headerlink" title="时间基线的实例"></a>时间基线的实例</h4><img src="/2020/03/30/%E8%8E%B7%E5%BE%97%E7%AE%A1%E7%90%86%E5%B1%82%E8%AE%B8%E5%8F%AF%E5%8F%8A%E6%8C%91%E9%80%89%E5%9B%A2%E9%98%9F%E9%98%9F%E5%91%98/image-20200330102749530.png" class="">

<h3 id="步骤3：同管理层一同工作"><a href="#步骤3：同管理层一同工作" class="headerlink" title="步骤3：同管理层一同工作"></a>步骤3：同管理层一同工作</h3><ul>
<li>管理层的强力支持是项目成功的保障</li>
<li>管理层和项目团队内可能存在不同看法</li>
<li>项目经理可能和他们之间存在不同看法</li>
<li>使管理者明白某个人可能在这个项目上要花一定时间</li>
<li>使项目经理明白管理层将参与该项目</li>
<li>使团队成员明白管理层已和项目经理沟通好了</li>
<li>通过团队成员投入的时间，确定项目经理的职权范围和树立权威</li>
</ul>
<h3 id="建立交流渠道（1）"><a href="#建立交流渠道（1）" class="headerlink" title="建立交流渠道（1）"></a>建立交流渠道（1）</h3><p>交流渠道的搭建及工具</p>
<img src="/2020/03/30/%E8%8E%B7%E5%BE%97%E7%AE%A1%E7%90%86%E5%B1%82%E8%AE%B8%E5%8F%AF%E5%8F%8A%E6%8C%91%E9%80%89%E5%9B%A2%E9%98%9F%E9%98%9F%E5%91%98/image-20200330102857000.png" class="">

<h3 id="建立交流渠道（2）"><a href="#建立交流渠道（2）" class="headerlink" title="建立交流渠道（2）"></a>建立交流渠道（2）</h3><ul>
<li>交流的任务</li>
<li>能够随时同管理层和团队成员进行交流</li>
<li>提供有关项目的状态</li>
<li>提供项目的更新情况</li>
<li>告诉大家是如何完成的</li>
<li>提供项目本身的相关信息和相关事宜</li>
<li>交流的目的</li>
<li>维持项目的动力</li>
<li>鼓舞团队的士气</li>
<li>保持信息的通畅，使团队成员有参与感</li>
<li>保持团队活力</li>
<li>领导团队走向成功</li>
</ul>
<h2 id="挑选团队队员"><a href="#挑选团队队员" class="headerlink" title="挑选团队队员"></a>挑选团队队员</h2><h3 id="评估内部技能"><a href="#评估内部技能" class="headerlink" title="评估内部技能"></a>评估内部技能</h3><h4 id="了解团队成员的经验-、技能-、能力-和合作精神是项目"><a href="#了解团队成员的经验-、技能-、能力-和合作精神是项目" class="headerlink" title="了解团队成员的经验 、技能 、能力 和合作精神是项目"></a>了解团队成员的经验 、技能 、能力 和合作精神是项目</h4><p>经理按WBS委派任务的依托。</p>
<h4 id="如何才能了解每个成员的能力呢"><a href="#如何才能了解每个成员的能力呢" class="headerlink" title="如何才能了解每个成员的能力呢?"></a>如何才能了解每个成员的能力呢?</h4><ul>
<li>考查成员的经验</li>
<li>查看成员的个人履历</li>
<li>查看成员的技能及培训证书</li>
<li>如何选择培训中心培训成员?</li>
</ul>
<h4 id="考查成员的经验"><a href="#考查成员的经验" class="headerlink" title="考查成员的经验"></a>考查成员的经验</h4><p>经验是最佳的参考指数</p>
<ul>
<li>以前的项目:成员参加以前项目的程度、深度及角色</li>
<li>个人的知识:用事实说明他们的声誉、完成工作的能力</li>
<li>管理层推荐:从管理层那里获得成员的能力、知识技能</li>
<li>成员的推荐:从其他成员那里获得成员的能力、 知识技能</li>
</ul>
<h4 id="查看成员的个人履历"><a href="#查看成员的个人履历" class="headerlink" title="查看成员的个人履历"></a>查看成员的个人履历</h4><ul>
<li>个人履历是成员的绝密资料，要小心使用</li>
<li>可以让成员填写从事过的项目</li>
</ul>
<h4 id="查看成员的技能及培训证书"><a href="#查看成员的技能及培训证书" class="headerlink" title="查看成员的技能及培训证书"></a>查看成员的技能及培训证书</h4><ul>
<li>证书说明成员能够使用某种技术，了解重要概念</li>
<li>有证书并不就是专家</li>
</ul>
<h4 id="要在经验、履历和证书方面取得平衡"><a href="#要在经验、履历和证书方面取得平衡" class="headerlink" title="要在经验、履历和证书方面取得平衡"></a>要在经验、履历和证书方面取得平衡</h4><h4 id="如何选择培训中心培训成员"><a href="#如何选择培训中心培训成员" class="headerlink" title="如何选择培训中心培训成员"></a>如何选择培训中心培训成员</h4><ul>
<li>培训方有哪些经验</li>
<li>培训方能否特别提供适合你项目的培训计划</li>
<li>是特别聘请老师好呢，还是让成员参加课堂培训好?</li>
<li>有网上培训吗?</li>
<li>课程中包含哪些材料?</li>
<li>课程费用多少?</li>
<li>培训地点在哪?</li>
<li>哪种培训方式更省钱?</li>
</ul>
<h3 id="面试潜在的队员"><a href="#面试潜在的队员" class="headerlink" title="面试潜在的队员"></a>面试潜在的队员</h3><ul>
<li>面试的目的和任务</li>
<li>怎样面试</li>
<li>选择标准</li>
<li>提问的方式</li>
</ul>
<h4 id="面试的目的和任务"><a href="#面试的目的和任务" class="headerlink" title="面试的目的和任务"></a>面试的目的和任务</h4><ul>
<li>以项目需要的能力、知识、技能和合作精神等为原则</li>
<li>其一、给应试者一个深刻的印象，明白是你在管理项目</li>
<li>其二、尽可能多地了解应试者，判断是否符合项目的需求</li>
</ul>
<h4 id="怎样面试"><a href="#怎样面试" class="headerlink" title="怎样面试"></a>怎样面试</h4><h5 id="对项目-部门-、公司-的详细描述"><a href="#对项目-部门-、公司-的详细描述" class="headerlink" title="对项目(部门 、公司)的详细描述"></a>对项目(部门 、公司)的详细描述</h5><ul>
<li>其一、告诉应试者还有哪些工作需要完成</li>
<li>其二、可以把注意力集中在成员所需要具有的特点上</li>
</ul>
<h5 id="要求应试者答卷或自我介绍或完成一个小的工作"><a href="#要求应试者答卷或自我介绍或完成一个小的工作" class="headerlink" title="要求应试者答卷或自我介绍或完成一个小的工作"></a>要求应试者答卷或自我介绍或完成一个小的工作</h5><h4 id="选择标准"><a href="#选择标准" class="headerlink" title="选择标准"></a>选择标准</h4><ul>
<li>选择的标准是基于对工作的描述</li>
<li>教育程度</li>
<li>对任务的认识</li>
<li>完成任务的经验</li>
<li>有助于完成任务的各种技能</li>
<li>在公司内的业绩</li>
<li>其他的重要素质，如智力、 领导能力、合作精神及品德</li>
</ul>
<h4 id="提问的方式"><a href="#提问的方式" class="headerlink" title="提问的方式"></a>提问的方式</h4><ul>
<li>封闭式问题，只可以回答“是”或“不是”</li>
<li>简单的问题，如“为什么想加入我们的公司?</li>
<li>经验问题，如“你的上司在大会上批评了你怎么办?</li>
<li>追问问题，从应试者的回答中找问题，紧追不放</li>
<li>不能问的问题，如:‘你先生或太太做什么的?”等</li>
</ul>
]]></content>
      <categories>
        <category>项目管理</category>
      </categories>
      <tags>
        <tag>软件项目管理</tag>
      </tags>
  </entry>
  <entry>
    <title>螺旋等离子体推进器及其羽流中的波传播与吸收</title>
    <url>/2023/05/05/%E8%9E%BA%E6%97%8B%E7%AD%89%E7%A6%BB%E5%AD%90%E4%BD%93%E6%8E%A8%E8%BF%9B%E5%99%A8%E5%8F%8A%E5%85%B6%E7%BE%BD%E6%B5%81%E4%B8%AD%E7%9A%84%E6%B3%A2%E4%BC%A0%E6%92%AD%E4%B8%8E%E5%90%B8%E6%94%B6/</url>
    <content><![CDATA[<h1 id="螺旋等离子体推进器及其羽流中的波传播与吸收"><a href="#螺旋等离子体推进器及其羽流中的波传播与吸收" class="headerlink" title="螺旋等离子体推进器及其羽流中的波传播与吸收"></a>螺旋等离子体推进器及其羽流中的波传播与吸收</h1><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>采用二维全波频域冷等离子体模型研究了螺旋形等离子体推力器中电磁功率的传播和吸收，包括远羽流区和周围空间。结果表明，功率的一小部分在羽流区被吸收，功率在源中的沉积基本不受模拟区域大小、金属障碍物的存在或环境中的等离子体密度的影响。电子回旋共振(ECR)表面始终存在于下游，有效地防止沿羽流向空间以外的辐射。在存在过密的环境等离子体时，就像在真空室中预期的那样，场在这个转变之后完全消失，真空室边界条件对这个表面之前的波场影响很小。在没有环境等离子体的情况下，等离子体与真空界面处存在双波态转变，影响了羽流区数值模拟的准确性。</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Helicon等离子体推进器(HPTs)是目前正在研发的电力推进装置[1-9]。它们的工作依赖于通过电感器&#x2F;天线产生的振荡电磁场对圆柱形容器中的磁约束等离子体进行加热[10,11]，并在外部磁喷嘴(MN)中对等离子体进行膨胀和加速，在分离发生之前产生磁推力[12-14]。由于无电极，与传统的电力推进技术(如网格离子推进器或霍尔推进器)相比，HPTs具有一定的优势，例如潜在的寿命延长，整体系统和电气架构的简化。MN拓扑结构易于控制，表明具有较高的节流性。此外，由于缺乏带有敏感材料插入的空心阴极，因此有可能使用替代推进剂。然而，报道的推力效率仍然低于20%[6,16]，在理解驱动HPT性能的物理机制方面仍然存在悬而未决的问题，特别是电磁波对等离子体的加热问题。</p>
<p>电磁场的传播和吸收是该装置运行的核心，也是本工作的研究对象。这些过程取决于天线的几何形状和电流、源的形状、磁拓扑结构和强度、等离子体密度图，以及在较小程度上影响有效碰撞的等离子体温度。反过 来，电磁功率沉积决定了设备中的等离子体特性。当两个方面是紧密耦合、电磁问题的时间表(10−7年代,或数十兆赫)要快得多的等离子体运输问题(离子转运时间的顺序10−5 s)。这使得单独的近似研究这些现象,这种方法已成功用于分析源等离子体动力学缓慢一方面[日],和内部电磁场问题另一方面(21、22)。</p>
<p>在使用的MHz级频率(通常为13.56 MHz)下，离子对快速场的响应可以忽略不计，电子响应决定了传播和吸收特性。当等离子体密度n已大于1012 ~ 1013 m−3，外加磁场强度Ba大于1 ~ 10 G时，激发频率ω小于电子等离子体频率ωpe和电子回旋频率ωce，即:ω&lt;ωpe,ωce。这意味着左极化(L)波是倏灭的，只有右极化(R)哨声波在HPT等离子体内传播，且只有当其波矢量k落在与磁场矢量Ba[23]半角αc的锥内时才会传播。在这个锥的表面，k→∞，因此它被称为共振锥。传统上，当k基本上与Ba平行时，这种波被称为helicon (H)波[10,24](波长较长)，当k基本上与共振锥平行时，这种波被称为trivelake - gould (TG)[25]波(波长较短)(因此有一个重要的k⊥分量)。对于高Ba，有一些k‖的值，其中k有两个解，一个与H波有关，另一个与TG波有关。这被称为双波状态(DWR)[26]。相比之下，在较低的Ba下，每个传播k‖只有一个k⊥的值，这被称为单波态(SWR)。一般来说，H波和TG波都有助于等离子体加热，但更大份额的功率沉积有时归因于TG波，特别是在等离子体表面附近[27]。</p>
<p>随着等离子体向MN中扩展，磁场强度和等离子体密度逐渐减小。在羽流下游的某些表面，电子回旋共振(ECR)最终发生在ω &#x3D; ωce。在典型工作频率下，ECR表面外的共振磁场强度为4.84 g，且只要等离子体持续过密(ω&lt;ωpe)，磁场就会消失。最终，临界密度转变(ω &#x3D; ωpe)也会达到，尽管这通常发生在离器件很远的地方。</p>
<p>此外，部分电磁激励可能泄漏到周围的周边空间。这里的情况取决于环境条件:在完美真空中，L波和R波传播均匀，不受Ba的影响，速度为c，波长为几十米，明显大于器件尺寸。在高密度HPT等离子体与真空的界面处，L波截止和临界密度跃迁迅速连续发生。</p>
<p>然而，在等离子体稀薄的环境中，传播仍然由n和Ba决定。外围空间也存在ecr跃迁，并可能对波场产生重大影响。特别是，当等离子体密度高于临界密度时，R波的传播性质与器件内部相同——哨声波沿与Ba成一定角度传播，在ECR表面外消失。而且，当密度大约是临界值的两倍时，L波不会传播。这些环境条件与实验室真空室的实验有关，它旨在代表飞行条件，但只能达到非完全真空。</p>
<p>最简单的一维径向模型已经显示了圆柱形等离子体源内部存在H波和TG波[21,28,29];然而，它们忽略了n和Ba轴向不均匀性的影响。全波二维非对称码过去已被开发来解决这一问题[30,31]，但在轴向对准磁场Ba &#x3D; Baz1z的假设下。最近，Tian等[32]放宽了这一限制，在模型中加入了一小部分发散的MN羽流，从而可以分析磁场拓扑结构对波传播的影响。Melazzi等[21]采用了另一种依赖矩量法求解天线表面电流密度和等离子体内体积极化电流的方法。相关的，Sánchez-Villar等[33]提出了一个全波有限元方法工具，已成功地用于模拟另一种类型的无极推力器，电子回旋共振推力器。</p>
<p>现有的HPTs电磁场研究仅限于等离子体源和极近羽流。这就忽略了关于传播和吸收问题的几个主要问题，例如这个有限的模拟域是否足以理解等离子体作为一个整体的功率吸收;或者部分射频辐射能否沿着羽流向下游逃逸，并在那里被吸收。据我们所知，在HPTs的操作中，远处ECR表面的作用尚未被考虑。最后，有必要问一下周围环境的影响是什么，即微弱的等离子体或金属障碍物是否会通过打开&#x2F;关闭传播路径改变吸收性能。</p>
<p>本工作扩展了[32]的二维有限差分频域(FDFD)模型，改进了数值实现和更大域的插值例程，并用于模拟高频脉冲发生器源、环境和远羽在ECR表面以外的RF场的传播和吸收，将轴对称域的尺寸从轴向15 cm增加到67 cm，径向2 cm增加到20 cm，实现了对ECR跃迁的完整模拟。此外，通过传输编码得到了一个真实的等离子体密度图，一个是内部等离子体动力学[34]，另一个是MN[12]的外部扩张，并使用了基于该密度的碰撞图，而不是简单的等离子体密度展开和整个域的恒定碰撞频率。本文通过四个不同的仿真案例来探讨上述问题。最后，我们确定并评论了在求解发生在高密度HPT等离子体和完美真空之间的临界密度转变的波场时发现的建模和数值困难。</p>
<p>该研究的参考设备是一个中等尺寸的HPT(约350-500 W)，类似于SENER航空航天公司和UC3M[35]联合开发的HPT05原型。</p>
<p>本文的其余部分结构如下:第2节描述了等离子体波模型、数值实现以及模拟的几何和等离子体剖面输入。第3节讨论了在四种不同的模拟情况下获得的电磁场和功率沉积剖面。最后，在第4节中讨论了模拟和模拟临界密度跃迁电磁场的困难，以及数值结果的收敛性。第5节总结了这项工作的结论。</p>
<h2 id="电磁模型"><a href="#电磁模型" class="headerlink" title="电磁模型"></a>电磁模型</h2><p>二维频域电磁模型考虑图1所示的物理域。HPT源及其近羽流标记为区域1，磁导远羽流标记为区域2，装置外围标记为区域3。已知性质的轴对称等离子体填充区域1和2。区域是根据等离子传输码确定的，该传输码用于获得第2.2节所述波码的输入剖面。此外，在区域3中可能存在环境等离子体，这取决于研究案例。除了对称轴外，该区域在代表真空室的金属壁上终止，这可以被认为是完美的导体。此外，域内的磁线圈和HPT支撑设备箱(电源处理单元，气体供给系统等)被视为完全导体金属箱。</p>
<p>图1的畴由位于源周围的半螺旋天线中频率ω&#x2F;(2π) &#x3D; 13.56 MHz的已知外加电流J a激发。外加磁场Ba也如图所示。Ba拓扑结构在源内部缓慢收敛，在羽流中发散，磁喉大约位于表1。设计和操作参数。参数全仿真域尺寸67 cm × 20 cm室长lc 12.5 cm室半径rc 1.25 cm天线类型半转螺旋线圈电流11 × 103安培转天线频率f &#x3D; ω&#x2F;(2π) 13.56 MHz天线功率350w天线环半径ra 1.75 cm天线长度la 7.5 cm天线中心位置za 27.5 cm天线厚度dt 0.5 cm发射药种类Xe发射药质量流量1.0 mg s−1推力管出口。当磁场强度在远离源的地方减小时，出现一个ECR表面，ω &#x3D; ωce。按照[26]的命名法，等离子体源和部分羽流位于深空区，只有当Ba降低时，等离子体才会进入深空区(靠近ERC表面)。</p>
<p>HPT的尺寸和特性如表1所示。四个仿真案例定义如下:</p>
<p>案例R:这是主要的仿真案例，在讨论中作为参考。区域3充满了密度为n &#x3D; 1014 m−3的稀薄等离子体，这对于典型的实验室真空室操作来说是一个相当低的值。这就导致了推进器周边空间的过密等离子体。内部金属元件(线圈、电子元件……)被视为完美的电导体(PEC)。</p>
<p>案例T:该案例与案例R相同，除了内部金属盒子从模拟中移除，因此对场是透明的。这种情况与情况R的比较说明了障碍物对电磁场传播的影响。</p>
<p>情形V:与情形R的区别在于，去除区域3的等离子体密度，n &#x3D; 0，即区域3为完全真空。这种情况与情况R的比较显示了环境等离子体的影响，以及发生在等离子体真空边缘的临界密度转变的复杂性。</p>
<p>案例S:这个缩小版的案例R将积分域限制在区域1和区域3的最小部分，使域成为矩形，大小为[20-40]cm × [0-4] cm。</p>
<p>在下面，我们使用一个圆柱形右手向量基{1z, 1r, 1θ}。平行于或垂直于局部外加磁场的单位向量也可以形成辅助向量基{1‖，1⊥，1θ}。</p>
<h3 id="模型公式"><a href="#模型公式" class="headerlink" title="模型公式"></a>模型公式</h3><p>采用冷等离子体模型来描述等离子体对电磁场的线性化响应。虽然等离子体本身是轴对称的，但我们允许存在非轴对称场，我们将其分解为方位m模式。任意矢量F (z, r， θ， t)表示为这些模态叠加的实部，</p>
<h2 id="结果和讨论"><a href="#结果和讨论" class="headerlink" title="结果和讨论"></a>结果和讨论</h2><p>在参考模拟情形R中，等离子体处处都是过密的，即ωpe &gt;ω。此外，如第6节所述，模拟中存在源周围的金属障碍物。图5的第一行显示了E1 θ的幅值和相位，即m &#x3D; 1模态的方位电场。射频场显然受到ECR表面的限制，因为它必须在ECR表面之外消失。总的来说，在圆柱形源内部(区域1)，场最强，表明与致密等离子体耦合良好。当场在羽流(区域2)和外围(区域3)衰减时，很明显，它们不是零:电磁场在这些区域传播，并不局限于源。圆柱形源的后部磁场较小。在等离子体源内部有一个部分驻波结构，这可以从局部的幅度下降和近180度的台阶上得到证明。从区域2的单调相位开始，沿轴向存在向右行波直到ECR表面，其传播方向基本上为轴向。通过在图5的相图中取一个完整的360度相位周期的距离，可以估计其波长约为20厘米。请注意，由于高磁场，波长比源管大。当等离子体密度n≈5 × 1017 m−3，磁场强度Ba≈100 G时(得到ωpe &#x3D; 4.0 × 1010 rad s−1，ωce &#x3D; 1.8 × 109 rad s−1)，H波的解析波长近似λ≈2πde√ωce&#x2F;ω，其中&#x3D; c&#x2F;ωpe为局部电子表皮深度，这是z≈40 cm处轴附近的特征值。有趣的是，随着密度和磁场沿羽流的减小，分析波长的变化很小。</p>
<p>在远离轴的地方，随着r的增加，这个轴向波形成了一个不可忽略的k⊥波向量，即它的传播与磁场矢量成一定的角度。羽流中较大的磁场存在于横向区域的磁管中，这表明Ba在一定程度上决定了电磁场的传播路径。传播停止在ECR表面，场的大小迅速下降超过它。</p>
<p>区域3的电场不可忽略，特别是靠近天线处，其传播也受Ba方向的影响。在磁线圈上方的空间中可以观察到低量级的小波长结构，在那里辐射是弥漫的，并形成驻波模式。这种辐射似乎被限制在区域3的ECR表面和区域1和2的密度更大的等离子体之间。</p>
<p>功率沉积剖面q1显示在图6的第一个面板中。最大的吸收与最大的场无关，并且发生在圆柱源的致密等离子体内部(约95%)。不可忽略的一部分功率在下游的MN中被吸收，在ECR表面之前，这表明在模型中包括该区域2对理解功率吸收的相关性。</p>
<p>在ECR表面存在薄的吸收层;然而，这一层在磁场矢量的部分引导下，在区域3的区域顶部偏离ECR。天线发射的能量中只有不到0.6%的能量被ECR表面以外的空间吸收，在那里溶液是消失的。这一结果表明，当在自由空间中工作时，ECR表面可以作为有效的屏蔽来防止辐射损失，即阻止射频功率逃离HPT等离子体及其邻近区域，只要环境密度过大。</p>
<p>在模拟情况T中，去除域内的金属部分并没有导致波场或功率沉积剖面的任何重大变化，可以从图5和图6的第二行中观察到。唯一明显的区别是向设备后部移动的射频场略高，之前被金属障碍物阻挡，并且在区域3的后部有一些额外的吸收。这些金属盒子的小影响表明，这种类型的障碍基本上不影响解决方案。</p>
<p>在情形V中，将环境改变为完美真空对射频场(以及数值解的精度)有更显著的影响。这种情况在图5和图6的最后一行中表示。首先，区域3中等离子体的缺失也消除了在该区域的ECR表面发生共振的可能性，现在它对场是透明的。事实上，在没有等离子体密度的情况下，Ba的值和方向对于波的传播问题就变得无关紧要了。这意味着场可以接近代表真空室的金属边界条件。请注意，在自由空间中，任何向外传播的功率都会引起辐射损失;然而，在目前的设置中，代表实验室真空室的操作，这种功率被边界条件反射回区域，直到所有的功率被区域1和2的等离子体吸收。在情形R中，在区域3中存在的微弱等离子体的短波结构在情形V中消失，辐射部分被浸入区域的导电盒所分隔。然而，ECR面在区域2继续活跃。其次，区域1和2的场本质上成为驻波，如图5的幅度图中E1 θ &#x3D; 0的节点线所示，这表明在这种情况下，壁面反射确实起了作用。传播方向形成了一个主要的垂直分量k⊥到Ba，观测到的波长较短，特别是在MN羽流的外围部分。这表明TG模式的作用更相关，与H模式相比，TG模式对应的波长更短，传播更垂直。与前面的情况一样，等离子体羽流内的传播在ECR处结束。第三，羽流中场的重要性比以前的情况更大，特别是在下游，功率吸收也是如此。</p>
<p>尽管有这些一般性的观察结果，值得注意的是，模拟情形V在网格细化后的羽流区域没有表现出与其他情形相同的数值收敛特征。这个问题及其假定的原因将在第4节中讨论。</p>
<p>图7显示了源区域功率沉积剖面的放大视图，并包括情况s的小域模拟。四种解表明，功率吸收剖面基本上独立于模拟情况。这个结论之所以有价值，有两个原因。首先，它支持了建模过程的鲁棒性，因为推力器周围细节的变化对源内能量沉积的计算没有重大影响，而能量沉积占吸收的更大份额。事实上，源内部的功率似乎几乎独立于腔室条件和羽流中的传播。其次，这些结果表明，当只需要计算源吸收的功率时，可以通过只包含该区域的较小仿真域(仿真情形S)可靠地得到。</p>
<p>与[32]中所示的吸收图相比，图7中的沉积只显示了一个高吸收区域，覆盖了源的大部分区域。这与本工作中使用的等离子体条件(特别是轴为1500 G)是一致的，这与[32](轴为150高斯)的等离子体条件不同，导致Helicon模式波长增加。</p>
<p>为了结束本节，简要讨论了方位模态m &#x3D; 1的相关性。以往的研究[10,32]已经确定了m &#x3D;±1方位模在不同天线类型的螺旋源功率耦合中的主导地位。事实上，这个天线的设计主要是为了激发+1模式。因此，上述结果仅考虑了这种主导模式。为了评估这种方法的有效性，图8比较了m &#x3D;±1，±3在模拟情况R的整个域内的功率吸收(螺旋天线只激发奇数模式)。可以推断，在模态m &#x3D;+1之后，下一个重要的模态是m &#x3D;−1。高m模的功率吸收下降较快。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>利用有限差分、频域、全波模型研究了电磁场在高功率脉冲发生器(HPT)中的传播和吸收，包括远羽流区域和周围空间，目的是了解羽流中沉积的功率量以及环境对电磁问题的影响。等离子体密度和应用磁场来自于类似HPT05原型推进器的等离子体传输模拟，被用作研究的输入。虽然大部分的能量吸收发生在圆柱形源内部，但等离子体羽流所吸收的能量的一部分是不可忽略的。电场沿MN向上传播到始终存在于下游的ECR表面。波长和传播方向对应于绕着装置轴的螺旋波。在羽流边缘，波具有更短的波长和更重要的垂直波矢量分量，接近TG模式。</p>
<p>在器件及其羽流附近存在密度为n &gt; 2.3 × 1012 m−3的微弱等离子体，对于通常的激发频率(13.56 MHz)，足以使该区域过密(ωpe &gt;ω)。这是实验室真空室实验中常见的情况，抽吸并不完美。即使在太空环境中，微弱的低密度等离子体也可能包裹着推进器，使周围空间的ECR表面保持活跃。在这些条件下，ECR表面已经被证明集中了一些功率吸收，并在限制辐射远离设备方面发挥了基本作用，因为场在它之外变得消失了。特别是，这与有限尺寸真空室实验的“自由空间”代表性有很大关系，这些实验通常由导电金属制成，因此构成了一个封闭的、反射的场腔。如果ECR表面位于腔室内，这些反射壁对场的影响变得可以忽略不计，因为它们只与场消失的空间区域接触。</p>
<p>在严格的真空条件下，ECR表面在周围空间中没有任何作用，因为在这种情况下，没有电子与场共振，辐射损失的路径在远离推进器的径向上打开(但不是沿着羽流，那里的等离子体继续过密，并且在ECR跃迁之后场继续消失)。实际上，由于在模拟中使用了反射包围盒，传播和吸收图发生了变化，并显示出驻波结构。</p>
<p>区域内的反射箱(代表推进器的支撑设备)的影响很小。此外，源区域的功率吸收被认为是稳定的，并且在模拟中基本相同，这表明影响羽流和环境区域的所有方面对于源功率吸收都是多余的。这增加了先前工作中进行的小域、纯源模拟的可信度，尽管它们遗漏了羽流中能量吸收的信息。</p>
<p>最后，数值收敛研究表明，除真空环境外，所有情况都具有良好的收敛特性，在真空环境中，等离子体羽流与真空界面处的强病态临界密度过渡面，加上那里的数值阶梯网格条件，被认为是小尺度数值噪声的来源。在这项工作中使用的实现是基于一种新的插值方案，它在一定程度上缓解了这个问题，并将噪声限制在一个小区域，而不影响其他地方的结果。尽管如此，未来的工作必须解决这些转变的理论建模和数值处理。在第4节中提出了一些额外的研究途径，即在该区域使用增强阻尼，并将网格几何形状与过渡对齐，也许可以切换到其他方案，如有限元，以简化非结构化网格的实现。</p>
<p>验证现有波模型的实验数据需要直接测量电磁场及其相位，特别是在等离子体源内部，而不干扰推进器的工作。目前，作者不知道存在这样的数据。然而，耦合等离子体输运和波动模拟(使用与本工作相同的FDTD求解器)在间接测量(如推力和几个效率)方面与类似HTP设置的实验研究比较得相当好。特别是对于HPT05原型，数值[20]和实验[6]的结果显示，在类似的工作状态下，在推力效率等关键性能数据上约有30%的相对差异(尽管比较并不完美，因为[6]的配置具有略高的天线功率)。在这个方向上的进一步工作和新的、更精确的实验测量仍然需要缩小验证差距。</p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>等离子体</tag>
        <tag>文献翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>视图</title>
    <url>/2021/03/12/%E8%A7%86%E5%9B%BE/</url>
    <content><![CDATA[<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>创建视图 emp_view，连接system用户，将创建视图的权限授予用户</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="keyword">to</span> scott;</span><br><span class="line">conn scottiger;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> emp_view</span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> ename,job,sal <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure>



<p>创建带检查约束的视图。 建立一个部门员工薪水介于1000~3000元的员工信息SAL_MID视图。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> SAL_MID <span class="keyword">as</span> <span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1000</span> <span class="keyword">and</span> <span class="number">3000</span> <span class="keyword">with</span> <span class="keyword">check</span> option;</span><br></pre></td></tr></table></figure>

<p>创建只读视图。建立一个部门号为10的10员工的只读视图DEP_10。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> dep_10 <span class="keyword">as</span> <span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno<span class="operator">=</span><span class="number">10</span> <span class="keyword">with</span> read <span class="keyword">only</span>;</span><br></pre></td></tr></table></figure>

<p>创建一个包含各部门的部门号、部门人数和部门平均工资的视图。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span>  sal_avg <span class="keyword">as</span> <span class="keyword">select</span> deptno ,<span class="built_in">avg</span>(sal) avgsal,<span class="built_in">count</span>(<span class="operator">*</span>) total <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<p>创建一个部门员工信息视图，此视图中包含员工名、部门名、工作职位、薪水等信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> emp_dept <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,dname,job,sal <span class="keyword">from</span> emp ,dept <span class="keyword">where</span> emp.deptno <span class="operator">=</span>dept.deptno;</span><br></pre></td></tr></table></figure>

<p>更改视图emp_view</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> emp_view <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,job,sal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>给emp_view重新命名为emp_view1.</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">rename emp_view <span class="keyword">to</span> emp_view1;</span><br></pre></td></tr></table></figure>

<p>删除视图emp_view</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> emp_view;</span><br></pre></td></tr></table></figure>

<p>查询SCOTT用户下的视图及视图定义信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">col view_name format a10;</span><br><span class="line"><span class="keyword">select</span> view_name ,text <span class="keyword">from</span> user_views;</span><br></pre></td></tr></table></figure>

<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p>从emp表上创建不同的索引。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> index emp_idx <span class="keyword">on</span> emp(ename);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index emp_idx_j <span class="keyword">on</span> emp(ename,job);</span><br></pre></td></tr></table></figure>

<p>创建基于函数的索引。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> index emp_fun_idx <span class="keyword">on</span> emp(<span class="built_in">UPPER</span>(ename));</span><br></pre></td></tr></table></figure>

<p>建立一个大表，对表中数据进行查询操作，比较建立索引前后的系统开销。</p>
<p>①建立单独的表空间wb和单独的临时表空间wbtemp,创建用户wb并为其指定表空间wb和临时表空间wbtemp，用于存放大量数据。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">conn <span class="keyword">system</span><span class="operator">/</span>password</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space wb datafile <span class="string">&#x27;D:\app\EShyee\oradata\orcl\wb01.DBF&#x27;</span> size <span class="number">50</span>M autoextEND <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> temporary tablespace wbtemp tempfile <span class="string">&#x27;D:\app\EShyee\oradata\orcl\wbtemp.dbf&#x27;</span> size <span class="number">300</span>M;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">user</span> wb identified <span class="keyword">by</span> wb <span class="keyword">default</span> tablespace wb temporary tablespace wbtemp;</span><br></pre></td></tr></table></figure>

<p>②建立表emp1,并用pl&#x2F;sql程序为其生成一百万行数据。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,resource <span class="keyword">to</span> wb;</span><br><span class="line">conn wb<span class="operator">/</span>wb;</span><br><span class="line"> <span class="keyword">create</span> <span class="keyword">table</span> emp1(id number(<span class="number">8</span>,<span class="number">0</span>),name varchar2(<span class="number">20</span>),sex number(<span class="number">1</span>,<span class="number">0</span>),birth <span class="type">date</span> ,phone varchar2(<span class="number">15</span>));</span><br><span class="line"> <span class="keyword">DECLARE</span> </span><br><span class="line">vtoday <span class="type">date</span>;</span><br><span class="line">vcnt number(<span class="number">8</span>,<span class="number">0</span>):<span class="operator">=</span><span class="number">1000000</span>;</span><br><span class="line"><span class="comment">--PL</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">SELECT</span> sysdate <span class="keyword">into</span> vtoday <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span>.vcnt LOOP</span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">into</span> EMP1(id,name,sex,birth,PHONE) <span class="keyword">VALUES</span>(i,<span class="string">&#x27;name&#x27;</span><span class="operator">||</span>i,<span class="built_in">mod</span>(i,<span class="number">2</span>),vtoday<span class="operator">-</span>i,<span class="string">&#x27;phone&#x27;</span><span class="operator">||</span>i);</span><br><span class="line"></span><br><span class="line">	IF <span class="built_in">mod</span>(i,<span class="number">100</span>)<span class="operator">=</span><span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">commit</span>;</span><br><span class="line">	<span class="keyword">END</span> IF; </span><br><span class="line"><span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>③通过计算表上的统计数据得到查询语句的开销。由于表中有大量的数据，为确保SQL*Plus显示查询的开销，而不显示查询结果。进行如下设置:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">analyze <span class="keyword">table</span> emp1 compute statistics;</span><br><span class="line"><span class="keyword">set</span> autotrace trace explain;</span><br></pre></td></tr></table></figure>

<p>④对empl表进行查询，从中获取一行数据，</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">select</span> id,name,phone <span class="keyword">from</span> emp1 <span class="keyword">where</span> id<span class="operator">=</span><span class="number">849765</span>;</span><br><span class="line"></span><br><span class="line">执行计划</span><br><span class="line"><span class="comment">----------------------------------------------------------</span></span><br><span class="line">Plan hash <span class="keyword">value</span>: <span class="number">2226897347</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span> Id  <span class="operator">|</span> Operation         <span class="operator">|</span> Name <span class="operator">|</span> <span class="keyword">Rows</span>  <span class="operator">|</span> Bytes <span class="operator">|</span> Cost (<span class="operator">%</span>CPU)<span class="operator">|</span> <span class="type">Time</span>    <span class="operator">|</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span> <span class="keyword">SELECT</span> STATEMENT  <span class="operator">|</span>      <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span>  <span class="number">1654</span>   (<span class="number">2</span>)<span class="operator">|</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="operator">*</span>  <span class="number">1</span> <span class="operator">|</span>  <span class="keyword">TABLE</span> ACCESS <span class="keyword">FULL</span><span class="operator">|</span> EMP1 <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span>  <span class="number">1654</span>   (<span class="number">2</span>)<span class="operator">|</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">Predicate Information (identified <span class="keyword">by</span> operation id):</span><br><span class="line"><span class="comment">---------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1</span> <span class="operator">-</span> <span class="keyword">filter</span>(&quot;ID&quot;<span class="operator">=</span><span class="number">849765</span>)</span><br></pre></td></tr></table></figure>

<p>⑤在empl表的id列上创建索引，重新执行查询，</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_id <span class="keyword">on</span> emp1(id);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> id,name,phone <span class="keyword">from</span> emp1 <span class="keyword">where</span> id<span class="operator">=</span><span class="number">849765</span>;</span><br><span class="line"></span><br><span class="line">执行计划</span><br><span class="line"><span class="comment">----------------------------------------------------------</span></span><br><span class="line">Plan hash <span class="keyword">value</span>: <span class="number">3940360760</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span> Id  <span class="operator">|</span> Operation              <span class="operator">|</span> Name   <span class="operator">|</span> <span class="keyword">Rows</span>  <span class="operator">|</span> Bytes <span class="operator">|</span> Cost (<span class="operator">%</span>CPU)<span class="operator">|</span> <span class="type">Time</span></span><br><span class="line">     <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span> <span class="keyword">SELECT</span> STATEMENT        <span class="operator">|</span>        <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span>     <span class="number">4</span>   (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span>:<span class="number">0</span></span><br><span class="line"><span class="number">0</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="keyword">TABLE</span> ACCESS <span class="keyword">BY</span> INDEX ROWID<span class="operator">|</span> EMP1   <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">25</span> <span class="operator">|</span>     <span class="number">4</span>   (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span>:<span class="number">0</span></span><br><span class="line"><span class="number">0</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span><span class="operator">*</span>  <span class="number">2</span> <span class="operator">|</span>   INDEX <span class="keyword">RANGE</span> SCAN      <span class="operator">|</span> IDX_ID <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>       <span class="operator">|</span>     <span class="number">3</span>   (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span>:<span class="number">0</span></span><br><span class="line"><span class="number">0</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Predicate Information (identified <span class="keyword">by</span> operation id):</span><br><span class="line"><span class="comment">---------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="number">2</span> <span class="operator">-</span> access(&quot;ID&quot;<span class="operator">=</span><span class="number">849765</span>)</span><br></pre></td></tr></table></figure>

<p>检查索引是否已经创建。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> index_name <span class="keyword">from</span> user_indexes <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;emp1&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>使用SELECT查看表emp1的索引信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> index_name,table_name,uniqueness,status <span class="keyword">from</span> user_indexes <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;emp1&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>修改idx_ id 索引。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> index idx_id rename <span class="keyword">to</span> emp1_idx_id;</span><br></pre></td></tr></table></figure>

<p>删除idx_sex 索引。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> index idx_sex;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>数据库</tag>
        <tag>视图</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机组成原理</title>
    <url>/2021/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h1 id="计算机组成原理"><a href="#计算机组成原理" class="headerlink" title="计算机组成原理"></a>计算机组成原理</h1><h2 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h2><h3 id="冯诺依曼机的特点"><a href="#冯诺依曼机的特点" class="headerlink" title="冯诺依曼机的特点"></a>冯诺依曼机的特点</h3><ul>
<li>计算机由运算器、存储器、控制器、输入设备、输出设备组成</li>
<li>指令和数据以同等的地位存放于存储器内，并可按地址寻访。</li>
<li>指令和数据均用二进制数表示，形式上无差别</li>
<li>指令由操作码和地址码组成</li>
<li>指令在存储器内按顺序存放</li>
<li>机器以运算算器为中心</li>
</ul>
<hr>
<h2 id="易混淆"><a href="#易混淆" class="headerlink" title="易混淆"></a>易混淆</h2><p><strong>指令字长：一个指令字中包含的二进制代码的位数</strong></p>
<p><strong>存储字长：一个存储单元存储的二进制代码的长度</strong></p>
<p><strong>机器字长：计算机能直接处理的二进制数据的位数</strong></p>
<p>三者都是字节的整数倍</p>
<p>if 指令字长+2*存储字长  需要两次访存取一条指令</p>
<p>此时<strong>取值周期 为 机器周期的2倍</strong></p>
<p><strong>CPU区分指令和地址的依据：指令周期的不同阶段</strong></p>
<p><strong>MAR用于寻址，位数对应于存储单元的个数，等于地址码长度</strong></p>
<p><strong>MDR位数和存储字长相等</strong></p>
<p><strong>IR、MAR、MDR对程序员均不可见</strong></p>
<p>n位的计算机用m位来表示，机器字长为n位，一次可以处理n位的数据，m为地址码的长度。</p>
<p><strong>相联存储器既可按地址寻址又可按内容寻址</strong></p>
<hr>
<h3 id="计算机的运算过程"><a href="#计算机的运算过程" class="headerlink" title="计算机的运算过程"></a>计算机的运算过程</h3><ol>
<li>预处理阶段</li>
<li>编译阶段</li>
<li>汇编阶段</li>
<li>链接阶段</li>
</ol>
<h3 id="指令执行的过程"><a href="#指令执行的过程" class="headerlink" title="指令执行的过程"></a>指令执行的过程</h3><h4 id="取指令过程"><a href="#取指令过程" class="headerlink" title="取指令过程"></a>取指令过程</h4><ol>
<li>取指令 PC–&gt;MAR–&gt;M–&gt;IR</li>
<li>分析指令 OP(IR)–&gt;CU</li>
<li>执行指令 Ad(IR)–&gt;MAR–&gt;M–&gt;MDR–&gt;ACC</li>
</ol>
<h3 id="计算机系统的多级层次结构"><a href="#计算机系统的多级层次结构" class="headerlink" title="计算机系统的多级层次结构"></a>计算机系统的多级层次结构</h3><ol>
<li>微程序机器M0(微指令系统) 微程序机器层</li>
<li>传统机器(用机器语言的机器)M1 </li>
<li>虚拟机器(操作系统)M2</li>
<li>虚拟机器M3(汇编语言机器)</li>
<li>虚拟机器M4(高级语言机器)</li>
</ol>
<h2 id="计算机性能指标"><a href="#计算机性能指标" class="headerlink" title="计算机性能指标"></a>计算机性能指标</h2><h3 id="机器字长"><a href="#机器字长" class="headerlink" title="机器字长"></a>机器字长</h3><p>计算机进行一次整数运算所能处理的二进制数据的位数。</p>
<p>与<strong>CPU的寄存器位数、加法器</strong>有关</p>
<p>机器字长&#x3D;内部寄存器的大小，通常为字节的整数倍</p>
<h4 id="与机器字长相同的部件"><a href="#与机器字长相同的部件" class="headerlink" title="与机器字长相同的部件"></a>与机器字长相同的部件</h4><p>机器字长&#x3D;CPU内部用于整数运算的运算器位数和通用寄存器宽度</p>
<p>ALU、通用寄存器</p>
<h3 id="数据通路带宽"><a href="#数据通路带宽" class="headerlink" title="数据通路带宽"></a>数据通路带宽</h3><p>数据总线一次所能并行传送信息的位数。</p>
<p>数据通路宽度&#x3D;外部总线的宽度</p>
<h3 id="主存容量"><a href="#主存容量" class="headerlink" title="主存容量"></a>主存容量</h3><p>主存储器所能存储信息的最大容量，单位：B，也可用字数*字长表示</p>
<p>MAR的位数反应存储单元的个数</p>
<h3 id="运算速度"><a href="#运算速度" class="headerlink" title="运算速度"></a>运算速度</h3><h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>系统在单位时间内处理请求的数量。取决于主存的存取周期</p>
<h4 id="响应时间"><a href="#响应时间" class="headerlink" title="响应时间"></a>响应时间</h4><p>用户向计算机发出一个请求到系统对该请求做出响应并获得结果的时间。</p>
<p>CPU时间（运行一个程序所花费的时间）+等待时间（磁盘访问、存储器访问、IO操作、操作系统开销等）</p>
<h4 id="CPU时钟周期"><a href="#CPU时钟周期" class="headerlink" title="CPU时钟周期"></a>CPU时钟周期</h4><p>节拍脉冲或T周期，主频的倒数</p>
<p>CPU中最小的单位</p>
<h4 id="主频"><a href="#主频" class="headerlink" title="主频"></a>主频</h4><p>1Hz表示每秒一次</p>
<h4 id="CPI"><a href="#CPI" class="headerlink" title="CPI"></a>CPI</h4><p>执行一条指令所需的时钟周期数。</p>
<h4 id="CPU执行时间"><a href="#CPU执行时间" class="headerlink" title="CPU执行时间"></a>CPU执行时间</h4><p>CPU执行时间&#x3D;CPU时钟周期&#x2F;主频&#x3D;(指令条数*CPI)&#x2F;主频</p>
<h4 id="MIPS"><a href="#MIPS" class="headerlink" title="MIPS"></a>MIPS</h4><p>每秒执行多少万条指令</p>
<p>MIPS&#x3D;指令条数&#x2F;(执行时间* 10^6)&#x3D;主频&#x2F;(CPI * 10^6)</p>
<h4 id="MFLOPS、GFLOPS、PFLOPS、ZFLOPS"><a href="#MFLOPS、GFLOPS、PFLOPS、ZFLOPS" class="headerlink" title="MFLOPS、GFLOPS、PFLOPS、ZFLOPS"></a>MFLOPS、GFLOPS、PFLOPS、ZFLOPS</h4><p>M：百万次</p>
<p>G：十亿次</p>
<p>T：万亿次</p>
<h4 id="基准程序"><a href="#基准程序" class="headerlink" title="基准程序"></a>基准程序</h4><p>专门用来评价性能的一组程序</p>
<h3 id="专业术语"><a href="#专业术语" class="headerlink" title="专业术语"></a>专业术语</h3><h4 id="系列机"><a href="#系列机" class="headerlink" title="系列机"></a>系列机</h4><p>具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机</p>
<h4 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h4><h4 id="软件可移植性"><a href="#软件可移植性" class="headerlink" title="软件可移植性"></a>软件可移植性</h4><h4 id="固件"><a href="#固件" class="headerlink" title="固件"></a>固件</h4><p>固定在ROM中的部件</p>
<h2 id="校验码"><a href="#校验码" class="headerlink" title="校验码"></a>校验码</h2><h3 id="奇偶校验码"><a href="#奇偶校验码" class="headerlink" title="奇偶校验码"></a>奇偶校验码</h3><p>可检测出一(或奇数)位错误，但不能确定出错的位置，也不能检测出偶数位错误。</p>
<p>奇校验码：整过校验码中“1”的个数为奇数，偶校验相反。</p>
<h3 id="海明码"><a href="#海明码" class="headerlink" title="海明码"></a>海明码</h3><h4 id="海明码的位数"><a href="#海明码的位数" class="headerlink" title="海明码的位数"></a>海明码的位数</h4><p>n为有效信息的位数，k为校验位的位数</p>
<p>n+k&lt;&#x3D;(2^k)-1</p>
<h4 id="确定校验位的分布"><a href="#确定校验位的分布" class="headerlink" title="确定校验位的分布"></a>确定校验位的分布</h4><p>规定校验位分布在海明号为2^(i-1)的位置(1、2、4、8….)</p>
<h4 id="分组形成校验关系"><a href="#分组形成校验关系" class="headerlink" title="分组形成校验关系"></a>分组形成校验关系</h4><h4 id="校验位取值"><a href="#校验位取值" class="headerlink" title="校验位取值"></a>校验位取值</h4><h4 id="海明码的校验原理"><a href="#海明码的校验原理" class="headerlink" title="海明码的校验原理"></a>海明码的校验原理</h4><h3 id="CRC循环冗余码"><a href="#CRC循环冗余码" class="headerlink" title="CRC循环冗余码"></a>CRC循环冗余码</h3><h2 id="定点数"><a href="#定点数" class="headerlink" title="定点数"></a>定点数</h2><p>定点小数的范围：-(1-2^(-n))~1-2^(-n)</p>
<p>定点整数的范围：-(2^n   -1)~2^n   -1</p>
<p>若字长为n+1，</p>
<p>原码小数的范围：-(1-2^(-n))~1-2^(-n)</p>
<p>原码整数的范围：-(2^n   -1)~2^n   -1</p>
<p>补码小数的范围：-1~1-2^(-n)</p>
<p>补码整数的范围：-2^n~2^n   -1</p>
<p>反码小数的范围：-(1-2^(-n))~1-2^(-n)</p>
<p>反码整数的范围：-(2^n  -1)~2n   -1</p>
<h3 id="补位规则"><a href="#补位规则" class="headerlink" title="补位规则"></a>补位规则</h3><h4 id="算数移位"><a href="#算数移位" class="headerlink" title="算数移位"></a>算数移位</h4><p><img src="D:\bloglocal\计算机组成原理.assets\image-20210322203746474.png" alt="image-20210322203746474"></p>
<h4 id="逻辑移位"><a href="#逻辑移位" class="headerlink" title="逻辑移位"></a>逻辑移位</h4><p>逻辑移位将操作数视为无符号数</p>
<p>移位规则:逻辑左移时，高位移丢，低位添0;逻辑右移时，低位移丢，高位添0。</p>
<h4 id="循环移位"><a href="#循环移位" class="headerlink" title="循环移位"></a>循环移位</h4><p>循环移位分为带进位标志位CF的循环移位(大循环）和不带进位标志位的循环移位（小循环)。</p>
<h3 id="溢出判断"><a href="#溢出判断" class="headerlink" title="溢出判断"></a>溢出判断</h3><h4 id="采用一符号位"><a href="#采用一符号位" class="headerlink" title="采用一符号位"></a>采用一符号位</h4><p>两个相同符号的数运算，结果符号相反，则溢出</p>
<h4 id="采用双符号位"><a href="#采用双符号位" class="headerlink" title="采用双符号位"></a>采用双符号位</h4><p>模4补码</p>
<p>运算结果的两个符号位相同：未溢出</p>
<p>运算结果的两个符号位不同：溢出</p>
<p>00：结果为正数，未溢出</p>
<p>01：正溢出</p>
<p>10：负溢出</p>
<p>11：结果为负数，未溢出</p>
<h4 id="采用一位符号位根据数据位的进位情况判断"><a href="#采用一位符号位根据数据位的进位情况判断" class="headerlink" title="采用一位符号位根据数据位的进位情况判断"></a>采用一位符号位根据数据位的进位情况判断</h4><p>符号位与数据位最高位相同：未溢出，否则溢出</p>
<h3 id="大端存储-和-小端存储"><a href="#大端存储-和-小端存储" class="headerlink" title="大端存储 和 小端存储"></a>大端存储 和 小端存储</h3><p>大端存储</p>
<table>
<thead>
<tr>
<th></th>
<th>0800H</th>
<th>0801H</th>
<th>0802H</th>
<th>0803H</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>……</td>
<td>01H</td>
<td>23H</td>
<td>45H</td>
<td>67H</td>
<td>……</td>
</tr>
</tbody></table>
<p>小端存储</p>
<table>
<thead>
<tr>
<th></th>
<th>0800H</th>
<th>0801H</th>
<th>0802H</th>
<th>0803H</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>……</td>
<td>67H</td>
<td>45H</td>
<td>23H</td>
<td>01H</td>
<td>……</td>
</tr>
</tbody></table>
<h3 id="边界对齐"><a href="#边界对齐" class="headerlink" title="边界对齐"></a>边界对齐</h3><p><img src="D:\bloglocal\计算机组成原理.assets\image-20210322210605115.png" alt="image-20210322210605115"></p>
<h2 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h2><p>N&#x3D;r^E *M</p>
<p>r：浮点数阶码的底</p>
<p>E：阶码</p>
<p>M：尾数</p>
<h3 id="规格化"><a href="#规格化" class="headerlink" title="规格化"></a>规格化</h3><p>原码规格化后的范围：1&#x2F;2~(1-2^(-n))</p>
<p>原码规格化后的范围：-(1-2^(-n))~-1&#x2F;2</p>
]]></content>
      <categories>
        <category>组成原理</category>
      </categories>
      <tags>
        <tag>进程</tag>
        <tag>组成原理</tag>
        <tag>并发</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机操作系统(2)</title>
    <url>/2021/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F(2)/</url>
    <content><![CDATA[<span id="more"></span>

<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><h3 id="程序的并发执行"><a href="#程序的并发执行" class="headerlink" title="程序的并发执行"></a>程序的并发执行</h3><p>程序是描述计算机所要完成的具有特定功能的，并在时间上按严格次序前后相继的计算机操作序列集合(一个静态的概念)</p>
<p>程序顺序执行的特点：</p>
<ol>
<li>顺序性</li>
<li>封闭性</li>
<li>可再现性</li>
</ol>
<p>程序在执行时应考虑的环境</p>
<ol>
<li>独立性</li>
<li>随机性</li>
<li>资源共享性</li>
</ol>
<h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><p>并发执行的程序在执行过程中分配和管理资源的基本单位</p>
<h4 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h4><ol>
<li>动态概念</li>
<li>并发特征(程序没有)</li>
<li>竞争计算机系统资源的基本单位</li>
<li>不同的进程可以包含同一个程序</li>
</ol>
<h4 id="进程的组成："><a href="#进程的组成：" class="headerlink" title="进程的组成："></a>进程的组成：</h4><h5 id="进程控制块PCB："><a href="#进程控制块PCB：" class="headerlink" title="进程控制块PCB："></a>进程控制块PCB：</h5><table>
<thead>
<tr>
<th>信息</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>状态</td>
<td>说明进程当前的状态</td>
</tr>
<tr>
<td>进程标识符</td>
<td>标明系统中各个进程</td>
</tr>
<tr>
<td>位置信息</td>
<td>指明程序及数据在主存或外存的位置</td>
</tr>
<tr>
<td>控制信息</td>
<td>参数、信号量、消息等</td>
</tr>
<tr>
<td>队列指针</td>
<td>连接统一状态的进程</td>
</tr>
<tr>
<td>优先级</td>
<td>进程调度的依据</td>
</tr>
<tr>
<td>现场保护区</td>
<td>将处理机的现场保护到该区域</td>
</tr>
<tr>
<td>其他</td>
<td></td>
</tr>
</tbody></table>
<h5 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h5><h5 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h5><h4 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h4><p>运行态、就绪态、阻塞态&#x2F;等待态、新建态、退出态</p>
<h4 id="进程切换"><a href="#进程切换" class="headerlink" title="进程切换"></a>进程切换</h4><p>切换的时机</p>
<ol>
<li>时钟中断</li>
<li>I&#x2F;O中断</li>
<li>内存失效</li>
<li>遇到陷阱</li>
<li>系统调用</li>
</ol>
<p>空-&gt;创建：新的批处理作业、交互登录、为提供服务而由操作系统创建、由现有进程派生</p>
<p>新建-&gt;就绪态：操作系统做好准备再接纳一批新进程时</p>
<p>就绪-&gt;运行态：需要选择一个新进程时</p>
<p>运行-&gt;就绪：正在运行的进程达到“允许不中断执行”的最大时间段、被优先级更高的进程抢占、进程自愿释放处理器(周期性的进程)</p>
<p>运行-&gt;阻塞：对于进程请求的服务，操作系统无法立即予以服务、请求一个无法得到的资源、需要进行初始化的时候、进程通信时，一个进程等待另一个进程的信息。从磁盘读数据时（可能）</p>
<p>阻塞-&gt;就绪：等待的时间发生时</p>
<p>一个读磁盘操作完成以后，操作系统会修改进程状态为就绪态</p>
<h4 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h4><ol>
<li>由系统程序模块统一创建</li>
<li>有父进程创建</li>
</ol>
<p>用户登录成功后需要创建新进程<br>启动程序执行创建新进程</p>
<hr>
<p>设备分配是通过在系统中设置相应的数据结构实现的，不必创建新进程。</p>
<h4 id="进程的撤销"><a href="#进程的撤销" class="headerlink" title="进程的撤销"></a>进程的撤销</h4><ol>
<li>该进程已完成所要求的功能而正常终止</li>
<li>由于某种错误导致非正常终止</li>
<li>祖先进程要求撤销某个子进程</li>
</ol>
<h4 id="进程的通信"><a href="#进程的通信" class="headerlink" title="进程的通信"></a>进程的通信</h4><h5 id="主从式"><a href="#主从式" class="headerlink" title="主从式"></a>主从式</h5><ol>
<li>主进程可自由使用从进程的资源或数据</li>
<li>从进程的动作受主进程的控制</li>
<li>主进程和从进程的关系是固定的</li>
</ol>
<h5 id="会话式"><a href="#会话式" class="headerlink" title="会话式"></a>会话式</h5><ol>
<li>使用进程在服务进程所提供的服务之前，必须得到许可</li>
<li>服务进程所提供的服务的控制由自身完成</li>
<li>使用进程和服务进程在通信时有固定的链接关系</li>
</ol>
<h5 id="消息或邮箱机制"><a href="#消息或邮箱机制" class="headerlink" title="消息或邮箱机制"></a>消息或邮箱机制</h5><ol>
<li>只要存在空缓冲区或邮箱，发送进程就可以发送消息</li>
<li>发送进程和接受进程无直接连接关系</li>
<li>两进程之间存在缓冲区或邮箱</li>
</ol>
<h5 id="共享存储区方式"><a href="#共享存储区方式" class="headerlink" title="共享存储区方式"></a>共享存储区方式</h5><p>不要求数据移动</p>
<h5 id="管道通信"><a href="#管道通信" class="headerlink" title="管道通信"></a>管道通信</h5><p>类似于半双工<br>大小为内存上的一页</p>
<h3 id="临界区"><a href="#临界区" class="headerlink" title="临界区"></a>临界区</h3><p>不允许多个并发进程交叉执行的一段程序<br>禁止两个进程同时进入临界区的准则：</p>
<ol>
<li>空闲让进</li>
<li>忙则等待</li>
<li>有限等待</li>
<li>让权等待</li>
</ol>
<h3 id="实现互斥"><a href="#实现互斥" class="headerlink" title="实现互斥"></a>实现互斥</h3><h4 id="软件方法"><a href="#软件方法" class="headerlink" title="软件方法"></a>软件方法</h4><ol>
<li>单标志法<br><strong>违背空闲让进</strong></li>
<li>双标志法先检查<br><strong>违背忙则等待</strong></li>
<li>双标志法后检查<br>导致互相谦让，谁也进不了临界区<br>最终<strong>饥饿</strong></li>
<li>Peterson算法<br>代码语句中设置了<strong>turn</strong><br>无法实现让权等待</li>
</ol>
<h4 id="硬件实现方法"><a href="#硬件实现方法" class="headerlink" title="硬件实现方法"></a>硬件实现方法</h4><ol>
<li>中断屏蔽法<br>限制了处理机交替执行程序的能力</li>
<li>硬件指令法<br>TestAndSet指令（原子操作）（不会主动放弃CPU，完成时会唤醒处于就绪态的进程，在开中断下运行）、Swap指令<br><strong>硬件方法不能实现让权等待</strong></li>
</ol>
<h4 id="信号量"><a href="#信号量" class="headerlink" title="信号量"></a>信号量</h4><p>条件变量与信号量的比较</p>
<ul>
<li>相同点<br>条件变量的wait&#x2F;signal操作类似于信号量的p&#x2F;v操作，可实现进程的阻塞&#x2F;唤醒</li>
<li>不同点<br>条件变量是没有值的，仅实现了“排队等待”功能；而信号量是“有值”的，信号量的值反应了剩余资源数，而在管程中，剩余资源数用共享数据结构记录。</li>
</ul>
<h4 id="管程"><a href="#管程" class="headerlink" title="管程"></a>管程</h4><p>代表共享资源的数据结构，以及由对该共享资源数据结构实施操作的一组过程所组成的资源管理程序。</p>
<p>实现共享资源封装<br>每次只允许一个进程进入管程</p>
<h4 id="经典同步问题"><a href="#经典同步问题" class="headerlink" title="经典同步问题"></a>经典同步问题</h4><h5 id="生产者消费者问题"><a href="#生产者消费者问题" class="headerlink" title="生产者消费者问题"></a>生产者消费者问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore mutex=<span class="number">1</span>;	<span class="comment">//临界区互斥信号量</span></span><br><span class="line">semaphore empty=n;	<span class="comment">//空闲缓冲区</span></span><br><span class="line">semaphore full=<span class="number">0</span>;		<span class="comment">//缓冲区初始化为空</span></span><br><span class="line">producer()&#123;			<span class="comment">//生产者进程</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">produce an item in next;	<span class="comment">//生产数据</span></span><br><span class="line">P(empty);				<span class="comment">//获取空缓冲单元</span></span><br><span class="line">P(mutex);				<span class="comment">//进入临界区</span></span><br><span class="line">Add next to buffer;	<span class="comment">//加入数据</span></span><br><span class="line">V(mutex);				<span class="comment">//离开临界区，释放互斥信号量</span></span><br><span class="line">V(full);				<span class="comment">//满缓冲区加1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">consumer()&#123;			<span class="comment">//消费者进程</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;				</span><br><span class="line">P(full);				<span class="comment">//获取满缓冲单元</span></span><br><span class="line">P(mutex);				<span class="comment">//进入临界区</span></span><br><span class="line">Remove an item from buffer;</span><br><span class="line">V(mutex);				<span class="comment">//离开缓冲区</span></span><br><span class="line">V(empty);				<span class="comment">//空缓冲区加1</span></span><br><span class="line">Consume the item;		<span class="comment">//消费</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="读者-写者问题"><a href="#读者-写者问题" class="headerlink" title="读者-写者问题"></a>读者-写者问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> count=<span class="number">0</span>;			<span class="comment">//用于记录当前的读者数量</span></span><br><span class="line"></span><br><span class="line">semaphore mutex=<span class="number">1</span>;	<span class="comment">//用于保护更新count变量时的互斥</span></span><br><span class="line">semaphore rw=<span class="number">1</span>;		<span class="comment">//用于保证读者和写者互斥地访问文件</span></span><br><span class="line">semaphore w=<span class="number">1</span>;		<span class="comment">//用于实现写优先</span></span><br><span class="line"></span><br><span class="line">writer() &#123;			<span class="comment">//写者进程</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">P(w);</span><br><span class="line">P(rw) ;				<span class="comment">//互斥访问共享文件</span></span><br><span class="line"></span><br><span class="line">writing;				<span class="comment">//写入</span></span><br><span class="line"></span><br><span class="line">V(rW);				<span class="comment">//释放共享文件</span></span><br><span class="line">V(w);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reader() &#123;			<span class="comment">//读者进程</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">P(w)</span><br><span class="line">P (mutex) ;			<span class="comment">//互斥访问count变量</span></span><br><span class="line"><span class="keyword">if</span> (count==<span class="number">0</span>)			<span class="comment">//当第一个读进程读共享文件时</span></span><br><span class="line">P(rw);				<span class="comment">//阻止写进程写</span></span><br><span class="line">count++;				<span class="comment">//读者计数器加1</span></span><br><span class="line">V (mutex) ;			<span class="comment">//释放互斥变量count</span></span><br><span class="line">V(w);</span><br><span class="line">reading;				<span class="comment">//读取</span></span><br><span class="line">P (mutex) ;			<span class="comment">//互斥访问count变量</span></span><br><span class="line">count--;				<span class="comment">//读者计数器减1</span></span><br><span class="line"><span class="keyword">if</span> (count==<span class="number">0</span>)			<span class="comment">//当最后一个读进程读完共享文件</span></span><br><span class="line">V(rw) ;				<span class="comment">//允许写进程写</span></span><br><span class="line">V (mutex) ;			<span class="comment">//释放互斥变量count</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="哲学家问题"><a href="#哲学家问题" class="headerlink" title="哲学家问题"></a>哲学家问题</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;; <span class="comment">//初始化信号量</span></span><br><span class="line">semaphore mutex=<span class="number">1</span>;			<span class="comment">//设置取筷子的信号量</span></span><br><span class="line">Pi() &#123;						<span class="comment">//i号哲学家的进程</span></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">P (mutex) ;					<span class="comment">//在取筷子前获得互斥量</span></span><br><span class="line">P (chopstick[i]) ;			<span class="comment">//取左边筷子</span></span><br><span class="line">P (chopstick[(i+<span class="number">1</span>)%<span class="number">5</span>]) ;		<span class="comment">//取右边筷子</span></span><br><span class="line">V (mutex) ;					<span class="comment">//释放取筷子的信号量</span></span><br><span class="line">eat;							<span class="comment">//进餐</span></span><br><span class="line">V(chopstick[i]) ;				<span class="comment">//放回左边筷子</span></span><br><span class="line">V (chopstick[(i+<span class="number">1</span>)%<span class="number">5</span>]) ;		<span class="comment">//放回右边筷子</span></span><br><span class="line">think;						<span class="comment">//思考</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">1</span>) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><h3 id="死锁的原因"><a href="#死锁的原因" class="headerlink" title="死锁的原因"></a>死锁的原因</h3><ol>
<li>系统资源的竞争</li>
<li>进程推进顺序非法</li>
<li>死锁产生的必要条件：</li>
</ol>
<ul>
<li>互斥条件</li>
<li>不剥夺条件</li>
<li>请求并保持条件</li>
<li>循环等待条件</li>
</ul>
<h3 id="死锁的预防"><a href="#死锁的预防" class="headerlink" title="死锁的预防"></a>死锁的预防</h3><ol>
<li>破坏互斥条件<br>不可行</li>
<li>破坏不剥夺条件<br>用于状态易于保存和恢复的资源 如CPU的寄存器及内存资源，不适用于打印机</li>
<li>破坏请求并保持条件<br>采用预先静态分配方法<br>会导致饥饿</li>
<li>破坏循环等待条件<br>采用顺序资源分配算法<br>限制了新设备的增加<br>造成资源浪费<br>给用户编程带来麻烦</li>
</ol>
<h3 id="死锁避免"><a href="#死锁避免" class="headerlink" title="死锁避免"></a>死锁避免</h3><ol>
<li>系统安全状态</li>
<li>银行家算法</li>
</ol>
<h3 id="死锁的检测和排除"><a href="#死锁的检测和排除" class="headerlink" title="死锁的检测和排除"></a>死锁的检测和排除</h3><ol>
<li>资源分配图</li>
<li>死锁定理</li>
<li>死锁解除</li>
</ol>
<ul>
<li>资源剥夺法</li>
<li>撤销进程法</li>
<li>进程回退法</li>
</ul>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>线程是调度的基本单位<br>线程控制块TCB<br>用户级线程只可在用户空间中进行，所以在不支持内核级线程的系统中也可以实现管理。<br>用户级线程的切换效率更高。</p>
<h3 id="典型应用"><a href="#典型应用" class="headerlink" title="典型应用"></a>典型应用</h3><ol>
<li>服务器中的文件管理或通信控制</li>
<li>前后台处理</li>
<li>异步处理</li>
</ol>
<h3 id="多线程模型"><a href="#多线程模型" class="headerlink" title="多线程模型"></a>多线程模型</h3><h4 id="多对一"><a href="#多对一" class="headerlink" title="多对一"></a>多对一</h4><p>多个用户映射到一个内核级线程，用户线程对操作系统不可见<br>多个线程不能并行运行在多处理机上</p>
<h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><p>每个用户级线程映射到一个内核级线程<br>线程开销大</p>
<h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4><p>n个用户级映射到m个内核级线程上，要求m&lt;&#x3D;n</p>
<h2 id="中断技术"><a href="#中断技术" class="headerlink" title="中断技术"></a>中断技术</h2><p>在程序执行过程中遇到急需处理的事件时，暂时中止现行程序在CPU上的执行，转而执行相应的事件处理程序，待处理完成后返回中断点或调用其他程序。</p>
<h4 id="外中断（中断或者异步中断）"><a href="#外中断（中断或者异步中断）" class="headerlink" title="外中断（中断或者异步中断）"></a>外中断（中断或者异步中断）</h4><p>来自处理器之外的中断<br>分为可屏蔽中断和不可屏蔽中断<br>既发生在用户态又发生在内核态</p>
<ol>
<li>时钟中断</li>
<li>键盘中断</li>
<li>它机中断</li>
<li>外部设备中断</li>
</ol>
<h4 id="内中断（异常或同步中断）"><a href="#内中断（异常或同步中断）" class="headerlink" title="内中断（异常或同步中断）"></a>内中断（异常或同步中断）</h4><ol>
<li>访管中断-&gt;执行系统调用引起</li>
<li>硬件故障中断-&gt;电源失效、奇偶校验错误、总线超时</li>
<li>程序性异常-&gt;非法操作、地址越界、页面故障、调试指令、除数为零、浮点溢出<br><strong>大部分异常都发生在用户态，只有“缺页异常“发生在内核态</strong></li>
</ol>
<h4 id="中断的执行过程"><a href="#中断的执行过程" class="headerlink" title="中断的执行过程"></a>中断的执行过程</h4><ol>
<li>关中断 此时不能响应更高级的中断请求</li>
<li>保存断点 即PC</li>
<li>引出中断服务程序 将地址送入PC</li>
<li>保存现场和屏蔽字</li>
<li>开中断 此时允许更高级的的中断</li>
<li>执行中断服务程序</li>
<li>关中断</li>
<li>恢复现场和屏蔽字</li>
<li>开中断、中断返回<br>PC由硬件保存，通用寄存器由操作系统保存<br>1～3由硬件（中断隐指令）完成，4～9 软件完成</li>
</ol>
<h3 id="中断事件处理"><a href="#中断事件处理" class="headerlink" title="中断事件处理"></a>中断事件处理</h3><h4 id="硬件故障中断"><a href="#硬件故障中断" class="headerlink" title="硬件故障中断"></a>硬件故障中断</h4><p>硬件故障导致</p>
<h5 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>中断处理程序 保护现场</li>
<li>停止设备工作</li>
<li>停止处理及运行</li>
<li>向操作员报告</li>
</ol>
<h4 id="程序性中断"><a href="#程序性中断" class="headerlink" title="程序性中断"></a>程序性中断</h4><p>语法错误、逻辑错误、运行中异常</p>
<h5 id="处理过程-1"><a href="#处理过程-1" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>因人而异</li>
<li>借助于信号机制</li>
<li>操作系统将中断事件捕获交给应用程序</li>
</ol>
<h4 id="I-x2F-O中断"><a href="#I-x2F-O中断" class="headerlink" title="I&#x2F;O中断"></a>I&#x2F;O中断</h4><h5 id="处理原则"><a href="#处理原则" class="headerlink" title="处理原则"></a>处理原则</h5><ol>
<li>I&#x2F;O正常结束 待传输的下一个进程设置为就绪态</li>
<li>I&#x2F;O发生故障 向设备发命令索取状态字、分析故障的确切原因、复执或转人工</li>
<li>I&#x2F;O异常 报告操作员</li>
<li>设备报到或设备结束 操作系统修改系统数据结构中相应设备的状态</li>
</ol>
<h4 id="访管中断"><a href="#访管中断" class="headerlink" title="访管中断"></a>访管中断</h4><p>表示当前运行程序对操作系统功能的调用</p>
<h5 id="处理过程-2"><a href="#处理过程-2" class="headerlink" title="处理过程"></a>处理过程</h5><ol>
<li>程序执行访管指令,并通过适当方式指明系统调用号。</li>
<li>通过中断机制进入访管中断处理程序,现场信息被保护到核心栈,按功能号实现跳转。</li>
<li>通过系统调用人口地址表找到相应中断服务例程的入口地址。</li>
<li>执行中断服务例程,正常情况下在结束后返回系统调用的下一条指令继续<br>执行。</li>
</ol>
<h4 id="时钟中断"><a href="#时钟中断" class="headerlink" title="时钟中断"></a>时钟中断</h4><p>处理和时间有关的信息及决定是否程序调度<br>和时间有关的信息：系统时间、进程的时间片、延时、使用CPU的时间、各种定时器。<br>时钟分绝对时钟和间隔时钟</p>
<h5 id="间隔定时器："><a href="#间隔定时器：" class="headerlink" title="间隔定时器："></a>间隔定时器：</h5><ol>
<li>real 永远在计时（包括进程挂起时）</li>
<li>virtual 只在用户态计时</li>
<li>profile 在用户态和内核态都计时</li>
</ol>
<h2 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li>设备管理</li>
<li>文件管理</li>
<li>进程管理</li>
<li>进程通信</li>
<li>内存管理</li>
</ul>
<h3 id="要运行在核心态"><a href="#要运行在核心态" class="headerlink" title="要运行在核心态"></a>要运行在核心态</h3><p>由内核程序负责完成<br>用户通过<strong>trap</strong> 来发起系统调用请求</p>
<h3 id="用户态转向核心态"><a href="#用户态转向核心态" class="headerlink" title="用户态转向核心态"></a>用户态转向核心态</h3><ol>
<li>用户程序要求操作系统的服务，如系统调用</li>
<li>发生一次中断</li>
<li>用户程序产生了一次错误状态</li>
<li>用户程序企图执行一条特权指令<br>用中断返回指令返回用户态</li>
</ol>
<h3 id="主要过程"><a href="#主要过程" class="headerlink" title="主要过程"></a>主要过程</h3><ol>
<li>传递系统调用参数</li>
<li>执行trap指令</li>
<li>执行相应的服务程序</li>
<li>返回用户态</li>
</ol>
<h2 id="大内核与微内核"><a href="#大内核与微内核" class="headerlink" title="大内核与微内核"></a>大内核与微内核</h2><h3 id="大内核的好处"><a href="#大内核的好处" class="headerlink" title="大内核的好处"></a>大内核的好处</h3><p>可充分利用模块之间有效特性，无可比拟的性能优势</p>
<h3 id="微内核的特点"><a href="#微内核的特点" class="headerlink" title="微内核的特点"></a>微内核的特点</h3><ol>
<li>添加系统服务时，不必修改内核</li>
<li>有效分离接口</li>
<li>微内核结构没有单一内核稳定</li>
</ol>
<h2 id="处理机调度"><a href="#处理机调度" class="headerlink" title="处理机调度"></a>处理机调度</h2><h3 id="分级调度"><a href="#分级调度" class="headerlink" title="分级调度"></a>分级调度</h3><ol>
<li>作业调度 又称宏观调度或者高级调度</li>
<li>交换调度 又称中级调度或者内存调度</li>
<li>进程调度 又称微观调度或者低级调度</li>
<li>线程调度<br>作业调度次数少，中级次数略多，进程调度频率最高<br>进程调度和切换程序是操作系统内核程序</li>
</ol>
<blockquote>
<p>现代操作系统中,不能进行进程的调度与切换的情况有以下几种:  </p>
<ol>
<li>在处理中断的过程中,中断处理过程复杂,在实现上很难做到进程程切换,而且中断处理是系统工作的一部分,逻辑上不属于某一进程,不应被剥夺处理机资源。  </li>
<li>进程在操作系统内核程序临界区中。进入临界区后,需要独占式地访问共享数据,理论上必须加锁,以防止其他并行程序进入,在解锁前不应切换到其他进程运行,以加快该共享数据的释放。  </li>
<li>其他需要完全屏蔽中断的原子操作过程中。如加锁、解锁、中断现场保护、恢复等原子操作。在原子过程中,连中断都要屏蔽,更不应该进行进程调度与切换。</li>
</ol>
</blockquote>
<h3 id="进程调度方式"><a href="#进程调度方式" class="headerlink" title="进程调度方式"></a>进程调度方式</h3><ul>
<li>非抢占（剥夺）式</li>
<li>抢占（剥夺）式</li>
</ul>
<h3 id="调度的基本准则"><a href="#调度的基本准则" class="headerlink" title="调度的基本准则"></a>调度的基本准则</h3><ol>
<li>CPU利用率</li>
<li>系统吞吐量 单位时间内CPU完成作业的数量 作业数量&#x2F;时间</li>
<li>周转时间<br>周转时间&#x3D;作业完成时间-作业提交时间<br><strong>平均周转时间</strong>&#x3D;（作业1的周转时间+…+作业n的周转时间）&#x2F;n<br>带权周转时间&#x3D;作业周转时间&#x2F;作业实际运行时间<br><strong>平均带权周转时间</strong>&#x3D;n个带权周转时间&#x2F;n</li>
<li>等待时间 进程处于等处理机状态的时间之和</li>
<li>响应时间 用户提交到系统首次响应的时间</li>
</ol>
<h3 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h3><h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ol>
<li>记录系统中所有进程执行的的情况</li>
<li>选择占有处理机的过程</li>
<li>进行进程上下文的切换</li>
</ol>
<h4 id="进程调度的时机"><a href="#进程调度的时机" class="headerlink" title="进程调度的时机"></a>进程调度的时机</h4><ol>
<li>正在执行的进程执行完毕，或者进程被创建时</li>
<li>执行中进程自己调用阻塞原语将自己阻塞起来，进入睡眠等待状态</li>
<li>执行中进程提出IO请求后被阻塞</li>
<li>在分时系统中时间片已经用完</li>
<li>在执行完系统调用，系统程序返回用户程序时</li>
<li>进程处于临界区时也可以调度<br><strong>以上是不可剥夺方式下的原因</strong></li>
<li>就绪队列中的某进程的优先级变得高于当前执行进程的优先级</li>
</ol>
<h5 id="UNIX中"><a href="#UNIX中" class="headerlink" title="UNIX中"></a>UNIX中</h5><ol>
<li>进程自己调用sleep和wait进入睡眠</li>
<li>由于系统调用结束返回用户态，调度标志被置位</li>
<li>完成中断或trap</li>
<li>时间片用完</li>
<li>调用exit自我终止</li>
</ol>
<h3 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h3><h4 id="先来先服务算法FIFS"><a href="#先来先服务算法FIFS" class="headerlink" title="先来先服务算法FIFS"></a>先来先服务算法FIFS</h4><p>算法简单效率低<br>对长作业有利对短作业不利<br>有利于CPU繁忙型作业，不利于IO繁忙型</p>
<h4 id="短作业优先调度算法SJF"><a href="#短作业优先调度算法SJF" class="headerlink" title="短作业优先调度算法SJF"></a>短作业优先调度算法SJF</h4><p>对于长作业不利<br>未考虑作业的紧迫程度<br>作业的长短根据用户的估计而定（不准）<br>SJF的平均等待时间、平均周转时间最少</p>
<h4 id="优先级调度算法"><a href="#优先级调度算法" class="headerlink" title="优先级调度算法"></a>优先级调度算法</h4><ol>
<li>非剥夺式</li>
<li>剥夺式</li>
<li>静态优先级 创建进程时决定的</li>
<li>动态优先级 进程运行过程中调整</li>
</ol>
<h4 id="优先级的设置参照原则"><a href="#优先级的设置参照原则" class="headerlink" title="优先级的设置参照原则"></a>优先级的设置参照原则</h4><ol>
<li><p>系统进程&gt;用户进程</p>
</li>
<li><p>交互型进程 &gt;非交互型进程</p>
</li>
<li><p>IO型进程 &gt;计算型进程</p>
</li>
</ol>
<h4 id="高响应比优先调度算法"><a href="#高响应比优先调度算法" class="headerlink" title="高响应比优先调度算法"></a>高响应比优先调度算法</h4><p>响应比Rp&#x3D;（等待时间+要求服务时间）&#x2F;要求服务时间<br>因此</p>
<ol>
<li>作业的等待时间相同时，要求服务时间越短，响应比越高，有利于短作业</li>
<li>要求时间相同时，作业的响应比由其等待时间决定，（FCFS）</li>
<li>对长作业，等待时间足够长时，其响应比便可升的很高</li>
</ol>
<h4 id="时间片轮转调度算法"><a href="#时间片轮转调度算法" class="headerlink" title="时间片轮转调度算法"></a>时间片轮转调度算法</h4><p>适用于分时系统<br>剥夺式<br>当一个处于运行态的进程用完一个时间片后它的状态处于<strong>就绪</strong>态</p>
<h4 id="多级反馈队列调度算法"><a href="#多级反馈队列调度算法" class="headerlink" title="多级反馈队列调度算法"></a>多级反馈队列调度算法</h4><ol>
<li>设置多个就绪队列，每个队列优先级不同</li>
<li>每个队列中进程执行的时间片的大小各不相同</li>
<li>队列中FCFS，队列间时间片轮转</li>
<li>允许抢占</li>
</ol>
<h5 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h5><ol>
<li>终端型作业用户：短作业优先</li>
<li>短批处理作业用户：周转时间较短</li>
<li>长批处理作业用户：不会长期得不到处理</li>
</ol>
<h3 id="实时调度"><a href="#实时调度" class="headerlink" title="实时调度"></a>实时调度</h3><p>分为软实时调度和硬实时调度<br>实时操作系统的特点：</p>
<ol>
<li>有限等待时间（决定性）</li>
<li>有限响应时长</li>
<li>用户控制</li>
<li>可靠性高</li>
<li>系统出错处理能力强</li>
</ol>
<h4 id="要求："><a href="#要求：" class="headerlink" title="要求："></a>要求：</h4><ol>
<li>很快的进程或线程切换速度</li>
<li>快速的外部中断响应能力</li>
<li>基于优先级的随时抢占式调度策略：</li>
</ol>
<ul>
<li>优先级+时间片轮转调度</li>
<li>基于优先级的非抢占式调度</li>
<li>基于优先级的固定抢占式调度</li>
<li>基于优先级的随时抢占式调度</li>
</ul>
<h4 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h4><ol>
<li>静态表格法<br>静态分析——直接产生调度结果<br>多用于处理周期性任务</li>
<li>静态优先级驱动抢占式调度算法<br>也进行静态分析——不直接产生调度结果——只用来指定优先级</li>
<li>动态计划调度算法<br>在执行调度任务前排调度计划</li>
<li>尽力而为调度算法<br>不进行可能性分析</li>
</ol>
<h4 id="实现调度算法"><a href="#实现调度算法" class="headerlink" title="实现调度算法"></a>实现调度算法</h4><p>所包涵的内容信息：</p>
<ol>
<li>任务就绪时间或事件到达时间<br>周期性事件可预知，但非周期性事件大部分时间不可预知</li>
<li>开始时限</li>
<li>完成时限</li>
<li>处理时间</li>
<li>资源要求</li>
<li>优先级</li>
</ol>
<p>算法思想：按用户的时限要求顺序设置处理机<br>抢占式的<br>可用于非周期性任务调度</p>
<h4 id="频率单调调度算法"><a href="#频率单调调度算法" class="headerlink" title="频率单调调度算法"></a>频率单调调度算法</h4><p>广泛应用于多周期性实时处理<br>原理：<br>频率越低优先级越低</p>
<h2 id="内存管理基本原理"><a href="#内存管理基本原理" class="headerlink" title="内存管理基本原理"></a>内存管理基本原理</h2><h3 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h3><h4 id="1-虚拟存储器"><a href="#1-虚拟存储器" class="headerlink" title="1. 虚拟存储器"></a>1. 虚拟存储器</h4><p>进程中的目标代码、数据等的虚存地址组成的虚拟空间称为虚拟存储器</p>
<h4 id="2-地址变换"><a href="#2-地址变换" class="headerlink" title="2. 地址变换"></a>2. 地址变换</h4><p>内存地址（物理单元）的集合成为内存空间或物理地址空间<br>物理地址空间是地址转换的最终地址</p>
<ul>
<li>静态地址重定位<br>要求执行前完成链接<br>必须占用连续的内存空间</li>
<li>动态地址重定位<br>依靠硬件地址变换机构<br>该机构需要一个或多个基地址寄存器BR和一个或多个程序虚拟地址寄存器VR<br>内存地址MA&#x3D;BR+VR<br>优点：</li>
</ul>
<ol>
<li>可以对内存进行非连续分配</li>
<li>提供了实现虚拟存储器的基础</li>
<li>有利于程序段的共享</li>
</ol>
<h4 id="3-内外存数据传输的控制"><a href="#3-内外存数据传输的控制" class="headerlink" title="3. 内外存数据传输的控制"></a>3. 内外存数据传输的控制</h4><p>用户控制：覆盖<br>系统控制：交换、请求调入+预调入<br>一个进程正在IO时，不能交换出内存</p>
<h4 id="4-内存的分配与回收"><a href="#4-内存的分配与回收" class="headerlink" title="4. 内存的分配与回收"></a>4. 内存的分配与回收</h4><h5 id="连续分配方式"><a href="#连续分配方式" class="headerlink" title="连续分配方式"></a>连续分配方式</h5><ul>
<li>单一连续分配<br>无外部碎片、可采用覆盖技术<br>只能用于单用户、有内部碎片</li>
<li>固定分区分配<br>多道<br>分区大小相等。用于一台计算机控制多个相同对象<br>分区大小不等。多个较小，适量中分区，少量大分区<br>程序太大就放不进任何分区了<br>内存利用率低，会产生内部碎片<br>无外部碎片<br>有关管理通过<strong>分区说明表</strong>进行</li>
<li>动态分区分配<br>旗下的几种算法：</li>
</ul>
<ol>
<li>首次适应算法<br>空闲地址递增的顺序链接<br>具有最佳性能</li>
<li>最佳适应算法<br>容量递增方式链接</li>
<li>最坏适应算法<br>容量递减方式链接</li>
<li>邻近适应算法<br>首次适应的演变，在上次查找的位置开始查找</li>
</ol>
<h4 id="5-内存信息的共享与保护"><a href="#5-内存信息的共享与保护" class="headerlink" title="5. 内存信息的共享与保护"></a>5. 内存信息的共享与保护</h4><h5 id="常用的内存信息保护方法："><a href="#常用的内存信息保护方法：" class="headerlink" title="常用的内存信息保护方法："></a>常用的内存信息保护方法：</h5><ol>
<li>上下界保护法（硬件）</li>
<li>保护键法</li>
<li>界限寄存器与CPU的用户态或核心态工作方式相结合</li>
</ol>
<p>源程序转换为在内存中执行的程序步骤：</p>
<ol>
<li>编译</li>
<li>链接 逻辑地址——&gt;物理地址</li>
<li>装入</li>
</ol>
<h5 id="程序链接的三种方式："><a href="#程序链接的三种方式：" class="headerlink" title="程序链接的三种方式："></a>程序链接的三种方式：</h5><ol>
<li>静态链接</li>
<li>装入时动态链接</li>
<li>运行时动态链接</li>
</ol>
<h5 id="装入的的三种方法："><a href="#装入的的三种方法：" class="headerlink" title="装入的的三种方法："></a>装入的的三种方法：</h5><ol>
<li>绝对装入</li>
<li>可重定位装入</li>
<li>动态运行时装入</li>
</ol>
<h2 id="页式管理"><a href="#页式管理" class="headerlink" title="页式管理"></a>页式管理</h2><p>为了减少碎片以及为了只在内存存放那些反复利用的或即将执行的程序段与数据部分，而把那些不经常执行的程序段和数据存储在外存。<br>不会产生外部碎片</p>
<h3 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h3><p>每个进程平均产生半个块大小的内部碎片（页内碎片）<br>进程的虚拟空间被划分为若干个等长的页（Page）<br>每个页1～4K（旧）<br>内存空间按页的大小分为片或页面&#x2F;帧&#x2F;框（Page framework）<br>外存也以同样的单位划分，成为块（block）</p>
<h3 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h3><p>分为两部分<br>页号P——页内偏移量W</p>
<h3 id="页表"><a href="#页表" class="headerlink" title="页表"></a>页表</h3><p>记录页面在内存中对应的物理块号<br>一般存于内存中<br>页表由页表项<br>页表项的结构：页号——物理内存中的块号<br>页表项的第二部分与地址的第二部分共同组成物理地址<br>加入中断处理后的页表</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>页号</td>
<td>页面号</td>
<td>中断位</td>
<td>外存始址</td>
</tr>
</tbody></table>
<p>| 页号 | 页面号 | 中断位 | 外存始址 |<br>加入改变位后的页表<br>| 页号 | 页面号 | 中断位 | 外存始址 | 改变位 |</p>
<h3 id="计算过程"><a href="#计算过程" class="headerlink" title="计算过程"></a>计算过程</h3><p>页号P&#x3D;逻辑地址A&#x2F;页面大小L<br>页内偏移量W&#x3D;A%L<br>如果页号P&gt;&#x3D;页表长度M，产生越界中断<br>页表项地址&#x3D;页表始址F+页号P<em>页表项长度<br>页表长度一般指有多少页<br>页表项长度一般指页地址占多大的存储空间<br>物理地址E&#x3D;块内内容b</em>页面大小L+页内偏移量W<br><strong>注：</strong><br>页表项的确定：<br>n位逻辑地址空间对应的2^nB除以一页的大小mB<br>得到的u&#x3D;2^n&#x2F;m页，页表项以字节编址，因此页表项大于等于log(u)&#x2F;8</p>
<h3 id="快表"><a href="#快表" class="headerlink" title="快表"></a>快表</h3><p>在地址转换机构中添加一个具有并行查找能力的高速缓冲存储器。</p>
<h2 id="段式管理"><a href="#段式管理" class="headerlink" title="段式管理"></a>段式管理</h2><h3 id="分段"><a href="#分段" class="headerlink" title="分段"></a>分段</h3><p>按进程中的自然段划分逻辑空间<br>其逻辑地址由<strong>段号s——段内偏移量w</strong>组成<br>段内连续，段间不要求连续</p>
<h3 id="段表"><a href="#段表" class="headerlink" title="段表"></a>段表</h3><p>| 段号 | 段长 | 本段在主存中的地址 |<br>| 段号 | 始址 | 长度 | 存取方式 | 内外 | 访问位 |</p>
<h3 id="地址变换结构"><a href="#地址变换结构" class="headerlink" title="地址变换结构"></a>地址变换结构</h3><ul>
<li>逻辑地址A中前几位为段号S，后几位为段内偏移量W</li>
<li>比较段号S和段表长度M，if（S&gt;&#x3D;M）越界中断</li>
<li>段号S对应的段表项地址&#x3D;段表始址F+段号S*段表项长度</li>
<li>取出段表中该段的始址b，计算物理地址E&#x3D;b+W</li>
</ul>
<h3 id="段的共享与保护"><a href="#段的共享与保护" class="headerlink" title="段的共享与保护"></a>段的共享与保护</h3><p>都指向被共享的段的同一个物理副本。不能修改的代码成为纯代码或可重入代码（不属于临界资源）<br>保护方法一般有两种：</p>
<ol>
<li>存取控制</li>
<li>地址越界保护</li>
</ol>
<h2 id="段业式管理"><a href="#段业式管理" class="headerlink" title="段业式管理"></a>段业式管理</h2><p>| 段号 | 页号 | 页内相对地址(偏移量) |<br><strong>在一个进程中，段表只有一个，而页表可能有多个</strong></p>
<h2 id="虚拟内存管理"><a href="#虚拟内存管理" class="headerlink" title="虚拟内存管理"></a>虚拟内存管理</h2><h3 id="需要的支持"><a href="#需要的支持" class="headerlink" title="需要的支持"></a>需要的支持</h3><ol>
<li>页表机制（或段表机制），作为主要的数据结构</li>
<li>中断机制，当用户程序要访问的部分尚未调入内存时，产生中断</li>
<li>地址变换机构，逻辑地址到物理地址</li>
</ol>
<h3 id="请求页表机制"><a href="#请求页表机制" class="headerlink" title="请求页表机制"></a>请求页表机制</h3><p>页表项<br>| 页号 | 物理块号 | 状态位P | 访问字段A | 修改位M | 外存地址 |</p>
<ul>
<li>状态位P：用于指示是否调入内存</li>
<li>访问字段A：用于页面置换</li>
<li>修改位M：标识调入内存后是否被修改过</li>
<li>外存地址：支持该页在外存上的地址，通常是物理块号</li>
</ul>
<h3 id="缺页中断机构"><a href="#缺页中断机构" class="headerlink" title="缺页中断机构"></a>缺页中断机构</h3><p>缺页中断后，进程进入阻塞。<br>属于内部中断</p>
<h2 id="页面置换算法"><a href="#页面置换算法" class="headerlink" title="页面置换算法"></a>页面置换算法</h2><h3 id="最佳置换算法（OPT）"><a href="#最佳置换算法（OPT）" class="headerlink" title="最佳置换算法（OPT）"></a>最佳置换算法（OPT）</h3><p>淘汰一个最长时间内不再被访问的页<br>无法实现</p>
<h3 id="先进先出页面置换算法（FIFO）"><a href="#先进先出页面置换算法（FIFO）" class="headerlink" title="先进先出页面置换算法（FIFO）"></a>先进先出页面置换算法（FIFO）</h3><p>会产生所分配的物理块数增大而故障数不减反增的异常现象（Belady异常）<br>基于队列实现</p>
<h3 id="最近最久未使用置换算法"><a href="#最近最久未使用置换算法" class="headerlink" title="最近最久未使用置换算法"></a>最近最久未使用置换算法</h3><p>堆栈类算法</p>
<h3 id="时钟（clock）置换算法"><a href="#时钟（clock）置换算法" class="headerlink" title="时钟（clock）置换算法"></a>时钟（clock）置换算法</h3><p>每帧关联一个附加位（使用位）</p>
<h4 id="改进的clock算法："><a href="#改进的clock算法：" class="headerlink" title="改进的clock算法："></a>改进的clock算法：</h4><p>增加一个修改位<br>每帧有四种情况：</p>
<ol>
<li>最近未被访问，也未被修改（u&#x3D;0，m&#x3D;0）</li>
<li>最近被访问，但未被修改（u&#x3D;1,m&#x3D;0)</li>
<li>最近位被访问，但被修改 (u&#x3D;0,m&#x3D;1)</li>
<li>最近被访问，被修改 (u&#x3D;1,m&#x3D;1)<br>按以上顺序进行淘汰</li>
</ol>
<h2 id="页面分配策略"><a href="#页面分配策略" class="headerlink" title="页面分配策略"></a>页面分配策略</h2><h3 id="驻留集大小"><a href="#驻留集大小" class="headerlink" title="驻留集大小"></a>驻留集大小</h3><p>三种策略</p>
<ol>
<li>固定分配局部置换</li>
<li>可变分配全局置换</li>
<li>可变分配局部置换</li>
</ol>
<h3 id="调入的时机"><a href="#调入的时机" class="headerlink" title="调入的时机"></a>调入的时机</h3><ol>
<li>预调页策略</li>
<li>请求调页策略</li>
</ol>
<h3 id="从何处调页"><a href="#从何处调页" class="headerlink" title="从何处调页"></a>从何处调页</h3><p>请求分页系统的外存分为</p>
<ul>
<li>存放文件的文件区（连续分配方式）</li>
<li>存放对换页面的对换区 （离散分配方式） IO更快</li>
</ul>
<h4 id="调入时机"><a href="#调入时机" class="headerlink" title="调入时机"></a>调入时机</h4><ol>
<li>系统拥有足够的对换区空间：全部从对换区调入</li>
<li>系统缺少足够的对换区空间：凡不会被修改的文件直接从文件区调入，可能被修改的文件在换出时调入对换区，以后需要的时候直接从对换区调入</li>
<li>UNXI方式：与进程有关的放入文件区。运行过被换出的页面放在对换区。进程请求的共享页面若被其他进程调入内存，则无需再从对换区调入</li>
</ol>
<h2 id="抖动"><a href="#抖动" class="headerlink" title="抖动"></a>抖动</h2><p>频繁发生缺页中断（抖动）的原因：某个进程频繁访问的页面数目高于可用的物理页帧数。<br>虚拟内存技术可以在内存中保留更多的进程以提高系统效率。</p>
<h2 id="工作集"><a href="#工作集" class="headerlink" title="工作集"></a>工作集</h2><p>某段时间间隔内，进程要访问的页面集合。<br>工作集大小一般比工作集窗口小很多<br>分配给进程的物理块数（驻留集大小）大小要大于工作集大小</p>
<h2 id="文件的一些概念"><a href="#文件的一些概念" class="headerlink" title="文件的一些概念"></a>文件的一些概念</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>以计算机硬盘为载体的储存在计算机上的信息的集合。<br>计算机进行资源的调度和分配：进程<br>用户进行的输入、输出中的基本单位：文件</p>
<h3 id="文件的属性"><a href="#文件的属性" class="headerlink" title="文件的属性"></a>文件的属性</h3><ul>
<li>名称</li>
<li>标识符</li>
<li>类型</li>
<li>位置</li>
<li>大小</li>
<li>保护</li>
<li>时间</li>
</ul>
<h3 id="文件的基本操作"><a href="#文件的基本操作" class="headerlink" title="文件的基本操作"></a>文件的基本操作</h3><ul>
<li>创建文件</li>
<li>写文件</li>
<li>读文件</li>
<li>文件重定位（文件寻址）</li>
<li>删除文件</li>
<li>截断文件</li>
</ul>
<h3 id="文件的分类"><a href="#文件的分类" class="headerlink" title="文件的分类"></a>文件的分类</h3><h4 id="按性质和用途"><a href="#按性质和用途" class="headerlink" title="按性质和用途"></a>按性质和用途</h4><ul>
<li>系统文件</li>
<li>库文件</li>
<li>用户文件</li>
</ul>
<h4 id="按组织形式"><a href="#按组织形式" class="headerlink" title="按组织形式"></a>按组织形式</h4><ul>
<li>普通文件</li>
<li>目录文件</li>
<li>特殊文件</li>
</ul>
<h3 id="文件的打开与关闭"><a href="#文件的打开与关闭" class="headerlink" title="文件的打开与关闭"></a>文件的打开与关闭</h3><p>打开文件相关联的信息：</p>
<ul>
<li>文件指针 系统跟踪上次读写位置，作为当前文件位置的指针</li>
<li>文件打开计数 计数为零时，系统关闭文件，删除该条目</li>
<li>文件磁盘位置 </li>
<li>访问权限</li>
</ul>
<h2 id="文件的逻辑结构"><a href="#文件的逻辑结构" class="headerlink" title="文件的逻辑结构"></a>文件的逻辑结构</h2><h3 id="无文件结构（流式文件）"><a href="#无文件结构（流式文件）" class="headerlink" title="无文件结构（流式文件）"></a>无文件结构（流式文件）</h3><p>以字节Byte为单位</p>
<p>访问通过<strong>穷举搜索</strong>方式</p>
<p>源程序文件、目标代码文件等采用这种方式</p>
<h3 id="有文件结构（记录式文件）"><a href="#有文件结构（记录式文件）" class="headerlink" title="有文件结构（记录式文件）"></a>有文件结构（记录式文件）</h3><h4 id="顺序文件"><a href="#顺序文件" class="headerlink" title="顺序文件"></a>顺序文件</h4><p>记录定长</p>
<p>顺序存储或链表形式存储</p>
<p>顺序搜索</p>
<p>两种结构：</p>
<ul>
<li>串结构 记录之间的顺序与关键字无关 按时间先后排序</li>
<li>顺序结构 按关键字排序</li>
</ul>
<h4 id="索引文件"><a href="#索引文件" class="headerlink" title="索引文件"></a>索引文件</h4><p>第i条记录相对于第一条记录的地址 A&#x3D;i*L</p>
<p>索引表</p>
<table>
<thead>
<tr>
<th>索引号</th>
<th>长度m</th>
<th>指针ptr</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>m</td>
<td></td>
</tr>
</tbody></table>
<h4 id="索引顺序文件"><a href="#索引顺序文件" class="headerlink" title="索引顺序文件"></a>索引顺序文件</h4><p>将每组中的第一个文件放在索引表中</p>
<h4 id="直接文件或散列文件"><a href="#直接文件或散列文件" class="headerlink" title="直接文件或散列文件"></a>直接文件或散列文件</h4><p>没有顺序的特性</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><h3 id="文件控制块FCB"><a href="#文件控制块FCB" class="headerlink" title="文件控制块FCB"></a>文件控制块FCB</h3><p>FCB必须连续存放</p>
<p>FCB的有序集合称为文件目录</p>
<p>FCB包含的信息：</p>
<ol>
<li>基本信息</li>
<li>存取控制信息 文件存取权限等</li>
<li>使用信息 文件建立时间、修改时间</li>
</ol>
<h3 id="索引结点"><a href="#索引结点" class="headerlink" title="索引结点"></a>索引结点</h3><p>UNXI中的磁盘索引结点包含信息：</p>
<ol>
<li>文件主标识符 个人或小组</li>
<li>文件类型 普通文件、目录文件、特别文件</li>
<li>文件存取权限 </li>
<li>文件物理地址 13个地址项iaddr(0)~iaddr(12)</li>
<li>文件长度 以字节为单位</li>
<li>文件链接计数 </li>
<li>文件存取时间</li>
</ol>
<p>文件被打开时有增加了以下内容：</p>
<ul>
<li>索引结点编号 标识内存索引结点</li>
<li>状态 指示是否上锁或被修改</li>
<li>访问计数 </li>
<li>逻辑设备号</li>
<li>链接指针</li>
</ul>
<h3 id="目录结构-1"><a href="#目录结构-1" class="headerlink" title="目录结构"></a>目录结构</h3><p>所要执行的操作</p>
<ul>
<li>搜索 </li>
<li>创建文件</li>
<li>删除文件</li>
<li>显示目录</li>
<li>修改目录</li>
</ul>
<h4 id="单级目录结构"><a href="#单级目录结构" class="headerlink" title="单级目录结构"></a>单级目录结构</h4><p>一个文件占一个目录</p>
<h4 id="两级目录结构"><a href="#两级目录结构" class="headerlink" title="两级目录结构"></a>两级目录结构</h4><h5 id="主文件目录MFD"><a href="#主文件目录MFD" class="headerlink" title="主文件目录MFD"></a>主文件目录MFD</h5><p>记录用户文件目录所在位置和用户名</p>
<h5 id="用户文件目录UFD"><a href="#用户文件目录UFD" class="headerlink" title="用户文件目录UFD"></a>用户文件目录UFD</h5><p>用户文件的FCB</p>
<h4 id="多级目录结构"><a href="#多级目录结构" class="headerlink" title="多级目录结构"></a>多级目录结构</h4><p>树形目录结构</p>
<p>从根目录出发的路径是绝对路径</p>
<p><strong>当前目录</strong> ：基于当前工作目录（相对路径）</p>
<p>方便对文件分类</p>
<h4 id="无环图目录结构"><a href="#无环图目录结构" class="headerlink" title="无环图目录结构"></a>无环图目录结构</h4><p>树形目录结构的基础上增加了一些指向同一结点的有向边</p>
<p>实现文件共享</p>
]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>操作系统</tag>
        <tag>进程</tag>
      </tags>
  </entry>
  <entry>
    <title>记一个最基础的机器学习</title>
    <url>/2023/07/03/%E8%AE%B0%E4%B8%80%E4%B8%AA%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="Titanic"><a href="#Titanic" class="headerlink" title="Titanic"></a>Titanic</h1><p>作为Kaggle中最经典的机器学习入门算法，总结了机器学习的思路</p>
<h2 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Input data files are available in the read-only &quot;../input/&quot; directory</span></span><br><span class="line"><span class="comment"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;datasets/titanic&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>datasets/titanic\gender_submission.csv
datasets/titanic\test.csv
datasets/titanic\train.csv
</code></pre>
<h2 id="简单看一眼数据"><a href="#简单看一眼数据" class="headerlink" title="简单看一眼数据"></a>简单看一眼数据</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_data = pd.read_csv(<span class="string">&quot;datasets/titanic/train.csv&quot;</span>)</span><br><span class="line">train_data.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">test_data = pd.read_csv(<span class="string">&quot;datasets/titanic/test.csv&quot;</span>)</span><br><span class="line">test_data.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>892</td>
      <td>3</td>
      <td>Kelly, Mr. James</td>
      <td>male</td>
      <td>34.5</td>
      <td>0</td>
      <td>0</td>
      <td>330911</td>
      <td>7.8292</td>
      <td>NaN</td>
      <td>Q</td>
    </tr>
    <tr>
      <th>1</th>
      <td>893</td>
      <td>3</td>
      <td>Wilkes, Mrs. James (Ellen Needs)</td>
      <td>female</td>
      <td>47.0</td>
      <td>1</td>
      <td>0</td>
      <td>363272</td>
      <td>7.0000</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>2</th>
      <td>894</td>
      <td>2</td>
      <td>Myles, Mr. Thomas Francis</td>
      <td>male</td>
      <td>62.0</td>
      <td>0</td>
      <td>0</td>
      <td>240276</td>
      <td>9.6875</td>
      <td>NaN</td>
      <td>Q</td>
    </tr>
    <tr>
      <th>3</th>
      <td>895</td>
      <td>3</td>
      <td>Wirz, Mr. Albert</td>
      <td>male</td>
      <td>27.0</td>
      <td>0</td>
      <td>0</td>
      <td>315154</td>
      <td>8.6625</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>896</td>
      <td>3</td>
      <td>Hirvonen, Mrs. Alexander (Helga E Lindqvist)</td>
      <td>female</td>
      <td>22.0</td>
      <td>1</td>
      <td>1</td>
      <td>3101298</td>
      <td>12.2875</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="用原始的方法看一下性别对幸存的影响"><a href="#用原始的方法看一下性别对幸存的影响" class="headerlink" title="用原始的方法看一下性别对幸存的影响"></a>用原始的方法看一下性别对幸存的影响</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">women = train_data.loc[train_data.Sex == <span class="string">&#x27;female&#x27;</span>][<span class="string">&quot;Survived&quot;</span>]</span><br><span class="line">rate_women = <span class="built_in">sum</span>(women)/<span class="built_in">len</span>(women)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;% of women who survived:&quot;</span>, rate_women)</span><br></pre></td></tr></table></figure>

<pre><code>% of women who survived: 0.7420382165605095
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">men = train_data.loc[train_data.Sex == <span class="string">&#x27;male&#x27;</span>][<span class="string">&quot;Survived&quot;</span>]</span><br><span class="line">rate_men = <span class="built_in">sum</span>(men)/<span class="built_in">len</span>(men)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;% of men who survived:&quot;</span>, rate_men)</span><br></pre></td></tr></table></figure>

<pre><code>% of men who survived: 0.18890814558058924
</code></pre>
<h2 id="使用决策树的方式对数据进行预测"><a href="#使用决策树的方式对数据进行预测" class="headerlink" title="使用决策树的方式对数据进行预测"></a>使用决策树的方式对数据进行预测</h2><p>原理如下</p>
<p><img src="/pic/%E8%AE%B0%E4%B8%80%E4%B8%AA%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/AC9Bq63.png" alt="image.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"></span><br><span class="line">y = train_data[<span class="string">&quot;Survived&quot;</span>]</span><br><span class="line"></span><br><span class="line">features = [<span class="string">&quot;Pclass&quot;</span>, <span class="string">&quot;Sex&quot;</span>, <span class="string">&quot;SibSp&quot;</span>, <span class="string">&quot;Parch&quot;</span>]</span><br><span class="line">X = pd.get_dummies(train_data[features])</span><br><span class="line">X_test = pd.get_dummies(test_data[features])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建了100课随机树</span></span><br><span class="line">model = RandomForestClassifier(n_estimators=<span class="number">100</span>, max_depth=<span class="number">5</span>, random_state=<span class="number">1</span>)</span><br><span class="line">model.fit(X, y)</span><br><span class="line">predictions = model.predict(X_test)</span><br><span class="line"></span><br><span class="line">output = pd.DataFrame(&#123;<span class="string">&#x27;PassengerId&#x27;</span>: test_data.PassengerId, <span class="string">&#x27;Survived&#x27;</span>: predictions&#125;)</span><br><span class="line">output.to_csv(<span class="string">&#x27;submission.csv&#x27;</span>, index=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Your submission was successfully saved!&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Your submission was successfully saved!
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_data.describe(include=<span class="string">&#x27;all&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891</td>
      <td>891</td>
      <td>714.000000</td>
      <td>891.000000</td>
      <td>891.000000</td>
      <td>891</td>
      <td>891.000000</td>
      <td>204</td>
      <td>889</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>891</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>681</td>
      <td>NaN</td>
      <td>147</td>
      <td>3</td>
    </tr>
    <tr>
      <th>top</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>347082</td>
      <td>NaN</td>
      <td>B96 B98</td>
      <td>S</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>577</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7</td>
      <td>NaN</td>
      <td>4</td>
      <td>644</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>446.000000</td>
      <td>0.383838</td>
      <td>2.308642</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.699118</td>
      <td>0.523008</td>
      <td>0.381594</td>
      <td>NaN</td>
      <td>32.204208</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>std</th>
      <td>257.353842</td>
      <td>0.486592</td>
      <td>0.836071</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>14.526497</td>
      <td>1.102743</td>
      <td>0.806057</td>
      <td>NaN</td>
      <td>49.693429</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.420000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>223.500000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>20.125000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>7.910400</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>446.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>28.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>14.454200</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>668.500000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>38.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>31.000000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>max</th>
      <td>891.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>80.000000</td>
      <td>8.000000</td>
      <td>6.000000</td>
      <td>NaN</td>
      <td>512.329200</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
]]></content>
      <categories>
        <category>机器学习</category>
      </categories>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
  <entry>
    <title>记一个简单的人脸识别</title>
    <url>/2023/07/15/%E8%AE%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/</url>
    <content><![CDATA[<p>导入所需的库文件：在Python项目中，使用以下代码导入OpenCV库</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br></pre></td></tr></table></figure>

<p>加载人脸识别模型：将预训练好的人脸识别模型（如Haar级联分类器）下载到本地并加载它</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">face_cascade = cv2.CascadeClassifier(<span class="string">&#x27;C:/shyee/opencv/sources/data/haarcascades/haarcascade_frontalface_default.xml&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>调用摄像头并进行实时人脸识别：使用OpenCV调用电脑摄像头，并在每个视频帧上进行人脸检测和识别。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">video_capture = cv2.VideoCapture(<span class="number">0</span>)  <span class="comment"># 0代表默认的摄像头设备</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 读取视频帧</span></span><br><span class="line">    ret, frame = video_capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将视频帧转换为灰度图像</span></span><br><span class="line">    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 在灰度图像上进行人脸检测</span></span><br><span class="line">    faces = face_cascade.detectMultiScale(gray, scaleFactor=<span class="number">1.1</span>, minNeighbors=<span class="number">5</span>, minSize=(<span class="number">30</span>, <span class="number">30</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 在视频帧上标记出人脸</span></span><br><span class="line">    <span class="keyword">for</span> (x, y, w, h) <span class="keyword">in</span> faces:</span><br><span class="line">        cv2.rectangle(frame, (x, y), (x+w, y+h), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 显示实时视频帧</span></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;Video&#x27;</span>, frame)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 按下&#x27;q&#x27;键退出循环</span></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 释放摄像头资源</span></span><br><span class="line">video_capture.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>机器学习</category>
      </categories>
      <tags>
        <tag>人脸识别</tag>
        <tag>目标检测</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title>面向对象方法学</title>
    <url>/2021/03/12/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E5%AD%A6/</url>
    <content><![CDATA[<h2 id="面向对象方法学方程式"><a href="#面向对象方法学方程式" class="headerlink" title="面向对象方法学方程式"></a>面向对象方法学方程式</h2><p>对象 + 类 + 继承 + 消息</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>对象：具有相同状态的一组操作的集合。对属性值和操作的封装。</p>
<p>类：对具有相同数据和相同操作的一组相似对象的定义。</p>
<p>类是一个支持继承的抽象数据类型，对象是类的实例．</p>
<p>实例：由某个特定类所描述的具体对象</p>
<p>消息：要求某对象执行在定义它的类中所定义的某个操作的规格说明。 </p>
<p>三部分：</p>
<ul>
<li>接收消息的对象</li>
<li>消息名</li>
<li>0 或多个变元</li>
</ul>
<p>封装性：数据和操作集中起来放在对象内部。</p>
<p>继承：子类自动共享基类中定义的数据和方法的机制。</p>
<ul>
<li>提高程序可复用性(接口设计的复用，不是代码实现复用)</li>
<li>派生类的功能可被基类指针引用，提高程序可扩充性和可维护性。</li>
</ul>
<p>多态性：在类等级不同层次可共享一个方法名，不同层次每个类按各自</p>
<p>需要实现这个方法。</p>
<p>重载：函数重载；运算符重载</p>
<h3 id="与传统方法比较"><a href="#与传统方法比较" class="headerlink" title="与传统方法比较"></a>与传统方法比较</h3><p>传统方法：系统是过程的集合；</p>
<p>面向对象方法：系统是交互对象的集合。</p>
<h3 id="面向对象优点"><a href="#面向对象优点" class="headerlink" title="面向对象优点"></a>面向对象优点</h3><p>（1）与人类习惯思维方法一致</p>
<p>（2）稳定性好</p>
<p>（3）可重用性好</p>
<p>（4）易开发大型软件产品</p>
<p>（5）可维护性好</p>
<h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h2><p>全称为Unified Modeling Language 目前最流行的面向对象建模语</p>
<h3 id="必要性"><a href="#必要性" class="headerlink" title="必要性"></a>必要性</h3><p>捕获商业流程</p>
<p>促进沟通</p>
<p>管理复杂性</p>
<p>定义软件构架</p>
<p>促进软件复用</p>
<h3 id="面向对象方法的发展"><a href="#面向对象方法的发展" class="headerlink" title="面向对象方法的发展"></a>面向对象方法的发展</h3><p>UML 是通用可视化建模语言，用于对软件进行描述、可视化处理、构造和建立软件系统制品的文档。 </p>
<p>UML 适用于各种软件开发方法、软件生命周期的各个阶段、各种应用领域以及各种开发工具，是总结以往建模技术经验并吸收当今优秀成果的标准建模方法。</p>
<h3 id="UML-的形成、定义、优势"><a href="#UML-的形成、定义、优势" class="headerlink" title="UML 的形成、定义、优势"></a>UML 的形成、定义、优势</h3><p>1997 年 UML1.1 被对象管理组织 OMG 确定为标准建模语言是软件工程领域最重要的、具有划时代重大意义的事件。 UML 是一种定义良好、易于表达、功能强大且普遍适用的标准的图形化建模语言 , 用它可以简明、准确地为目标系统建立模型 。它融入了软件工程领域的新思想、新方法和新技术。它的作用域不限于支持面向对象的分析与设计，还支持从需求分析开始的软件开发的全过程。</p>
<h3 id="UML-组成"><a href="#UML-组成" class="headerlink" title="UML 组成"></a>UML 组成</h3><p>由视图、图、模型元素和通用机制几部分组成。</p>
<p>视图：从不同角度描述系统，建立多个模型。</p>
<p>图： 一个视图由多张图组成， UML 定义 9 种图。有机结合可形成任何形式视图。</p>
<p>模型元素：图中使用概念（用例、类、对象），统称模型元素。在图中用视图元素（图形符号）表示。</p>
<p>通用机制：通过通用机制为图通过附加信息，如注释、标签值等。</p>
<h3 id="用例视图"><a href="#用例视图" class="headerlink" title="用例视图"></a>用例视图</h3><p>定义了系统的外部行为，是最终用户、分析人员和测试人员所关心.该视图定义了系统的需求，因此约束了描述系统设计和构造的某些方面的所有其他视图。</p>
<p>主要元素:用例和执行者。</p>
<p>执行者:描述与系统交互的人或物，代表外部实体(如用户、硬件设备或其它软件系统)</p>
<h3 id="设计视图"><a href="#设计视图" class="headerlink" title="设计视图"></a>设计视图</h3><p>描述的是支持用例视图中规定的功能需求的逻辑结构。它由程序组件的定义，主要是类、类所包含的数据、类的行为以及类之间交互的说明组成。</p>
<h3 id="实现视图"><a href="#实现视图" class="headerlink" title="实现视图"></a>实现视图</h3><p>描述构造系统的物理组件，这些组件包括如可执行文件、代码库和数据库等内容.这个视图中包含的信息与配置管理和系统集成这类活动有关.</p>
<h3 id="如何建立用例模型"><a href="#如何建立用例模型" class="headerlink" title="如何建立用例模型"></a>如何建立用例模型</h3><h4 id="1、发现执行者"><a href="#1、发现执行者" class="headerlink" title="1、发现执行者"></a>1、发现执行者</h4><p>发现执行者的原则、实例</p>
<p>谁使用该系统；</p>
<p>谁改变系统的数据；</p>
<p>谁从系统获取信息；</p>
<p>谁需要系统的支持以完成日常工作任务</p>
<p>谁负责维护、管理并保持系统正常运行</p>
<p>系统需要应付那些硬件设各；</p>
<p>系统需要和那些外部系统交互；</p>
<p>谁对系统运行产生的结果感兴趣。</p>
<h4 id="2、发现用例"><a href="#2、发现用例" class="headerlink" title="2、发现用例"></a>2、发现用例</h4><p>向执行者提出问题获取用例：</p>
<p>执行者需获取何种功能，需要作什么；</p>
<p>执行者需读取、产生、删除、修改或存储系统中某种信息</p>
<p>系统发生事件和执行者间是否需要通信；</p>
<h4 id="3、确定用例间关系"><a href="#3、确定用例间关系" class="headerlink" title="3、确定用例间关系"></a>3、确定用例间关系</h4><p>关系包括四种：泛化、扩展、包含、使用</p>
<p>泛化关系：一般与特殊关系。</p>
<p>扩展关系：允许一个使用案例扩展另一案例提供的功能。</p>
<p>包含关系：一个基本 UseCase 行为包含另一个 UseCase 行为。</p>
<p>使用关系：某个用例使用另外一个用例的功能。</p>
]]></content>
      <categories>
        <category>计算机</category>
      </categories>
      <tags>
        <tag>对象</tag>
        <tag>类</tag>
        <tag>继承</tag>
        <tag>软件工程</tag>
      </tags>
  </entry>
  <entry>
    <title>需求分析学习笔记-1</title>
    <url>/2020/03/17/%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/</url>
    <content><![CDATA[<h2 id="3-3需求分析案例"><a href="#3-3需求分析案例" class="headerlink" title="3-3需求分析案例"></a>3-3需求分析案例</h2><p>“Android点餐系统”项目案例需求获取资料介绍如下：</p>
<h3 id="1-目标和范围"><a href="#1-目标和范围" class="headerlink" title="(1)目标和范围"></a>(1)目标和范围</h3><p>本软件主要作用是为点餐者提供一套可以在移动设备(手机、平板)上运行的点餐软件。 系统分为前台和后台,前台是点餐者使用的，点餐者可以在移动设备上查看餐馆所有的菜目、价格、简单的菜品介绍以及餐馆的特色菜介绍，同时点餐者还可以查看、取消自己已经挑选的菜品，最后上传订单。后台是管理员使用的，管理员可以在后进行订单管理、用户管理、菜谱管理等。</p>
<h3 id="2-系统角色和职责"><a href="#2-系统角色和职责" class="headerlink" title="(2)系统角色和职责"></a>(2)系统角色和职责</h3><p>系统的使用人群包括两类管理员:系统的维护，订单管理、菜品的增删。</p>
<p>普通用户:注册账号，点餐、座位预订。</p>
<h3 id="3-系统处理功能要求"><a href="#3-系统处理功能要求" class="headerlink" title="(3)系统处理功能要求"></a>(3)系统处理功能要求</h3><p>查询菜品<br>设置菜品<br>顾客下单<br>订单处理<br>数据处理</p>
<h3 id="4-系统其他要求"><a href="#4-系统其他要求" class="headerlink" title="(4)系统其他要求"></a>(4)系统其他要求</h3><p>本系统客户端要求符合大众操作习惯，与网上其他的Android系统App操作方式保持基本一致。餐馆要求每笔订单交易误差不得超过工角，每天交易额的误差不得超过100元。5年内价位在500元以上的Android手机都可以流畅运行该系统。</p>
<h2 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h2><p>工作的输入是需求定义阶段产生的业务事件列表和报表列表，输出的是领域模型和用例模型。</p>
<p>针对每个业务事件进行业务流程分析、业务实体分析和用例分析;</p>
<p>针对每类报表进行业务实体分析和用例分析。</p>
<h3 id="业务流程分析"><a href="#业务流程分析" class="headerlink" title="业务流程分析"></a>业务流程分析</h3><p>在分析过程中，要注意抓住核心业务和主要活动点、部门内以及部门之间的衔接，工作中的烦琐及反复的环节，成本高、效率低、时间长的环节以及任务转手次数较多的环节。</p>
<p>“Android点餐系统”中的主要业务就是点餐，我们要围绕点餐的主业务展开分析。</p>
<h4 id="业务流程分析的过程中的三个关键的要点"><a href="#业务流程分析的过程中的三个关键的要点" class="headerlink" title="业务流程分析的过程中的三个关键的要点"></a>业务流程分析的过程中的三个关键的要点</h4><p>一是理解流程的层次性，其中包含三大层次，有组织级，部门级<br>岗位级;</p>
<p>二是了解流程的类型，包括生产性流程，管理性流程和支持性流<br>程;</p>
<p>三是掌握以业务事件识别、寻找流程的技巧。</p>
<h4 id="产物"><a href="#产物" class="headerlink" title="产物"></a>产物</h4><p>跨职责流程图<br>活动图<br>数据流图</p>
<h4 id="基于Android平台的点餐系统的总体流程包括的步骤有"><a href="#基于Android平台的点餐系统的总体流程包括的步骤有" class="headerlink" title="基于Android平台的点餐系统的总体流程包括的步骤有"></a>基于Android平台的点餐系统的总体流程包括的步骤有</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">(1)顾客在智能手机上登录点餐系统客户端后，自动进入</span><br><span class="line">菜谱界面，查看菜谱;</span><br><span class="line">(2)顾客选择菜品进行下单;</span><br><span class="line">(3)顾客选择菜品数量，若需在餐厅用餐还需选择座位号;</span><br><span class="line">(4)选择完成并确定后，提交订单;</span><br><span class="line">(5)订单提交后，订单数据会上传到服务器;</span><br><span class="line">(6)订单提交后，顾客可以在客户端查看自己的订单情况;</span><br><span class="line">(7)在管理员未确认订单之前，顾客可以对订单进行修改或取消操作;</span><br><span class="line">(8)管理员登录点餐系统服务器端，对用户订单进行确认;</span><br></pre></td></tr></table></figure>

<h4 id="跨职责流程图的应用"><a href="#跨职责流程图的应用" class="headerlink" title="跨职责流程图的应用"></a>跨职责流程图的应用</h4><p>跨指责流程图绘制要点是在进行业务流程分析时，采用的关键入手点为部门级的业务流程，也就是从业务事件出发，分析该业务事件会触发的一系列活动。要真正保障绘制出来的跨职责流程图是真实、有效的，就必须强化用户的参与。</p>
<p>我们应先找到业务事件的负责人，然后通过设问的方式，让他描述响应该业务事件所进行的活动,说明活动的执行岗位以及它们之间的关系、数据传递。</p>
<p>(三)活动图<br>活动图是一种表述过程机理、业务过程以及工作流的技术。它可以用来对业务过程、工作流建模，也可以对用例实现甚至是程序实现来建模。<br>活动图的主要元素包含<strong>初始节点</strong>和<strong>活动终点</strong>、<strong>活动节点转换</strong>、<strong>分支与监护条件</strong>、<strong>分岔</strong>与<strong>汇合</strong>等。</p>
<h4 id="数据流程图"><a href="#数据流程图" class="headerlink" title="数据流程图"></a>数据流程图</h4><p>点餐系统由客户端和服务器端两部分组成，客户端主要负责点菜，服务器端负责信息管理。</p>
<h5 id="客户端的基本流程"><a href="#客户端的基本流程" class="headerlink" title="客户端的基本流程"></a>客户端的基本流程</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">(1)用户输入正确的登录信息进入系统，若登录信息不对，系统提示重新输入登录系统，直到用户成功登录系统，新用户要先进行注册并注册成功才可以登录系统。</span><br><span class="line">(2)用户成功登录系统后，可先查看菜品信息，选择菜品及数量，若需在餐馆用餐还需选择座位，完成后进行下单操作。</span><br><span class="line">(3)用户可以查看自己的订单，在订单未确定的情况下，可以修改或取消订单。</span><br></pre></td></tr></table></figure>

<h5 id="服务器端的基本流程"><a href="#服务器端的基本流程" class="headerlink" title="服务器端的基本流程"></a>服务器端的基本流程</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">(1)管理员输入正确的登录信息进入系统，若登录信息不对，系统会提示重新输入登录信息，直到管理员成功登录系统。</span><br><span class="line">(2)管理员成功进入系统后，可进行各类信息的管理，如菜品信息管理、用户信息管理、订单管理等，其实就是对上述信息进行添加、删除及修改操作。</span><br></pre></td></tr></table></figure>

<h3 id="业务实体分析"><a href="#业务实体分析" class="headerlink" title="业务实体分析"></a>业务实体分析</h3><p>要了解这个问题域中有哪些业务实体，它们之间存在什么样的逻辑关系、数量关系，以及有什么相应的结构规则。</p>
<h4 id="1-业务实体分析任务概述"><a href="#1-业务实体分析任务概述" class="headerlink" title="1.业务实体分析任务概述"></a>1.业务实体分析任务概述</h4><p>“自底向上”</p>
<p>识别出业务实体<br>确定实体间关系<br>定义实体关健属性</p>
<p>业务实体分析的产物有两种可选的模型，包括类图和E&#x2F;R模型也叫实体关系图。</p>
<h4 id="2-类图"><a href="#2-类图" class="headerlink" title="2.类图"></a>2.类图</h4><h5 id="根据边界类、控制类、实体类帮助分析系统中的类"><a href="#根据边界类、控制类、实体类帮助分析系统中的类" class="headerlink" title="根据边界类、控制类、实体类帮助分析系统中的类"></a>根据边界类、控制类、实体类帮助分析系统中的类</h5><p>(1)领域建模方法</p>
<p>领域建模时，其工作主要就是识别标识类、明确类之间的逻辑关系和数量关系以及添加重要的结构规则三个方面。</p>
<p>(2)建立类之间的关联</p>
<p>(3)添加类的重要属性</p>
<h5 id="分析模型中有3种十分有用的构造型即实体类、控制类和边界类。"><a href="#分析模型中有3种十分有用的构造型即实体类、控制类和边界类。" class="headerlink" title="分析模型中有3种十分有用的构造型即实体类、控制类和边界类。"></a>分析模型中有3种十分有用的构造型即实体类、控制类和边界类。</h5><p>实体类:即实体对象的抽象，通常来自域模型也就是现实世界，用来描述具体的实体，通常映射到数据库表格与文件中;</p>
<p>控制类:即控制对象的抽象，主要用来体现应用程序的执行逻辑，将其抽象出来，可以使得变化不影响用户界面和数据库中的表;</p>
<p>边界类:即边界对象的抽象，通常是用来完成参与者(用户、外部系统)与系统之间交互的对象，例如From、对话框、菜单、接口等。</p>
<h4 id="3-E-x2F-R图应用基础"><a href="#3-E-x2F-R图应用基础" class="headerlink" title="3.E&#x2F;R图应用基础"></a>3.E&#x2F;R图应用基础</h4><p>数据建模过程的优势体现在能够更好地与后续的数据库设计<br>结合;</p>
<p>缺点是语义相对于类图来说更弱一些，同时对面向对象开发的指导作用相对差- - .些。</p>
<p>概念模型是需求人员的视图，等价于现在出镜率很高的领域模型;</p>
<p>逻辑模型是开发人员(包括设计人员)的视图，它约等于面向对象分析与设计方法中提到的“分析模型”。</p>
<h5 id="概念模型与逻辑模型具体区别在于两个方面"><a href="#概念模型与逻辑模型具体区别在于两个方面" class="headerlink" title="概念模型与逻辑模型具体区别在于两个方面"></a>概念模型与逻辑模型具体区别在于两个方面</h5><p>完整性:逻辑模型在完整性上要比概念模型更胜筹，通过在需求细化、设计的阶段会对类的属性进行细化，会补充-些新的类;</p>
<p>加工方式:概念模型的原则是忠于问题域，而逻辑模型则会从实现的便利性和需要的角度进行细化，具体来说可能会对一些类进行分拆、合并。</p>
]]></content>
      <categories>
        <category>需求分析</category>
      </categories>
      <tags>
        <tag>需求分析</tag>
      </tags>
  </entry>
  <entry>
    <title>项目预算</title>
    <url>/2021/03/12/%E9%A1%B9%E7%9B%AE%E9%A2%84%E7%AE%97/</url>
    <content><![CDATA[<h1 id="项目预算"><a href="#项目预算" class="headerlink" title="项目预算"></a>项目预算</h1><h2 id="编制项目的预算"><a href="#编制项目的预算" class="headerlink" title="编制项目的预算"></a>编制项目的预算</h2><p>项目的预算是用来记录和控制项目的花费情况的。是编制项目可行性的重要组成部分。它包括项目的成本和投资回报率。</p>
<p>(1)编制预算的基础</p>
<p>(2)自底向上成本估算法</p>
<p>(3)项目完成时的预算</p>
<p>(4)项目的零基预算</p>
<h3 id="预算编制"><a href="#预算编制" class="headerlink" title="预算编制"></a>预算编制</h3><p>预算对项目的前进方向起到财务向导的作用</p>
<p>编制预算，首先要把注意力集中在项目的范围上制定预算计划，把项目分解成若千个步骤和阶段( WBS Work Break down Structure )</p>
<p>预算会得到批准-执行项目</p>
<p>预算会被削减-缩小项目</p>
<p>预算会被拒绝-放弃项目</p>
<h3 id="自底向上的成本估算法"><a href="#自底向上的成本估算法" class="headerlink" title="自底向上的成本估算法"></a>自底向上的成本估算法</h3><h4 id="沿着从项目的底层和根源到项目的交付成果这个方向来制定预算的方法"><a href="#沿着从项目的底层和根源到项目的交付成果这个方向来制定预算的方法" class="headerlink" title="沿着从项目的底层和根源到项目的交付成果这个方向来制定预算的方法"></a>沿着从项目的底层和根源到项目的交付成果这个方向来制定预算的方法</h4><p>把项目分成若千个阶段，计算每个阶段的成本</p>
<p>注意整合阶段，考虑停工、拖延、和其他工作上的投入</p>
<p>考虑完成项目每个阶段所需要的满负荷工作量(小时数)</p>
<p>考虑专业服务的成本(如聘请专家等) </p>
<p>考虑设备、产品、服务、人员的成本</p>
<p>考虑生产成本，如打字、复印、用户手册、网页设计及开发费用等</p>
<p>注意:</p>
<p>时间是一个变动因素，价格会随时间而变动</p>
<p>设备、产品、服务、人员的成本会随时间而变动</p>
<h4 id="预算允许的改变"><a href="#预算允许的改变" class="headerlink" title="预算允许的改变"></a>预算允许的改变</h4><p>把项目分成若千个阶段，计算每个阶段的成本</p>
<p>把每个阶段最好和最坏的情况分解成各个可能的价格波动情况，从而计算每个阶段的平均预算值</p>
<p>估算中有些情况根本不会达到最差的情况，甚至不会差到平均水平，有些则会达到最坏情况，甚至还差</p>
<ul>
<li>可以根据以往的经验</li>
<li>可以借鉴别人的经验</li>
<li>供应商的固定报价</li>
<li>预算部门门的标准成本</li>
</ul>
<h4 id="预算偏差容忍度"><a href="#预算偏差容忍度" class="headerlink" title="预算偏差容忍度"></a>预算偏差容忍度</h4><p>与管理层协商预算偏差容忍度，几个或十几个百分点</p>
<h3 id="项目完成时的预算"><a href="#项目完成时的预算" class="headerlink" title="项目完成时的预算"></a>项目完成时的预算</h3><p>项目完成时的预算就是项目各个阶段的预算的总和。是整个项目预算的保障。</p>
<p>项目经理把项目分成不同的阶段，每个阶段都有自己的预算</p>
<p>优点是:</p>
<ul>
<li>公司不需要在项目的-开始就把预算的全部资金都分配下去，而是只分配项目启动阶段的资金</li>
<li>公司可以可以根据需要在不同的项目之间调用资金，加快资金的利用率</li>
<li>它能够使参与项目的人通过项目各个阶段的成本来把握项目，从而得到整个项目的成本</li>
</ul>
<h3 id="项目的零基预算"><a href="#项目的零基预算" class="headerlink" title="项目的零基预算"></a>项目的零基预算</h3><p>总是从零开始进行的项目预算方法，它不是在其他类似的项,目的基础上把项目一项项加入的方法。如:在去年的成本之上增加20%的预算方法。</p>
<p>它迫使项目经理计算出项目的每个阶段的实际成本</p>
<p>好像在做重复的工作，但它迫使你关注实际成本的变化</p>
<p>使项目经理产生一种责任感</p>
<p>在去年的成本之上增加百分比的预算方法的缺点:</p>
<ul>
<li>容易漏项</li>
<li>容易忽略成本随时间的变化</li>
<li>项目的预算不够准确</li>
</ul>
<h2 id="项目支出的确认与跟踪"><a href="#项目支出的确认与跟踪" class="headerlink" title="项目支出的确认与跟踪"></a>项目支出的确认与跟踪</h2><p>(1 ）确定项目的支出</p>
<p>(2）跟踪项目的支出</p>
<p>(3）防止项目失控</p>
<h3 id="确定项目的支出"><a href="#确定项目的支出" class="headerlink" title="确定项目的支出"></a>确定项目的支出</h3><p>要确定项目预算的支出，必须考虑:</p>
<p>员工个人、员工的组织形式、硬件花费、项目范围、时间等</p>
<p>要创建准确的项目预算，周密的计划和丰富的经验</p>
<p>物品的成本</p>
<ul>
<li>硬件的使用方式决定物品的成本</li>
<li>自己购买组装，或由供应商组装</li>
<li>需要多少时间、有哪些工作、工作质量如何?</li>
</ul>
<p>还有别的选择吗?</p>
<p>软件许可证-也影响成本</p>
<ul>
<li>每个站点、每个连接、每个服务器、按使用次数的证书</li>
</ul>
<p>外包方式-影响成本</p>
<ul>
<li>节约成本吗?增加效率吗?信誉如何?等</li>
</ul>
<p>估算工作时数</p>
<ul>
<li>项目中最昂贵的就是时间</li>
<li>按项目任务计算每个人的时间和费用</li>
<li>统计所有人的时间和费用</li>
</ul>
<h3 id="跟踪项目的支出"><a href="#跟踪项目的支出" class="headerlink" title="跟踪项目的支出"></a>跟踪项目的支出</h3><p>千万不要随便说“好吧”</p>
<ul>
<li>供应商会给你一些好处，再让你增加一些成本</li>
<li>每一部分增加一点成本，就会造成阶段成本的增加</li>
<li>每个阶段成本的增加就会造成项目的大幅度增加</li>
<li>千万别购买与项目无关的东西</li>
<li>千万别贪便宜</li>
</ul>
<p>做记录表，记录每次购买的东西</p>
<p>检查购买是否符合项目计划，项目预算</p>
<p>可以用MS Excel或MS project来跟踪</p>
<p>跟踪的内容有:</p>
<ul>
<li>工作时间:团队成员的工作时间，供应商的工作时间，加班时间</li>
<li>购买的物品:所有购买的软件、硬件、工具和其他办公用品，包括用现金支付的小东西，如皮萨饼，晚餐等</li>
<li>软件许可证:各种证件的种类、数量和价格</li>
<li>工作站和服务器</li>
<li>各种咨询服务、讲座、培训、书籍等费用</li>
</ul>
<h3 id="防止项目失控"><a href="#防止项目失控" class="headerlink" title="防止项目失控"></a>防止项目失控</h3><p>失控的项目的特点</p>
<ul>
<li>项目范围增加，功能扩大</li>
<li>时间失控，预算失控</li>
<li>信誉或失业严重失控</li>
</ul>
<p>造成项目失控的原因:</p>
<ul>
<li>缺乏周密的计划:在项目的各个阶段缺乏周密的计划</li>
<li>缺乏项目视图:没有给项目确定一个清楚明确的视图</li>
<li>项目范围的扩大:管理层和别的部门不断给项目增加要求</li>
<li>缺乏领导:项目的发展沿着非正确的方向前进，没有好好地领导项目的发展</li>
</ul>
<p>如何防止项目的失控:</p>
<ul>
<li>制定周密的计划，并严格按着计划执行</li>
<li>清楚项目视图，给项目确定一个清楚明确的视图</li>
<li>限制项目范围的扩大，若非扩大不可，则应改变计划、预算</li>
<li>加强项目的领导</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>千万不要轻易说”好吧”</p>
]]></content>
      <categories>
        <category>项目管理</category>
      </categories>
      <tags>
        <tag>项目管理</tag>
        <tag>项目预算</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis(八)</title>
    <url>/2020/04/03/mybatis/MyBatis-%E5%85%AB/</url>
    <content><![CDATA[<h1 id="mybatis-缓存"><a href="#mybatis-缓存" class="headerlink" title="mybatis 缓存"></a>mybatis 缓存</h1><span id="more"></span>

<h2 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h2><h3 id="一级缓存-同一个SqlSession对象"><a href="#一级缓存-同一个SqlSession对象" class="headerlink" title="一级缓存:同一个SqlSession对象"></a>一级缓存:同一个SqlSession对象</h3><p><img src="D:\bloglocal\image-20200331082951809.png" alt="image-20200331082951809"></p>
<p>MyBatis默认开启一级缓存，如果用同样的SqlSession对象查询相同的数据，则只会在第一次查询时向数据库发送SQL语句，并将查询的结果放入到SQLSESSION中(作为缓存在) ；后续再次查询该同样的对象时则直接从缓存中查询该对象即可(即省略了数据库的访问)。</p>
<p>二级缓存</p>
<p>Mybatis自带二级缓存: [同一个namespace]生成的mapper对象</p>
<p>MyBati s默认情况没有开启二级缓存，需要手工打开。</p>
<p>conf.xml中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 开启二级缓存 --&gt;</span><br><span class="line">&lt;setting name=&quot;cacheEnable&quot; value=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>mapper中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明此namespace开启二级缓存 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>异常提示：NotSerializableException可知，MyBatis的二级缓存是将对象放入硬盘文件中</p>
<p>序列化:内存-&gt;硬盘</p>
<p>反序列化:硬盘-&gt;内存</p>
<p>准备缓存的对象，必须实现了序列化接口( 如果开启的缓存<code>Namespace=&quot;top.eshyee.mapper.StudentMapper&quot; </code>可知序列化对象为Student，因此需要将Student序列化(序 列化Student类，以及Student的级联属性、和父类)</p>
<p>触发将对象写入二级缓存的时机: SqlSession对象的close()方法</p>
<p>回顾: namespace的值 就是接口的全类名(包名.类名) ，通过接口可以产生代理对象(Mapper对象)</p>
<p>–&gt;namespace决定了Mapper对象的产生</p>
<p>结论:只要产生的xxxMapper对象来自于同一个namespace，则这些对象共享二级缓存。</p>
<p>如果是同一个SqISession对象进行多次相同的查询，则直接进入一级缓存查询;</p>
<p><img src="D:\bloglocal\image-20200331084348373.png" alt="image-20200331084348373"></p>
<p>如果不是同一个SqISession对象进行多次相同的查询(但是均来自同一个namespace)则进入二级缓存查询</p>
<p>如果一个namespace， 如果有多个xxMapper. xml的namespace值相同， 则通过这些xxxMapper. xml产生的xxMapper，仍然共享二级缓存。</p>
<p>禁用：</p>
<p>在需要禁用的select标签中的<code>usecache</code>属性改为<code>false</code></p>
<p>清理：与清理一级缓存的方法相同，一般执行增删改时会清理掉缓存 ，设计的原因是为了防止脏数据</p>
<p>commit();</p>
<p>commit会清理一级和二级缓存;但是清理二级缓存时，不能是查询自身的commit()</p>
<p>改标签</p>
<p>在select标签中设置<code>flushCache= &quot;true&quot;</code></p>
<p>命中率:<br>1 :0% 0.0</p>
<p>2:50% 0.5</p>
<p>3:2&#x2F;3 0.666</p>
<p>4:3&#x2F;4 0.75</p>
<p>三方提供的二级缓存:</p>
<p>ehicache、memcache</p>
<p>要想整合三方提供的二级缓存(或者自定义二级缓存) ，必须实现<code>org.apache.ibatis.cache.Cache</code>接口，该接口的默认实现类是<code>PerpetualCache</code></p>
<p>整合ehcache二级缓存:</p>
<p>Ehcache-core.jar<br>mybatis- Ehcache.jar<br>slf4j-api.jar</p>
<p>编写ehcache配置文件Ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;ehcache.xsd&quot;</span> <span class="attr">updateCheck</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">monitoring</span>=<span class="string">&quot;autodetect&quot;</span> <span class="attr">dynamicConfig</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当二级缓存的对象超过内存限制时（缓存对象的个数&gt;maxElements InMemory</span></span><br><span class="line"><span class="comment"> ），存放入的硬盘路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;D:\Ehcache&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- maxElementsInMemory:设置在内存中缓存对象的个数 </span></span><br><span class="line"><span class="comment"> maxElementsOnDisk:设置在硬盘中缓存对象的个数</span></span><br><span class="line"><span class="comment"> eternal: 设置缓存是否永远不过期</span></span><br><span class="line"><span class="comment"> overflowToDisk:当内存中缓存的对象个数超过maxElementsInMemory的时候，是否转移到硬盘中</span></span><br><span class="line"><span class="comment"> timeToIdleSeconds:当2次访问超过该值的时候，将缓存对象失效</span></span><br><span class="line"><span class="comment"> timeToliveSeconds:一个缓存对象最多存放的时间(生命周期)</span></span><br><span class="line"><span class="comment"> diskExpiryThreadIntervalSeconds:设置每隔多长时间，通过一个线程来清理硬盘中的缓存</span></span><br><span class="line"><span class="comment"> memoryStioreEvictionPolicy: 当超过缓存对象的最大值时，处理的策略 LRU，FIFO,LFU </span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> </span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;1000000&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;100&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>= <span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>= <span class="string">&quot;maxELementsInMemory&quot;</span> <span class="attr">value</span>= <span class="string">&quot;2000&quot;</span> /&gt;</span></span><br><span class="line">    可以覆盖掉默认值</span><br><span class="line"><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis</category>
      </categories>
  </entry>
  <entry>
    <title>MyBatis系列(七)</title>
    <url>/2020/03/25/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E4%B8%83/</url>
    <content><![CDATA[<h2 id="log4j和延迟加载"><a href="#log4j和延迟加载" class="headerlink" title="log4j和延迟加载"></a>log4j和延迟加载</h2><span id="more"></span>

<p>在之前下载的mybatis包中找到log4j并导入到项目</p>
<h3 id="开启日志"><a href="#开启日志" class="headerlink" title="开启日志"></a>开启日志</h3><p>如果不指定，Mybatis就会根据以下顺序寻找日志<br>SLF4J →Apache Commons Logging →Log4j 2→Log4j → JDK logging<br>日志级别:<br>DEBUG&lt; INFO&lt; WARN&lt; ERROR<br>如果设置为info， 则只显示info及以上级别的信息;<br>建议:<br>在开发时设置debug，在运行时设置为info或以上。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>每次运行就会出现诸如此类的debug</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">DEBUG [main] - Opening JDBC Connection</span><br><span class="line">DEBUG [main] - Created connection 961160488.</span><br><span class="line">DEBUG [main] - Setting autocommit to false on JDBC Connection [oracle.jdbc.driver.T4CConnection@394a2528]</span><br></pre></td></tr></table></figure>

<h3 id="配置延迟加载"><a href="#配置延迟加载" class="headerlink" title="配置延迟加载"></a>配置延迟加载</h3><p><strong>嵌套查询多用于延迟加载的设计</strong></p>
<p>具体如下</p>
<h4 id="一对一：查学生和学生卡信息"><a href="#一对一：查学生和学生卡信息" class="headerlink" title="一对一：查学生和学生卡信息"></a>一对一：查学生和学生卡信息</h4><p>在xml中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 延迟加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithMapO2OLazy&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;student_card_Lazyload_map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 先查学生 --&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student_card_Lazyload_map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 此次采用延迟加载:在查询学生时，并不立即加载学生证信息</span></span><br><span class="line"><span class="comment">  通过select在需要的时候再查学生证</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;card&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;StudentCard&quot;</span> <span class="attr">select</span>=<span class="string">&quot;top.eshyee.mapper.StudentCardMapper.querycardbyid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardid&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;id property=&quot;cardId&quot; column=&quot;cardId&quot;/&gt;</span></span><br><span class="line"><span class="comment"> &lt;result property=&quot;cardInfo&quot; column=&quot;cardInfo&quot;/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>新建Cardmapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询学生信息 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;querycardbyid&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.StudentCard&quot;</span>&gt;</span></span><br><span class="line">    select * from studentCard where cardid=#&#123;cardId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="一对多：查班级和学生信息"><a href="#一对多：查班级和学生信息" class="headerlink" title="一对多：查班级和学生信息"></a>一对多：查班级和学生信息</h4><p>新建班级mapper</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qCASLazy&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;class_student_classid_lazy&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select c.* from  studentclass c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.StudentClass&quot;</span> <span class="attr">id</span>=<span class="string">&quot;class_student_classid_lazy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;classId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span> <span class="attr">column</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 属性类型用javatype 属性的元素类型用oftype --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 延迟加载 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">select</span>=<span class="string">&quot;top.eshyee.mapper.StudentMapper.queryStuByClassId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在studentmapper中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 延迟加载一对多 查询班级中的所有学生 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuByClassId&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">	select * from student where classId=#&#123;classId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><p>一对多和一对一的延迟加载配置方法相同</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>log4j</tag>
        <tag>延迟加载</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列(三)</title>
    <url>/2020/03/02/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E4%B8%89/</url>
    <content><![CDATA[<p>关于类型处理器和resultmap</p>
<span id="more"></span>

<h2 id="类型处理器-类型转换器"><a href="#类型处理器-类型转换器" class="headerlink" title="类型处理器(类型转换器)"></a>类型处理器(类型转换器)</h2><ol>
<li><p>MyBatis自带一些常见的类型处理器</p>
</li>
<li><p>也可以自定义Mybatis类型处理器</p>
</li>
</ol>
<p>JAVA 数据类型 –数据库（数据类型）</p>
<p>比如：</p>
<p>实体类 Student ：Boolean  stuSex true：男  &#x2F;false：女</p>
<p>表中Student ： number stuSex 1：男  &#x2F; 0：女</p>
<h3 id="自定义类型转换器"><a href="#自定义类型转换器" class="headerlink" title="自定义类型转换器"></a>自定义类型转换器</h3><h4 id="假设"><a href="#假设" class="headerlink" title="假设"></a>假设</h4><p>我要在Student表里面新建一个性别列 男生用1 表示 女生用0表示(number类型)，</p>
<p>此时实体类中我男生用的true 女生用的false(Boolean,仅仅是举个例子)。</p>
<p>数据类型不匹配此时数据类型不匹配。</p>
<h4 id="创建类型转换器"><a href="#创建类型转换器" class="headerlink" title="创建类型转换器"></a>创建类型转换器</h4><p>需要实现TypeHandler接口 此接口有一个实现类 BaseTypeHandler</p>
<p>因此实现转换器有两种方法 实现 接口TypeHandler 和 继承BaseTypeHandler(简单)</p>
<p>所以这里采用后者，去<code>extend</code>this method。</p>
<h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><p>新建一个Boolean的属性 叫做stuSex 。</p>
<p><code>private Boolean stuSex</code>形成get set方法</p>
<h5 id="转换器"><a href="#转换器" class="headerlink" title="转换器"></a>转换器</h5><p>新建一个转换器继承BaseTypeHandler，编译器会自动生成三个方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	get是DB数据--&gt;java数据</span></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		<span class="keyword">return</span> rs.getInt(columnName)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> rs.getInt(columnIndex)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">getNullableResult</span><span class="params">(CallableStatement cs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">	<span class="keyword">return</span> cs.getInt(columnIndex)==<span class="number">1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//	set是java数据--&gt;DB数据</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="type">int</span> i, Boolean parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(parameter) &#123;</span><br><span class="line">			ps.setInt(i, <span class="number">1</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			ps.setInt(i, <span class="number">0</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<p>ps:PreparedStatement对象<br>i:PreparedStatement对象操作的参数的位置<br>parameter:Java值<br>jdbcType:jdbc操作的数据类型</p>
<p>这里用到了三元运算符，想起了之前一个写个人网站用到的一个三元运算符🤦‍♂️(更)。</p>
<h5 id="conf配置"><a href="#conf配置" class="headerlink" title="conf配置"></a>conf配置</h5><p>在config中加上转换器</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;转换器类名&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Boolean&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样就算是好了 测试一下</p>
<h5 id="mapper配置"><a href="#mapper配置" class="headerlink" title="mapper配置"></a>mapper配置</h5><p>使用了转换器的查询<br>    1如果类中属性和表中的字段类型都能合理识别(String-varchar2),则可以使用resultType resultType&#x3D;”top.eshyee.entity.Student”<br>    否则(boolean-integer)使用resultMap<br>    2如果类中的属性名和表中的字段名都能够合理识别(stuNo-stuno)则可以使用resultType<br>    否则(id-stuno)使用resultMap</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNumConverter&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentResult&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">		select * from student where stuno= #&#123;stuno&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;studentResult&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuno&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuname&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuage&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graname&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stusex&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;boolean&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h4><p>resultMap可以实现两个功能：<br>    1 类型转换<br>    2 属性-字段名之间的映射关系</p>
<p>分为主键id和非主键result<br>如果实体类中的属性跟数据库中那个的字段名叫法不一样，从下面的映射关系中也可以更改 。</p>
<p>这样就好了，可以在<code>test.java</code>中测试一下了。🥐</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以前用过别的方法来转换数据库数据与java数据 但是这个更系统一些吧。</p>
<p>希望这次不要再出个3.5了。🐷</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>类型处理器</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列(二.5)</title>
    <url>/2020/02/28/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E4%BA%8C.5/</url>
    <content><![CDATA[<p>关于一些优化🍔</p>
<span id="more"></span>

<h3 id="数据库连接配置"><a href="#数据库连接配置" class="headerlink" title="数据库连接配置"></a>数据库连接配置</h3><p>在<code>config.xml</code>中如果配置了很多的东西，这时在想去更改数据库配置的一些参数显得尤为麻烦，这是可以新建一个<code>properties</code>来写一些kv对，再在config中使用<code>&lt;properties&gt;</code>标签来传值貌似就会简化一部分操作。</p>
<p>因此在<code>src</code>下新建一个db.properties文件。如下配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">oracle.jdbc.driver.OracleDriver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:oracle:thin:@127.0.0.1:1521:ORCL</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">scott</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">tiger</span></span><br></pre></td></tr></table></figure>

<p>在<code>config.xml</code>中添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>数据源中配置：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>如此，每次想对数据源做更改的时候只需改变kv对即可。</p>
<h3 id="mybatis的全局参数设置更改"><a href="#mybatis的全局参数设置更改" class="headerlink" title="mybatis的全局参数设置更改"></a>mybatis的全局参数设置更改</h3><p>谨慎更改👨‍🔧</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h3><p><code>top.eshyee.entity.Student</code>太长了🤦‍♀️，想要改别名。</p>
<p>(大小写不敏感)</p>
<p>选择两种方式：</p>
<h6 id="设置单个别名"><a href="#设置单个别名" class="headerlink" title="设置单个别名"></a>设置单个别名</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;student&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="批量设置别名"><a href="#批量设置别名" class="headerlink" title="批量设置别名"></a>批量设置别名</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;top.eshyee.entity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>还有一些内置别名。</p>
<h2 id="小节"><a href="#小节" class="headerlink" title="小节"></a>小节</h2><p>怎么方便怎么来呗🏊‍♀️</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>优化</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列(二)</title>
    <url>/2020/02/26/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E4%BA%8C/</url>
    <content><![CDATA[<h2 id="mapper动态代理-MyBatis接口开发"><a href="#mapper动态代理-MyBatis接口开发" class="headerlink" title="mapper动态代理(MyBatis接口开发)"></a>mapper动态代理(MyBatis接口开发)</h2><h6 id="原则-约定优于配置"><a href="#原则-约定优于配置" class="headerlink" title="原则:约定优于配置"></a>原则:约定优于配置</h6><span id="more"></span>

<p>配置方式:</p>
<p>​	abc.xml</p>
<p>硬编码方式</p>
<p>​	abc.java</p>
<p>约定:默认值就是myProject</p>
<p>与传统配置的不同之处:省略掉statement，即根据约定直接定位出sql语句。</p>
<p>约定：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 1.方法名和mapper.xml文件中的id值相同</span></span><br><span class="line"><span class="comment">*  2.方法名的输入参数和mapper.xml文件中的标签parameterType类型一致</span></span><br><span class="line"><span class="comment">* 3.方法的返回值和mapper.xml文件中的resultType一致</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>接口和mapper一一对应：namespace的value&#x3D;接口的全类名</p>
<h4 id="构建接口"><a href="#构建接口" class="headerlink" title="构建接口"></a>构建接口</h4><p>所以说新建一个接口，根据前一个篇的mapper.xml的文件基础上改，注：我这里是把接口建在了mapper包下</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Student <span class="title function_">queryStudentBystuNum</span><span class="params">(<span class="type">int</span> stuno)</span>;</span><br><span class="line">List&lt;Student&gt; <span class="title function_">queryAllStudent</span><span class="params">()</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">addStudent</span><span class="params">(Student student)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">upDateStuByNo</span><span class="params">(Student student)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteStuByNo</span><span class="params">(<span class="type">int</span> stuno)</span>;</span><br></pre></td></tr></table></figure>

<p>注意这里的接口要遵循上面的约定。</p>
<h4 id="更改xml文件"><a href="#更改xml文件" class="headerlink" title="更改xml文件"></a>更改xml文件</h4><p>再mapper.xml file中，namespace也应该改成接口的名字</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;top.eshyee.mapper.StudentMapper&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接下来，就是修改测试类，曾经使用的<code>statement</code>的地方，目前就不用使用了。</p>
<h4 id="使用接口"><a href="#使用接口" class="headerlink" title="使用接口"></a>使用接口</h4><p>这次拿删除学生举例,首先要从<code>session</code>中获取到这个接口，使用<code>getMapper</code>方法。然后从这个接口中要我刚刚写的那个删除的方法<code>deleteStuByNo()</code>,这里我写死删除no为3的 <del>倒霉孩子</del> ✨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;conf.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sessionfactory</span> <span class="operator">=</span> <span class="keyword">new</span> 		<span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionfactory.openSession();</span><br><span class="line"><span class="type">StudentMapper</span> <span class="variable">stuMapper</span> <span class="operator">=</span> session.getMapper(StudentMapper.class);</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stuMapper.deleteStuByNo(<span class="number">3</span>);</span><br><span class="line">session.commit();</span><br><span class="line">System.out.println(<span class="string">&quot;删除成功，&quot;</span> + count + <span class="string">&quot;行受影响&quot;</span>);</span><br><span class="line">session.close();</span><br></pre></td></tr></table></figure>

<h4 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h4><p>3号学生被删除并想你抛了一行log🌚</p>


<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>约定相对于配置来说，出错率更少了，因为不用写statement，而是通过调用接口去实现xml的id的调用，对于写statement的String容易手残的老哥来说，是不错的选择。</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>入门</tag>
        <tag>初学者</tag>
      </tags>
  </entry>
  <entry>
    <title>学习pandas(从kaggle上)</title>
    <url>/2023/07/18/%E5%AD%A6%E4%B9%A0pandas-%E4%BB%8Ekaggle%E4%B8%8A/</url>
    <content><![CDATA[<h1 id="先来个小测试"><a href="#先来个小测试" class="headerlink" title="先来个小测试"></a>先来个小测试</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Setup complete.&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Setup complete.
</code></pre>
<h2 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h2><p>In the cell below, create a DataFrame <code>fruits</code> that looks like this:</p>
<p><img src="https://i.imgur.com/Ax3pp2A.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Your code goes here. Create a dataframe matching the above diagram and assign it to the variable fruits.</span></span><br><span class="line">fruits = pd.DataFrame(&#123;<span class="string">&#x27;Apples&#x27;</span>: [<span class="number">30</span>], <span class="string">&#x27;Bananas&#x27;</span>: [<span class="number">21</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(fruits)</span><br></pre></td></tr></table></figure>

<pre><code>   Apples  Bananas
0      30       21
</code></pre>
<h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><p>Create a dataframe <code>fruit_sales</code> that matches the diagram below:</p>
<p><img src="https://i.imgur.com/CHPn7ZF.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Your code goes here. Create a dataframe matching the above diagram and assign it to the variable fruit_sales.</span></span><br><span class="line">fruit_sales = pd.DataFrame(&#123;<span class="string">&#x27;Apples&#x27;</span>: [<span class="number">35</span>,<span class="number">41</span>], <span class="string">&#x27;Bananas&#x27;</span>: [<span class="number">21</span>,<span class="number">34</span>]&#125;,index= [<span class="string">&#x27;2017 Sales&#x27;</span>,<span class="string">&#x27;2018 Sales&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(fruit_sales)</span><br></pre></td></tr></table></figure>

<pre><code>            Apples  Bananas
2017 Sales      35       21
2018 Sales      41       34
</code></pre>
<h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2><p>Create a variable <code>ingredients</code> with a Series that looks like:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Flour     4 cups</span><br><span class="line">Milk       1 cup</span><br><span class="line">Eggs     2 large</span><br><span class="line">Spam       1 can</span><br><span class="line">Name: Dinner, dtype: object</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ingredients = pd.Series([<span class="string">&#x27;4 cups&#x27;</span>,<span class="string">&#x27;1 cup&#x27;</span>, <span class="string">&#x27;2 large&#x27;</span>, <span class="string">&#x27;1 can&#x27;</span>],index=[<span class="string">&#x27;Flour&#x27;</span>,<span class="string">&#x27;Milk&#x27;</span>,<span class="string">&#x27;Eggs&#x27;</span>,<span class="string">&#x27;Spam&#x27;</span>],name=<span class="string">&#x27;Dinner&#x27;</span>,dtype=<span class="built_in">object</span>)</span><br><span class="line">ingredients</span><br></pre></td></tr></table></figure>




<pre><code>Flour     4 cups
Milk       1 cup
Eggs     2 large
Spam       1 can
Name: Dinner, dtype: object
</code></pre>
<h2 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h2><p>Read the following csv dataset of wine reviews into a DataFrame called <code>reviews</code>:</p>
<p><img src="https://i.imgur.com/74RCZtU.png"></p>
<p>The filepath to the csv file is <code>../input/wine-reviews/winemag-data_first150k.csv</code>. The first few lines look like:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">,country,description,designation,points,price,province,region_1,region_2,variety,winery</span><br><span class="line">0,US,&quot;This tremendous 100% varietal wine[...]&quot;,Martha&#x27;s Vineyard,96,235.0,California,Napa Valley,Napa,Cabernet Sauvignon,Heitz</span><br><span class="line">1,Spain,&quot;Ripe aromas of fig, blackberry and[...]&quot;,Carodorum Selección Especial Reserva,96,110.0,Northern Spain,Toro,,Tinta de Toro,Bodega Carmen Rodríguez</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews = pd.read_csv(<span class="string">&#x27;../input/wine-reviews/winemag-data_first150k.csv&#x27;</span>,index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>reviews &#x3D; pd.read_csv(‘..&#x2F;input&#x2F;wine-reviews&#x2F;winemag-data_first150k.csv’,index_col&#x3D;0)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">animals = pd.DataFrame(&#123;<span class="string">&#x27;Cows&#x27;</span>: [<span class="number">12</span>, <span class="number">20</span>], <span class="string">&#x27;Goats&#x27;</span>: [<span class="number">22</span>, <span class="number">19</span>]&#125;, index=[<span class="string">&#x27;Year 1&#x27;</span>, <span class="string">&#x27;Year 2&#x27;</span>])</span><br><span class="line">animals</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Cows</th>
      <th>Goats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Year 1</th>
      <td>12</td>
      <td>22</td>
    </tr>
    <tr>
      <th>Year 2</th>
      <td>20</td>
      <td>19</td>
    </tr>
  </tbody>
</table>
</div>



<p>In the cell below, write code to save this DataFrame to disk as a csv file with the name <code>cows_and_goats.csv</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">animals.to_csv(<span class="string">&#x27;cows_and_goats.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br><span class="line">reviews</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p>我们将数据当对象来访问</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.country</span><br></pre></td></tr></table></figure>




<pre><code>0            Italy
1         Portugal
2               US
3               US
4               US
            ...   
129966     Germany
129967          US
129968      France
129969      France
129970      France
Name: country, Length: 129971, dtype: object
</code></pre>
<p>如果我们有一个 Python 字典，我们可以使用索引 ([]) 运算符访问它的值。我们可以对 DataFrame 中的列执行相同的操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;country&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0            Italy
1         Portugal
2               US
3               US
4               US
            ...   
129966     Germany
129967          US
129968      France
129969      France
129970      France
Name: country, Length: 129971, dtype: object
</code></pre>
<p>这是从 DataFrame 中选择特定 Series 的两种方法。这两种方法在语法上都不太有效，但索引操作符[]的优点是可以处理列名中的保留字符（例如，如果我们有一个country providence列，reviews.country providence就不起作用）。</p>
<p>pandas 系列看起来不像一本精美的dictionary吗？几乎是这样，所以毫不奇怪，要深入到单个特定值，我们只需要再次使用索引运算符 [] ：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;country&#x27;</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Italy&#39;
</code></pre>
<h1 id="Indexing-in-pandas"><a href="#Indexing-in-pandas" class="headerlink" title="Indexing in pandas"></a>Indexing in pandas</h1><p>索引运算符和属性选择很好，因为它们就像在 Python 生态系统的其它部分一样工作。作为新手，这使得它们很容易上手和使用。然而，pandas有自己的访问操作符，loc和iloc。对于更高级的操作，你应该使用它们。</p>
<h2 id="Index-based-selection"><a href="#Index-based-selection" class="headerlink" title="Index-based selection"></a>Index-based selection</h2><p>Pandas 索引以两种范式之一工作。第一种是基于索引的选择：根据数据在数据中的数字位置来选择数据。iloc遵循这一范例。</p>
<p>要选择 DataFrame 中的第一行数据，我们可以使用以下命令：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>country                                                              Italy
description              Aromas include tropical fruit, broom, brimston...
designation                                                   Vulkà Bianco
points                                                                  87
price                                                                  NaN
province                                                 Sicily &amp; Sardinia
region_1                                                              Etna
region_2                                                               NaN
taster_name                                                  Kerin O’Keefe
taster_twitter_handle                                         @kerinokeefe
title                                    Nicosia 2013 Vulkà Bianco  (Etna)
variety                                                        White Blend
winery                                                             Nicosia
Name: 0, dtype: object
</code></pre>
<p>loc 和 iloc 都是行第一、列第二。这与我们在原生 Python 中所做的相反，即列在前，行在后。</p>
<p>这意味着检索行稍微容易一些，而检索列稍微困难一些。要使用 iloc 获取列，我们可以执行以下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[:, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0            Italy
1         Portugal
2               US
3               US
4               US
            ...   
129966     Germany
129967          US
129968      France
129969      France
129970      France
Name: country, Length: 129971, dtype: object
</code></pre>
<p>就其本身而言，:操作符（也来自本地Python）表示 “一切”。然而，当与其他选择器组合时，它可以用来表示值的范围。例如，要从第一、第二和第三行中选择country列，我们可以这样做</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[:<span class="number">3</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0       Italy
1    Portugal
2          US
Name: country, dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[<span class="number">999</span>:-<span class="number">99999</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>999             US
1000            US
1001         Italy
1002            US
1003        France
           ...    
29967       France
29968           US
29969    Argentina
29970           US
29971           US
Name: country, Length: 28973, dtype: object
</code></pre>
<p>It’s also possible to pass a list:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], <span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0       Italy
1    Portugal
2          US
Name: country, dtype: object
</code></pre>
<p>最后，值得注意的是，负数可以用于选择。这将从数值的末尾开始向前计数。例如，这里是数据集的最后五个元素。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.iloc[-<span class="number">5</span>:]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="Label-based-selection"><a href="#Label-based-selection" class="headerlink" title="Label-based selection"></a>Label-based selection</h2><p>属性选择的第二种模式是loc操作符所遵循的模式：基于标签的选择。在这种模式下，重要的是数据索引值，而不是它的位置。</p>
<p>例如，要获得reviews中的第一个条目，我们现在要做如下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[<span class="number">0</span>, <span class="string">&#x27;country&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Italy&#39;
</code></pre>
<p>iloc在概念上比loc简单，因为它忽略了数据集的索引。当我们使用 iloc 时，我们把数据集当作一个大矩阵（一个列表的列表），一个我们必须按位置进行索引的矩阵。由于您的数据集通常具有有意义的索引，因此使用loc通常会更容易。例如，这里有一个使用loc更容易的操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[:, [<span class="string">&#x27;taster_name&#x27;</span>, <span class="string">&#x27;taster_twitter_handle&#x27;</span>, <span class="string">&#x27;points&#x27;</span>]]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>points</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>87</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>87</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>87</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>87</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>87</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>90</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>90</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>90</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>90</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 3 columns</p>
</div>



<h2 id="Choosing-between-loc-and-iloc"><a href="#Choosing-between-loc-and-iloc" class="headerlink" title="Choosing between loc and iloc"></a>Choosing between loc and iloc</h2><p>在 loc 和 iloc 之间选择或转换时，有一个 “小问题 “值得注意，那就是这两种方法使用的索引方案略有不同。</p>
<p>iloc 使用 Python stdlib 索引方案，其中包含范围的第一个元素，而排除最后一个元素。因此，0:10 将选择条目 0,……9。而loc包含最后一个元素，因此0:10将选择0,…,10。</p>
<p>为什么会有这样的变化？请记住，loc可以索引任何stdlib类型：例如字符串。如果我们有一个索引值为 Apples, …, Potatoes, … 的 DataFrame，并且我们想选择 “所有按字母顺序排列的苹果和土豆之间的水果选择”，那么索引 df.loc[‘Apples’:’Potatoes’] 要比索引 df.loc[‘Apples’, ‘Potatoet’] 这样的东西方便得多 (t 在字母表的 s 后面)。</p>
<p>当DataFrame索引是一个简单的数字列表（例如0,…,1000）时，这种情况尤其令人困惑。在这种情况下，df.iloc[0:1000]将返回1000个条目，而df.loc[0:1000]将返回1001个条目！要使用 loc 得到 1000 个元素，您需要再低一级，请求 df.loc[0:999]。</p>
<p>否则，使用loc的语义和使用iloc的语义是一样的。</p>
<h2 id="Manipulating-the-index"><a href="#Manipulating-the-index" class="headerlink" title="Manipulating the index"></a>Manipulating the index</h2><p>基于标签的选择功能来自索引中的标签。重要的是，我们使用的索引并非一成不变。我们可以以任何我们认为合适的方式操作索引。</p>
<p>我们可以使用set_index()方法来完成这项工作。下面是当我们将set_index设置为title字段时发生的情况：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.set_index(<span class="string">&quot;title&quot;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
    <tr>
      <th>title</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Nicosia 2013 Vulkà Bianco  (Etna)</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>Quinta dos Avidagos 2011 Avidagos Red (Douro)</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>Rainstorm 2013 Pinot Gris (Willamette Valley)</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>St. Julian 2013 Reserve Late Harvest Riesling (Lake Michigan Shore)</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>Sweet Cheeks 2012 Vintner's Reserve Wild Child Block Pinot Noir (Willamette Valley)</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 Brauneberger Juffer-Sonnenuhr Spätlese Riesling (Mosel)</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>Citation 2004 Pinot Noir (Oregon)</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>Domaine Gresser 2013 Kritt Gewurztraminer (Alsace)</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Caroline Gewurztraminer (Alsace)</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 12 columns</p>
</div>



<p>如果您可以为数据集找到一个比当前索引更好的索引，那么这将非常有用。</p>
<h2 id="Conditional-selection"><a href="#Conditional-selection" class="headerlink" title="Conditional selection"></a>Conditional selection</h2><p>到目前为止，我们已经使用 DataFrame 本身的结构属性对各种数据进行索引。然而，为了利用数据做有趣的事情，我们经常需要根据条件提出问题。</p>
<p>例如，假设我们对意大利生产的优于平均水平的葡萄酒特别感兴趣。 </p>
<p>我们可以首先检查每种葡萄酒是否是意大利的：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.country == <span class="string">&#x27;Italy&#x27;</span></span><br></pre></td></tr></table></figure>




<pre><code>0          True
1         False
2         False
3         False
4         False
          ...  
129966    False
129967    False
129968    False
129969    False
129970    False
Name: country, Length: 129971, dtype: bool
</code></pre>
<p>此操作根据每条记录的国家&#x2F;地区生成一系列 True&#x2F;False 布尔值。然后可以在 loc 内部使用此结果来选择相关数据：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[reviews.country == <span class="string">&#x27;Italy&#x27;</span>]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Italy</td>
      <td>Here's a bright, informal red that opens with ...</td>
      <td>Belsito</td>
      <td>87</td>
      <td>16.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Vittoria</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Terre di Giurfo 2013 Belsito Frappato (Vittoria)</td>
      <td>Frappato</td>
      <td>Terre di Giurfo</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Italy</td>
      <td>This is dominated by oak and oak-driven aromas...</td>
      <td>Rosso</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Masseria Setteporte 2012 Rosso  (Etna)</td>
      <td>Nerello Mascalese</td>
      <td>Masseria Setteporte</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Italy</td>
      <td>Delicate aromas recall white flower and citrus...</td>
      <td>Ficiligno</td>
      <td>87</td>
      <td>19.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Baglio di Pianetto 2007 Ficiligno White (Sicilia)</td>
      <td>White Blend</td>
      <td>Baglio di Pianetto</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Italy</td>
      <td>Aromas of prune, blackcurrant, toast and oak c...</td>
      <td>Aynat</td>
      <td>87</td>
      <td>35.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Canicattì 2009 Aynat Nero d'Avola (Sicilia)</td>
      <td>Nero d'Avola</td>
      <td>Canicattì</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129929</th>
      <td>Italy</td>
      <td>This luminous sparkler has a sweet, fruit-forw...</td>
      <td>NaN</td>
      <td>91</td>
      <td>38.0</td>
      <td>Veneto</td>
      <td>Prosecco Superiore di Cartizze</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Col Vetoraz Spumanti NV  Prosecco Superiore di...</td>
      <td>Prosecco</td>
      <td>Col Vetoraz Spumanti</td>
    </tr>
    <tr>
      <th>129943</th>
      <td>Italy</td>
      <td>A blend of Nero d'Avola and Syrah, this convey...</td>
      <td>Adènzia</td>
      <td>90</td>
      <td>29.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Baglio del Cristo di Campobello 2012 Adènzia R...</td>
      <td>Red Blend</td>
      <td>Baglio del Cristo di Campobello</td>
    </tr>
    <tr>
      <th>129947</th>
      <td>Italy</td>
      <td>A blend of 65% Cabernet Sauvignon, 30% Merlot ...</td>
      <td>Symposio</td>
      <td>90</td>
      <td>20.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Terre Siciliane</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Feudo Principi di Butera 2012 Symposio Red (Te...</td>
      <td>Red Blend</td>
      <td>Feudo Principi di Butera</td>
    </tr>
    <tr>
      <th>129961</th>
      <td>Italy</td>
      <td>Intense aromas of wild cherry, baking spice, t...</td>
      <td>NaN</td>
      <td>90</td>
      <td>30.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>COS 2013 Frappato (Sicilia)</td>
      <td>Frappato</td>
      <td>COS</td>
    </tr>
    <tr>
      <th>129962</th>
      <td>Italy</td>
      <td>Blackberry, cassis, grilled herb and toasted a...</td>
      <td>Sàgana Tenuta San Giacomo</td>
      <td>90</td>
      <td>40.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Cusumano 2012 Sàgana Tenuta San Giacomo Nero d...</td>
      <td>Nero d'Avola</td>
      <td>Cusumano</td>
    </tr>
  </tbody>
</table>
<p>19540 rows × 13 columns</p>
</div>



<p>该DataFrame有~20,000行。原来的数据约为130,000行。这意味着大约15%的葡萄酒来自意大利。</p>
<p>我们还想知道哪些葡萄酒比平均水平好。葡萄酒的评价标准为80-100分，因此这可能意味着至少获得90分的葡萄酒。</p>
<p>我们可以用”&amp;”将这两个问题联系起来：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[(reviews.country == <span class="string">&#x27;Italy&#x27;</span>) &amp; (reviews.points &gt;= <span class="number">90</span>)]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>120</th>
      <td>Italy</td>
      <td>Slightly backward, particularly given the vint...</td>
      <td>Bricco Rocche Prapó</td>
      <td>92</td>
      <td>70.0</td>
      <td>Piedmont</td>
      <td>Barolo</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Ceretto 2003 Bricco Rocche Prapó  (Barolo)</td>
      <td>Nebbiolo</td>
      <td>Ceretto</td>
    </tr>
    <tr>
      <th>130</th>
      <td>Italy</td>
      <td>At the first it was quite muted and subdued, b...</td>
      <td>Bricco Rocche Brunate</td>
      <td>91</td>
      <td>70.0</td>
      <td>Piedmont</td>
      <td>Barolo</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Ceretto 2003 Bricco Rocche Brunate  (Barolo)</td>
      <td>Nebbiolo</td>
      <td>Ceretto</td>
    </tr>
    <tr>
      <th>133</th>
      <td>Italy</td>
      <td>Einaudi's wines have been improving lately, an...</td>
      <td>NaN</td>
      <td>91</td>
      <td>68.0</td>
      <td>Piedmont</td>
      <td>Barolo</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Poderi Luigi Einaudi 2003  Barolo</td>
      <td>Nebbiolo</td>
      <td>Poderi Luigi Einaudi</td>
    </tr>
    <tr>
      <th>135</th>
      <td>Italy</td>
      <td>The color is just beginning to show signs of b...</td>
      <td>Sorano</td>
      <td>91</td>
      <td>60.0</td>
      <td>Piedmont</td>
      <td>Barolo</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Giacomo Ascheri 2001 Sorano  (Barolo)</td>
      <td>Nebbiolo</td>
      <td>Giacomo Ascheri</td>
    </tr>
    <tr>
      <th>140</th>
      <td>Italy</td>
      <td>A big, fat, luscious wine with plenty of toast...</td>
      <td>Costa Bruna</td>
      <td>90</td>
      <td>26.0</td>
      <td>Piedmont</td>
      <td>Barbera d'Alba</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Poderi Colla 2005 Costa Bruna  (Barbera d'Alba)</td>
      <td>Barbera</td>
      <td>Poderi Colla</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129929</th>
      <td>Italy</td>
      <td>This luminous sparkler has a sweet, fruit-forw...</td>
      <td>NaN</td>
      <td>91</td>
      <td>38.0</td>
      <td>Veneto</td>
      <td>Prosecco Superiore di Cartizze</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Col Vetoraz Spumanti NV  Prosecco Superiore di...</td>
      <td>Prosecco</td>
      <td>Col Vetoraz Spumanti</td>
    </tr>
    <tr>
      <th>129943</th>
      <td>Italy</td>
      <td>A blend of Nero d'Avola and Syrah, this convey...</td>
      <td>Adènzia</td>
      <td>90</td>
      <td>29.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Baglio del Cristo di Campobello 2012 Adènzia R...</td>
      <td>Red Blend</td>
      <td>Baglio del Cristo di Campobello</td>
    </tr>
    <tr>
      <th>129947</th>
      <td>Italy</td>
      <td>A blend of 65% Cabernet Sauvignon, 30% Merlot ...</td>
      <td>Symposio</td>
      <td>90</td>
      <td>20.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Terre Siciliane</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Feudo Principi di Butera 2012 Symposio Red (Te...</td>
      <td>Red Blend</td>
      <td>Feudo Principi di Butera</td>
    </tr>
    <tr>
      <th>129961</th>
      <td>Italy</td>
      <td>Intense aromas of wild cherry, baking spice, t...</td>
      <td>NaN</td>
      <td>90</td>
      <td>30.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>COS 2013 Frappato (Sicilia)</td>
      <td>Frappato</td>
      <td>COS</td>
    </tr>
    <tr>
      <th>129962</th>
      <td>Italy</td>
      <td>Blackberry, cassis, grilled herb and toasted a...</td>
      <td>Sàgana Tenuta San Giacomo</td>
      <td>90</td>
      <td>40.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Cusumano 2012 Sàgana Tenuta San Giacomo Nero d...</td>
      <td>Nero d'Avola</td>
      <td>Cusumano</td>
    </tr>
  </tbody>
</table>
<p>6648 rows × 13 columns</p>
</div>



<p>Pandas内置了一些条件选择器，我们在此重点介绍其中的两个。</p>
<p>第一个是 “isin”。”isin “让您选择其值 “位于 “一个值列表中的数据。例如，我们可以用它来选择仅来自意大利或法国的葡萄酒：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[reviews.country.isin([<span class="string">&#x27;Italy&#x27;</span>, <span class="string">&#x27;France&#x27;</span>])]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Italy</td>
      <td>Here's a bright, informal red that opens with ...</td>
      <td>Belsito</td>
      <td>87</td>
      <td>16.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Vittoria</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Terre di Giurfo 2013 Belsito Frappato (Vittoria)</td>
      <td>Frappato</td>
      <td>Terre di Giurfo</td>
    </tr>
    <tr>
      <th>7</th>
      <td>France</td>
      <td>This dry and restrained wine offers spice in p...</td>
      <td>NaN</td>
      <td>87</td>
      <td>24.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Trimbach 2012 Gewurztraminer (Alsace)</td>
      <td>Gewürztraminer</td>
      <td>Trimbach</td>
    </tr>
    <tr>
      <th>9</th>
      <td>France</td>
      <td>This has great depth of flavor with its fresh ...</td>
      <td>Les Natures</td>
      <td>87</td>
      <td>27.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Jean-Baptiste Adam 2012 Les Natures Pinot Gris...</td>
      <td>Pinot Gris</td>
      <td>Jean-Baptiste Adam</td>
    </tr>
    <tr>
      <th>11</th>
      <td>France</td>
      <td>This is a dry wine, very spicy, with a tight, ...</td>
      <td>NaN</td>
      <td>87</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Leon Beyer 2012 Gewurztraminer (Alsace)</td>
      <td>Gewürztraminer</td>
      <td>Leon Beyer</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129964</th>
      <td>France</td>
      <td>Initially quite muted, this wine slowly develo...</td>
      <td>Domaine Saint-Rémy Herrenweg</td>
      <td>90</td>
      <td>NaN</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Ehrhart 2013 Domaine Saint-Rémy Herren...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Ehrhart</td>
    </tr>
    <tr>
      <th>129965</th>
      <td>France</td>
      <td>While it's rich, this beautiful dry wine also ...</td>
      <td>Seppi Landmann Vallée Noble</td>
      <td>90</td>
      <td>28.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Rieflé-Landmann 2013 Seppi Landmann Va...</td>
      <td>Pinot Gris</td>
      <td>Domaine Rieflé-Landmann</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>41633 rows × 13 columns</p>
</div>



<p>第二个是 isnull （及其同伴 notnull）。这些方法可让您突出显示空（或非空）(NaN) 的值。例如，要过滤掉数据集中缺少价格标签的葡萄酒，我们将执行以下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.loc[reviews.price.notnull()]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Spain</td>
      <td>Blackberry and raspberry aromas show a typical...</td>
      <td>Ars In Vitro</td>
      <td>87</td>
      <td>15.0</td>
      <td>Northern Spain</td>
      <td>Navarra</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Tandem 2011 Ars In Vitro Tempranillo-Merlot (N...</td>
      <td>Tempranillo-Merlot</td>
      <td>Tandem</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>120975 rows × 13 columns</p>
</div>



<h2 id="分配数据"><a href="#分配数据" class="headerlink" title="分配数据"></a>分配数据</h2><p>另一方面，将数据分配给 DataFrame 很容易。可以分配一个常量值：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;critic&#x27;</span>] = <span class="string">&#x27;everyone&#x27;</span></span><br><span class="line">reviews[<span class="string">&#x27;critic&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0         everyone
1         everyone
2         everyone
3         everyone
4         everyone
            ...   
129966    everyone
129967    everyone
129968    everyone
129969    everyone
129970    everyone
Name: critic, Length: 129971, dtype: object
</code></pre>
<p>或者使用可迭代的值：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;index_backwards&#x27;</span>] = <span class="built_in">range</span>(<span class="built_in">len</span>(reviews), <span class="number">0</span>, -<span class="number">1</span>)</span><br><span class="line">reviews[<span class="string">&#x27;index_backwards&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0         129971
1         129970
2         129969
3         129968
4         129967
           ...  
129966         5
129967         4
129968         3
129969         2
129970         1
Name: index_backwards, Length: 129971, dtype: int64
</code></pre>
<h1 id="TEST"><a href="#TEST" class="headerlink" title="TEST"></a>TEST</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
  </tbody>
</table>
</div>



<p>1.从description中选择描述列，并将结果分配给变量 desc。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">desc = reviews[<span class="string">&#x27;description&#x27;</span>]</span><br><span class="line">desc</span><br></pre></td></tr></table></figure>




<pre><code>0         Aromas include tropical fruit, broom, brimston...
1         This is ripe and fruity, a wine that is smooth...
2         Tart and snappy, the flavors of lime flesh and...
3         Pineapple rind, lemon pith and orange blossom ...
4         Much like the regular bottling from 2012, this...
                                ...                        
129966    Notes of honeysuckle and cantaloupe sweeten th...
129967    Citation is given as much as a decade of bottl...
129968    Well-drained gravel soil gives this wine its c...
129969    A dry style of Pinot Gris, this is crisp with ...
129970    Big, rich and off-dry, this is powered by inte...
Name: description, Length: 129971, dtype: object
</code></pre>
<p>2.从评论的描述列中选择第一个值，将其分配给变量first_description。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">first_description = desc[<span class="number">0</span>]</span><br><span class="line">first_description</span><br></pre></td></tr></table></figure>




<pre><code>&quot;Aromas include tropical fruit, broom, brimstone and dried herb. The palate isn&#39;t overly expressive, offering unripened apple, citrus and dried sage alongside brisk acidity.&quot;
</code></pre>
<p>3.从reviews中选择第一行数据（第一条记录），并将其分配给变量first_row。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">first_row = reviews.loc[<span class="number">0</span>]</span><br><span class="line">first_row</span><br></pre></td></tr></table></figure>




<pre><code>country                                                              Italy
description              Aromas include tropical fruit, broom, brimston...
designation                                                   Vulkà Bianco
points                                                                  87
price                                                                  NaN
province                                                 Sicily &amp; Sardinia
region_1                                                              Etna
region_2                                                               NaN
taster_name                                                  Kerin O’Keefe
taster_twitter_handle                                         @kerinokeefe
title                                    Nicosia 2013 Vulkà Bianco  (Etna)
variety                                                        White Blend
winery                                                             Nicosia
Name: 0, dtype: object
</code></pre>
<p>4.从评论中的描述列中选择前 10 个值，将结果分配给变量first_descriptions。 </p>
<p>提示：将输出格式化为 pandas 系列。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">first_descriptions = reviews[<span class="string">&#x27;description&#x27;</span>].loc[<span class="number">0</span>:<span class="number">9</span>]</span><br><span class="line">first_descriptions</span><br></pre></td></tr></table></figure>




<pre><code>0    Aromas include tropical fruit, broom, brimston...
1    This is ripe and fruity, a wine that is smooth...
2    Tart and snappy, the flavors of lime flesh and...
3    Pineapple rind, lemon pith and orange blossom ...
4    Much like the regular bottling from 2012, this...
5    Blackberry and raspberry aromas show a typical...
6    Here&#39;s a bright, informal red that opens with ...
7    This dry and restrained wine offers spice in p...
8    Savory dried thyme notes accent sunnier flavor...
9    This has great depth of flavor with its fresh ...
Name: description, dtype: object
</code></pre>
<p>5.Select the records with index labels <code>1</code>, <code>2</code>, <code>3</code>, <code>5</code>, and <code>8</code>, assigning the result to the variable <code>sample_reviews</code>.</p>
<p>In other words, generate the following DataFrame:</p>
<p><img src="https://storage.googleapis.com/kaggle-media/learn/images/sHZvI1O.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sample_reviews = reviews.loc[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>]]</span><br><span class="line">sample_reviews</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Spain</td>
      <td>Blackberry and raspberry aromas show a typical...</td>
      <td>Ars In Vitro</td>
      <td>87</td>
      <td>15.0</td>
      <td>Northern Spain</td>
      <td>Navarra</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Tandem 2011 Ars In Vitro Tempranillo-Merlot (N...</td>
      <td>Tempranillo-Merlot</td>
      <td>Tandem</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Germany</td>
      <td>Savory dried thyme notes accent sunnier flavor...</td>
      <td>Shine</td>
      <td>87</td>
      <td>12.0</td>
      <td>Rheinhessen</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Heinz Eifel 2013 Shine Gewürztraminer (Rheinhe...</td>
      <td>Gewürztraminer</td>
      <td>Heinz Eifel</td>
    </tr>
  </tbody>
</table>
</div>



<p>创建一个变量 df，其中包含索引标签为 0、1、10 和 100 的记录的 Country、Province、Region_1 和 Region_2 列。换句话说，生成以下 DataFrame：</p>
<p><img src="https://storage.googleapis.com/kaggle-media/learn/images/FUCGiKP.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = reviews[[<span class="string">&#x27;country&#x27;</span>,<span class="string">&#x27;province&#x27;</span>,<span class="string">&#x27;region_1&#x27;</span>,<span class="string">&#x27;region_2&#x27;</span>]].loc[[<span class="number">0</span>,<span class="number">1</span>,<span class="number">10</span>,<span class="number">100</span>]]</span><br><span class="line">df</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10</th>
      <td>US</td>
      <td>California</td>
      <td>Napa Valley</td>
      <td>Napa</td>
    </tr>
    <tr>
      <th>100</th>
      <td>US</td>
      <td>New York</td>
      <td>Finger Lakes</td>
      <td>Finger Lakes</td>
    </tr>
  </tbody>
</table>
</div>



<p>7.Create a variable <code>df</code> containing the <code>country</code> and <code>variety</code> columns of the first 100 records. </p>
<p>Hint: you may use <code>loc</code> or <code>iloc</code>. When working on the answer this question and the several of the ones that follow, keep the following “gotcha” described in the tutorial:</p>
<blockquote>
<p><code>iloc</code> uses the Python stdlib indexing scheme, where the first element of the range is included and the last one excluded.<br><code>loc</code>, meanwhile, indexes inclusively. </p>
</blockquote>
<blockquote>
<p>This is particularly confusing when the DataFrame index is a simple numerical list, e.g. <code>0,...,1000</code>. In this case <code>df.iloc[0:1000]</code> will return 1000 entries, while <code>df.loc[0:1000]</code> return 1001 of them! To get 1000 elements using <code>loc</code>, you will need to go one lower and ask for <code>df.iloc[0:999]</code>. </p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = reviews[[<span class="string">&#x27;country&#x27;</span>,<span class="string">&#x27;variety&#x27;</span>]].loc[<span class="number">0</span>:<span class="number">99</span>]</span><br><span class="line">df</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>variety</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>White Blend</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>Portuguese Red</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Pinot Gris</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Riesling</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Pinot Noir</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>France</td>
      <td>Gamay</td>
    </tr>
    <tr>
      <th>96</th>
      <td>France</td>
      <td>Gamay</td>
    </tr>
    <tr>
      <th>97</th>
      <td>US</td>
      <td>Riesling</td>
    </tr>
    <tr>
      <th>98</th>
      <td>Italy</td>
      <td>Sangiovese</td>
    </tr>
    <tr>
      <th>99</th>
      <td>US</td>
      <td>Bordeaux-style Red Blend</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 2 columns</p>
</div>



<p>8.创建一个包含意大利葡萄酒评论的 DataFrame italian_wines。提示：reviews.country 等于什么？</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">italian_wines = reviews[reviews[<span class="string">&#x27;country&#x27;</span>]==<span class="string">&#x27;Italy&#x27;</span>]</span><br><span class="line">italian_wines</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Italy</td>
      <td>Here's a bright, informal red that opens with ...</td>
      <td>Belsito</td>
      <td>87</td>
      <td>16.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Vittoria</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Terre di Giurfo 2013 Belsito Frappato (Vittoria)</td>
      <td>Frappato</td>
      <td>Terre di Giurfo</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Italy</td>
      <td>This is dominated by oak and oak-driven aromas...</td>
      <td>Rosso</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Masseria Setteporte 2012 Rosso  (Etna)</td>
      <td>Nerello Mascalese</td>
      <td>Masseria Setteporte</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Italy</td>
      <td>Delicate aromas recall white flower and citrus...</td>
      <td>Ficiligno</td>
      <td>87</td>
      <td>19.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Baglio di Pianetto 2007 Ficiligno White (Sicilia)</td>
      <td>White Blend</td>
      <td>Baglio di Pianetto</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Italy</td>
      <td>Aromas of prune, blackcurrant, toast and oak c...</td>
      <td>Aynat</td>
      <td>87</td>
      <td>35.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Canicattì 2009 Aynat Nero d'Avola (Sicilia)</td>
      <td>Nero d'Avola</td>
      <td>Canicattì</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129929</th>
      <td>Italy</td>
      <td>This luminous sparkler has a sweet, fruit-forw...</td>
      <td>NaN</td>
      <td>91</td>
      <td>38.0</td>
      <td>Veneto</td>
      <td>Prosecco Superiore di Cartizze</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Col Vetoraz Spumanti NV  Prosecco Superiore di...</td>
      <td>Prosecco</td>
      <td>Col Vetoraz Spumanti</td>
    </tr>
    <tr>
      <th>129943</th>
      <td>Italy</td>
      <td>A blend of Nero d'Avola and Syrah, this convey...</td>
      <td>Adènzia</td>
      <td>90</td>
      <td>29.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Baglio del Cristo di Campobello 2012 Adènzia R...</td>
      <td>Red Blend</td>
      <td>Baglio del Cristo di Campobello</td>
    </tr>
    <tr>
      <th>129947</th>
      <td>Italy</td>
      <td>A blend of 65% Cabernet Sauvignon, 30% Merlot ...</td>
      <td>Symposio</td>
      <td>90</td>
      <td>20.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Terre Siciliane</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Feudo Principi di Butera 2012 Symposio Red (Te...</td>
      <td>Red Blend</td>
      <td>Feudo Principi di Butera</td>
    </tr>
    <tr>
      <th>129961</th>
      <td>Italy</td>
      <td>Intense aromas of wild cherry, baking spice, t...</td>
      <td>NaN</td>
      <td>90</td>
      <td>30.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>COS 2013 Frappato (Sicilia)</td>
      <td>Frappato</td>
      <td>COS</td>
    </tr>
    <tr>
      <th>129962</th>
      <td>Italy</td>
      <td>Blackberry, cassis, grilled herb and toasted a...</td>
      <td>Sàgana Tenuta San Giacomo</td>
      <td>90</td>
      <td>40.0</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Sicilia</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Cusumano 2012 Sàgana Tenuta San Giacomo Nero d...</td>
      <td>Nero d'Avola</td>
      <td>Cusumano</td>
    </tr>
  </tbody>
</table>
<p>19540 rows × 13 columns</p>
</div>



<p>9.创建一个 DataFrame top_oceania_wines，其中包含来自澳大利亚或新西兰的葡萄酒的至少 95 分（满分 100 分）的所有评论。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">top_oceania_wines = reviews[reviews.country.isin([<span class="string">&#x27;Australia&#x27;</span>, <span class="string">&#x27;New Zealand&#x27;</span>]) &amp; (reviews.points&gt;=<span class="number">95</span>)]</span><br><span class="line">top_oceania_wines</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>345</th>
      <td>Australia</td>
      <td>This wine contains some material over 100 year...</td>
      <td>Rare</td>
      <td>100</td>
      <td>350.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Chambers Rosewood Vineyards NV Rare Muscat (Ru...</td>
      <td>Muscat</td>
      <td>Chambers Rosewood Vineyards</td>
    </tr>
    <tr>
      <th>346</th>
      <td>Australia</td>
      <td>This deep brown wine smells like a damp, mossy...</td>
      <td>Rare</td>
      <td>98</td>
      <td>350.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Chambers Rosewood Vineyards NV Rare Muscadelle...</td>
      <td>Muscadelle</td>
      <td>Chambers Rosewood Vineyards</td>
    </tr>
    <tr>
      <th>348</th>
      <td>Australia</td>
      <td>Deep mahogany. Dried fig and black tea on the ...</td>
      <td>Grand</td>
      <td>97</td>
      <td>100.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Chambers Rosewood Vineyards NV Grand Muscat (R...</td>
      <td>Muscat</td>
      <td>Chambers Rosewood Vineyards</td>
    </tr>
    <tr>
      <th>349</th>
      <td>Australia</td>
      <td>RunRig is always complex, and the 2012 doesn't...</td>
      <td>RunRig</td>
      <td>97</td>
      <td>225.0</td>
      <td>South Australia</td>
      <td>Barossa</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2012 RunRig Shiraz-Viognier (Barossa)</td>
      <td>Shiraz-Viognier</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>356</th>
      <td>Australia</td>
      <td>Dusty, firm, powerful: just a few apt descript...</td>
      <td>Georgia's Paddock</td>
      <td>95</td>
      <td>85.0</td>
      <td>Victoria</td>
      <td>Heathcote</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Jasper Hill 2013 Georgia's Paddock Shiraz (Hea...</td>
      <td>Shiraz</td>
      <td>Jasper Hill</td>
    </tr>
    <tr>
      <th>360</th>
      <td>Australia</td>
      <td>Bacon and tapenade elements merge easily on th...</td>
      <td>Descendant</td>
      <td>95</td>
      <td>125.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2012 Descendant Shiraz-Viognier (Baro...</td>
      <td>Shiraz-Viognier</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>365</th>
      <td>Australia</td>
      <td>The Taylor family selected Clare Valley for it...</td>
      <td>St. Andrews Single Vineyard Release</td>
      <td>95</td>
      <td>60.0</td>
      <td>South Australia</td>
      <td>Clare Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Wakefield 2013 St. Andrews Single Vineyard Rel...</td>
      <td>Shiraz</td>
      <td>Wakefield</td>
    </tr>
    <tr>
      <th>14354</th>
      <td>Australia</td>
      <td>This wine's concentrated dark fruit shows in t...</td>
      <td>Old Vine</td>
      <td>95</td>
      <td>60.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Kaesler 2006 Old Vine Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Kaesler</td>
    </tr>
    <tr>
      <th>16538</th>
      <td>Australia</td>
      <td>Rich, dense and intense, this is a big, muscul...</td>
      <td>The Family Tree</td>
      <td>95</td>
      <td>65.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Lambert 2013 The Family Tree Shiraz (Barossa V...</td>
      <td>Shiraz</td>
      <td>Lambert</td>
    </tr>
    <tr>
      <th>28573</th>
      <td>Australia</td>
      <td>Astralis has become one of Australia's top col...</td>
      <td>Astralis</td>
      <td>95</td>
      <td>350.0</td>
      <td>South Australia</td>
      <td>Clarendon</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Clarendon Hills 2005 Astralis Syrah (Clarendon)</td>
      <td>Syrah</td>
      <td>Clarendon Hills</td>
    </tr>
    <tr>
      <th>34502</th>
      <td>Australia</td>
      <td>This prodigious wine showcases Barossa's abili...</td>
      <td>The Relic</td>
      <td>98</td>
      <td>135.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Standish 2006 The Relic Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Standish</td>
    </tr>
    <tr>
      <th>34506</th>
      <td>Australia</td>
      <td>If Standish's Relic is the feminine side of Sh...</td>
      <td>The Standish Single Vineyard</td>
      <td>96</td>
      <td>135.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Standish 2005 The Standish Single Vineyard Shi...</td>
      <td>Shiraz</td>
      <td>Standish</td>
    </tr>
    <tr>
      <th>38988</th>
      <td>Australia</td>
      <td>Penfolds Bin 707 has leapt in quality over the...</td>
      <td>Bin 707</td>
      <td>95</td>
      <td>200.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2009 Bin 707 Cabernet Sauvignon (Sout...</td>
      <td>Cabernet Sauvignon</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>39059</th>
      <td>Australia</td>
      <td>The Taylor family selected Clare Valley for it...</td>
      <td>St. Andrews Single Vineyard Release</td>
      <td>95</td>
      <td>60.0</td>
      <td>South Australia</td>
      <td>Clare Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Wakefield 2013 St. Andrews Single Vineyard Rel...</td>
      <td>Shiraz</td>
      <td>Wakefield</td>
    </tr>
    <tr>
      <th>39961</th>
      <td>Australia</td>
      <td>As unevolved as they are, the dense and multil...</td>
      <td>Grange</td>
      <td>96</td>
      <td>185.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Penfolds 1996 Grange Shiraz (South Australia)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>39962</th>
      <td>Australia</td>
      <td>Seamless luxury from stem to stern, this ‘baby...</td>
      <td>RWT</td>
      <td>95</td>
      <td>70.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Penfolds 1998 RWT Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>45809</th>
      <td>Australia</td>
      <td>The 2007 Astralis impresses for its combinatio...</td>
      <td>Astralis</td>
      <td>95</td>
      <td>225.0</td>
      <td>South Australia</td>
      <td>Clarendon</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Clarendon Hills 2007 Astralis Syrah (Clarendon)</td>
      <td>Syrah</td>
      <td>Clarendon Hills</td>
    </tr>
    <tr>
      <th>56953</th>
      <td>Australia</td>
      <td>This inky, embryonic wine deserves to be cella...</td>
      <td>Grange</td>
      <td>99</td>
      <td>850.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2010 Grange Shiraz (South Australia)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>56956</th>
      <td>Australia</td>
      <td>You may have to scour the country to secure so...</td>
      <td>Andelmonde</td>
      <td>97</td>
      <td>95.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Standish 2012 Andelmonde Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Standish</td>
    </tr>
    <tr>
      <th>56957</th>
      <td>Australia</td>
      <td>Thorn Clarke has taken its Shiraz to a new lev...</td>
      <td>Ron Thorn Single Vineyard</td>
      <td>96</td>
      <td>89.0</td>
      <td>South Australia</td>
      <td>Barossa</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Thorn Clarke 2012 Ron Thorn Single Vineyard Sh...</td>
      <td>Shiraz</td>
      <td>Thorn Clarke</td>
    </tr>
    <tr>
      <th>56959</th>
      <td>Australia</td>
      <td>Is this the Yin to Grange's Yang? The wines ar...</td>
      <td>Hill of Grace</td>
      <td>96</td>
      <td>820.0</td>
      <td>South Australia</td>
      <td>Eden Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Henschke 2010 Hill of Grace Shiraz (Eden Valley)</td>
      <td>Shiraz</td>
      <td>Henschke</td>
    </tr>
    <tr>
      <th>59977</th>
      <td>Australia</td>
      <td>This is a top example of the classic Australia...</td>
      <td>The Peake</td>
      <td>96</td>
      <td>150.0</td>
      <td>South Australia</td>
      <td>McLaren Vale</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Hickinbotham 2013 The Peake Cabernet-Shiraz (M...</td>
      <td>Cabernet-Shiraz</td>
      <td>Hickinbotham</td>
    </tr>
    <tr>
      <th>59984</th>
      <td>Australia</td>
      <td>This is a throwback to those brash, flavor-exu...</td>
      <td>One</td>
      <td>95</td>
      <td>95.0</td>
      <td>South Australia</td>
      <td>Langhorne Creek</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Heartland 2013 One Red (Langhorne Creek)</td>
      <td>Red Blend</td>
      <td>Heartland</td>
    </tr>
    <tr>
      <th>67096</th>
      <td>Australia</td>
      <td>Just a tiny serving of this dark nectar will l...</td>
      <td>Calliope Rare</td>
      <td>98</td>
      <td>86.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>R.L. Buller &amp; Son NV Calliope Rare Tokay (Ruth...</td>
      <td>Tokay</td>
      <td>R.L. Buller &amp; Son</td>
    </tr>
    <tr>
      <th>67101</th>
      <td>Australia</td>
      <td>This Muscat is the color of dark coffee, with ...</td>
      <td>Rare</td>
      <td>95</td>
      <td>300.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Chambers Rosewood Vineyards NV Rare Muscat (Ru...</td>
      <td>Muscat</td>
      <td>Chambers Rosewood Vineyards</td>
    </tr>
    <tr>
      <th>76392</th>
      <td>Australia</td>
      <td>When the alcohol levels are reined in to appro...</td>
      <td>Georgia's Paddock</td>
      <td>95</td>
      <td>85.0</td>
      <td>Victoria</td>
      <td>Heathcote</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Jasper Hill 2012 Georgia's Paddock Shiraz (Hea...</td>
      <td>Shiraz</td>
      <td>Jasper Hill</td>
    </tr>
    <tr>
      <th>77028</th>
      <td>Australia</td>
      <td>This has all the size and weight you've come t...</td>
      <td>Grange</td>
      <td>98</td>
      <td>850.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2008 Grange Shiraz (South Australia)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>77036</th>
      <td>Australia</td>
      <td>RWT (unromantically derived from “Red Wine Tri...</td>
      <td>RWT</td>
      <td>96</td>
      <td>150.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2009 RWT Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>77037</th>
      <td>Australia</td>
      <td>Winemaker Dave Powell is no longer with Torbre...</td>
      <td>RunRig</td>
      <td>96</td>
      <td>225.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2007 RunRig Shiraz-Viognier (Barossa ...</td>
      <td>Shiraz-Viognier</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>77042</th>
      <td>Australia</td>
      <td>This is likely the most ageworthy Shiraz winem...</td>
      <td>Eligo</td>
      <td>95</td>
      <td>100.0</td>
      <td>South Australia</td>
      <td>Barossa</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>John Duval Wines 2010 Eligo Shiraz (Barossa)</td>
      <td>Shiraz</td>
      <td>John Duval Wines</td>
    </tr>
    <tr>
      <th>77044</th>
      <td>Australia</td>
      <td>The fruit for this offering comes from the Gre...</td>
      <td>R Reserve</td>
      <td>95</td>
      <td>105.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Kilikanoon 2009 R Reserve Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Kilikanoon</td>
    </tr>
    <tr>
      <th>77046</th>
      <td>Australia</td>
      <td>With aromas and flavors that range widely from...</td>
      <td>The Factor</td>
      <td>95</td>
      <td>125.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2007 The Factor Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>83357</th>
      <td>Australia</td>
      <td>A throwback to the monster Shiraz style of old...</td>
      <td>Grange</td>
      <td>96</td>
      <td>500.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2004 Grange Shiraz (South Australia)</td>
      <td>Shiraz</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>84815</th>
      <td>Australia</td>
      <td>The Factor is always one of Torbreck's biggest...</td>
      <td>The Factor</td>
      <td>95</td>
      <td>125.0</td>
      <td>South Australia</td>
      <td>Barossa</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2012 The Factor Shiraz (Barossa)</td>
      <td>Shiraz</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>84816</th>
      <td>Australia</td>
      <td>Nashwauk is Kaesler's McLaren Vale project, fi...</td>
      <td>Beacon</td>
      <td>95</td>
      <td>145.0</td>
      <td>South Australia</td>
      <td>McLaren Vale</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Nashwauk 2010 Beacon Shiraz (McLaren Vale)</td>
      <td>Shiraz</td>
      <td>Nashwauk</td>
    </tr>
    <tr>
      <th>87128</th>
      <td>Australia</td>
      <td>This full-bodied, muscular Shiraz is built for...</td>
      <td>Amery Vineyard Block 6</td>
      <td>96</td>
      <td>120.0</td>
      <td>South Australia</td>
      <td>McLaren Vale</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Kay Brothers 2012 Amery Vineyard Block 6 Shira...</td>
      <td>Shiraz</td>
      <td>Kay Brothers</td>
    </tr>
    <tr>
      <th>87137</th>
      <td>Australia</td>
      <td>Perhaps the best young wine I've tasted from M...</td>
      <td>NaN</td>
      <td>95</td>
      <td>84.0</td>
      <td>Western Australia</td>
      <td>Margaret River</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Moss Wood 2011 Cabernet Sauvignon (Margaret Ri...</td>
      <td>Cabernet Sauvignon</td>
      <td>Moss Wood</td>
    </tr>
    <tr>
      <th>87143</th>
      <td>Australia</td>
      <td>This is wonderfully complex and aromatic, with...</td>
      <td>St. Andrews Single Vineyard Release</td>
      <td>95</td>
      <td>60.0</td>
      <td>South Australia</td>
      <td>Clare Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Wakefield 2012 St. Andrews Single Vineyard Rel...</td>
      <td>Shiraz</td>
      <td>Wakefield</td>
    </tr>
    <tr>
      <th>91851</th>
      <td>New Zealand</td>
      <td>This full-bodied, richly tannic wine delivers....</td>
      <td>Homage</td>
      <td>95</td>
      <td>100.0</td>
      <td>Hawke's Bay</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Trinity Hill 2013 Homage Syrah (Hawke's Bay)</td>
      <td>Syrah</td>
      <td>Trinity Hill</td>
    </tr>
    <tr>
      <th>98386</th>
      <td>Australia</td>
      <td>One of the more approachable of the d'Arenberg...</td>
      <td>Little Venice Single Vineyard</td>
      <td>95</td>
      <td>85.0</td>
      <td>South Australia</td>
      <td>McLaren Vale</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>D'Arenberg 2010 Little Venice Single Vineyard ...</td>
      <td>Shiraz</td>
      <td>D'Arenberg</td>
    </tr>
    <tr>
      <th>99318</th>
      <td>Australia</td>
      <td>From vines planted in 1912, this has been an i...</td>
      <td>Mount Edelstone Vineyard</td>
      <td>95</td>
      <td>200.0</td>
      <td>South Australia</td>
      <td>Eden Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Henschke 2014 Mount Edelstone Vineyard Shiraz ...</td>
      <td>Shiraz</td>
      <td>Henschke</td>
    </tr>
    <tr>
      <th>99330</th>
      <td>Australia</td>
      <td>This Cabernet equivalent to Grange has explode...</td>
      <td>Bin 707</td>
      <td>95</td>
      <td>500.0</td>
      <td>South Australia</td>
      <td>South Australia</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Penfolds 2014 Bin 707 Cabernet Sauvignon (Sout...</td>
      <td>Cabernet Sauvignon</td>
      <td>Penfolds</td>
    </tr>
    <tr>
      <th>99340</th>
      <td>Australia</td>
      <td>This rich, opulent wine carries its massive oa...</td>
      <td>Les Amis</td>
      <td>95</td>
      <td>185.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2013 Les Amis Grenache (Barossa Valley)</td>
      <td>Grenache</td>
      <td>Torbreck</td>
    </tr>
    <tr>
      <th>109427</th>
      <td>Australia</td>
      <td>This wine is dark brown in hue with a greenish...</td>
      <td>Rare</td>
      <td>99</td>
      <td>300.0</td>
      <td>Victoria</td>
      <td>Rutherglen</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Chambers Rosewood Vineyards NV Rare Muscadelle...</td>
      <td>Muscadelle</td>
      <td>Chambers Rosewood Vineyards</td>
    </tr>
    <tr>
      <th>109434</th>
      <td>Australia</td>
      <td>D'Arenberg's lineup of single-vineyard Shiraze...</td>
      <td>The Swinging Malaysian Single Vineyard</td>
      <td>96</td>
      <td>85.0</td>
      <td>South Australia</td>
      <td>McLaren Vale</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>D'Arenberg 2010 The Swinging Malaysian Single ...</td>
      <td>Shiraz</td>
      <td>D'Arenberg</td>
    </tr>
    <tr>
      <th>122421</th>
      <td>Australia</td>
      <td>Despite this wine's weight and richness, it re...</td>
      <td>Amon-Ra Unfiltered</td>
      <td>96</td>
      <td>110.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Glaetzer 2010 Amon-Ra Unfiltered Shiraz (Baros...</td>
      <td>Shiraz</td>
      <td>Glaetzer</td>
    </tr>
    <tr>
      <th>122430</th>
      <td>Australia</td>
      <td>These blends are traditional in Australia—they...</td>
      <td>Anaperenna</td>
      <td>95</td>
      <td>80.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Glaetzer 2010 Anaperenna Shiraz-Cabernet Sauvi...</td>
      <td>Shiraz-Cabernet Sauvignon</td>
      <td>Glaetzer</td>
    </tr>
    <tr>
      <th>122507</th>
      <td>New Zealand</td>
      <td>This blend of Cabernet Sauvignon (62.5%), Merl...</td>
      <td>SQM Gimblett Gravels Cabernets/Merlot</td>
      <td>95</td>
      <td>79.0</td>
      <td>Hawke's Bay</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Squawking Magpie 2014 SQM Gimblett Gravels Cab...</td>
      <td>Bordeaux-style Red Blend</td>
      <td>Squawking Magpie</td>
    </tr>
    <tr>
      <th>122939</th>
      <td>Australia</td>
      <td>Full-bodied and plush yet vibrant and imbued w...</td>
      <td>The Factor</td>
      <td>98</td>
      <td>125.0</td>
      <td>South Australia</td>
      <td>Barossa Valley</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>Torbreck 2013 The Factor Shiraz (Barossa Valley)</td>
      <td>Shiraz</td>
      <td>Torbreck</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="Summary-Functions-and-Maps"><a href="#Summary-Functions-and-Maps" class="headerlink" title="Summary Functions and Maps"></a>Summary Functions and Maps</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>在上一教程中，我们学习了如何从 DataFrame 或 Series 中选择相关数据。正如我们在练习中演示的那样，从数据表示中提取正确的数据对于完成工作至关重要。</p>
<p>然而，数据并不总是以我们想要的格式从内存中直接取出。有时，我们必须自己再做一些工作来重新格式化数据，以完成手头的任务。本教程将介绍我们可以对数据进行的不同操作，以获得 “恰到好处 “的输入。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">reviews = pd.read_csv(<span class="string">&#x27;datasets/wine/winemag-data-130k-v2.csv&#x27;</span>,index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<h2 id="Summary-functions"><a href="#Summary-functions" class="headerlink" title="Summary functions"></a>Summary functions</h2><p>Pandas 提供了许多简单的“摘要函数”（不是官方名称），它们以某种有用的方式重组数据。例如，考虑describe()方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.points.describe()</span><br></pre></td></tr></table></figure>




<pre><code>count    129971.000000
mean         88.447138
std           3.039730
min          80.000000
25%          86.000000
50%          88.000000
75%          91.000000
max         100.000000
Name: points, dtype: float64
</code></pre>
<p>该方法生成给定列属性的高级摘要。它是类型感知的，这意味着它的输出会根据输入的数据类型而改变。上面的输出仅对数值数据有意义；对于字符串数据，我们得到的结果如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.taster_name.describe()</span><br></pre></td></tr></table></figure>




<pre><code>count         103727
unique            19
top       Roger Voss
freq           25514
Name: taster_name, dtype: object
</code></pre>
<p>如果你想得到DataFrame或Series中某一列的一些特定的简单汇总统计，通常有一个有用的pandas函数可以实现。</p>
<p>例如，我们可以使用mean()函数来查看所分配分数的平均值（例如，平均评分的葡萄酒的表现如何）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.points.mean()</span><br></pre></td></tr></table></figure>




<pre><code>88.44713820775404
</code></pre>
<p>要查看唯一值的列表，我们可以使用 unique() 函数：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.taster_name.unique()</span><br></pre></td></tr></table></figure>




<pre><code>array([&#39;Kerin O’Keefe&#39;, &#39;Roger Voss&#39;, &#39;Paul Gregutt&#39;,
       &#39;Alexander Peartree&#39;, &#39;Michael Schachner&#39;, &#39;Anna Lee C. Iijima&#39;,
       &#39;Virginie Boone&#39;, &#39;Matt Kettmann&#39;, nan, &#39;Sean P. Sullivan&#39;,
       &#39;Jim Gordon&#39;, &#39;Joe Czerwinski&#39;, &#39;Anne Krebiehl\xa0MW&#39;,
       &#39;Lauren Buzzeo&#39;, &#39;Mike DeSimone&#39;, &#39;Jeff Jenssen&#39;,
       &#39;Susan Kostrzewa&#39;, &#39;Carrie Dykes&#39;, &#39;Fiona Adams&#39;,
       &#39;Christina Pickard&#39;], dtype=object)
</code></pre>
<p>要查看唯一值的列表以及它们在数据集中出现的频率，我们可以使用 value_counts() 方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.taster_name.value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>taster_name
Roger Voss            25514
Michael Schachner     15134
Kerin O’Keefe         10776
Virginie Boone         9537
Paul Gregutt           9532
Matt Kettmann          6332
Joe Czerwinski         5147
Sean P. Sullivan       4966
Anna Lee C. Iijima     4415
Jim Gordon             4177
Anne Krebiehl MW       3685
Lauren Buzzeo          1835
Susan Kostrzewa        1085
Mike DeSimone           514
Jeff Jenssen            491
Alexander Peartree      415
Carrie Dykes            139
Fiona Adams              27
Christina Pickard         6
Name: count, dtype: int64
</code></pre>
<h2 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h2><p>映射（map）是从数学中借用的术语，指的是将一组值 “映射 “到另一组值的函数。在数据科学中，我们经常需要从现有数据中创建新的表示方法，或者将数据从现在的格式转换为我们希望的格式。映射就是处理这些工作的工具，因此它对于完成工作极为重要！</p>
<p>有两种映射方法您会经常用到。</p>
<p>map()是第一个，也是稍微简单的一个。例如，假设我们想将葡萄酒得到的分数重新平均为0：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">review_points_mean = reviews.points.mean()</span><br><span class="line">reviews.points.<span class="built_in">map</span>(<span class="keyword">lambda</span> p: p - review_points_mean) <span class="comment">#输入points，函数为points-points_mean</span></span><br></pre></td></tr></table></figure>




<pre><code>0        -1.447138
1        -1.447138
2        -1.447138
3        -1.447138
4        -1.447138
            ...   
129966    1.552862
129967    1.552862
129968    1.552862
129969    1.552862
129970    1.552862
Name: points, Length: 129971, dtype: float64
</code></pre>
<p>您传递给map()的函数应该期望从Series中得到一个单独的值（在上面的示例中是一个点值），并返回该值的转换版本。 map()返回一个新的Series，其中所有的值都已被您的函数转换。</p>
<p>如果我们想通过在每一行上调用自定义方法来转换整个DataFrame，则apply()是等价的方法。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">remean_points</span>(<span class="params">row</span>):</span><br><span class="line">    row.points = row.points - review_points_mean</span><br><span class="line">    <span class="keyword">return</span> row</span><br><span class="line"></span><br><span class="line">reviews.apply(remean_points, axis=<span class="string">&#x27;columns&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>-1.447138</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>-1.447138</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>-1.447138</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>-1.447138</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>-1.447138</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>1.552862</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>1.552862</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>1.552862</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>1.552862</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>1.552862</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p>如果我们在调用views.apply()时使用的是axis&#x3D;’index’，那么我们就不需要传递一个函数来转换每一行，而是需要给出一个函数来转换每一列。请注意，map()和apply()分别返回新的、转换后的Series和DataFrames。它们不会修改被调用的原始数据。如果我们查看第一行的评论，我们可以看到它仍然具有原始的点值。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.head(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
  </tbody>
</table>
</div>



<p>Pandas 提供了许多常见的内置映射操作。例如，以下是重新定义点列的更快方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">review_points_mean = reviews.points.mean()</span><br><span class="line">reviews.points - review_points_mean</span><br></pre></td></tr></table></figure>




<pre><code>0        -1.447138
1        -1.447138
2        -1.447138
3        -1.447138
4        -1.447138
            ...   
129966    1.552862
129967    1.552862
129968    1.552862
129969    1.552862
129970    1.552862
Name: points, Length: 129971, dtype: float64
</code></pre>
<p>在这段代码中，我们在左侧的大量值（系列中的所有值）和右侧的单个值（平均值）之间执行运算。Pandas查看该表达式，并计算出我们必须从数据集中的每个值中减去该平均值。</p>
<p>如果我们在等长序列之间执行这些操作，Pandas也会明白该怎么做。例如，结合数据集中的国家和地区信息的简单方法如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.country + <span class="string">&quot; - &quot;</span> + reviews.region_1</span><br></pre></td></tr></table></figure>




<pre><code>0                     Italy - Etna
1                              NaN
2           US - Willamette Valley
3         US - Lake Michigan Shore
4           US - Willamette Valley
                    ...           
129966                         NaN
129967                 US - Oregon
129968             France - Alsace
129969             France - Alsace
129970             France - Alsace
Length: 129971, dtype: object
</code></pre>
<p>这些运算符比map()或apply()更快，因为它们使用了pandas内置的加速功能。所有标准的 Python 运算符 (&gt;, &lt;, &#x3D;&#x3D;, 等等) 都以这种方式工作。</p>
<p>然而，它们不如map()或apply()灵活，后者可以做更高级的事情，比如应用条件逻辑，而这是加减法无法做到的。</p>
<h1 id="TEST-1"><a href="#TEST-1" class="headerlink" title="TEST"></a>TEST</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">reviews = pd.read_csv(<span class="string">&#x27;datasets/wine/winemag-data-130k-v2.csv&#x27;</span>,index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>1.review DataFrame 中points列的中位数是多少？</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;points&#x27;</span>].median()</span><br></pre></td></tr></table></figure>




<pre><code>88.0
</code></pre>
<p>2.What countries are represented in the dataset? (Your answer should not include any duplicates.)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries=reviews[<span class="string">&#x27;country&#x27;</span>].unique()</span><br><span class="line">countries</span><br></pre></td></tr></table></figure>




<pre><code>array([&#39;Italy&#39;, &#39;Portugal&#39;, &#39;US&#39;, &#39;Spain&#39;, &#39;France&#39;, &#39;Germany&#39;,
       &#39;Argentina&#39;, &#39;Chile&#39;, &#39;Australia&#39;, &#39;Austria&#39;, &#39;South Africa&#39;,
       &#39;New Zealand&#39;, &#39;Israel&#39;, &#39;Hungary&#39;, &#39;Greece&#39;, &#39;Romania&#39;, &#39;Mexico&#39;,
       &#39;Canada&#39;, nan, &#39;Turkey&#39;, &#39;Czech Republic&#39;, &#39;Slovenia&#39;,
       &#39;Luxembourg&#39;, &#39;Croatia&#39;, &#39;Georgia&#39;, &#39;Uruguay&#39;, &#39;England&#39;,
       &#39;Lebanon&#39;, &#39;Serbia&#39;, &#39;Brazil&#39;, &#39;Moldova&#39;, &#39;Morocco&#39;, &#39;Peru&#39;,
       &#39;India&#39;, &#39;Bulgaria&#39;, &#39;Cyprus&#39;, &#39;Armenia&#39;, &#39;Switzerland&#39;,
       &#39;Bosnia and Herzegovina&#39;, &#39;Ukraine&#39;, &#39;Slovakia&#39;, &#39;Macedonia&#39;,
       &#39;China&#39;, &#39;Egypt&#39;], dtype=object)
</code></pre>
<p>3.How often does each country appear in the dataset? Create a Series reviews_per_country mapping countries to the count of reviews of wines from that country.<br>每个国家在数据集中出现的频率是多少？创建一个 Series Reviews_per_country，将国家映射到该国家的葡萄酒reviews数量。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">reviews[<span class="string">&#x27;country&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>country
US                        54504
France                    22093
Italy                     19540
Spain                      6645
Portugal                   5691
Chile                      4472
Argentina                  3800
Austria                    3345
Australia                  2329
Germany                    2165
New Zealand                1419
South Africa               1401
Israel                      505
Greece                      466
Canada                      257
Hungary                     146
Bulgaria                    141
Romania                     120
Uruguay                     109
Turkey                       90
Slovenia                     87
Georgia                      86
England                      74
Croatia                      73
Mexico                       70
Moldova                      59
Brazil                       52
Lebanon                      35
Morocco                      28
Peru                         16
Ukraine                      14
Serbia                       12
Czech Republic               12
Macedonia                    12
Cyprus                       11
India                         9
Switzerland                   7
Luxembourg                    6
Bosnia and Herzegovina        2
Armenia                       2
Slovakia                      1
China                         1
Egypt                         1
Name: count, dtype: int64
</code></pre>
<p>Create variable centered_price containing a version of the price column with the mean price subtracted. (Note: this ‘centering’ transformation is a common preprocessing step before applying various machine learning algorithms.)</p>
<p>创建变量 centered_price，其中包含减去平均价格的价格列版本。 （注意：这种“居中”转换是应用各种机器学习算法之前的常见预处理步骤。）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = reviews[<span class="string">&#x27;price&#x27;</span>].mean()</span><br><span class="line">reviews[<span class="string">&#x27;price&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> p: p-a)</span><br></pre></td></tr></table></figure>




<pre><code>0               NaN
1        -20.363389
2        -21.363389
3        -22.363389
4         29.636611
            ...    
129966    -7.363389
129967    39.636611
129968    -5.363389
129969    -3.363389
129970   -14.363389
Name: price, Length: 129971, dtype: float64
</code></pre>
<p>I’m an economical wine buyer. Which wine is the “best bargain”? Create a variable bargain_wine with the title of the wine with the highest points-to-price ratio in the dataset.</p>
<p>我是一个经济实惠的葡萄酒买家。哪种酒是“最划算的”？使用数据集中积分价格比最高的葡萄酒的标题创建一个变量 deal_wine。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># reviews[[(reviews[&#x27;points&#x27;]/reviews[&#x27;price&#x27;]).idxmax()]]</span></span><br><span class="line">reviews[<span class="string">&#x27;title&#x27;</span>][(reviews[<span class="string">&#x27;points&#x27;</span>]/reviews[<span class="string">&#x27;price&#x27;</span>]).idxmax()]</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>&#39;Bandit NV Merlot (California)&#39;
</code></pre>
<p>6.There are only so many words you can use when describing a bottle of wine. Is a wine more likely to be “tropical” or “fruity”? Create a Series <code>descriptor_counts</code> counting how many times each of these two words appears in the <code>description</code> column in the dataset. (For simplicity, let’s ignore the capitalized versions of these words.)</p>
<p>在描述一瓶葡萄酒时，您可以使用的词汇有限。葡萄酒更可能是 “热带 “还是 “果味”？创建一个 “descriptor_counts “系列，计算这两个词在数据集的 “description “列中分别出现的次数。(为简单起见，让我们忽略这些词的大写版本）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">trop_ocurr</span>(<span class="params">row</span>):</span><br><span class="line">    <span class="keyword">return</span> re.search(<span class="string">&quot;tropical&quot;</span>,row.description)==<span class="literal">None</span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">frui_ocurr</span>(<span class="params">row</span>):</span><br><span class="line">    <span class="keyword">return</span> re.search(<span class="string">&quot;fruity&quot;</span>,row.description)==<span class="literal">None</span>  </span><br><span class="line"></span><br><span class="line">a = reviews.apply(trop_ocurr, axis=<span class="string">&#x27;columns&#x27;</span>).value_counts()[<span class="literal">False</span>]</span><br><span class="line">b = reviews.apply(frui_ocurr, axis=<span class="string">&#x27;columns&#x27;</span>).value_counts()[<span class="literal">False</span>]</span><br><span class="line"></span><br><span class="line">pd.Series([a,b],index=[<span class="string">&#x27;tropical&#x27;</span>, <span class="string">&#x27;fruity&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>0    3607
1    9090
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">############答案的方法##########</span></span><br><span class="line">n_trop = reviews.description.<span class="built_in">map</span>(<span class="keyword">lambda</span> desc: <span class="string">&quot;tropical&quot;</span> <span class="keyword">in</span> desc).<span class="built_in">sum</span>()</span><br><span class="line">n_fruity = reviews.description.<span class="built_in">map</span>(<span class="keyword">lambda</span> desc: <span class="string">&quot;fruity&quot;</span> <span class="keyword">in</span> desc).<span class="built_in">sum</span>()</span><br><span class="line">pd.Series([n_trop, n_fruity], index=[<span class="string">&#x27;tropical&#x27;</span>, <span class="string">&#x27;fruity&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>tropical    3607
fruity      9090
dtype: int64
</code></pre>
<ol start="7">
<li>We’d like to host these wine reviews on our website, but a rating system ranging from 80 to 100 points is too hard to understand - we’d like to translate them into simple star ratings. A score of 95 or higher counts as 3 stars, a score of at least 85 but less than 95 is 2 stars. Any other score is 1 star.</li>
</ol>
<p>Also, the Canadian Vintners Association bought a lot of ads on the site, so any wines from Canada should automatically get 3 stars, regardless of points.</p>
<p>Create a series <code>star_ratings</code> with the number of stars corresponding to each review in the dataset.</p>
<p>我们希望将这些酒评放在我们的网站上，但从80分到100分的评分系统太难懂了–我们希望将其转化为简单的星级评分。95分及以上为3星，85分以上95分以下为2星。其他分数为1星。</p>
<p>此外，加拿大葡萄酒商协会在网站上购买了大量广告，因此任何来自加拿大的葡萄酒都应该自动获得3星，无论分数高低。</p>
<p>创建一个 “star_ratings “序列，其中包含数据集中每条review对应的星级数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = pd.Series()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rate</span>(<span class="params">row</span>):</span><br><span class="line">    <span class="comment"># row[&#x27;points&#x27;]=3 if (row[&#x27;country&#x27;]==&#x27;Canada&#x27; or row[&#x27;points&#x27;]&gt;=95) else 2 if(row[&#x27;points&#x27;]&gt;=85) else 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span> <span class="keyword">if</span> (row[<span class="string">&#x27;country&#x27;</span>]==<span class="string">&#x27;Canada&#x27;</span> <span class="keyword">or</span> row[<span class="string">&#x27;points&#x27;</span>]&gt;=<span class="number">95</span>) <span class="keyword">else</span> <span class="number">2</span> <span class="keyword">if</span>(row[<span class="string">&#x27;points&#x27;</span>]&gt;=<span class="number">85</span>) <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># return row</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># reviews.apply(rate, axis=&#x27;columns&#x27;)[&#x27;points&#x27;]</span></span><br><span class="line">reviews.apply(rate, axis=<span class="string">&#x27;columns&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>0         2
1         2
2         2
3         2
4         2
         ..
129966    2
129967    2
129968    2
129969    2
129970    2
Length: 129971, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">###官方答案###</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stars</span>(<span class="params">row</span>):</span><br><span class="line">    <span class="keyword">if</span> row.country == <span class="string">&#x27;Canada&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">elif</span> row.points &gt;= <span class="number">95</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">elif</span> row.points &gt;= <span class="number">85</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">reviews.apply(stars, axis=<span class="string">&#x27;columns&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0         2
1         2
2         2
3         2
4         2
         ..
129966    2
129967    2
129968    2
129969    2
129970    2
Length: 129971, dtype: int64
</code></pre>
<h1 id="Grouping-and-Sorting"><a href="#Grouping-and-Sorting" class="headerlink" title="Grouping and Sorting"></a>Grouping and Sorting</h1><p>映射允许我们对数据帧或系列中的数据进行转换，一次只转换整个列中的一个值。然而，我们经常希望对数据进行分组，然后对数据所在的组进行特定操作。</p>
<p>正如您将了解到的，我们通过groupby()操作来实现这一点。我们还将介绍一些其他主题，例如索引DataFrames的更复杂方法，以及如何排序数据。</p>
<h2 id="分组分析"><a href="#分组分析" class="headerlink" title="分组分析"></a>分组分析</h2><p>到目前为止，我们经常使用的一个函数是 value_counts() 函数。我们可以通过执行以下操作来复制 value_counts() 的作用：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">reviews = pd.read_csv(<span class="string">&#x27;datasets/wine/winemag-data-130k-v2.csv&#x27;</span>,index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(reviews.groupby(<span class="string">&#x27;points&#x27;</span>).points.count())</span><br><span class="line"><span class="built_in">print</span>(reviews.groupby(<span class="string">&#x27;points&#x27;</span>).price.count())</span><br><span class="line"><span class="built_in">print</span>(reviews.groupby(<span class="string">&#x27;price&#x27;</span>).price.count())</span><br><span class="line"><span class="built_in">print</span>(reviews.groupby(<span class="string">&#x27;price&#x27;</span>).points.count())</span><br></pre></td></tr></table></figure>

<pre><code>points
80       397
81       692
82      1836
83      3025
84      6480
85      9530
86     12600
87     16933
88     17207
89     12226
90     15410
91     11359
92      9613
93      6489
94      3758
95      1535
96       523
97       229
98        77
99        33
100       19
Name: points, dtype: int64
points
80       395
81       680
82      1772
83      2886
84      6099
85      8902
86     11745
87     15767
88     16014
89     11324
90     14361
91     10564
92      8871
93      5935
94      3449
95      1406
96       482
97       207
98        69
99        28
100       19
Name: price, dtype: int64
price
4.0        11
5.0        46
6.0       120
7.0       433
8.0       892
         ... 
1900.0      1
2000.0      2
2013.0      1
2500.0      2
3300.0      1
Name: price, Length: 390, dtype: int64
price
4.0        11
5.0        46
6.0       120
7.0       433
8.0       892
         ... 
1900.0      1
2000.0      2
2013.0      1
2500.0      2
3300.0      1
Name: points, Length: 390, dtype: int64
</code></pre>
<p>groupby()创建了一组评论，这些评论为给定的葡萄酒分配了相同的分值。然后，对于每一组，我们抓取points()列并计算它出现的次数。 value_counts()只是groupby()操作的快捷方式。</p>
<p>我们可以对这些数据使用我们之前使用过的任何汇总函数。例如，要获得每个点值类别中最便宜的葡萄酒，我们可以执行以下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby(<span class="string">&#x27;points&#x27;</span>).price.<span class="built_in">min</span>()</span><br></pre></td></tr></table></figure>




<pre><code>points
80      5.0
81      5.0
82      4.0
83      4.0
84      4.0
85      4.0
86      4.0
87      5.0
88      6.0
89      7.0
90      8.0
91      7.0
92     11.0
93     12.0
94     13.0
95     20.0
96     20.0
97     35.0
98     50.0
99     44.0
100    80.0
Name: price, dtype: float64
</code></pre>
<p>您可以将我们生成的每个组视为DataFrame的一个片段，其中仅包含值匹配的数据。我们可以使用apply()方法直接访问该DataFrame，然后以我们认为合适的方式处理数据。例如，我们可以从数据集中的每个酒庄中选择第一款葡萄酒的名称：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby(<span class="string">&#x27;winery&#x27;</span>).apply(<span class="keyword">lambda</span> df: df.title.iloc[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>




<pre><code>winery
1+1=3                                     1+1=3 NV Rosé Sparkling (Cava)
10 Knots                            10 Knots 2010 Viognier (Paso Robles)
100 Percent Wine              100 Percent Wine 2015 Moscato (California)
1000 Stories           1000 Stories 2013 Bourbon Barrel Aged Zinfande...
1070 Green                  1070 Green 2011 Sauvignon Blanc (Rutherford)
                                             ...                        
Órale                       Órale 2011 Cabronita Red (Santa Ynez Valley)
Öko                    Öko 2013 Made With Organically Grown Grapes Ma...
Ökonomierat Rebholz    Ökonomierat Rebholz 2007 Von Rotliegenden Spät...
àMaurice               àMaurice 2013 Fred Estate Syrah (Walla Walla V...
Štoka                                    Štoka 2009 Izbrani Teran (Kras)
Length: 16757, dtype: object
</code></pre>
<p>为了进行更细粒度的控制，您还可以按多列进行分组。举个例子，以下是我们如何按国家和省份挑选最好的葡萄酒的方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby([<span class="string">&#x27;country&#x27;</span>, <span class="string">&#x27;province&#x27;</span>]).apply(<span class="keyword">lambda</span> df: df.loc[df.points.idxmax()])</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
    <tr>
      <th>country</th>
      <th>province</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Argentina</th>
      <th>Mendoza Province</th>
      <td>Argentina</td>
      <td>If the color doesn't tell the full story, the ...</td>
      <td>Nicasia Vineyard</td>
      <td>97</td>
      <td>120.0</td>
      <td>Mendoza Province</td>
      <td>Mendoza</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Bodega Catena Zapata 2006 Nicasia Vineyard Mal...</td>
      <td>Malbec</td>
      <td>Bodega Catena Zapata</td>
    </tr>
    <tr>
      <th>Other</th>
      <td>Argentina</td>
      <td>Take note, this could be the best wine Colomé ...</td>
      <td>Reserva</td>
      <td>95</td>
      <td>90.0</td>
      <td>Other</td>
      <td>Salta</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Colomé 2010 Reserva Malbec (Salta)</td>
      <td>Malbec</td>
      <td>Colomé</td>
    </tr>
    <tr>
      <th>Armenia</th>
      <th>Armenia</th>
      <td>Armenia</td>
      <td>Deep salmon in color, this wine offers a bouqu...</td>
      <td>Estate Bottled</td>
      <td>88</td>
      <td>15.0</td>
      <td>Armenia</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mike DeSimone</td>
      <td>@worldwineguys</td>
      <td>Van Ardi 2015 Estate Bottled Rosé (Armenia)</td>
      <td>Rosé</td>
      <td>Van Ardi</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Australia</th>
      <th>Australia Other</th>
      <td>Australia</td>
      <td>Writes the book on how to make a wine filled w...</td>
      <td>Sarah's Blend</td>
      <td>93</td>
      <td>15.0</td>
      <td>Australia Other</td>
      <td>South Eastern Australia</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Marquis Philips 2000 Sarah's Blend Red (South ...</td>
      <td>Red Blend</td>
      <td>Marquis Philips</td>
    </tr>
    <tr>
      <th>New South Wales</th>
      <td>Australia</td>
      <td>De Bortoli's Noble One is as good as ever in 2...</td>
      <td>Noble One Bortytis</td>
      <td>94</td>
      <td>32.0</td>
      <td>New South Wales</td>
      <td>New South Wales</td>
      <td>NaN</td>
      <td>Joe Czerwinski</td>
      <td>@JoeCz</td>
      <td>De Bortoli 2007 Noble One Bortytis Semillon (N...</td>
      <td>Sémillon</td>
      <td>De Bortoli</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Uruguay</th>
      <th>Juanico</th>
      <td>Uruguay</td>
      <td>This mature Bordeaux-style blend is earthy on ...</td>
      <td>Preludio Barrel Select Lote N 77</td>
      <td>90</td>
      <td>45.0</td>
      <td>Juanico</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Familia Deicas 2004 Preludio Barrel Select Lot...</td>
      <td>Red Blend</td>
      <td>Familia Deicas</td>
    </tr>
    <tr>
      <th>Montevideo</th>
      <td>Uruguay</td>
      <td>A rich, heady bouquet offers aromas of blackbe...</td>
      <td>Monte Vide Eu Tannat-Merlot-Tempranillo</td>
      <td>91</td>
      <td>60.0</td>
      <td>Montevideo</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Bouza 2015 Monte Vide Eu Tannat-Merlot-Tempran...</td>
      <td>Red Blend</td>
      <td>Bouza</td>
    </tr>
    <tr>
      <th>Progreso</th>
      <td>Uruguay</td>
      <td>Rusty in color but deep and complex in nature,...</td>
      <td>Etxe Oneko Fortified Sweet Red</td>
      <td>90</td>
      <td>46.0</td>
      <td>Progreso</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Pisano 2007 Etxe Oneko Fortified Sweet Red Tan...</td>
      <td>Tannat</td>
      <td>Pisano</td>
    </tr>
    <tr>
      <th>San Jose</th>
      <td>Uruguay</td>
      <td>Baked, sweet, heavy aromas turn earthy with ti...</td>
      <td>El Preciado Gran Reserva</td>
      <td>87</td>
      <td>50.0</td>
      <td>San Jose</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Castillo Viejo 2005 El Preciado Gran Reserva R...</td>
      <td>Red Blend</td>
      <td>Castillo Viejo</td>
    </tr>
    <tr>
      <th>Uruguay</th>
      <td>Uruguay</td>
      <td>Cherry and berry aromas are ripe, healthy and ...</td>
      <td>Blend 002 Limited Edition</td>
      <td>91</td>
      <td>22.0</td>
      <td>Uruguay</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>Narbona NV Blend 002 Limited Edition Tannat-Ca...</td>
      <td>Tannat-Cabernet Franc</td>
      <td>Narbona</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 13 columns</p>
</div>



<p>另一个值得一提的 groupby() 方法是 agg()，它允许您同时在 DataFrame 上运行一堆不同的函数。例如，我们可以生成数据集的简单统计摘要，如下所示：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby([<span class="string">&#x27;country&#x27;</span>]).price.agg([<span class="built_in">len</span>, <span class="built_in">min</span>, <span class="built_in">max</span>])</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>len</th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Argentina</th>
      <td>3800</td>
      <td>4.0</td>
      <td>230.0</td>
    </tr>
    <tr>
      <th>Armenia</th>
      <td>2</td>
      <td>14.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>Australia</th>
      <td>2329</td>
      <td>5.0</td>
      <td>850.0</td>
    </tr>
    <tr>
      <th>Austria</th>
      <td>3345</td>
      <td>7.0</td>
      <td>1100.0</td>
    </tr>
    <tr>
      <th>Bosnia and Herzegovina</th>
      <td>2</td>
      <td>12.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>Brazil</th>
      <td>52</td>
      <td>10.0</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>Bulgaria</th>
      <td>141</td>
      <td>8.0</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>Canada</th>
      <td>257</td>
      <td>12.0</td>
      <td>120.0</td>
    </tr>
    <tr>
      <th>Chile</th>
      <td>4472</td>
      <td>5.0</td>
      <td>400.0</td>
    </tr>
    <tr>
      <th>China</th>
      <td>1</td>
      <td>18.0</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>Croatia</th>
      <td>73</td>
      <td>12.0</td>
      <td>65.0</td>
    </tr>
    <tr>
      <th>Cyprus</th>
      <td>11</td>
      <td>11.0</td>
      <td>21.0</td>
    </tr>
    <tr>
      <th>Czech Republic</th>
      <td>12</td>
      <td>15.0</td>
      <td>45.0</td>
    </tr>
    <tr>
      <th>Egypt</th>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>England</th>
      <td>74</td>
      <td>25.0</td>
      <td>95.0</td>
    </tr>
    <tr>
      <th>France</th>
      <td>22093</td>
      <td>5.0</td>
      <td>3300.0</td>
    </tr>
    <tr>
      <th>Georgia</th>
      <td>86</td>
      <td>9.0</td>
      <td>40.0</td>
    </tr>
    <tr>
      <th>Germany</th>
      <td>2165</td>
      <td>5.0</td>
      <td>775.0</td>
    </tr>
    <tr>
      <th>Greece</th>
      <td>466</td>
      <td>8.0</td>
      <td>79.0</td>
    </tr>
    <tr>
      <th>Hungary</th>
      <td>146</td>
      <td>10.0</td>
      <td>764.0</td>
    </tr>
    <tr>
      <th>India</th>
      <td>9</td>
      <td>10.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>Israel</th>
      <td>505</td>
      <td>8.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>Italy</th>
      <td>19540</td>
      <td>5.0</td>
      <td>900.0</td>
    </tr>
    <tr>
      <th>Lebanon</th>
      <td>35</td>
      <td>13.0</td>
      <td>75.0</td>
    </tr>
    <tr>
      <th>Luxembourg</th>
      <td>6</td>
      <td>16.0</td>
      <td>30.0</td>
    </tr>
    <tr>
      <th>Macedonia</th>
      <td>12</td>
      <td>15.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>Mexico</th>
      <td>70</td>
      <td>8.0</td>
      <td>108.0</td>
    </tr>
    <tr>
      <th>Moldova</th>
      <td>59</td>
      <td>8.0</td>
      <td>42.0</td>
    </tr>
    <tr>
      <th>Morocco</th>
      <td>28</td>
      <td>14.0</td>
      <td>40.0</td>
    </tr>
    <tr>
      <th>New Zealand</th>
      <td>1419</td>
      <td>7.0</td>
      <td>130.0</td>
    </tr>
    <tr>
      <th>Peru</th>
      <td>16</td>
      <td>10.0</td>
      <td>68.0</td>
    </tr>
    <tr>
      <th>Portugal</th>
      <td>5691</td>
      <td>5.0</td>
      <td>1000.0</td>
    </tr>
    <tr>
      <th>Romania</th>
      <td>120</td>
      <td>4.0</td>
      <td>320.0</td>
    </tr>
    <tr>
      <th>Serbia</th>
      <td>12</td>
      <td>15.0</td>
      <td>42.0</td>
    </tr>
    <tr>
      <th>Slovakia</th>
      <td>1</td>
      <td>16.0</td>
      <td>16.0</td>
    </tr>
    <tr>
      <th>Slovenia</th>
      <td>87</td>
      <td>7.0</td>
      <td>90.0</td>
    </tr>
    <tr>
      <th>South Africa</th>
      <td>1401</td>
      <td>5.0</td>
      <td>330.0</td>
    </tr>
    <tr>
      <th>Spain</th>
      <td>6645</td>
      <td>4.0</td>
      <td>770.0</td>
    </tr>
    <tr>
      <th>Switzerland</th>
      <td>7</td>
      <td>21.0</td>
      <td>160.0</td>
    </tr>
    <tr>
      <th>Turkey</th>
      <td>90</td>
      <td>14.0</td>
      <td>120.0</td>
    </tr>
    <tr>
      <th>US</th>
      <td>54504</td>
      <td>4.0</td>
      <td>2013.0</td>
    </tr>
    <tr>
      <th>Ukraine</th>
      <td>14</td>
      <td>6.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>Uruguay</th>
      <td>109</td>
      <td>10.0</td>
      <td>130.0</td>
    </tr>
  </tbody>
</table>
</div>



<p>有效使用 groupby() 将使您能够利用数据集做很多真正强大的事情。</p>
<h2 id="Multi-indexes"><a href="#Multi-indexes" class="headerlink" title="Multi-indexes"></a>Multi-indexes</h2><p>在我们迄今为止看到的所有示例中，我们一直在使用单标签索引的DataFrame或Series对象。<br>groupby()略有不同，根据我们运行的操作，它有时会产生所谓的多索引。<br>多索引与常规索引的不同之处在于它具有多个级别。例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed = reviews.groupby([<span class="string">&#x27;country&#x27;</span>, <span class="string">&#x27;province&#x27;</span>]).description.agg([<span class="built_in">len</span>])</span><br><span class="line">countries_reviewed</span><br><span class="line"><span class="comment"># reviews[&#x27;description&#x27;][0].__len__()</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>len</th>
    </tr>
    <tr>
      <th>country</th>
      <th>province</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">Argentina</th>
      <th>Mendoza Province</th>
      <td>3264</td>
    </tr>
    <tr>
      <th>Other</th>
      <td>536</td>
    </tr>
    <tr>
      <th>Armenia</th>
      <th>Armenia</th>
      <td>2</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Australia</th>
      <th>Australia Other</th>
      <td>245</td>
    </tr>
    <tr>
      <th>New South Wales</th>
      <td>85</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Uruguay</th>
      <th>Juanico</th>
      <td>12</td>
    </tr>
    <tr>
      <th>Montevideo</th>
      <td>11</td>
    </tr>
    <tr>
      <th>Progreso</th>
      <td>11</td>
    </tr>
    <tr>
      <th>San Jose</th>
      <td>3</td>
    </tr>
    <tr>
      <th>Uruguay</th>
      <td>24</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 1 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mi = countries_reviewed.index</span><br><span class="line"><span class="built_in">type</span>(mi)</span><br></pre></td></tr></table></figure>




<pre><code>pandas.core.indexes.multi.MultiIndex
</code></pre>
<p>多级索引有几种处理分层结构的方法，而单级索引则没有这些方法。它们还需要两层标签来获取一个值。对于刚接触pandas的用户来说，处理多索引输出是一个常见的 “疑难杂症”。</p>
<p>在pandas文档的MultiIndex&#x2F;Advanced Selection部分详细介绍了多索引的用例和使用说明。</p>
<p>然而，一般来说，你最常使用的多索引方法是转换回普通索引的reset_index()方法：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed.reset_index()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>Mendoza Province</td>
      <td>3264</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Argentina</td>
      <td>Other</td>
      <td>536</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Armenia</td>
      <td>Armenia</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Australia</td>
      <td>Australia Other</td>
      <td>245</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Australia</td>
      <td>New South Wales</td>
      <td>85</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>420</th>
      <td>Uruguay</td>
      <td>Juanico</td>
      <td>12</td>
    </tr>
    <tr>
      <th>421</th>
      <td>Uruguay</td>
      <td>Montevideo</td>
      <td>11</td>
    </tr>
    <tr>
      <th>422</th>
      <td>Uruguay</td>
      <td>Progreso</td>
      <td>11</td>
    </tr>
    <tr>
      <th>423</th>
      <td>Uruguay</td>
      <td>San Jose</td>
      <td>3</td>
    </tr>
    <tr>
      <th>424</th>
      <td>Uruguay</td>
      <td>Uruguay</td>
      <td>24</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 3 columns</p>
</div>



<h2 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h2><p>再次查看 countries_reviewed，我们可以看到分组返回的数据是按照索引顺序而不是值的顺序排列的。也就是说，在输出分组结果时，行的顺序取决于索引中的值，而不是数据中的值。</p>
<p>为了按照我们想要的顺序获得数据，我们可以自己对数据进行排序。sort_values()方法在这方面非常方便。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed = countries_reviewed.reset_index()</span><br><span class="line">countries_reviewed.sort_values(by=<span class="string">&#x27;len&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>179</th>
      <td>Greece</td>
      <td>Muscat of Kefallonian</td>
      <td>1</td>
    </tr>
    <tr>
      <th>192</th>
      <td>Greece</td>
      <td>Sterea Ellada</td>
      <td>1</td>
    </tr>
    <tr>
      <th>194</th>
      <td>Greece</td>
      <td>Thraki</td>
      <td>1</td>
    </tr>
    <tr>
      <th>354</th>
      <td>South Africa</td>
      <td>Paardeberg</td>
      <td>1</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Brazil</td>
      <td>Serra do Sudeste</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>409</th>
      <td>US</td>
      <td>Oregon</td>
      <td>5373</td>
    </tr>
    <tr>
      <th>227</th>
      <td>Italy</td>
      <td>Tuscany</td>
      <td>5897</td>
    </tr>
    <tr>
      <th>118</th>
      <td>France</td>
      <td>Bordeaux</td>
      <td>5941</td>
    </tr>
    <tr>
      <th>415</th>
      <td>US</td>
      <td>Washington</td>
      <td>8639</td>
    </tr>
    <tr>
      <th>392</th>
      <td>US</td>
      <td>California</td>
      <td>36247</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 3 columns</p>
</div>



<p>sort_values() 默认为升序排序，其中最低的值排在前面。然而，大多数时候我们想要降序排序，即数字较大的排在前面。事情是这样的：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed.sort_values(by=<span class="string">&#x27;len&#x27;</span>, ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>392</th>
      <td>US</td>
      <td>California</td>
      <td>36247</td>
    </tr>
    <tr>
      <th>415</th>
      <td>US</td>
      <td>Washington</td>
      <td>8639</td>
    </tr>
    <tr>
      <th>118</th>
      <td>France</td>
      <td>Bordeaux</td>
      <td>5941</td>
    </tr>
    <tr>
      <th>227</th>
      <td>Italy</td>
      <td>Tuscany</td>
      <td>5897</td>
    </tr>
    <tr>
      <th>409</th>
      <td>US</td>
      <td>Oregon</td>
      <td>5373</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>101</th>
      <td>Croatia</td>
      <td>Krk</td>
      <td>1</td>
    </tr>
    <tr>
      <th>247</th>
      <td>New Zealand</td>
      <td>Gladstone</td>
      <td>1</td>
    </tr>
    <tr>
      <th>357</th>
      <td>South Africa</td>
      <td>Piekenierskloof</td>
      <td>1</td>
    </tr>
    <tr>
      <th>63</th>
      <td>Chile</td>
      <td>Coelemu</td>
      <td>1</td>
    </tr>
    <tr>
      <th>149</th>
      <td>Greece</td>
      <td>Beotia</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 3 columns</p>
</div>



<p>要按索引值排序，请使用配套方法 sort_index()。此方法具有相同的参数和默认顺序：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed.sort_index()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>Mendoza Province</td>
      <td>3264</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Argentina</td>
      <td>Other</td>
      <td>536</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Armenia</td>
      <td>Armenia</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Australia</td>
      <td>Australia Other</td>
      <td>245</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Australia</td>
      <td>New South Wales</td>
      <td>85</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>420</th>
      <td>Uruguay</td>
      <td>Juanico</td>
      <td>12</td>
    </tr>
    <tr>
      <th>421</th>
      <td>Uruguay</td>
      <td>Montevideo</td>
      <td>11</td>
    </tr>
    <tr>
      <th>422</th>
      <td>Uruguay</td>
      <td>Progreso</td>
      <td>11</td>
    </tr>
    <tr>
      <th>423</th>
      <td>Uruguay</td>
      <td>San Jose</td>
      <td>3</td>
    </tr>
    <tr>
      <th>424</th>
      <td>Uruguay</td>
      <td>Uruguay</td>
      <td>24</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 3 columns</p>
</div>



<p>最后，要知道您一次可以按多个列进行排序：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countries_reviewed.sort_values(by=[<span class="string">&#x27;country&#x27;</span>, <span class="string">&#x27;len&#x27;</span>])</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>province</th>
      <th>len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Argentina</td>
      <td>Other</td>
      <td>536</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Argentina</td>
      <td>Mendoza Province</td>
      <td>3264</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Armenia</td>
      <td>Armenia</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Australia</td>
      <td>Tasmania</td>
      <td>42</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Australia</td>
      <td>New South Wales</td>
      <td>85</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>421</th>
      <td>Uruguay</td>
      <td>Montevideo</td>
      <td>11</td>
    </tr>
    <tr>
      <th>422</th>
      <td>Uruguay</td>
      <td>Progreso</td>
      <td>11</td>
    </tr>
    <tr>
      <th>420</th>
      <td>Uruguay</td>
      <td>Juanico</td>
      <td>12</td>
    </tr>
    <tr>
      <th>424</th>
      <td>Uruguay</td>
      <td>Uruguay</td>
      <td>24</td>
    </tr>
    <tr>
      <th>419</th>
      <td>Uruguay</td>
      <td>Canelones</td>
      <td>43</td>
    </tr>
  </tbody>
</table>
<p>425 rows × 3 columns</p>
</div>



<h1 id="TEST-2"><a href="#TEST-2" class="headerlink" title="TEST"></a>TEST</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">reviews = pd.read_csv(<span class="string">&#x27;datasets/wine/winemag-data-130k-v2.csv&#x27;</span>)</span><br><span class="line">reviews.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="1-1"><a href="#1-1" class="headerlink" title="1."></a>1.</h2><p>Who are the most common wine reviewers in the dataset? Create a <code>Series</code> whose index is the <code>taster_twitter_handle</code> category from the dataset, and whose values count how many reviews each person wrote.</p>
<p>数据集中最常见的酒评人是谁？创建一个 “系列”，其索引是数据集中的 “taster_twitter_handle “类别，其值计算每个人写了多少评论。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby(<span class="string">&#x27;taster_twitter_handle&#x27;</span>)[<span class="string">&#x27;taster_twitter_handle&#x27;</span>].count()</span><br></pre></td></tr></table></figure>




<pre><code>taster_twitter_handle
@AnneInVino          3685
@JoeCz               5147
@bkfiona               27
@gordone_cellars     4177
@kerinokeefe        10776
@laurbuzz            1835
@mattkettmann        6332
@paulgwine           9532
@suskostrzewa        1085
@vboone              9537
@vossroger          25514
@wawinereport        4966
@wineschach         15134
@winewchristina         6
@worldwineguys       1005
Name: taster_twitter_handle, dtype: int64
</code></pre>
<h2 id="2-1"><a href="#2-1" class="headerlink" title="2."></a>2.</h2><p>What is the best wine I can buy for a given amount of money? Create a <code>Series</code> whose index is wine prices and whose values is the maximum number of points a wine costing that much was given in a review. Sort the values by price, ascending (so that <code>4.0</code> dollars is at the top and <code>3300.0</code> dollars is at the bottom).</p>
<p>我花多少钱可以买到最好的葡萄酒？创建一个 “系列”，其索引是葡萄酒的价格，其值是该价格的葡萄酒在评论中得到的最高分。按价格升序排序（这样<code>4.0</code>美元在最上面，<code>3300.0</code>美元在最下面）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby(<span class="string">&#x27;price&#x27;</span>)[<span class="string">&#x27;points&#x27;</span>].<span class="built_in">max</span>()</span><br></pre></td></tr></table></figure>




<pre><code>price
4.0       86
5.0       87
6.0       88
7.0       91
8.0       91
          ..
1900.0    98
2000.0    97
2013.0    91
2500.0    96
3300.0    88
Name: points, Length: 390, dtype: int64
</code></pre>
<h2 id="3-1"><a href="#3-1" class="headerlink" title="3."></a>3.</h2><p>What are the minimum and maximum prices for each <code>variety</code> of wine? Create a <code>DataFrame</code> whose index is the <code>variety</code> category from the dataset and whose values are the <code>min</code> and <code>max</code> values thereof.</p>
<p>每种葡萄酒的最低和最高价格是多少？创建一个<code>DataFrame</code>，其索引为数据集中的<code>variety</code>类别，其值为<code>min</code>和<code>max</code>值。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">price_extremes = reviews.groupby(<span class="string">&#x27;variety&#x27;</span>)[<span class="string">&#x27;price&#x27;</span>].agg([<span class="built_in">min</span>,<span class="built_in">max</span>])</span><br><span class="line">price_extremes</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>variety</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Abouriou</th>
      <td>15.0</td>
      <td>75.0</td>
    </tr>
    <tr>
      <th>Agiorgitiko</th>
      <td>10.0</td>
      <td>66.0</td>
    </tr>
    <tr>
      <th>Aglianico</th>
      <td>6.0</td>
      <td>180.0</td>
    </tr>
    <tr>
      <th>Aidani</th>
      <td>27.0</td>
      <td>27.0</td>
    </tr>
    <tr>
      <th>Airen</th>
      <td>8.0</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Zinfandel</th>
      <td>5.0</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>Zlahtina</th>
      <td>13.0</td>
      <td>16.0</td>
    </tr>
    <tr>
      <th>Zweigelt</th>
      <td>9.0</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>Çalkarası</th>
      <td>19.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>Žilavka</th>
      <td>15.0</td>
      <td>15.0</td>
    </tr>
  </tbody>
</table>
<p>707 rows × 2 columns</p>
</div>



<h2 id="4-1"><a href="#4-1" class="headerlink" title="4."></a>4.</h2><p>What are the most expensive wine varieties? Create a variable <code>sorted_varieties</code> containing a copy of the dataframe from the previous question where varieties are sorted in descending order based on minimum price, then on maximum price (to break ties).</p>
<p>最贵的葡萄酒品种是什么？创建一个变量<code>sorted_varieties</code>，其中包含上一个问题中数据帧的副本，根据最低价格，然后根据最高价格，按降序排列（打破并列关系）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">price_extremes.sort_values(by=[<span class="string">&#x27;min&#x27;</span>, <span class="string">&#x27;max&#x27;</span>],ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>min</th>
      <th>max</th>
    </tr>
    <tr>
      <th>variety</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Ramisco</th>
      <td>495.0</td>
      <td>495.0</td>
    </tr>
    <tr>
      <th>Terrantez</th>
      <td>236.0</td>
      <td>236.0</td>
    </tr>
    <tr>
      <th>Francisa</th>
      <td>160.0</td>
      <td>160.0</td>
    </tr>
    <tr>
      <th>Rosenmuskateller</th>
      <td>150.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>Tinta Negra Mole</th>
      <td>112.0</td>
      <td>112.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Roscetto</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Sauvignon Blanc-Sauvignon Gris</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Tempranillo-Malbec</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Vital</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Zelen</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>707 rows × 2 columns</p>
</div>



<h2 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h2><p>Create a <code>Series</code> whose index is reviewers and whose values is the average review score given out by that reviewer. Hint: you will need the <code>taster_name</code> and <code>points</code> columns.</p>
<p>创建一个 “系列”，其索引为reviewers，其值为该reviewer给出的平均review分数。提示：您将需要<code>taster_name</code>和<code>points</code>列。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># reviews.groupby(&#x27;taster_name&#x27;)[&#x27;points&#x27;].agg([&#x27;mean&#x27;])</span></span><br><span class="line">reviewer_mean_ratings = reviews.groupby(<span class="string">&#x27;taster_name&#x27;</span>).apply(<span class="keyword">lambda</span> df: df[<span class="string">&#x27;points&#x27;</span>].mean())</span><br><span class="line">reviewer_mean_ratings</span><br></pre></td></tr></table></figure>




<pre><code>taster_name
Alexander Peartree    85.855422
Anna Lee C. Iijima    88.415629
Anne Krebiehl MW      90.562551
Carrie Dykes          86.395683
Christina Pickard     87.833333
Fiona Adams           86.888889
Jeff Jenssen          88.319756
Jim Gordon            88.626287
Joe Czerwinski        88.536235
Kerin O’Keefe         88.867947
Lauren Buzzeo         87.739510
Matt Kettmann         90.008686
Michael Schachner     86.907493
Mike DeSimone         89.101167
Paul Gregutt          89.082564
Roger Voss            88.708003
Sean P. Sullivan      88.755739
Susan Kostrzewa       86.609217
Virginie Boone        89.213379
dtype: float64
</code></pre>
<p>Are there significant differences in the average scores assigned by the various reviewers? Run the cell below to use the <code>describe()</code> method to see a summary of the range of values.</p>
<p>不同评论人给出的平均分是否存在明显差异？运行下面的单元格，使用 <code>describe()</code>方法查看数值范围的摘要。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviewer_mean_ratings.describe()</span><br></pre></td></tr></table></figure>




<pre><code>count    19.000000
mean     88.233026
std       1.243610
min      85.855422
25%      87.323501
50%      88.536235
75%      88.975256
max      90.562551
dtype: float64
</code></pre>
<h2 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h2><p>What combination of countries and varieties are most common? Create a <code>Series</code> whose index is a <code>MultiIndex</code>of <code>&#123;country, variety&#125;</code> pairs. For example, a pinot noir produced in the US should map to <code>&#123;&quot;US&quot;, &quot;Pinot Noir&quot;&#125;</code>. Sort the values in the <code>Series</code> in descending order based on wine count.</p>
<p>什么国家和品种的组合最常见？创建一个 <code>Series</code>，其索引是<code>&#123;country, variety&#125;</code> 对的 <code>MultiIndex</code>。例如，产自美国的黑比诺应该映射到<code>&#123;&quot;美国&quot;, &quot;黑比诺&quot;&#125;</code>。将 <code>Series</code>中的值按照葡萄酒数量降序排序。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.groupby([<span class="string">&#x27;country&#x27;</span>, <span class="string">&#x27;variety&#x27;</span>]).size().sort_values(ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># reviews.head()</span></span><br></pre></td></tr></table></figure>




<pre><code>country  variety                 
US       Pinot Noir                  9885
         Cabernet Sauvignon          7315
         Chardonnay                  6801
France   Bordeaux-style Red Blend    4725
Italy    Red Blend                   3624
                                     ... 
Mexico   Cinsault                       1
         Grenache                       1
         Merlot                         1
         Rosado                         1
Uruguay  White Blend                    1
Length: 1612, dtype: int64
</code></pre>
<h1 id="Data-Types-and-Missing-Values"><a href="#Data-Types-and-Missing-Values" class="headerlink" title="Data Types and Missing Values"></a>Data Types and Missing Values</h1><h2 id="Dtypes"><a href="#Dtypes" class="headerlink" title="Dtypes"></a>Dtypes</h2><p>DataFrame 或 Series 中列的数据类型称为 dtype。 </p>
<p>您可以使用 dtype 属性来获取特定列的类型。例如，我们可以获取评论 DataFrame 中价格列的 dtype：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.price.dtype</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;float64&#39;)
</code></pre>
<p>或者，dtypes 属性返回 DataFrame 中每列的 dtype：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.dtypes</span><br></pre></td></tr></table></figure>




<pre><code>country                   object
description               object
designation               object
points                     int64
price                    float64
province                  object
region_1                  object
region_2                  object
taster_name               object
taster_twitter_handle     object
title                     object
variety                   object
winery                    object
dtype: object
</code></pre>
<p>float64 表示使用 64 位浮点数；int64 表示使用类似大小的整数，以此类推。</p>
<p>需要注意的一个特殊情况是（在这里可以很清楚地看到），完全由字符串组成的列没有自己的类型，而是被赋予了对象类型。</p>
<p>我们可以使用 astype() 函数将一种类型的列转换为另一种类型，只要这种转换是合理的。例如，我们可以将积分列从现有的 int64 数据类型转换为 float64 数据类型：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.points.astype(<span class="string">&#x27;float64&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0         87.0
1         87.0
2         87.0
3         87.0
4         87.0
          ... 
129966    90.0
129967    90.0
129968    90.0
129969    90.0
129970    90.0
Name: points, Length: 129971, dtype: float64
</code></pre>
<p>DataFrame 或 Series 索引也有自己的数据类型：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.index.dtype</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;int64&#39;)
</code></pre>
<p>Pandas 还支持更奇特的数据类型，例如分类数据和时间序列数据。</p>
<h2 id="Missing-data"><a href="#Missing-data" class="headerlink" title="Missing data"></a>Missing data</h2><p>缺失值的输入值为 NaN，即 “Not a Number（非数值）”的缩写。由于技术原因，这些 NaN 值始终是 float64 类型。</p>
<p>Pandas 提供了一些专门针对缺失数据的方法。要选择 NaN 条目，可以使用 pd.isnull()（或其同伴 pd.notnull()）。使用方法如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[pd.isnull(reviews.country)]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>913</th>
      <td>NaN</td>
      <td>Amber in color, this wine has aromas of peach ...</td>
      <td>Asureti Valley</td>
      <td>87</td>
      <td>30.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mike DeSimone</td>
      <td>@worldwineguys</td>
      <td>Gotsa Family Wines 2014 Asureti Valley Chinuri</td>
      <td>Chinuri</td>
      <td>Gotsa Family Wines</td>
    </tr>
    <tr>
      <th>3131</th>
      <td>NaN</td>
      <td>Soft, fruity and juicy, this is a pleasant, si...</td>
      <td>Partager</td>
      <td>83</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Barton &amp; Guestier NV Partager Red</td>
      <td>Red Blend</td>
      <td>Barton &amp; Guestier</td>
    </tr>
    <tr>
      <th>4243</th>
      <td>NaN</td>
      <td>Violet-red in color, this semisweet wine has a...</td>
      <td>Red Naturally Semi-Sweet</td>
      <td>88</td>
      <td>18.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mike DeSimone</td>
      <td>@worldwineguys</td>
      <td>Kakhetia Traditional Winemaking 2012 Red Natur...</td>
      <td>Ojaleshi</td>
      <td>Kakhetia Traditional Winemaking</td>
    </tr>
    <tr>
      <th>9509</th>
      <td>NaN</td>
      <td>This mouthwatering blend starts with a nose of...</td>
      <td>Theopetra Malagouzia-Assyrtiko</td>
      <td>92</td>
      <td>28.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Susan Kostrzewa</td>
      <td>@suskostrzewa</td>
      <td>Tsililis 2015 Theopetra Malagouzia-Assyrtiko W...</td>
      <td>White Blend</td>
      <td>Tsililis</td>
    </tr>
    <tr>
      <th>9750</th>
      <td>NaN</td>
      <td>This orange-style wine has a cloudy yellow-gol...</td>
      <td>Orange Nikolaevo Vineyard</td>
      <td>89</td>
      <td>28.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Jeff Jenssen</td>
      <td>@worldwineguys</td>
      <td>Ross-idi 2015 Orange Nikolaevo Vineyard Chardo...</td>
      <td>Chardonnay</td>
      <td>Ross-idi</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>124176</th>
      <td>NaN</td>
      <td>This Swiss red blend is composed of four varie...</td>
      <td>Les Romaines</td>
      <td>90</td>
      <td>30.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Jeff Jenssen</td>
      <td>@worldwineguys</td>
      <td>Les Frères Dutruy 2014 Les Romaines Red</td>
      <td>Red Blend</td>
      <td>Les Frères Dutruy</td>
    </tr>
    <tr>
      <th>129407</th>
      <td>NaN</td>
      <td>Dry spicy aromas of dusty plum and tomato add ...</td>
      <td>Reserve</td>
      <td>89</td>
      <td>22.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>El Capricho 2015 Reserve Cabernet Sauvignon</td>
      <td>Cabernet Sauvignon</td>
      <td>El Capricho</td>
    </tr>
    <tr>
      <th>129408</th>
      <td>NaN</td>
      <td>El Capricho is one of Uruguay's more consisten...</td>
      <td>Reserve</td>
      <td>89</td>
      <td>22.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Michael Schachner</td>
      <td>@wineschach</td>
      <td>El Capricho 2015 Reserve Tempranillo</td>
      <td>Tempranillo</td>
      <td>El Capricho</td>
    </tr>
    <tr>
      <th>129590</th>
      <td>NaN</td>
      <td>A blend of 60% Syrah, 30% Cabernet Sauvignon a...</td>
      <td>Shah</td>
      <td>90</td>
      <td>30.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mike DeSimone</td>
      <td>@worldwineguys</td>
      <td>Büyülübağ 2012 Shah Red</td>
      <td>Red Blend</td>
      <td>Büyülübağ</td>
    </tr>
    <tr>
      <th>129900</th>
      <td>NaN</td>
      <td>This wine offers a delightful bouquet of black...</td>
      <td>NaN</td>
      <td>91</td>
      <td>32.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mike DeSimone</td>
      <td>@worldwineguys</td>
      <td>Psagot 2014 Merlot</td>
      <td>Merlot</td>
      <td>Psagot</td>
    </tr>
  </tbody>
</table>
<p>63 rows × 13 columns</p>
</div>



<p>替换缺失值是一种常见操作。 Pandas 为这个问题提供了一个非常方便的方法：fillna()。 fillna() 提供了几种不同的策略来减少此类数据。例如，我们可以简单地将每个 NaN 替换为“Unknown”：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.region_2.fillna(<span class="string">&quot;Unknown&quot;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0                   Unknown
1                   Unknown
2         Willamette Valley
3                   Unknown
4         Willamette Valley
                ...        
129966              Unknown
129967         Oregon Other
129968              Unknown
129969              Unknown
129970              Unknown
Name: region_2, Length: 129971, dtype: object
</code></pre>
<p>或者，我们可以使用数据库中给定记录之后某个时间出现的第一个非空值来填充每个缺失值。这称为回填策略。</p>
<p>或者，我们可能有一个非空值需要替换。例如，假设自本数据集发布以来，评论员 Kerin O’Keefe 已将其 Twitter 手柄从 @kerinokeefe 更改为 @kerino。使用 replace() 方法是在数据集中反映这一情况的方法之一：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.taster_twitter_handle.replace(<span class="string">&quot;@kerinokeefe&quot;</span>, <span class="string">&quot;@kerino&quot;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0             @kerino
1          @vossroger
2         @paulgwine 
3                 NaN
4         @paulgwine 
             ...     
129966            NaN
129967    @paulgwine 
129968     @vossroger
129969     @vossroger
129970     @vossroger
Name: taster_twitter_handle, Length: 129971, dtype: object
</code></pre>
<p>这里值得一提的是 Replace() 方法，因为它可以方便地替换丢失的数据，这些数据在数据集中被赋予某种哨兵值：诸如“未知”、“未公开”、“无效”等。</p>
<h1 id="TEST-3"><a href="#TEST-3" class="headerlink" title="TEST"></a>TEST</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>1.数据集中<code>pionts</code>列的数据类型是什么？</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;points&#x27;</span>].dtype</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;int64&#39;)
</code></pre>
<p>2.从<code>points</code>列中的条目创建一个系列，但将条目转换为字符串。提示：字符串在 Python 中是 <code>str</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.points.astype(<span class="string">&#x27;str&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0         87
1         87
2         87
3         87
4         87
          ..
129966    90
129967    90
129968    90
129969    90
129970    90
Name: points, Length: 129971, dtype: object
</code></pre>
<p>3.有时价格列为空。数据集中有多少评论缺少价格？</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;price&#x27;</span>].isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>8996
</code></pre>
<p>4.最常见的葡萄酒产区有哪些？创建一个Series，计算 <code>region_1</code> 字段中每个值出现的次数。这个字段经常缺少数据，因此用<code>unknown</code>替换缺少的值。按降序排序。输出结果应如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Unknown                    21247</span><br><span class="line">Napa Valley                 4480</span><br><span class="line">                           ...  </span><br><span class="line">Bardolino Superiore            1</span><br><span class="line">Primitivo del Tarantino        1</span><br><span class="line">Name: region_1, Length: 1230, dtype: int64</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews[<span class="string">&#x27;region_1&#x27;</span>] = reviews[<span class="string">&#x27;region_1&#x27;</span>].fillna(<span class="string">&quot;Unknown&quot;</span>)</span><br><span class="line">reviews[<span class="string">&#x27;region_1&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>region_1
Unknown                    21247
Napa Valley                 4480
Columbia Valley (WA)        4124
Russian River Valley        3091
California                  2629
                           ...  
Lamezia                        1
Trentino Superiore             1
Grave del Friuli               1
Vin Santo di Carmignano        1
Paestum                        1
Name: count, Length: 1230, dtype: int64
</code></pre>
<h1 id="Renaming-and-Combining"><a href="#Renaming-and-Combining" class="headerlink" title="Renaming and Combining"></a>Renaming and Combining</h1><h2 id="Renaming"><a href="#Renaming" class="headerlink" title="Renaming"></a>Renaming</h2><p>我们在这里介绍的第一个函数是 rename()，它允许您更改索引名称和&#x2F;或列名称。例如，要更改数据集中的分数列以进行评分，我们将执行以下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.rename(columns=&#123;<span class="string">&#x27;points&#x27;</span>: <span class="string">&#x27;score&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>score</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p><code>rename()</code>可以让你通过分别指定索引或列关键字参数来重命名索引或列值。它支持多种输入格式，但通常 Python 字典是最方便的。下面是一个使用它重命名索引中某些元素的示例。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.rename(index=&#123;<span class="number">0</span>: <span class="string">&#x27;firstEntry&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;secondEntry&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>firstEntry</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>secondEntry</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p>你可能会经常重命名列，但很少重命名索引值。为此，set_index() 通常更方便。</p>
<p>行索引和列索引都可以有自己的名称属性。可以使用赠送的 rename_axis() 方法来更改这些名称。例如</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.rename_axis(<span class="string">&quot;wines&quot;</span>, axis=<span class="string">&#x27;rows&#x27;</span>).rename_axis(<span class="string">&quot;fields&quot;</span>, axis=<span class="string">&#x27;columns&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>fields</th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
    <tr>
      <th>wines</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<h2 id="Combining"><a href="#Combining" class="headerlink" title="Combining"></a>Combining</h2><p>在对数据集执行操作时，我们有时需要将不同的 DataFrames 和&#x2F;或 Series 以非同寻常的方式组合起来。Pandas 有三种核心方法可以实现这一目的。按照复杂程度递增的顺序，它们是 <code>concat()</code>、<code>join()</code> 和 <code>merge()</code>。<code>merge()</code> 的大部分功能也可以通过 <code>join()</code> 更简单地实现。</p>
<p>最简单的合并方法是 <code>concat()</code>。如果给定一个元素列表，该函数会将这些元素沿着一个轴挤在一起。</p>
<p>当我们在不同的 DataFrame 或 Series 对象中拥有相同字段（列）的数据时，这种方法非常有用。例如：YouTube 视频数据集根据来源国（例如本例中的加拿大和英国）对数据进行了分割。如果我们想同时研究多个国家，可以使用 <code>concat()</code> 将它们合并在一起：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">canadian_youtube = pd.read_csv(<span class="string">&quot;datasets/Trending_YouTube_Video_Statistics/CAvideos.csv&quot;</span>)</span><br><span class="line">british_youtube = pd.read_csv(<span class="string">&quot;datasets/Trending_YouTube_Video_Statistics/GBvideos.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">pd.concat([canadian_youtube,british_youtube])</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>video_id</th>
      <th>trending_date</th>
      <th>title</th>
      <th>channel_title</th>
      <th>category_id</th>
      <th>publish_time</th>
      <th>tags</th>
      <th>views</th>
      <th>likes</th>
      <th>dislikes</th>
      <th>comment_count</th>
      <th>thumbnail_link</th>
      <th>comments_disabled</th>
      <th>ratings_disabled</th>
      <th>video_error_or_removed</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>n1WpP7iowLc</td>
      <td>17.14.11</td>
      <td>Eminem - Walk On Water (Audio) ft. Beyoncé</td>
      <td>EminemVEVO</td>
      <td>10</td>
      <td>2017-11-10T17:00:03.000Z</td>
      <td>Eminem|"Walk"|"On"|"Water"|"Aftermath/Shady/In...</td>
      <td>17158579</td>
      <td>787425</td>
      <td>43420</td>
      <td>125882</td>
      <td>https://i.ytimg.com/vi/n1WpP7iowLc/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>Eminem's new track Walk on Water ft. Beyoncé i...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0dBIkQ4Mz1M</td>
      <td>17.14.11</td>
      <td>PLUSH - Bad Unboxing Fan Mail</td>
      <td>iDubbbzTV</td>
      <td>23</td>
      <td>2017-11-13T17:00:00.000Z</td>
      <td>plush|"bad unboxing"|"unboxing"|"fan mail"|"id...</td>
      <td>1014651</td>
      <td>127794</td>
      <td>1688</td>
      <td>13030</td>
      <td>https://i.ytimg.com/vi/0dBIkQ4Mz1M/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>STill got a lot of packages. Probably will las...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5qpjK5DgCt4</td>
      <td>17.14.11</td>
      <td>Racist Superman | Rudy Mancuso, King Bach &amp; Le...</td>
      <td>Rudy Mancuso</td>
      <td>23</td>
      <td>2017-11-12T19:05:24.000Z</td>
      <td>racist superman|"rudy"|"mancuso"|"king"|"bach"...</td>
      <td>3191434</td>
      <td>146035</td>
      <td>5339</td>
      <td>8181</td>
      <td>https://i.ytimg.com/vi/5qpjK5DgCt4/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>WATCH MY PREVIOUS VIDEO ▶ \n\nSUBSCRIBE ► http...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>d380meD0W0M</td>
      <td>17.14.11</td>
      <td>I Dare You: GOING BALD!?</td>
      <td>nigahiga</td>
      <td>24</td>
      <td>2017-11-12T18:01:41.000Z</td>
      <td>ryan|"higa"|"higatv"|"nigahiga"|"i dare you"|"...</td>
      <td>2095828</td>
      <td>132239</td>
      <td>1989</td>
      <td>17518</td>
      <td>https://i.ytimg.com/vi/d380meD0W0M/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>I know it's been a while since we did this sho...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2Vv-BfVoq4g</td>
      <td>17.14.11</td>
      <td>Ed Sheeran - Perfect (Official Music Video)</td>
      <td>Ed Sheeran</td>
      <td>10</td>
      <td>2017-11-09T11:04:14.000Z</td>
      <td>edsheeran|"ed sheeran"|"acoustic"|"live"|"cove...</td>
      <td>33523622</td>
      <td>1634130</td>
      <td>21082</td>
      <td>85067</td>
      <td>https://i.ytimg.com/vi/2Vv-BfVoq4g/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>🎧: https://ad.gt/yt-perfect\n💰: https://atlant...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>38911</th>
      <td>l884wKofd54</td>
      <td>18.14.06</td>
      <td>Enrique Iglesias - MOVE TO MIAMI (Official Vid...</td>
      <td>EnriqueIglesiasVEVO</td>
      <td>10</td>
      <td>2018-05-09T07:00:01.000Z</td>
      <td>Enrique Iglesias feat. Pitbull|"MOVE TO MIAMI"...</td>
      <td>25066952</td>
      <td>268088</td>
      <td>12783</td>
      <td>9933</td>
      <td>https://i.ytimg.com/vi/l884wKofd54/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>NEW SONG - MOVE TO MIAMI feat. Pitbull (Click ...</td>
    </tr>
    <tr>
      <th>38912</th>
      <td>IP8k2xkhOdI</td>
      <td>18.14.06</td>
      <td>Jacob Sartorius - Up With It (Official Music V...</td>
      <td>Jacob Sartorius</td>
      <td>10</td>
      <td>2018-05-11T17:09:16.000Z</td>
      <td>jacob sartorius|"jacob"|"up with it"|"jacob sa...</td>
      <td>1492219</td>
      <td>61998</td>
      <td>13781</td>
      <td>24330</td>
      <td>https://i.ytimg.com/vi/IP8k2xkhOdI/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>THE OFFICIAL UP WITH IT MUSIC VIDEO!Get my new...</td>
    </tr>
    <tr>
      <th>38913</th>
      <td>Il-an3K9pjg</td>
      <td>18.14.06</td>
      <td>Anne-Marie - 2002 [Official Video]</td>
      <td>Anne-Marie</td>
      <td>10</td>
      <td>2018-05-08T11:05:08.000Z</td>
      <td>anne|"marie"|"anne-marie"|"2002"|"two thousand...</td>
      <td>29641412</td>
      <td>394830</td>
      <td>8892</td>
      <td>19988</td>
      <td>https://i.ytimg.com/vi/Il-an3K9pjg/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>Get 2002 by Anne-Marie HERE ▶ http://ad.gt/200...</td>
    </tr>
    <tr>
      <th>38914</th>
      <td>-DRsfNObKIQ</td>
      <td>18.14.06</td>
      <td>Eleni Foureira - Fuego - Cyprus - LIVE - First...</td>
      <td>Eurovision Song Contest</td>
      <td>24</td>
      <td>2018-05-08T20:32:32.000Z</td>
      <td>Eurovision Song Contest|"2018"|"Lisbon"|"Cypru...</td>
      <td>14317515</td>
      <td>151870</td>
      <td>45875</td>
      <td>26766</td>
      <td>https://i.ytimg.com/vi/-DRsfNObKIQ/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>Eleni Foureira represented Cyprus at the first...</td>
    </tr>
    <tr>
      <th>38915</th>
      <td>4YFo4bdMO8Q</td>
      <td>18.14.06</td>
      <td>KYLE - Ikuyo feat.  2 Chainz &amp; Sophia Black [A...</td>
      <td>SuperDuperKyle</td>
      <td>10</td>
      <td>2018-05-11T04:06:35.000Z</td>
      <td>Kyle|"SuperDuperKyle"|"Ikuyo"|"2 Chainz"|"Soph...</td>
      <td>607552</td>
      <td>18271</td>
      <td>274</td>
      <td>1423</td>
      <td>https://i.ytimg.com/vi/4YFo4bdMO8Q/default.jpg</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>Debut album 'Light of Mine' out now: http://ky...</td>
    </tr>
  </tbody>
</table>
<p>79797 rows × 16 columns</p>
</div>



<p><code>join()</code>可让您组合具有共同索引的不同 DataFrame 对象。例如，要提取加拿大和英国同一天流行的视频，我们可以执行以下操作：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">left = canadian_youtube.set_index([<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;trending_date&#x27;</span>])</span><br><span class="line">right = british_youtube.set_index([<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;trending_date&#x27;</span>])</span><br><span class="line"></span><br><span class="line">left.join(right, lsuffix=<span class="string">&#x27;_CAN&#x27;</span>, rsuffix=<span class="string">&#x27;_UK&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>video_id_CAN</th>
      <th>channel_title_CAN</th>
      <th>category_id_CAN</th>
      <th>publish_time_CAN</th>
      <th>tags_CAN</th>
      <th>views_CAN</th>
      <th>likes_CAN</th>
      <th>dislikes_CAN</th>
      <th>comment_count_CAN</th>
      <th>thumbnail_link_CAN</th>
      <th>...</th>
      <th>tags_UK</th>
      <th>views_UK</th>
      <th>likes_UK</th>
      <th>dislikes_UK</th>
      <th>comment_count_UK</th>
      <th>thumbnail_link_UK</th>
      <th>comments_disabled_UK</th>
      <th>ratings_disabled_UK</th>
      <th>video_error_or_removed_UK</th>
      <th>description_UK</th>
    </tr>
    <tr>
      <th>title</th>
      <th>trending_date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>!! THIS VIDEO IS NOTHING BUT PAIN !! | Getting Over It - Part 7</th>
      <th>18.04.01</th>
      <td>PNn8sECd7io</td>
      <td>Markiplier</td>
      <td>20</td>
      <td>2018-01-03T19:33:53.000Z</td>
      <td>getting over it|"markiplier"|"funny moments"|"...</td>
      <td>835930</td>
      <td>47058</td>
      <td>1023</td>
      <td>8250</td>
      <td>https://i.ytimg.com/vi/PNn8sECd7io/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>#1 Fortnite World Rank - 2,323 Solo Wins!</th>
      <th>18.09.03</th>
      <td>DvPW66IFhMI</td>
      <td>AlexRamiGaming</td>
      <td>20</td>
      <td>2018-03-09T07:15:52.000Z</td>
      <td>PS4 Battle Royale|"PS4 Pro Battle Royale"|"Bat...</td>
      <td>212838</td>
      <td>5199</td>
      <td>542</td>
      <td>11</td>
      <td>https://i.ytimg.com/vi/DvPW66IFhMI/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>#1 Fortnite World Rank - 2,330 Solo Wins!</th>
      <th>18.10.03</th>
      <td>EXEaMjFeiEk</td>
      <td>AlexRamiGaming</td>
      <td>20</td>
      <td>2018-03-10T06:26:17.000Z</td>
      <td>PS4 Battle Royale|"PS4 Pro Battle Royale"|"Bat...</td>
      <td>200764</td>
      <td>5620</td>
      <td>537</td>
      <td>45</td>
      <td>https://i.ytimg.com/vi/EXEaMjFeiEk/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">#1 MOST ANTICIPATED VIDEO (Timber Frame House Raising)</th>
      <th>17.20.12</th>
      <td>bYvQmusLaxw</td>
      <td>Pure Living for Life</td>
      <td>24</td>
      <td>2017-12-20T02:49:11.000Z</td>
      <td>timber frame|"timber framing"|"timber frame ra...</td>
      <td>79152</td>
      <td>7761</td>
      <td>159</td>
      <td>1965</td>
      <td>https://i.ytimg.com/vi/bYvQmusLaxw/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>17.21.12</th>
      <td>bYvQmusLaxw</td>
      <td>Pure Living for Life</td>
      <td>24</td>
      <td>2017-12-20T02:49:11.000Z</td>
      <td>timber frame|"timber framing"|"timber frame ra...</td>
      <td>232762</td>
      <td>15515</td>
      <td>329</td>
      <td>3601</td>
      <td>https://i.ytimg.com/vi/bYvQmusLaxw/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">😲She Is So Nervous But BLOWS The ROOF After Taking on OPERA Song! | Britain´s Got Talent 2018</th>
      <th>18.02.05</th>
      <td>WttN1Z0XF4k</td>
      <td>How Talented</td>
      <td>24</td>
      <td>2018-04-28T19:40:58.000Z</td>
      <td>bgt|"bgt 2018"|"britain got talent"|"britain´s...</td>
      <td>713400</td>
      <td>4684</td>
      <td>260</td>
      <td>266</td>
      <td>https://i.ytimg.com/vi/WttN1Z0XF4k/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18.29.04</th>
      <td>WttN1Z0XF4k</td>
      <td>How Talented</td>
      <td>24</td>
      <td>2018-04-28T19:40:58.000Z</td>
      <td>bgt|"bgt 2018"|"britain got talent"|"britain´s...</td>
      <td>231906</td>
      <td>1924</td>
      <td>78</td>
      <td>146</td>
      <td>https://i.ytimg.com/vi/WttN1Z0XF4k/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18.30.04</th>
      <td>WttN1Z0XF4k</td>
      <td>How Talented</td>
      <td>24</td>
      <td>2018-04-28T19:40:58.000Z</td>
      <td>bgt|"bgt 2018"|"britain got talent"|"britain´s...</td>
      <td>476253</td>
      <td>3417</td>
      <td>176</td>
      <td>240</td>
      <td>https://i.ytimg.com/vi/WttN1Z0XF4k/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>🚨 BREAKING NEWS 🔴 Raja Live all Slot Channels Welcome 🎰</th>
      <th>18.07.05</th>
      <td>Wt9Gkpmbt44</td>
      <td>TheBigJackpot</td>
      <td>24</td>
      <td>2018-05-07T06:58:59.000Z</td>
      <td>Slot Machine|"win"|"Gambling"|"Big Win"|"raja"...</td>
      <td>28973</td>
      <td>2167</td>
      <td>175</td>
      <td>10</td>
      <td>https://i.ytimg.com/vi/Wt9Gkpmbt44/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>🚨Active Shooter at YouTube Headquarters - LIVE BREAKING NEWS COVERAGE</th>
      <th>18.04.04</th>
      <td>Az72jrKbANA</td>
      <td>Right Side Broadcasting Network</td>
      <td>25</td>
      <td>2018-04-03T23:12:37.000Z</td>
      <td>YouTube shooter|"YouTube active shooter"|"acti...</td>
      <td>103513</td>
      <td>1722</td>
      <td>181</td>
      <td>76</td>
      <td>https://i.ytimg.com/vi/Az72jrKbANA/default.jpg</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>40900 rows × 28 columns</p>
</div>



<p>此处 <code>lsuffix</code> 和 <code>rsuffix</code> 参数是必需的，因为数据在英国和加拿大数据集中具有相同的列名称。如果这不是真的（因为，比如说，我们事先重命名了它们），我们就不需要它们。</p>
<h1 id="TEST-4"><a href="#TEST-4" class="headerlink" title="TEST"></a>TEST</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">reviews = pd.read_csv(<span class="string">&quot;datasets/wine/winemag-data-130k-v2.csv&quot;</span>, index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
  </tbody>
</table>
</div>



<p>1.<code>Region_1</code> 和 <code>Region_2</code> 是数据集中区域设置列的非常无信息的名称。创建<code>reviews</code>副本，并将这些列分别重命名为<code>region</code>和<code>locale</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.rename(columns=&#123;<span class="string">&#x27;region_1&#x27;</span>: <span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;region_2&#x27;</span>:<span class="string">&#x27;locale&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region</th>
      <th>locale</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p>2.将数据集中的索引名称设置为 <code>wines</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reviews.rename_axis(<span class="string">&quot;wines&quot;</span>, axis=<span class="string">&#x27;columns&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>wines</th>
      <th>country</th>
      <th>description</th>
      <th>designation</th>
      <th>points</th>
      <th>price</th>
      <th>province</th>
      <th>region_1</th>
      <th>region_2</th>
      <th>taster_name</th>
      <th>taster_twitter_handle</th>
      <th>title</th>
      <th>variety</th>
      <th>winery</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Italy</td>
      <td>Aromas include tropical fruit, broom, brimston...</td>
      <td>Vulkà Bianco</td>
      <td>87</td>
      <td>NaN</td>
      <td>Sicily &amp; Sardinia</td>
      <td>Etna</td>
      <td>NaN</td>
      <td>Kerin O’Keefe</td>
      <td>@kerinokeefe</td>
      <td>Nicosia 2013 Vulkà Bianco  (Etna)</td>
      <td>White Blend</td>
      <td>Nicosia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Portugal</td>
      <td>This is ripe and fruity, a wine that is smooth...</td>
      <td>Avidagos</td>
      <td>87</td>
      <td>15.0</td>
      <td>Douro</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Quinta dos Avidagos 2011 Avidagos Red (Douro)</td>
      <td>Portuguese Red</td>
      <td>Quinta dos Avidagos</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US</td>
      <td>Tart and snappy, the flavors of lime flesh and...</td>
      <td>NaN</td>
      <td>87</td>
      <td>14.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Rainstorm 2013 Pinot Gris (Willamette Valley)</td>
      <td>Pinot Gris</td>
      <td>Rainstorm</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US</td>
      <td>Pineapple rind, lemon pith and orange blossom ...</td>
      <td>Reserve Late Harvest</td>
      <td>87</td>
      <td>13.0</td>
      <td>Michigan</td>
      <td>Lake Michigan Shore</td>
      <td>NaN</td>
      <td>Alexander Peartree</td>
      <td>NaN</td>
      <td>St. Julian 2013 Reserve Late Harvest Riesling ...</td>
      <td>Riesling</td>
      <td>St. Julian</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US</td>
      <td>Much like the regular bottling from 2012, this...</td>
      <td>Vintner's Reserve Wild Child Block</td>
      <td>87</td>
      <td>65.0</td>
      <td>Oregon</td>
      <td>Willamette Valley</td>
      <td>Willamette Valley</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Sweet Cheeks 2012 Vintner's Reserve Wild Child...</td>
      <td>Pinot Noir</td>
      <td>Sweet Cheeks</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>129966</th>
      <td>Germany</td>
      <td>Notes of honeysuckle and cantaloupe sweeten th...</td>
      <td>Brauneberger Juffer-Sonnenuhr Spätlese</td>
      <td>90</td>
      <td>28.0</td>
      <td>Mosel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Anna Lee C. Iijima</td>
      <td>NaN</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef) 2013 ...</td>
      <td>Riesling</td>
      <td>Dr. H. Thanisch (Erben Müller-Burggraef)</td>
    </tr>
    <tr>
      <th>129967</th>
      <td>US</td>
      <td>Citation is given as much as a decade of bottl...</td>
      <td>NaN</td>
      <td>90</td>
      <td>75.0</td>
      <td>Oregon</td>
      <td>Oregon</td>
      <td>Oregon Other</td>
      <td>Paul Gregutt</td>
      <td>@paulgwine</td>
      <td>Citation 2004 Pinot Noir (Oregon)</td>
      <td>Pinot Noir</td>
      <td>Citation</td>
    </tr>
    <tr>
      <th>129968</th>
      <td>France</td>
      <td>Well-drained gravel soil gives this wine its c...</td>
      <td>Kritt</td>
      <td>90</td>
      <td>30.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Gresser 2013 Kritt Gewurztraminer (Als...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Gresser</td>
    </tr>
    <tr>
      <th>129969</th>
      <td>France</td>
      <td>A dry style of Pinot Gris, this is crisp with ...</td>
      <td>NaN</td>
      <td>90</td>
      <td>32.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Marcel Deiss 2012 Pinot Gris (Alsace)</td>
      <td>Pinot Gris</td>
      <td>Domaine Marcel Deiss</td>
    </tr>
    <tr>
      <th>129970</th>
      <td>France</td>
      <td>Big, rich and off-dry, this is powered by inte...</td>
      <td>Lieu-dit Harth Cuvée Caroline</td>
      <td>90</td>
      <td>21.0</td>
      <td>Alsace</td>
      <td>Alsace</td>
      <td>NaN</td>
      <td>Roger Voss</td>
      <td>@vossroger</td>
      <td>Domaine Schoffit 2012 Lieu-dit Harth Cuvée Car...</td>
      <td>Gewürztraminer</td>
      <td>Domaine Schoffit</td>
    </tr>
  </tbody>
</table>
<p>129971 rows × 13 columns</p>
</div>



<p>3.Things on Reddit 数据集包含了来自 reddit.com 上部分排名靠前的论坛（”subreddits”）的产品链接。运行下面的单元格，加载在 <code>/r/gaming</code> 子论坛上提到的产品的数据框，以及在 <code>r//movies</code> 子论坛上提到的产品的数据框。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">gaming_products = pd.read_csv(<span class="string">&quot;datasets/top-things/reddits/g/gaming.csv&quot;</span>)</span><br><span class="line">gaming_products[<span class="string">&#x27;subreddit&#x27;</span>] = <span class="string">&quot;r/gaming&quot;</span></span><br><span class="line">movie_products = pd.read_csv(<span class="string">&quot;datasets/top-things/reddits/m/movies.csv&quot;</span>)</span><br><span class="line">movie_products[<span class="string">&#x27;subreddit&#x27;</span>] = <span class="string">&quot;r/movies&quot;</span></span><br></pre></td></tr></table></figure>

<p>创建一个包含 Reddit 子版块中提到的产品(<code>either subreddit</code>)的 <code>DataFrame</code>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">gaming_products.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>category</th>
      <th>amazon_link</th>
      <th>total_mentions</th>
      <th>subreddit_mentions</th>
      <th>subreddit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>BOOMco Halo Covenant Needler Blaster</td>
      <td>Toys &amp; Games</td>
      <td>https://www.amazon.com/BOOMco-Halo-Covenant-Ne...</td>
      <td>4.0</td>
      <td>4</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Raspberry PI 3 Model B 1.2GHz 64-bit quad-core...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/Raspberry-Model-A1-2GHz...</td>
      <td>19.0</td>
      <td>3</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>2</th>
      <td>CanaKit 5V 2.5A Raspberry Pi 3 Power Supply / ...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/CanaKit-Raspberry-Suppl...</td>
      <td>7.0</td>
      <td>3</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Panasonic K-KJ17MCA4BA Advanced Individual Cel...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/Panasonic-Advanced-Indi...</td>
      <td>29.0</td>
      <td>2</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mayflash GameCube Controller Adapter for Wii U...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/GameCube-Controller-Ada...</td>
      <td>24.0</td>
      <td>2</td>
      <td>r/gaming</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.concat([gaming_products,movie_products])</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>category</th>
      <th>amazon_link</th>
      <th>total_mentions</th>
      <th>subreddit_mentions</th>
      <th>subreddit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>BOOMco Halo Covenant Needler Blaster</td>
      <td>Toys &amp; Games</td>
      <td>https://www.amazon.com/BOOMco-Halo-Covenant-Ne...</td>
      <td>4.0</td>
      <td>4</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Raspberry PI 3 Model B 1.2GHz 64-bit quad-core...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/Raspberry-Model-A1-2GHz...</td>
      <td>19.0</td>
      <td>3</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>2</th>
      <td>CanaKit 5V 2.5A Raspberry Pi 3 Power Supply / ...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/CanaKit-Raspberry-Suppl...</td>
      <td>7.0</td>
      <td>3</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Panasonic K-KJ17MCA4BA Advanced Individual Cel...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/Panasonic-Advanced-Indi...</td>
      <td>29.0</td>
      <td>2</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mayflash GameCube Controller Adapter for Wii U...</td>
      <td>Electronics</td>
      <td>https://www.amazon.com/GameCube-Controller-Ada...</td>
      <td>24.0</td>
      <td>2</td>
      <td>r/gaming</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>298</th>
      <td>Welcome to Night Vale CD: A Novel</td>
      <td>Books</td>
      <td>https://www.amazon.com/Welcome-Night-Vale-CD-N...</td>
      <td>1.0</td>
      <td>1</td>
      <td>r/movies</td>
    </tr>
    <tr>
      <th>299</th>
      <td>Ran (StudioCanal Collection) [Blu-ray]</td>
      <td>Movies &amp; TV</td>
      <td>https://www.amazon.com/StudioCanal-Collection-...</td>
      <td>1.0</td>
      <td>1</td>
      <td>r/movies</td>
    </tr>
    <tr>
      <th>300</th>
      <td>The Art of John Alvin</td>
      <td>Books</td>
      <td>https://www.amazon.com/Art-John-Alvin-Andrea/d...</td>
      <td>1.0</td>
      <td>1</td>
      <td>r/movies</td>
    </tr>
    <tr>
      <th>301</th>
      <td>Apocalypto [Blu-ray]</td>
      <td>Movies &amp; TV</td>
      <td>https://www.amazon.com/Apocalypto-Blu-ray-Rudy...</td>
      <td>1.0</td>
      <td>1</td>
      <td>r/movies</td>
    </tr>
    <tr>
      <th>302</th>
      <td>Cinelinx: A Card Game for People Who Love Movi...</td>
      <td>Toys &amp; Games</td>
      <td>https://www.amazon.com/Cinelinx-Card-Game-Peop...</td>
      <td>1.0</td>
      <td>1</td>
      <td>r/movies</td>
    </tr>
  </tbody>
</table>
<p>796 rows × 6 columns</p>
</div>



<p>4.Kaggle 上的举重数据库数据集包括一张用于举重比赛的 CSV 表和一张单独的举重参赛者表。运行下面的单元格将这些数据集加载到数据框中：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">powerlifting_meets = pd.read_csv(<span class="string">&quot;datasets/openpowerlifting/v1/meets.csv&quot;</span>)</span><br><span class="line">powerlifting_competitors =  pd.read_csv(<span class="string">&quot;datasets/openpowerlifting/v1/openpowerlifting.csv&quot;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">powerlifting_competitors</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MeetID</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Equipment</th>
      <th>Age</th>
      <th>Division</th>
      <th>BodyweightKg</th>
      <th>WeightClassKg</th>
      <th>Squat4Kg</th>
      <th>BestSquatKg</th>
      <th>Bench4Kg</th>
      <th>BestBenchKg</th>
      <th>Deadlift4Kg</th>
      <th>BestDeadliftKg</th>
      <th>TotalKg</th>
      <th>Place</th>
      <th>Wilks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Angie Belk Terry</td>
      <td>F</td>
      <td>Wraps</td>
      <td>47.0</td>
      <td>Mst 45-49</td>
      <td>59.60</td>
      <td>60</td>
      <td>NaN</td>
      <td>47.63</td>
      <td>NaN</td>
      <td>20.41</td>
      <td>NaN</td>
      <td>70.31</td>
      <td>138.35</td>
      <td>1</td>
      <td>155.05</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Single-ply</td>
      <td>42.0</td>
      <td>Mst 40-44</td>
      <td>58.51</td>
      <td>60</td>
      <td>NaN</td>
      <td>142.88</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>163.29</td>
      <td>401.42</td>
      <td>1</td>
      <td>456.38</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Single-ply</td>
      <td>42.0</td>
      <td>Open Senior</td>
      <td>58.51</td>
      <td>60</td>
      <td>NaN</td>
      <td>142.88</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>163.29</td>
      <td>401.42</td>
      <td>1</td>
      <td>456.38</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Raw</td>
      <td>42.0</td>
      <td>Open Senior</td>
      <td>58.51</td>
      <td>60</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>1</td>
      <td>108.29</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>Destiny Dula</td>
      <td>F</td>
      <td>Raw</td>
      <td>18.0</td>
      <td>Teen 18-19</td>
      <td>63.68</td>
      <td>67.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>31.75</td>
      <td>NaN</td>
      <td>90.72</td>
      <td>122.47</td>
      <td>1</td>
      <td>130.47</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>386409</th>
      <td>8481</td>
      <td>William Barabas</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>NaN</td>
      <td>Elite</td>
      <td>113.58</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>347.50</td>
      <td>347.50</td>
      <td>2</td>
      <td>202.60</td>
    </tr>
    <tr>
      <th>386410</th>
      <td>8481</td>
      <td>Justin Zottl</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>NaN</td>
      <td>Elite</td>
      <td>119.02</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>322.50</td>
      <td>322.50</td>
      <td>3</td>
      <td>185.77</td>
    </tr>
    <tr>
      <th>386411</th>
      <td>8481</td>
      <td>Jake Anderson</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>NaN</td>
      <td>Elite</td>
      <td>120.29</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>367.50</td>
      <td>367.50</td>
      <td>1</td>
      <td>211.17</td>
    </tr>
    <tr>
      <th>386412</th>
      <td>8481</td>
      <td>Jeff Bumanglag</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>NaN</td>
      <td>Elite</td>
      <td>126.73</td>
      <td>140</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>320.00</td>
      <td>320.00</td>
      <td>3</td>
      <td>181.85</td>
    </tr>
    <tr>
      <th>386413</th>
      <td>8481</td>
      <td>Shane Hammock</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>NaN</td>
      <td>Elite</td>
      <td>129.46</td>
      <td>140</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>362.50</td>
      <td>362.50</td>
      <td>2</td>
      <td>205.18</td>
    </tr>
  </tbody>
</table>
<p>386414 rows × 17 columns</p>
</div>



<p>两个表都包含对 <code>MeetID</code> 的引用，MeetID 是数据库中包含的每次会议（竞赛）的唯一键。使用它，生成一个将两个表合并为一个的数据集。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">left = powerlifting_meets.set_index([<span class="string">&#x27;MeetID&#x27;</span>])</span><br><span class="line">right = powerlifting_competitors.set_index([<span class="string">&#x27;MeetID&#x27;</span>])</span><br><span class="line">left.join(right)</span><br><span class="line"><span class="comment"># powerlifting_meets.join(powerlifting_competitors)</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MeetPath</th>
      <th>Federation</th>
      <th>Date</th>
      <th>MeetCountry</th>
      <th>MeetState</th>
      <th>MeetTown</th>
      <th>MeetName</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Equipment</th>
      <th>...</th>
      <th>WeightClassKg</th>
      <th>Squat4Kg</th>
      <th>BestSquatKg</th>
      <th>Bench4Kg</th>
      <th>BestBenchKg</th>
      <th>Deadlift4Kg</th>
      <th>BestDeadliftKg</th>
      <th>TotalKg</th>
      <th>Place</th>
      <th>Wilks</th>
    </tr>
    <tr>
      <th>MeetID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>365strong/1601</td>
      <td>365Strong</td>
      <td>2016-10-29</td>
      <td>USA</td>
      <td>NC</td>
      <td>Charlotte</td>
      <td>2016 Junior &amp; Senior National Powerlifting Cha...</td>
      <td>Angie Belk Terry</td>
      <td>F</td>
      <td>Wraps</td>
      <td>...</td>
      <td>60</td>
      <td>NaN</td>
      <td>47.63</td>
      <td>NaN</td>
      <td>20.41</td>
      <td>NaN</td>
      <td>70.31</td>
      <td>138.35</td>
      <td>1</td>
      <td>155.05</td>
    </tr>
    <tr>
      <th>0</th>
      <td>365strong/1601</td>
      <td>365Strong</td>
      <td>2016-10-29</td>
      <td>USA</td>
      <td>NC</td>
      <td>Charlotte</td>
      <td>2016 Junior &amp; Senior National Powerlifting Cha...</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Single-ply</td>
      <td>...</td>
      <td>60</td>
      <td>NaN</td>
      <td>142.88</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>163.29</td>
      <td>401.42</td>
      <td>1</td>
      <td>456.38</td>
    </tr>
    <tr>
      <th>0</th>
      <td>365strong/1601</td>
      <td>365Strong</td>
      <td>2016-10-29</td>
      <td>USA</td>
      <td>NC</td>
      <td>Charlotte</td>
      <td>2016 Junior &amp; Senior National Powerlifting Cha...</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Single-ply</td>
      <td>...</td>
      <td>60</td>
      <td>NaN</td>
      <td>142.88</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>163.29</td>
      <td>401.42</td>
      <td>1</td>
      <td>456.38</td>
    </tr>
    <tr>
      <th>0</th>
      <td>365strong/1601</td>
      <td>365Strong</td>
      <td>2016-10-29</td>
      <td>USA</td>
      <td>NC</td>
      <td>Charlotte</td>
      <td>2016 Junior &amp; Senior National Powerlifting Cha...</td>
      <td>Dawn Bogart</td>
      <td>F</td>
      <td>Raw</td>
      <td>...</td>
      <td>60</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>95.25</td>
      <td>1</td>
      <td>108.29</td>
    </tr>
    <tr>
      <th>0</th>
      <td>365strong/1601</td>
      <td>365Strong</td>
      <td>2016-10-29</td>
      <td>USA</td>
      <td>NC</td>
      <td>Charlotte</td>
      <td>2016 Junior &amp; Senior National Powerlifting Cha...</td>
      <td>Destiny Dula</td>
      <td>F</td>
      <td>Raw</td>
      <td>...</td>
      <td>67.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>31.75</td>
      <td>NaN</td>
      <td>90.72</td>
      <td>122.47</td>
      <td>1</td>
      <td>130.47</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8481</th>
      <td>xpc/2017-finals</td>
      <td>XPC</td>
      <td>2017-03-03</td>
      <td>USA</td>
      <td>OH</td>
      <td>Columbus</td>
      <td>2017 XPC Finals</td>
      <td>William Barabas</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>...</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>347.50</td>
      <td>347.50</td>
      <td>2</td>
      <td>202.60</td>
    </tr>
    <tr>
      <th>8481</th>
      <td>xpc/2017-finals</td>
      <td>XPC</td>
      <td>2017-03-03</td>
      <td>USA</td>
      <td>OH</td>
      <td>Columbus</td>
      <td>2017 XPC Finals</td>
      <td>Justin Zottl</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>...</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>322.50</td>
      <td>322.50</td>
      <td>3</td>
      <td>185.77</td>
    </tr>
    <tr>
      <th>8481</th>
      <td>xpc/2017-finals</td>
      <td>XPC</td>
      <td>2017-03-03</td>
      <td>USA</td>
      <td>OH</td>
      <td>Columbus</td>
      <td>2017 XPC Finals</td>
      <td>Jake Anderson</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>...</td>
      <td>125</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>367.50</td>
      <td>367.50</td>
      <td>1</td>
      <td>211.17</td>
    </tr>
    <tr>
      <th>8481</th>
      <td>xpc/2017-finals</td>
      <td>XPC</td>
      <td>2017-03-03</td>
      <td>USA</td>
      <td>OH</td>
      <td>Columbus</td>
      <td>2017 XPC Finals</td>
      <td>Jeff Bumanglag</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>...</td>
      <td>140</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>320.00</td>
      <td>320.00</td>
      <td>3</td>
      <td>181.85</td>
    </tr>
    <tr>
      <th>8481</th>
      <td>xpc/2017-finals</td>
      <td>XPC</td>
      <td>2017-03-03</td>
      <td>USA</td>
      <td>OH</td>
      <td>Columbus</td>
      <td>2017 XPC Finals</td>
      <td>Shane Hammock</td>
      <td>M</td>
      <td>Multi-ply</td>
      <td>...</td>
      <td>140</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>362.50</td>
      <td>362.50</td>
      <td>2</td>
      <td>205.18</td>
    </tr>
  </tbody>
</table>
<p>386414 rows × 23 columns</p>
</div>



<h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1><p><img src="/./pic/%E5%AD%A6%E4%B9%A0pandas-%E4%BB%8Ekaggle%E4%B8%8A/55173134486000.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>test for vue</p>
<p>aaaaaaa</p>
<!-- <h1 id="app"></h1> -->

<!-- <div id="app"></div> -->

<div id="app">
  <h1></h1>
  <button v-on:click="changeMessage">Change Message</button>
</div>

<!-- <script>
  const { createApp, ref } = Vue

  createApp({
    setup() {
      const message = ref('Hello vue!')
      return {
        message
      }
    }
  }).mount('#app')

var kkkk ="aaaaaaaaaaa"
</script> -->

<h1>sssssss</h1>]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pandas</tag>
        <tag>kaggle</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列(五)</title>
    <url>/2020/03/10/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E4%BA%94/</url>
    <content><![CDATA[<p>关于动态sql</p>
<span id="more"></span>

<h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>按姓名和年龄查询</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qStuByNOrAWithSQLTag&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno ,stuname  from student where 1=1</span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuName!=null and stuName!= &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">		student有stuname属性且不为null</span><br><span class="line">		and stuname=#&#123;stuName&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuAge!=null and stuAge!=0&quot;</span>&gt;</span></span><br><span class="line">		student有stunage属性且不为null</span><br><span class="line">		and stuage=#&#123;stuAge&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里and会出问题</p>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p> where:处理第一个and</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qStuByNOrAWithSQLTag&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno ,stuname  from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuName!=null and stuName!= &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">		and stuname=#&#123;stuName&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuAge!=null and stuAge!=0&quot;</span>&gt;</span></span><br><span class="line">		and stuage=#&#123;stuAge&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p>查询学号为1 2 4的学生学号信息</p>
<p>迭代的类型：数组、对象数组、集合、属性</p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组固定写法：array 这是约定</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNoWitharray&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int[]&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;array!=null and array.length&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="放入对象的属性中"><a href="#放入对象的属性中" class="headerlink" title="放入对象的属性中"></a>放入对象的属性中</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNoInGra&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Grade&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;stuNos!=null and stuNos.size&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;stuNos&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNowithlist&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;top.eshyee.entity.Grade&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;list!=null and list.size&gt;0&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;stuNo&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="对象数组"><a href="#对象数组" class="headerlink" title="对象数组"></a>对象数组</h4><p>必须使用Object[]</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStuwithNowithObjArr&quot;</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Object[]&quot;</span>&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">		<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;objectArraStuno&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 如果sql片段不在一个文件 </span></span><br><span class="line"><span class="comment">		&lt;include refid=&quot;top.eshyee.mapper.StudentMapper.objectArraStuno&quot;&gt;&lt;/include&gt;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="sql片段"><a href="#sql片段" class="headerlink" title="sql片段"></a>sql片段</h4><p>重复使用的提取出来</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;objectArraStuno&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;array!=null and array.length&gt;0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and stuno in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;student&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">		#&#123;student.stuNo&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>动态sql</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis系列(六)</title>
    <url>/2020/03/19/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E5%85%AD/</url>
    <content><![CDATA[<h2 id="关联查询"><a href="#关联查询" class="headerlink" title="关联查询"></a>关联查询</h2><span id="more"></span>

<p>关于关联查询主要重点是配置好mapper</p>
<h3 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h3><p>a.业务扩展类</p>
<p>核心:用resultType指定的类的属性包含多表查询的所有字段</p>
<p>b. resultMap</p>
<p>通过属性成员将2个类建立起联系</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 利用业务扩展类实现一对一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithO2O&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.StudentBussiness&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select s.*,c.* from student s inner join studentcard c</span><br><span class="line">    on s.cardid =c.cardid</span><br><span class="line">    where s.stuno=#&#123;stuNo&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 利用resultmap实现一对一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qSByNWithMapO2O&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;student_card_map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select s.*,c.* from student s inner join studentcard c</span><br><span class="line">    on s.cardid =c.cardid</span><br><span class="line">    where s.stuno=#&#123;stuNo&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;student_card_map&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 一一映射用association，一对多用collection --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;card&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;StudentCard&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;cardId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;cardInfo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;cardInfo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="一对多-多对一"><a href="#一对多-多对一" class="headerlink" title="一对多(多对一)"></a>一对多(多对一)</h3><p>(MyBatis:多对一，多对多的本质就是一对多的变化)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询1班的班级信息 和所有学生的信息 建立一对多关系 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;qCAS&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;class_student_classid&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select c.*,s.* from student s</span><br><span class="line">    inner join studentclass c</span><br><span class="line">    on c.classid=s.classid</span><br><span class="line">    where c.classid=#&#123;classId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;top.eshyee.entity.StudentClass&quot;</span> <span class="attr">id</span>=<span class="string">&quot;class_student_classid&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;classId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;classId&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span> <span class="attr">column</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 属性类型用javatype 属性的元素类型用oftype --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;stuNo&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuNo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuAge&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuAge&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;graName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;graName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stuSex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stuSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3><p>多对多 可由两个多对一等方法实现！</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>关联查询</tag>
        <tag>一对多</tag>
        <tag>一对一</tag>
        <tag>多对多</tag>
      </tags>
  </entry>
  <entry>
    <title>pic</title>
    <url>/2023/05/09/pic/index/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>MyBatis系列(四)</title>
    <url>/2020/03/08/mybatis/MyBatis%E7%B3%BB%E5%88%97-%E5%9B%9B/</url>
    <content><![CDATA[<p>输入参数和输出参数</p>
<span id="more"></span>

<h3 id="输入参数parameterType"><a href="#输入参数parameterType" class="headerlink" title="输入参数parameterType"></a>输入参数parameterType</h3><h4 id="简单类型"><a href="#简单类型" class="headerlink" title="简单类型"></a>简单类型</h4><p><strong>${}#{}比较</strong></p>
<p>#{任意值}或者${value}(标识符只能是value)</p>
<p>#{}会自动给String加上’’(自动类型转换)</p>
<p>${}会原样输出，但是适合于动态排序(动态字段)</p>
<p>#{}可以防止sql注入</p>
<p>${}不可以</p>
<p><strong>${}#{}相同之处</strong></p>
<p>都可以获取对象的值，(嵌套类型对象)</p>
<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><p>#{属性名}或者${属性名}(对象的属性名例如stuNo)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentByAddress&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where homeaddress=#&#123;homeAddress&#125; or schooladdress=&#x27;$&#123;schoolAddress&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="嵌套类型输入参数为级联属性"><a href="#嵌套类型输入参数为级联属性" class="headerlink" title="嵌套类型输入参数为级联属性"></a>嵌套类型输入参数为级联属性</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentByAddress&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student where homeaddress=#&#123;address.homeAddress&#125; or schooladdress=&#x27;$&#123;address.schoolAddress&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNameOrAge&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where stuname like &#x27;%$&#123;stuName&#125;%&#x27; or stuage=#&#123;stuAge&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="传入为hashmap"><a href="#传入为hashmap" class="headerlink" title="传入为hashmap"></a>传入为hashmap</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentBystuNameOrAgewithHashmap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;top.eshyee.entity.Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage from student </span><br><span class="line">		where stuname like &#x27;%$&#123;stuName&#125;%&#x27; or stuage=#&#123;stuAge&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="调用存储过程"><a href="#调用存储过程" class="headerlink" title="调用存储过程"></a>调用存储过程</h3><p>存储过程的传入参数在mybatis中用map来传递(Hashmap)<br>CALLABLE设置sql 的调用方式是存储过程<br>输出参数通过map的get方法获取</p>
<h4 id="查询某个年级的所有学生总数"><a href="#查询某个年级的所有学生总数" class="headerlink" title="查询某个年级的所有学生总数"></a>查询某个年级的所有学生总数</h4><h5 id="数据库里"><a href="#数据库里" class="headerlink" title="数据库里"></a>数据库里</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> queryCountByGradeWithProcadure(gName <span class="keyword">in</span> <span class="type">varchar</span>,scount <span class="keyword">out</span> number )</span><br><span class="line">	<span class="keyword">as</span></span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">into</span> scount <span class="keyword">from</span> student <span class="keyword">where</span> graname<span class="operator">=</span>gname;</span><br><span class="line">	<span class="keyword">end</span>;</span><br><span class="line">	<span class="operator">/</span></span><br></pre></td></tr></table></figure>

<h5 id="mapper中"><a href="#mapper中" class="headerlink" title="mapper中"></a>mapper中</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryCountByGradeWithPrecadure&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">		&#123;CALL queryCountByGradeWithProcadure( </span><br><span class="line">		#&#123;gName,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">		#&#123;sCount,jdbcType=INTEGER,mode=OUT&#125; )&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="根据学号删除学生"><a href="#根据学号删除学生" class="headerlink" title="根据学号删除学生"></a>根据学号删除学生</h4><h5 id="数据库里-1"><a href="#数据库里-1" class="headerlink" title="数据库里"></a>数据库里</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> deleteStuBystunoWithProcedure(sno <span class="keyword">in</span> number)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> stuno<span class="operator">=</span>sno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure>

<h5 id="mapper中-1"><a href="#mapper中-1" class="headerlink" title="mapper中"></a>mapper中</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deletestuByStunoWithPrecadure&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">	&#123;CALL deleteStuBystunoWithProcedure(#&#123;sno,jdbcType=INTEGER,mode=IN&#125;)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

<h3 id="输出参数"><a href="#输出参数" class="headerlink" title="输出参数"></a>输出参数</h3><h4 id="resultType"><a href="#resultType" class="headerlink" title="resultType"></a>resultType</h4><p>简单类型，实体对象类型，实体对象类型的集合之前有提到过，此处不再赘述。</p>
<h5 id="输出为HashMap"><a href="#输出为HashMap" class="headerlink" title="输出为HashMap"></a>输出为HashMap</h5><p>通过别名作为map的key</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryStudentWithHash&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;HashMap&quot;</span>&gt;</span></span><br><span class="line">	select stuno &quot;no&quot;,stuname &quot;name&quot; from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h4><p>解决实体类型属性与数据表字段名不一致（前面有用到）</p>
<p>也可以使用HashMap+resultType</p>
]]></content>
      <categories>
        <category>技术</category>
        <category>MyBatis系列</category>
      </categories>
      <tags>
        <tag>存储过程</tag>
        <tag>parameterType</tag>
        <tag>resultType</tag>
      </tags>
  </entry>
  <entry>
    <title>Deep learning via CNN for identification of blue core phenomenon in helicon plasma discharge</title>
    <url>/2025/02/12/Deep%20learning%20via%20CNN%20for%20identification%20of%20blue%20core%20phenomenon%20in%20helicon%20plasma%20discharge/</url>
    <content><![CDATA[<h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>Based on deep learning image recognition techniques, a Convolutional Neural Network (CNN) model for discharge modes recognition of helicon plasma was trained. The accuracy of the model was evaluated using functions such as F1-score and confusion matrix. The final recognition accuracy was more than 98.18% after 30 iterations. Interpretable analysis was done using methods such as Gradient-weighted Class Activation Mapping (Grad-CAM) to verify the model’s robustness as well as repeatability. The model identification results were compared with Langmuir probe diagnostic results. It was found a good fit between the model and the probe results, corroborating the correctness of the model. The present model can well identify the critical power of entering W mode in the discharge process of helicon plasma. As the discharge database expands, it has great potential for recognizing the higher-order discharge modes based on the deep learning.</p>
<p><strong>Keywords</strong>: helicon plasma, mode transition, deep learning, Convolutional Neural Network (CNN),image recognition</p>
<h2 id="I-INTRODUCTION"><a href="#I-INTRODUCTION" class="headerlink" title="I.INTRODUCTION"></a>I.INTRODUCTION</h2><p>Helicon plasma has great application prospects in the fields of astronautics propulsion, magnetic confinement fusion, and material surface treatment due to its high plasma density of up to 1020 m-3 under the conditions of low gas pressure (0.01-10 Pa) and low magnetic field (&lt;1000 G). Helicon plasma is generated by the energy deposition of radio frequency (RF) power source through antenna coupling with an external magnetic field. Mode transition is one of the most interesting features of helicon plasma. Three different discharge modes, capacitive (E), inductive (H), and helicon (W) modes can be identified among the helicon plasma discharge process. After the plasma enters the W mode discharge, the discharge center shows a bright blue color, a phenomenon known as blue-core, which is another important feature of helicon plasma discharge. Zhang and Cui et al.4, 5 found that blue-core generally appeared in helicon modes with strong magnetic field and high plasma density, accompanied by an exponential increase in the ion line strengths, the electron density and its temperature, ion density and its temperature, and line emission intensities showed radial distributions with central peaks in the blue-core mode. Wang et al. explored the effect of inhomogeneous magnetic field as well as neutral gas pressure on the blue-core phenomenon in helicon plasma. Lu et al. excited the blue-core phenomenon using a magnetic field of 2000 G and a Nagoya III antenna to explore the effect of a magnetic field configuration with a zero magnetic point on the plasma parameters. Xia et al. designed dual magnets, placed at both ends of the antenna, and excited blue-core phenomena at lower power(~200 W).</p>
<p>The identification approach for the mode transition in the helicon plasma is mainly based on the RF-compensated Langmuir probes to eliminate interference from RF signals10, 11. The high temperature of helicon plasma can damage the probe, making it more difficult to measure plasma parameters at high power. Another commonly used diagnostic method to identify the mode transition in helicon plasma is non-invasive optical emission spectroscopy (OES)12. However, it may be invalid for the spatial-resolved diagnosis due to the spectra recorded from a large bulk of<br>plasma13. The integrated capacitively coupled detector (ICCD) is also occasionally used to diagnose the state of helicon plasma discharge14. However, it is often a qualitative description and comparison. It can be seen that the experimental approaches are often limited by the experimental conditions, the measurable range, the accuracy of the obtained data, and some experimental results cannot be quantitatively analyzed.</p>
<p>With the development of artificial intelligence, there are more and more researches on  analyzing physical phenomena of plasma discharge through machine learning. Deep learning is a branch of machine learning based on Deep Neural Networks (DNNs), meaning neural networks with at the very least 3 or 4 layers. Wang et al.15 proposed a DNN with multiple hidden layers as an example to replace the fluid model to accurately describe the essential discharge features of  CO2 pulsed discharge under Martian conditions. They found the constructed DNN can achieve a  satisfied prediction performance. Compared to the fluid model, the DNN takes only a few seconds  to predict the discharge characteristics and profiles of the electric field, particle density, and the  spatial–temporal distribution of the given products in CO2 plasmas. Kates-Harbeck et al.16 present  a deep learning-based method for predicting outages in magnetically confined Tokamak reactors,which opens up the possibility of moving from passive outage prediction to active reactor control and optimization. Cheng et al.17 compared the accuracy and speed of traditional machine learning and deep learning in predicting energy deposition in helicon plasma, and found that DNNs showed  better stability in response to changing conditions compared to traditional algorithms. </p>
<p>Convolutional Neural Network (CNN) is one of the most popular neural network  architectures18. The first report of CNN came in 1989 when Lecun et al. used a backpropagation  network to recognize handwritten digits19. CNNs, designed to process data in the form of multiple  arrays, have been successfully applied for detection, segmentation and recognition of objects and  regions in images. Image recognition techniques have been successfully applied in a number of  fields20. James et al.21, 22 used image recognition techniques to predict the two-dimension (2D) appearance of a silicon sample surface directly during ablation by a single-pulse femtosecond laser. Matos et al.23 used a DNN to produce a full, pixel-by-pixel reconstruction of the plasma profile.  The network could provide accurate reconstructions with an average pixel error as low as 2%.  Kim et al.24 used machine learning technique to classify discharge states of Tokamak based on raw  edge reflectometer data in real-time. The trained CNN models achieved a classification accuracy  of up to 99%. However, to the best of our knowledge, there has been no report on the application  of CNNs for the identification of mode transition and blue core phenomenon in helicon plasma  discharge. </p>
<p>In this paper, deep learning based on CNNs will be used to classify the images captured by  camera in order to find the critical point where the blue core phenomenon occurs in helicon  plasma discharge process. This paper is structured as follows: Section I provides a brief history of  helicon plasma discharge and deep learning. In Section II, we will describe the helicon plasma discharge system and CNNs model used in the paper. Section III discusses the model performance. Finally, Section IV proposes a conclusion on this work. </p>
<h2 id="II-EXPERIMENTAL-SYSTEM-AND-SIMULATION-MODEL"><a href="#II-EXPERIMENTAL-SYSTEM-AND-SIMULATION-MODEL" class="headerlink" title="II. EXPERIMENTAL SYSTEM AND SIMULATION MODEL"></a>II. EXPERIMENTAL SYSTEM AND SIMULATION MODEL</h2><h3 id="A-Helicon-plasma-apparatus"><a href="#A-Helicon-plasma-apparatus" class="headerlink" title="A. Helicon plasma apparatus"></a>A. Helicon plasma apparatus</h3><p>The experimental setup is shown in Fig. 1, where the plasma was generated in a cylindrical  quartz tube of 3 cm in diameter and 45 cm in length, with a water-cooled RF antenna mounted  outside the quartz tube. One end of the discharge tube was sealed by a stainless steel plate, and the  other end was connected to a stainless steel expansion chamber with a diameter of 10 cm and a  length of 14 cm. The discharge tube was surrounded by a water-cooled Nagoya Ⅲ antenna and  connected to an RF generator (13.56 MHz, 0-2000 W, RSG-2000 Rishiger Electronic Technology  Inc.). In order to keep the reflected power below 1% of the input power, an auto-matching  L-shaped network was placed between the Nagoya Ⅲ antenna and the RF generator. The  discharge tube was located in an inhomogeneous field induced by a collection of four annular  neodymium-iron-boron (NdFeB) permanent magnets with an inner diameter of 4.8 cm, an outer  diameter of 9 cm, and a thickness of 1 cm, as well as four insulating plates of the same size. The  vacuum inside the chamber consists of a turbomolecular and mechanical pump, and argon gas was  continuously supplied to the chamber from the upper end of the discharge tube. </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig1.png" alt="FIG. 1. Schematic diagram of helicon plasma apparatus."></p>
<p>This experiment was conducted at the power scale of 0-1010W. The working gas pressure  was fixed at 0.36 Pa. The magnetic field strength was lower than 300 G. NikonD90 camera was  placed in front of the discharge equipment at 0.5 m, horizontally aligned with the discharge tube,  the focal length was selected as 105 mm. The aperture, shutter speed and International  Organization for Standardization (ISO) of camera were set to f&#x2F;4, 1&#x2F;20s, and 3200, respectively.  </p>
<h3 id="B-Convolutional-Neural-Network-model"><a href="#B-Convolutional-Neural-Network-model" class="headerlink" title="B. Convolutional Neural Network model"></a>B. Convolutional Neural Network model</h3><p>Because of the limited ability to capture images of helicon plasma discharges in this  experiment, the data obtained was trained through transfer learning, which is used to improve a  learner in a domain by transferring information from related domains25. The ResNet-18 model was  used to initialize the training model, and on the basis of which transfer learning was carried out in  order to obtain a model that was suitable for this research. ResNet-18 is a deep residual network  proposed by Microsoft Research to solve the problem of gradient vanishing and gradient  explosion during deep neural network training. It is a smaller model in the ResNet family with 18  layers of depth. The input data was first passed through a convolutional layer, a pooling layer and  a ReLU (Rectified Linear Unit) layer, then through four 3*3 convolutional layers, the output to an  average pooling layer, and most of all a linear layer was used to transform the output.   </p>
<p>Figure 2 shows the structure of the BasicBlock module in a ResNet network architecture. The  BasicBlock is the basic unit of residual block in ResNet, which consists of two convolutional  layers and a group of residual connection, i.e., Conv2d, BatchNorm2d, and ReLU. Conv2d is a 2D  convolutional layer used to extract spatial features from the input feature maps. There are two  Conv2d layers in a BasicBlock, each of which performs convolutional operations using a 3x3  convolutional kernel. BatchNorm2d is a batch normalization layer used to normalize the output  after convolution. This speeds up the convergence of the network and stabilizes the training  process. ReLU is the activation function layer that passes the output values through the nonlinear  function ReLU to increase the nonlinear capability of the network. A Sequential module will be  included in some BasicBlocks to adjust the shape of the inputs to match the dimensions of the  subsequent operations (e.g., when the number of channels in the inputs and outputs are different or  when the resolution of the feature map changes). This Sequential module will usually contain a  convolutional layer and a batch normalization layer. This method is the residual connections,  which serve to directly skip from the input to the output so that the gradient of the network can be  propagated more directly. This effectively mitigates the problem of vanishing gradients that occurs  in deep neural networks. The BasicBlock in the first and second columns of the Fig. 2 both  contain Sequential modules, which means that in these residual blocks, the number of channels in  the input needs to be changed (e.g., increased from fewer to more channels.). The Sequential  module contains a convolutional layer and a batch normalization layer to achieve this. The two  BasicBlocks in the third and fourth columns do not have a Sequential module, indicating that the  number of channels in the input is the same as the number of channels in the output. The residual  connection can be used to directly add the input and the convolved output. The design of these BasicBlock modules allows the network to be trained more efficiently while increasing its depth.  With the introduction of residual connections, the network can better convey gradient information  and reduce training difficulties, thus improving the performance of deep learning models.  </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig2.png" alt="FIG. 2. BasicBlock module in ResNet network architecture."></p>
<h3 id="C-Methods-of-outcome-evaluation-and-interpretable-analyses"><a href="#C-Methods-of-outcome-evaluation-and-interpretable-analyses" class="headerlink" title="C. Methods of outcome evaluation and interpretable analyses"></a>C. Methods of outcome evaluation and interpretable analyses</h3><p>The cross-entropy loss function was used to prevent model overfitting26 and evaluate the  performance of trained model27 by calculating the loss value between true label and predicted  label. The cross-entropy loss function usually indicates how well the model fits the training data  with the current parameters. The loss value calculated by the loss function can be used as the  gradient information in the back-propagation algorithm to update the model parameters using  optimization algorithms such as gradient descent, enabling the model to be continuously  optimized to better fit the training data and improve model performance. In the model training  process, the cross-entropy loss function adjusts the parameters of the model by minimizing the  loss value, making the model’s prediction results closer to the real label. When the model’s predictions are exactly in line with the real label, the cross-entropy loss reaches a minimum of 0.  Overall, the loss function serves to provide feedback optimization signals, guide the adjustment of  model parameters, and evaluate the model performance. It is a key component in the model  training and optimization process. The cross-entropy loss function (L) used in this experiment is: </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f1.png" alt="(1)"></p>
<p>where 𝑁 denotes the number of samples, 𝐶 denotes the number of categories, and 𝑦𝑖,𝑐 are the  true labels of sample 𝑖.</p>
<p>Accuracy, Precision and Recall are metrics used to evaluate machine learning algorithms for understanding the performance of classification models28 . Accuracy is the ratio of total correct  samples to the total samples. Accuracy can be calculated as:   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f2.png" alt="(2)"></p>
<p>where TP (True Positives) denotes the model correctly predicted a positive outcome, i.e., a case  where the true value of the data is a positive case and the predicted value is also a positive case.  TN (True Negatives) is a negative case that was correctly predicted as a negative case. FP (False  Positive) is a positive case that was incorrectly predicted, i.e., a case where the true value of this  data is a negative case, but was incorrectly predicted as a positive case. FN (False Negatives) is a  positive case that was incorrectly predicted as a negative case.</p>
<p>Precision is a measure of how accurate a model’s positive predictions are. It is defined as the  ratio of correctly classified positive samples to a total number of classified positive samples (either  correctly or incorrectly). Precision can be calculated as:   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f3.png" alt="(3)"></p>
<p>Recall measures the ability of the model to correctly identify all true positive examples, i.e., the probability that the identification is true in a positive sample. A high Recall means that the  model is better able to cover all true positive examples and avoid missing important samples. Recall can be calculated as:    </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f4.png" alt="(4)"></p>
<p>A good model needs to strike the right balance between Precision and Recall29 . F1-score (F1)  takes into account the Precision and Recall of the classification model, and provides a more  comprehensive assessment of the model’s performance between positive and negative categories30 .  For imbalanced datasets, the use of Recall alone may cause bias when evaluating model  performance, while F1-score can more accurately evaluate the overall model performance. F1-score can be calculated as:   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f5.png" alt="(5)"></p>
<p>The confusion matrix was used to visualize the classification of the model on different  categories and then calculate various evaluation metrics31 .The interpretability of the model was analyzed using the Gradient-weighted Class Activation Mapping (Grad-CAM) method32, which  will be introduced in the next part.   </p>
<h2 id="III-RESULTS-AND-DISCUSSION"><a href="#III-RESULTS-AND-DISCUSSION" class="headerlink" title="III. RESULTS AND DISCUSSION"></a>III. RESULTS AND DISCUSSION</h2><h3 id="A-Image-acquisition-results"><a href="#A-Image-acquisition-results" class="headerlink" title="A. Image acquisition results"></a>A. Image acquisition results</h3><p>A total of 828 images were captured for this experiment, in which 218 images were labeled  as H mode and 610 images were labeled as W mode. These images were divided into a training set  and a validation set. In addition to interesting region, images taken directly from discharge  experiment often include background shielding grid around the discharge tube used to minimize  RF interference. It is necessary to crop the image to retain the key region of interest. Two typical cropped images are shown in Fig. 3. Figure 3(a) and 3(b) are labeled as discharge image in H mode and W mode, respectively. The cropped image is no longer affected by the RF shielding grid. The CNN model can better focus on the discharge tube itself, increasing its interpretability and  accuracy. Normally, cropped images need to be rotated and normalized before being put into  model for training20. The image pre-processing can increase the randomness of the images,  improve feature extraction by eliminating irrelevant information from the image and enhance the  detectability of relevant information.  </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig3.png" alt="FIG. 3. Two typical captured discharge image after cropping: H mode (a) and W mode (b)."></p>
<h3 id="B-Accuracy-assessment"><a href="#B-Accuracy-assessment" class="headerlink" title="B. Accuracy assessment"></a>B. Accuracy assessment</h3><p>This experiment only adopts the architecture of ResNet-18 model, but does not load its  pre-trained weight parameters. This experiment was designed with 30 epochs of iterations, taking  into account the cross-entropy loss function, Recall and other metrics to fully assess the accuracy  and generalization ability of the model. Figure 4 shows the evaluation results of several functions  in detail. As can be seen by pulling the log, the model quickly finds the optimal gradient. In the  first 10 batch the cross-entropy loss function has already converged to less than 0.5, as shown in Fig. 4(a). After the third epoch of training, the cross-entropy loss function has dropped to a low  order of magnitude, as shown in Fig. 4(b), and eventually keeps approaching the 0. The accuracy  is more than 90% and tends to grow steadily, as shown in Fig. 4(c). These are attributed to the  good performance of the ResNet-18 architecture in finding the optimal gradient. Figure 4(d)  illustrates several other assessment indicators, Accuracy, Precision, Recall and F1-score, tend to  stabilize after the sixth epoch and keep approaching 98%. After 30 epochs of iterative training, the  optimal model is obtained with an accuracy of 98.18%.  </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig4.png" alt="FIG. 4. Evaluation metrics for the model: (a) training set cross-entropy loss function, (b) test set  cross-entropy loss function, (c) training set accuracy, (d) test set multiple evaluation functions."></p>
<p>The confusion matrix can be used to visualize the classification of the model on different  categories and then calculate various evaluation metrics31. Precision-Recall (PR) curve shows the  relationship between Precision and Recall of the model at different thresholds33 . The PR curve mainly evaluates the performance of a model when facing different datasets. It focuses on the TP  and is sensitive to the sample proportion, so it can show the effect of the classifier with the change  of sample proportion. The ability of a classifier to classify an imbalanced dataset can be measured  based on the results exhibited by the PR curve34, which can be used for model improvement and  optimization. In this work, W mode has far more images than H mode, so the PR curve can give a  clearer picture of the model’s performance on the minority class. The Receiver Operator  Characteristic (ROC) curve shows the relationship between True Positive Rate (TPR, also known  as Recall) and False Positive Rate (FPR) of the model at different thresholds35 . It is mainly used  when the distribution of samples in the test datasets is relatively balanced. The ROC curve keeps basically unchanged when the distribution of positive and negative samples in the test datasets  changes. The stability of ROC curve in the face of imbalanced datasets suggests that it can present  an overly optimistic performance of a model itself. However, this insensitive nature makes it  difficult to see how a model predicts when faced with a sample change in the imbalanced datasets.  In other words, the PR curve is more informative than the ROC curve when evaluating binary  classifiers on imbalanced datasets28 .  </p>
<p>Figure 5(a) and 5(b) show the PR curve and ROC curve of the model, respectively. The PR  curve of this model is concentrated in the upper right corner of the graph and the ROC curve is  concentrated in the upper left corner of the graph, which indicates that this model has excellent  accuracy. The Area Under the Curve (AUC) measures the overall performance of the binary  classification model. It will always lies between 0 and 1 due to the Precision and Recall in PR  curve or TPR and FPR in ROC curve range between 0 to 1. A greater value of AUC denotes better  model performance. It has been calculated that the area under the PR curve (PR-AUC) is greater than 0.98 for both classifications, and the area under ROC curve (ROC-AUC) is greater than 0.99. It represents the probability with which our model can distinguish between the two discharge  modes.   </p>
<p>Figure 5(c) shows the confusion matrix for the binary classification of H mode as positive  class and W mode as negative class. A total number of 165 images have been contained in the test  dataset, as shown in the sum of the numbers in all the boxes. It can be seen from the first column  that the total images in the H mode are 45. Similarly, the second column gives us the numbers of  images in the W mode are 122. The correct classifications are the diagonal elements of the matrix,  e.g., 42 for the H mode and 120 for the W mode. It means a total of 162 images were correctly  predicted out of the total 165 images. Thus, the overall accuracy is 98.18%. Out of the 165 images  in the test dataset, only 3 images were classified incorrectly, 1 image of which was originally in H mode discharge, as shown in Fig. 5(d), which was taken at 180 W and was classified as W mode.  In addition, the next 2 images, which were originally in W mode discharge, were recognized as H mode. The quantitative evaluation metrics, Accuracy, Precision, Recall and F1-score, can be  calculated using these four different numbers from this binary class confusion matrix, as  illustrated in the Table 1. The Precision, Recall and F1-scores are 97.67%, 95.45%, and 96.37%  for H mode as positive class, respectively. When W mode is used as the positive class, the  corresponding metrics are 99.17%, 98.36%, and 98.99%, respectively. These metrics show that the  model performs well for both H mode and W mode, and that the model performs better when it  recognizes W mode.   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig5.png" alt="FIG. 5. Assessment of the model&#39;s performance: (a) PR curve, (b) ROC curve, (c) Confusion matrix, (d)  The image that was originally in H mode discharge but was misclassified as W mode by the model."></p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/t1.png" alt="TAB. 1 Metrics of Accuracy, Precision, Recall and F1-scores for evaluating the model performance."></p>
<h3 id="C-Interpretability-analysis"><a href="#C-Interpretability-analysis" class="headerlink" title="C. Interpretability analysis"></a>C. Interpretability analysis</h3><p>Interpretability analysis reveals areas of discharge that the network model focuses more on in  distinguishing mode transitions, which can be used as a guide for experimental diagnosis.  Selvaraju et al.32 have proposed a technique, Gradient-weighted Class Activation Mapping (Grad-CAM), to provide a “visual interpretation” of the decisions of a large number of CNN based  models, where a linear neuron importance weights combination of forward activation maps is  followed by a ReLU layer to compute the convolutional layer (𝐿 𝑐 ) of a given image through the  saliency map:   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/f6.png" alt="(6)"></p>
<p>where 𝑤𝑘 𝑐 is the neuron importance weights of feature map 𝑘, 𝐴 𝑘 is the feature activation map  𝑘. In this algorithm, an image and a category of interest (e.g., image of W mode discharge in this  work) as input, which is propagated forward through the CNN part of the model to obtain a  gradient score y for the category. Setting the score for desired category to 1 and the others to 0.  This signal is then global-average-pooled and combined with a ReLU to obtain the coarse  Grad-CAM heat map that highlights important regions of the predicted concepts in the image32 .  Grad-CAM++ can be understood as an upgraded version of Grad-CAM, which adds an extra  weight to the elements of the gradient map relative to Grad-CAM, making the localization more  accurate and suitable for multi-target detection36. Therefore Grad-CAM++ was preferred at the  beginning of this experiment to analyze the interpretability of the images to be recognized. It can  be seen from the heat map showed in Fig. 6(a), similar to the direct observation of helicon plasma  discharge images by the human eye, the computer also focus on the central region of the discharge  images. According to the radial plasma density results reported in our previous work6 , the  discharge in the central region will be stronger and accompanied by the appearance of a blue core.  The present model also demonstrates the discharge state of the helicon plasma through this  phenomenon.   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig6.png" alt="FIG. 6. Visualization of features: Grad-CAM++ heat map (a) and Guided Grad-CAM heat map (b)."></p>
<p>However, the Grad-CAM family lacks the ability to demonstrate fine-grained significance  like the pixel-space gradient visualization method. The result of Guided Backpropagation33 was  combined to Grad-CAM heat map by means of dot-multiplication to realize a high-resolution  class-discriminative visualization. This technology is also referred to as Guided Grad-CAM32, the  heat map drawn by this technique is shown in Fig. 6(b). It shows that the region where the  computer quantitatively identifies the W mode is shown at a finer granularity by fitting the region  of the original image. It can provide a guiding direction for the future discharge diagnostics of  helicon plasma such as the placement of the OES fiber. </p>
<p>To further verify the effect of confusion on the stability of the recognition system, captum, an  model interpretability and understanding library37 , has been used to design sliders of different  sizes to mask the recognized image for the aim of testing which areas masked have the greatest  effect on the system’s ability to recognize the discharge state. Three different sizes of sliders, large,  medium and small, were designed. The results of the experiment are shown in Fig. 7. The effect of  the large slider masking on the system is most consistent with the results observed by the human eye, with the area of effect centered on the upper part of the discharge tube, the main area where  the blue core is generated, as shown in the Fig. 7(b). By observing Fig. 7(c), the most affected  place is located at the end of the blue core, so the exploration of the axial length of the blue core  becomes a feasible direction. And Fig. 7(d) mainly demonstrates the effect of pixel points near the  antenna on the recognition of the discharged pictures. This set of experiments not only confirms  the robustness of the model but also provides a reasonable direction for future research. </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig7.png" alt="FIG.7. Schematic diagram of occlusion interpretability analysis, which includes the original image  (a), large slider (b), medium slider (c), and small slider (d)."></p>
<h3 id="D-Comparison-of-training-results-with-Langmuir-probe-results"><a href="#D-Comparison-of-training-results-with-Langmuir-probe-results" class="headerlink" title="D. Comparison of training results with Langmuir probe results"></a>D. Comparison of training results with Langmuir probe results</h3><p>After completing training the model, a recognition system has been built, which can identify  the W mode discharge with blue core phenomena in helicon plasma in real time. The specific  flowchart is shown in Fig. 8. This system consists of a camera that acquires discharge images of  helicon plasma in real time with an acquisition frame rate of 25 fps. The system calls the camera  to capture real-time images through the OpenCV plug-in. The ith frame is passed into the system  for pre-processing such as resizing, normalization and denoising and then into the recognition  model. The model prints the judgement result on the ith frame and outputs it on the screen in real time. Two typical Real-time screen output from the identification system are shown in Fig. 9,  which contains the identified discharge modes as well as the probabilities, respectively. It can be  seen that the discharge mode is H mode with the probability of 95.32% in Fig. 9(a) and W mode  with the probability of 81.33% in Fig. 9(b).   </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig8.png" alt="FIG. 8. Flowchart of real-time recognition system for helicon plasma discharge."></p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig9.png" alt="FIG. 9. Real-time screen output from the identification system: H mode with the probability of 95.32%  (a) and W mode with the probability of 81.33% (b)."></p>
<p>The results obtained by the recognition model were compared with the ones given by Langmuir probe technique at the same RF power in our previous work38, as shown in Fig. 10,  where the black squares and solid line is the plasma density curve following the applied powers  and the black spheres and solid line is the mode curve recognized by the picture identification  system. At the power of around 200 W, the density of helicon plasma discharge detected by the  probe undergoes a sharp increase, i.e., it jumps from the H mode to the W mode. At the same time,  a blue-core phenomenon occurs monitored by the real-time identification system at ~200 W,  which confirms the good stability and repeatability of the identification system based on deep  learning model. The recognition system can identify the discharge mode in real time, faster than  the experimental prober diagnostic methods. At the same time, it is a non-invasive method. It can  determine the discharge mode of helicon plasma without disturbance. It is accurate enough to be  used to determine the W mode if the helicon plasma discharge with blue core phenomenon.  </p>
<p><img src="/./pic/Deep-learning-via-CNN-for-identification-of-blue-core-phenomenon-in-helicon-plasma-discharge/fig9.png" alt="FIG. 10. Comparison of deep learning results with Langmuir probe results."></p>
<h2 id="IV-CONCLUSION"><a href="#IV-CONCLUSION" class="headerlink" title="IV. CONCLUSION"></a>IV. CONCLUSION</h2><p>In this paper, a novel deep learning method for identification the mode transition in helicon  plasma discharge is presented. The method is based on convolutional neural network and residual  neural network with 18 layers depth. The plasma discharge images are simply cropped and fed  into the network. The accuracy of the constructed deep learning model can up to 98.18%. Furthermore, the Grad-CAM algorithm is used to give a heat map of the computer-recognized  discharge image, which confirms the reasonableness of the model and also gives the direction for  experimental diagnosis. Based on the deep learning model, the discharge modes with the  probabilities of helicon plasma are recognized by the real-time identification system, which has  good stability and repeatability compared with the experimental results. The real-time  identification system can be improved by enriching the experimental image data for mode  transition recognition of helicon plasma under complex conditions in the future.  </p>
]]></content>
      <categories>
        <category>文献</category>
      </categories>
      <tags>
        <tag>文献</tag>
        <tag>helicon</tag>
        <tag>Deep learning</tag>
      </tags>
  </entry>
</search>
